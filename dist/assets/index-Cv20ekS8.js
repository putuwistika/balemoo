function f6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Vf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mm={exports:{}},Pl={},gm={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function h6(){if(Uv)return Ue;Uv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=h&&D[h]||D["@@iterator"],typeof D=="function"?D:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function v(D,W,X){this.props=D,this.context=W,this.refs=w,this.updater=X||y}v.prototype.isReactComponent={},v.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},v.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=v.prototype;function T(D,W,X){this.props=D,this.context=W,this.refs=w,this.updater=X||y}var k=T.prototype=new j;k.constructor=T,b(k,v.prototype),k.isPureReactComponent=!0;var _=Array.isArray,N=Object.prototype.hasOwnProperty,E={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(D,W,X){var ne,G={},Q=null,se=null;if(W!=null)for(ne in W.ref!==void 0&&(se=W.ref),W.key!==void 0&&(Q=""+W.key),W)N.call(W,ne)&&!R.hasOwnProperty(ne)&&(G[ne]=W[ne]);var q=arguments.length-2;if(q===1)G.children=X;else if(1<q){for(var ee=Array(q),ie=0;ie<q;ie++)ee[ie]=arguments[ie+2];G.children=ee}if(D&&D.defaultProps)for(ne in q=D.defaultProps,q)G[ne]===void 0&&(G[ne]=q[ne]);return{$$typeof:e,type:D,key:Q,ref:se,props:G,_owner:E.current}}function P(D,W){return{$$typeof:e,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function z(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function L(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(X){return W[X]})}var B=/\/+/g;function K(D,W){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):W.toString(36)}function V(D,W,X,ne,G){var Q=typeof D;(Q==="undefined"||Q==="boolean")&&(D=null);var se=!1;if(D===null)se=!0;else switch(Q){case"string":case"number":se=!0;break;case"object":switch(D.$$typeof){case e:case t:se=!0}}if(se)return se=D,G=G(se),D=ne===""?"."+K(se,0):ne,_(G)?(X="",D!=null&&(X=D.replace(B,"$&/")+"/"),V(G,W,X,"",function(ie){return ie})):G!=null&&(z(G)&&(G=P(G,X+(!G.key||se&&se.key===G.key?"":(""+G.key).replace(B,"$&/")+"/")+D)),W.push(G)),1;if(se=0,ne=ne===""?".":ne+":",_(D))for(var q=0;q<D.length;q++){Q=D[q];var ee=ne+K(Q,q);se+=V(Q,W,X,ee,G)}else if(ee=g(D),typeof ee=="function")for(D=ee.call(D),q=0;!(Q=D.next()).done;)Q=Q.value,ee=ne+K(Q,q++),se+=V(Q,W,X,ee,G);else if(Q==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return se}function J(D,W,X){if(D==null)return D;var ne=[],G=0;return V(D,ne,"","",function(Q){return W.call(X,Q,G++)}),ne}function $(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(X){(D._status===0||D._status===-1)&&(D._status=1,D._result=X)},function(X){(D._status===0||D._status===-1)&&(D._status=2,D._result=X)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var H={current:null},M={transition:null},U={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};function F(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:J,forEach:function(D,W,X){J(D,function(){W.apply(this,arguments)},X)},count:function(D){var W=0;return J(D,function(){W++}),W},toArray:function(D){return J(D,function(W){return W})||[]},only:function(D){if(!z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ue.Component=v,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=T,Ue.StrictMode=r,Ue.Suspense=d,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Ue.act=F,Ue.cloneElement=function(D,W,X){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ne=b({},D.props),G=D.key,Q=D.ref,se=D._owner;if(W!=null){if(W.ref!==void 0&&(Q=W.ref,se=E.current),W.key!==void 0&&(G=""+W.key),D.type&&D.type.defaultProps)var q=D.type.defaultProps;for(ee in W)N.call(W,ee)&&!R.hasOwnProperty(ee)&&(ne[ee]=W[ee]===void 0&&q!==void 0?q[ee]:W[ee])}var ee=arguments.length-2;if(ee===1)ne.children=X;else if(1<ee){q=Array(ee);for(var ie=0;ie<ee;ie++)q[ie]=arguments[ie+2];ne.children=q}return{$$typeof:e,type:D.type,key:G,ref:Q,props:ne,_owner:se}},Ue.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:o,_context:D},D.Consumer=D},Ue.createElement=A,Ue.createFactory=function(D){var W=A.bind(null,D);return W.type=D,W},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(D){return{$$typeof:u,render:D}},Ue.isValidElement=z,Ue.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:$}},Ue.memo=function(D,W){return{$$typeof:f,type:D,compare:W===void 0?null:W}},Ue.startTransition=function(D){var W=M.transition;M.transition={};try{D()}finally{M.transition=W}},Ue.unstable_act=F,Ue.useCallback=function(D,W){return H.current.useCallback(D,W)},Ue.useContext=function(D){return H.current.useContext(D)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(D){return H.current.useDeferredValue(D)},Ue.useEffect=function(D,W){return H.current.useEffect(D,W)},Ue.useId=function(){return H.current.useId()},Ue.useImperativeHandle=function(D,W,X){return H.current.useImperativeHandle(D,W,X)},Ue.useInsertionEffect=function(D,W){return H.current.useInsertionEffect(D,W)},Ue.useLayoutEffect=function(D,W){return H.current.useLayoutEffect(D,W)},Ue.useMemo=function(D,W){return H.current.useMemo(D,W)},Ue.useReducer=function(D,W,X){return H.current.useReducer(D,W,X)},Ue.useRef=function(D){return H.current.useRef(D)},Ue.useState=function(D){return H.current.useState(D)},Ue.useSyncExternalStore=function(D,W,X){return H.current.useSyncExternalStore(D,W,X)},Ue.useTransition=function(){return H.current.useTransition()},Ue.version="18.3.1",Ue}var Hv;function Ic(){return Hv||(Hv=1,gm.exports=h6()),gm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function p6(){if(qv)return Pl;qv=1;var e=Ic(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var p,h={},g=null,y=null;f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(y=d.ref);for(p in d)r.call(d,p)&&!o.hasOwnProperty(p)&&(h[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)h[p]===void 0&&(h[p]=d[p]);return{$$typeof:t,type:u,key:g,ref:y,props:h,_owner:s.current}}return Pl.Fragment=n,Pl.jsx=l,Pl.jsxs=l,Pl}var Gv;function m6(){return Gv||(Gv=1,mm.exports=p6()),mm.exports}var i=m6(),S=Ic();const xe=Vf(S),g6=f6({__proto__:null,default:xe},[S]);var od={},ym={exports:{}},_n={},xm={exports:{}},bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function y6(){return Kv||(Kv=1,(function(e){function t(M,U){var F=M.length;M.push(U);e:for(;0<F;){var D=F-1>>>1,W=M[D];if(0<s(W,U))M[D]=U,M[F]=W,F=D;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],F=M.pop();if(F!==U){M[0]=F;e:for(var D=0,W=M.length,X=W>>>1;D<X;){var ne=2*(D+1)-1,G=M[ne],Q=ne+1,se=M[Q];if(0>s(G,F))Q<W&&0>s(se,G)?(M[D]=se,M[Q]=F,D=Q):(M[D]=G,M[ne]=F,D=ne);else if(Q<W&&0>s(se,F))M[D]=se,M[Q]=F,D=Q;else break e}}return U}function s(M,U){var F=M.sortIndex-U.sortIndex;return F!==0?F:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,h=null,g=3,y=!1,b=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var U=n(f);U!==null;){if(U.callback===null)r(f);else if(U.startTime<=M)r(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=n(f)}}function _(M){if(w=!1,k(M),!b)if(n(d)!==null)b=!0,$(N);else{var U=n(f);U!==null&&H(_,U.startTime-M)}}function N(M,U){b=!1,w&&(w=!1,j(A),A=-1),y=!0;var F=g;try{for(k(U),h=n(d);h!==null&&(!(h.expirationTime>U)||M&&!L());){var D=h.callback;if(typeof D=="function"){h.callback=null,g=h.priorityLevel;var W=D(h.expirationTime<=U);U=e.unstable_now(),typeof W=="function"?h.callback=W:h===n(d)&&r(d),k(U)}else r(d);h=n(d)}if(h!==null)var X=!0;else{var ne=n(f);ne!==null&&H(_,ne.startTime-U),X=!1}return X}finally{h=null,g=F,y=!1}}var E=!1,R=null,A=-1,P=5,z=-1;function L(){return!(e.unstable_now()-z<P)}function B(){if(R!==null){var M=e.unstable_now();z=M;var U=!0;try{U=R(!0,M)}finally{U?K():(E=!1,R=null)}}else E=!1}var K;if(typeof T=="function")K=function(){T(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=B,K=function(){J.postMessage(null)}}else K=function(){v(B,0)};function $(M){R=M,E||(E=!0,K())}function H(M,U){A=v(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,$(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(M){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var F=g;g=U;try{return M()}finally{g=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=g;g=M;try{return U()}finally{g=F}},e.unstable_scheduleCallback=function(M,U,F){var D=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?D+F:D):F=D,M){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,M={id:p++,callback:U,priorityLevel:M,startTime:F,expirationTime:W,sortIndex:-1},F>D?(M.sortIndex=F,t(f,M),n(d)===null&&M===n(f)&&(w?(j(A),A=-1):w=!0,H(_,F-D))):(M.sortIndex=W,t(d,M),b||y||(b=!0,$(N))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var U=g;return function(){var F=g;g=U;try{return M.apply(this,arguments)}finally{g=F}}}})(bm)),bm}var Yv;function x6(){return Yv||(Yv=1,xm.exports=y6()),xm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function b6(){if(Xv)return _n;Xv=1;var e=Ic(),t=x6();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(s[a]=c,a=0;a<c.length;a++)r.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function g(a){return d.call(h,a)?!0:d.call(p,a)?!1:f.test(a)?h[a]=!0:(p[a]=!0,!1)}function y(a,c,m,x){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,c,m,x){if(c===null||typeof c>"u"||y(a,c,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(a,c,m,x,C,I,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=I,this.removeEmptyString=O}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){v[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];v[c]=new w(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){v[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){v[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){v[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){v[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){v[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){v[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){v[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function T(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(j,T);v[c]=new w(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(j,T);v[c]=new w(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(j,T);v[c]=new w(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){v[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){v[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function k(a,c,m,x){var C=v.hasOwnProperty(c)?v[c]:null;(C!==null?C.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,m,C,x)&&(m=null),x||C===null?g(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):C.mustUseProperty?a[C.propertyName]=m===null?C.type===3?!1:"":m:(c=C.attributeName,x=C.attributeNamespace,m===null?a.removeAttribute(c):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,x?a.setAttributeNS(x,c,m):a.setAttribute(c,m))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),E=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),M=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=M&&a[M]||a["@@iterator"],typeof a=="function"?a:null)}var F=Object.assign,D;function W(a){if(D===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);D=c&&c[1]||""}return`
`+D+a}var X=!1;function ne(a,c){if(!a||X)return"";X=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ce){var x=ce}Reflect.construct(a,[],c)}else{try{c.call()}catch(ce){x=ce}a.call(c.prototype)}else{try{throw Error()}catch(ce){x=ce}a()}}catch(ce){if(ce&&x&&typeof ce.stack=="string"){for(var C=ce.stack.split(`
`),I=x.stack.split(`
`),O=C.length-1,Y=I.length-1;1<=O&&0<=Y&&C[O]!==I[Y];)Y--;for(;1<=O&&0<=Y;O--,Y--)if(C[O]!==I[Y]){if(O!==1||Y!==1)do if(O--,Y--,0>Y||C[O]!==I[Y]){var te=`
`+C[O].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=O&&0<=Y);break}}}finally{X=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?W(a):""}function G(a){switch(a.tag){case 5:return W(a.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return a=ne(a.type,!1),a;case 11:return a=ne(a.type.render,!1),a;case 1:return a=ne(a.type,!0),a;default:return""}}function Q(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case E:return"Portal";case P:return"Profiler";case A:return"StrictMode";case K:return"Suspense";case V:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case L:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case B:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case J:return c=a.displayName||null,c!==null?c:Q(a.type)||"Memo";case $:c=a._payload,a=a._init;try{return Q(a(c))}catch{}}return null}function se(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(c);case 8:return c===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function q(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ee(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ie(a){var c=ee(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),x=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,I=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return C.call(this)},set:function(O){x=""+O,I.call(this,O)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(O){x=""+O},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function le(a){a._valueTracker||(a._valueTracker=ie(a))}function ue(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return a&&(x=ee(a)?a.checked?"true":"false":a.value),a=x,a!==m?(c.setValue(a),!0):!1}function Z(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function de(a,c){var m=c.checked;return F({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function he(a,c){var m=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;m=q(c.value!=null?c.value:m),a._wrapperState={initialChecked:x,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function pe(a,c){c=c.checked,c!=null&&k(a,"checked",c,!1)}function _e(a,c){pe(a,c);var m=q(c.value),x=c.type;if(m!=null)x==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(x==="submit"||x==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?je(a,c.type,m):c.hasOwnProperty("defaultValue")&&je(a,c.type,q(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Be(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function je(a,c,m){(c!=="number"||Z(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var He=Array.isArray;function dt(a,c,m,x){if(a=a.options,c){c={};for(var C=0;C<m.length;C++)c["$"+m[C]]=!0;for(m=0;m<a.length;m++)C=c.hasOwnProperty("$"+a[m].value),a[m].selected!==C&&(a[m].selected=C),C&&x&&(a[m].defaultSelected=!0)}else{for(m=""+q(m),c=null,C=0;C<a.length;C++){if(a[C].value===m){a[C].selected=!0,x&&(a[C].defaultSelected=!0);return}c!==null||a[C].disabled||(c=a[C])}c!==null&&(c.selected=!0)}}function We(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function St(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(He(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:q(m)}}function Tn(a,c){var m=q(c.value),x=q(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),x!=null&&(a.defaultValue=""+x)}function Vn(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function kt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?kt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var er,tr=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,x,C){MSApp.execUnsafeLocalFunction(function(){return a(c,m,x,C)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=er.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function qe(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xn=["Webkit","ms","Moz","O"];Object.keys(nn).forEach(function(a){xn.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),nn[c]=nn[a]})});function nr(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||nn.hasOwnProperty(a)&&nn[a]?(""+c).trim():c+"px"}function Jr(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var x=m.indexOf("--")===0,C=nr(m,c[m],x);m==="float"&&(m="cssFloat"),x?a.setProperty(m,C):a[m]=C}}var Es=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ns(a,c){if(c){if(Es[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function bi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function bn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var vi=null,Nr=null,rr=null;function wi(a){if(a=xl(a)){if(typeof vi!="function")throw Error(n(280));var c=a.stateNode;c&&(c=wu(c),vi(a.stateNode,a.type,c))}}function Le(a){Nr?rr?rr.push(a):rr=[a]:Nr=a}function ft(){if(Nr){var a=Nr,c=rr;if(rr=Nr=null,wi(a),c)for(a=0;a<c.length;a++)wi(c[a])}}function jt(a,c){return a(c)}function Ut(){}var Tr=!1;function xt(a,c,m){if(Tr)return a(c,m);Tr=!0;try{return jt(a,c,m)}finally{Tr=!1,(Nr!==null||rr!==null)&&(Ut(),ft())}}function _t(a,c){var m=a.stateNode;if(m===null)return null;var x=wu(m);if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var Rr=!1;if(u)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{Rr=!1}function un(a,c,m,x,C,I,O,Y,te){var ce=Array.prototype.slice.call(arguments,3);try{c.apply(m,ce)}catch(ge){this.onError(ge)}}var Ir=!1,vn=null,Si=!1,Xa=null,_h={onError:function(a){Ir=!0,vn=a}};function Eh(a,c,m,x,C,I,O,Y,te){Ir=!1,vn=null,un.apply(_h,arguments)}function Nh(a,c,m,x,C,I,O,Y,te){if(Eh.apply(this,arguments),Ir){if(Ir){var ce=vn;Ir=!1,vn=null}else throw Error(n(198));Si||(Si=!0,Xa=ce)}}function Ar(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function Ja(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Qa(a){if(Ar(a)!==a)throw Error(n(188))}function Th(a){var c=a.alternate;if(!c){if(c=Ar(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,x=c;;){var C=m.return;if(C===null)break;var I=C.alternate;if(I===null){if(x=C.return,x!==null){m=x;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===m)return Qa(C),a;if(I===x)return Qa(C),c;I=I.sibling}throw Error(n(188))}if(m.return!==x.return)m=C,x=I;else{for(var O=!1,Y=C.child;Y;){if(Y===m){O=!0,m=C,x=I;break}if(Y===x){O=!0,x=C,m=I;break}Y=Y.sibling}if(!O){for(Y=I.child;Y;){if(Y===m){O=!0,m=I,x=C;break}if(Y===x){O=!0,x=I,m=C;break}Y=Y.sibling}if(!O)throw Error(n(189))}}if(m.alternate!==x)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function Jc(a){return a=Th(a),a!==null?Qc(a):null}function Qc(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Qc(a);if(c!==null)return c;a=a.sibling}return null}var Zc=t.unstable_scheduleCallback,eu=t.unstable_cancelCallback,Rh=t.unstable_shouldYield,tu=t.unstable_requestPaint,ht=t.unstable_now,Ih=t.unstable_getCurrentPriorityLevel,Za=t.unstable_ImmediatePriority,nu=t.unstable_UserBlockingPriority,ho=t.unstable_NormalPriority,Ah=t.unstable_LowPriority,ru=t.unstable_IdlePriority,ki=null,Un=null;function Ph(a){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(ki,a,void 0,(a.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:Fh,Mh=Math.log,Dh=Math.LN2;function Fh(a){return a>>>=0,a===0?32:31-(Mh(a)/Dh|0)|0}var po=64,mo=4194304;function Pr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function go(a,c){var m=a.pendingLanes;if(m===0)return 0;var x=0,C=a.suspendedLanes,I=a.pingedLanes,O=m&268435455;if(O!==0){var Y=O&~C;Y!==0?x=Pr(Y):(I&=O,I!==0&&(x=Pr(I)))}else O=m&~C,O!==0?x=Pr(O):I!==0&&(x=Pr(I));if(x===0)return 0;if(c!==0&&c!==x&&(c&C)===0&&(C=x&-x,I=c&-c,C>=I||C===16&&(I&4194240)!==0))return c;if((x&4)!==0&&(x|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=x;0<c;)m=31-Rn(c),C=1<<m,x|=a[m],c&=~C;return x}function su(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oh(a,c){for(var m=a.suspendedLanes,x=a.pingedLanes,C=a.expirationTimes,I=a.pendingLanes;0<I;){var O=31-Rn(I),Y=1<<O,te=C[O];te===-1?((Y&m)===0||(Y&x)!==0)&&(C[O]=su(Y,c)):te<=c&&(a.expiredLanes|=Y),I&=~Y}}function el(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yo(){var a=po;return po<<=1,(po&4194240)===0&&(po=64),a}function tl(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function ji(a,c,m){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Rn(c),a[c]=m}function iu(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<m;){var C=31-Rn(m),I=1<<C;c[C]=0,x[C]=-1,a[C]=-1,m&=~I}}function zh(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var x=31-Rn(m),C=1<<x;C&c|a[x]&c&&(a[x]|=c),m&=~C}}var Xe=0;function Sx(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var kx,$h,jx,Cx,_x,Lh=!1,ou=[],Ts=null,Rs=null,Is=null,nl=new Map,rl=new Map,As=[],MN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ex(a,c){switch(a){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":nl.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(c.pointerId)}}function sl(a,c,m,x,C,I){return a===null||a.nativeEvent!==I?(a={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:I,targetContainers:[C]},c!==null&&(c=xl(c),c!==null&&$h(c)),a):(a.eventSystemFlags|=x,c=a.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),a)}function DN(a,c,m,x,C){switch(c){case"focusin":return Ts=sl(Ts,a,c,m,x,C),!0;case"dragenter":return Rs=sl(Rs,a,c,m,x,C),!0;case"mouseover":return Is=sl(Is,a,c,m,x,C),!0;case"pointerover":var I=C.pointerId;return nl.set(I,sl(nl.get(I)||null,a,c,m,x,C)),!0;case"gotpointercapture":return I=C.pointerId,rl.set(I,sl(rl.get(I)||null,a,c,m,x,C)),!0}return!1}function Nx(a){var c=Ci(a.target);if(c!==null){var m=Ar(c);if(m!==null){if(c=m.tag,c===13){if(c=Ja(m),c!==null){a.blockedOn=c,_x(a.priority,function(){jx(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function au(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=Wh(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var x=new m.constructor(m.type,m);Qr=x,m.target.dispatchEvent(x),Qr=null}else return c=xl(m),c!==null&&$h(c),a.blockedOn=m,!1;c.shift()}return!0}function Tx(a,c,m){au(a)&&m.delete(c)}function FN(){Lh=!1,Ts!==null&&au(Ts)&&(Ts=null),Rs!==null&&au(Rs)&&(Rs=null),Is!==null&&au(Is)&&(Is=null),nl.forEach(Tx),rl.forEach(Tx)}function il(a,c){a.blockedOn===c&&(a.blockedOn=null,Lh||(Lh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FN)))}function ol(a){function c(C){return il(C,a)}if(0<ou.length){il(ou[0],a);for(var m=1;m<ou.length;m++){var x=ou[m];x.blockedOn===a&&(x.blockedOn=null)}}for(Ts!==null&&il(Ts,a),Rs!==null&&il(Rs,a),Is!==null&&il(Is,a),nl.forEach(c),rl.forEach(c),m=0;m<As.length;m++)x=As[m],x.blockedOn===a&&(x.blockedOn=null);for(;0<As.length&&(m=As[0],m.blockedOn===null);)Nx(m),m.blockedOn===null&&As.shift()}var xo=_.ReactCurrentBatchConfig,lu=!0;function ON(a,c,m,x){var C=Xe,I=xo.transition;xo.transition=null;try{Xe=1,Bh(a,c,m,x)}finally{Xe=C,xo.transition=I}}function zN(a,c,m,x){var C=Xe,I=xo.transition;xo.transition=null;try{Xe=4,Bh(a,c,m,x)}finally{Xe=C,xo.transition=I}}function Bh(a,c,m,x){if(lu){var C=Wh(a,c,m,x);if(C===null)ip(a,c,x,cu,m),Ex(a,x);else if(DN(C,a,c,m,x))x.stopPropagation();else if(Ex(a,x),c&4&&-1<MN.indexOf(a)){for(;C!==null;){var I=xl(C);if(I!==null&&kx(I),I=Wh(a,c,m,x),I===null&&ip(a,c,x,cu,m),I===C)break;C=I}C!==null&&x.stopPropagation()}else ip(a,c,x,null,m)}}var cu=null;function Wh(a,c,m,x){if(cu=null,a=bn(x),a=Ci(a),a!==null)if(c=Ar(a),c===null)a=null;else if(m=c.tag,m===13){if(a=Ja(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return cu=a,null}function Rx(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ih()){case Za:return 1;case nu:return 4;case ho:case Ah:return 16;case ru:return 536870912;default:return 16}default:return 16}}var Ps=null,Vh=null,uu=null;function Ix(){if(uu)return uu;var a,c=Vh,m=c.length,x,C="value"in Ps?Ps.value:Ps.textContent,I=C.length;for(a=0;a<m&&c[a]===C[a];a++);var O=m-a;for(x=1;x<=O&&c[m-x]===C[I-x];x++);return uu=C.slice(a,1<x?1-x:void 0)}function du(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function fu(){return!0}function Ax(){return!1}function In(a){function c(m,x,C,I,O){this._reactName=m,this._targetInst=C,this.type=x,this.nativeEvent=I,this.target=O,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(m=a[Y],this[Y]=m?m(I):I[Y]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?fu:Ax,this.isPropagationStopped=Ax,this}return F(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fu)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fu)},persist:function(){},isPersistent:fu}),c}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=In(bo),al=F({},bo,{view:0,detail:0}),$N=In(al),Hh,qh,ll,hu=F({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ll&&(ll&&a.type==="mousemove"?(Hh=a.screenX-ll.screenX,qh=a.screenY-ll.screenY):qh=Hh=0,ll=a),Hh)},movementY:function(a){return"movementY"in a?a.movementY:qh}}),Px=In(hu),LN=F({},hu,{dataTransfer:0}),BN=In(LN),WN=F({},al,{relatedTarget:0}),Gh=In(WN),VN=F({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),UN=In(VN),HN=F({},bo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qN=In(HN),GN=F({},bo,{data:0}),Mx=In(GN),KN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JN(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=XN[a])?!!c[a]:!1}function Kh(){return JN}var QN=F({},al,{key:function(a){if(a.key){var c=KN[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=du(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?YN[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(a){return a.type==="keypress"?du(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?du(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ZN=In(QN),eT=F({},hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dx=In(eT),tT=F({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),nT=In(tT),rT=F({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),sT=In(rT),iT=F({},hu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),oT=In(iT),aT=[9,13,27,32],Yh=u&&"CompositionEvent"in window,cl=null;u&&"documentMode"in document&&(cl=document.documentMode);var lT=u&&"TextEvent"in window&&!cl,Fx=u&&(!Yh||cl&&8<cl&&11>=cl),Ox=" ",zx=!1;function $x(a,c){switch(a){case"keyup":return aT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var vo=!1;function cT(a,c){switch(a){case"compositionend":return Lx(c);case"keypress":return c.which!==32?null:(zx=!0,Ox);case"textInput":return a=c.data,a===Ox&&zx?null:a;default:return null}}function uT(a,c){if(vo)return a==="compositionend"||!Yh&&$x(a,c)?(a=Ix(),uu=Vh=Ps=null,vo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Fx&&c.locale!=="ko"?null:c.data;default:return null}}var dT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bx(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!dT[a.type]:c==="textarea"}function Wx(a,c,m,x){Le(x),c=xu(c,"onChange"),0<c.length&&(m=new Uh("onChange","change",null,m,x),a.push({event:m,listeners:c}))}var ul=null,dl=null;function fT(a){ob(a,0)}function pu(a){var c=Co(a);if(ue(c))return a}function hT(a,c){if(a==="change")return c}var Vx=!1;if(u){var Xh;if(u){var Jh="oninput"in document;if(!Jh){var Ux=document.createElement("div");Ux.setAttribute("oninput","return;"),Jh=typeof Ux.oninput=="function"}Xh=Jh}else Xh=!1;Vx=Xh&&(!document.documentMode||9<document.documentMode)}function Hx(){ul&&(ul.detachEvent("onpropertychange",qx),dl=ul=null)}function qx(a){if(a.propertyName==="value"&&pu(dl)){var c=[];Wx(c,dl,a,bn(a)),xt(fT,c)}}function pT(a,c,m){a==="focusin"?(Hx(),ul=c,dl=m,ul.attachEvent("onpropertychange",qx)):a==="focusout"&&Hx()}function mT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return pu(dl)}function gT(a,c){if(a==="click")return pu(c)}function yT(a,c){if(a==="input"||a==="change")return pu(c)}function xT(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var sr=typeof Object.is=="function"?Object.is:xT;function fl(a,c){if(sr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var C=m[x];if(!d.call(c,C)||!sr(a[C],c[C]))return!1}return!0}function Gx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Kx(a,c){var m=Gx(a);a=0;for(var x;m;){if(m.nodeType===3){if(x=a+m.textContent.length,a<=c&&x>=c)return{node:m,offset:c-a};a=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Gx(m)}}function Yx(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Yx(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Xx(){for(var a=window,c=Z();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=Z(a.document)}return c}function Qh(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function bT(a){var c=Xx(),m=a.focusedElem,x=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&Yx(m.ownerDocument.documentElement,m)){if(x!==null&&Qh(m)){if(c=x.start,a=x.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var C=m.textContent.length,I=Math.min(x.start,C);x=x.end===void 0?I:Math.min(x.end,C),!a.extend&&I>x&&(C=x,x=I,I=C),C=Kx(m,I);var O=Kx(m,x);C&&O&&(a.rangeCount!==1||a.anchorNode!==C.node||a.anchorOffset!==C.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),a.removeAllRanges(),I>x?(a.addRange(c),a.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var vT=u&&"documentMode"in document&&11>=document.documentMode,wo=null,Zh=null,hl=null,ep=!1;function Jx(a,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ep||wo==null||wo!==Z(x)||(x=wo,"selectionStart"in x&&Qh(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),hl&&fl(hl,x)||(hl=x,x=xu(Zh,"onSelect"),0<x.length&&(c=new Uh("onSelect","select",null,c,m),a.push({event:c,listeners:x}),c.target=wo)))}function mu(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var So={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},tp={},Qx={};u&&(Qx=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function gu(a){if(tp[a])return tp[a];if(!So[a])return a;var c=So[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in Qx)return tp[a]=c[m];return a}var Zx=gu("animationend"),eb=gu("animationiteration"),tb=gu("animationstart"),nb=gu("transitionend"),rb=new Map,sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(a,c){rb.set(a,c),o(c,[a])}for(var np=0;np<sb.length;np++){var rp=sb[np],wT=rp.toLowerCase(),ST=rp[0].toUpperCase()+rp.slice(1);Ms(wT,"on"+ST)}Ms(Zx,"onAnimationEnd"),Ms(eb,"onAnimationIteration"),Ms(tb,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(nb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function ib(a,c,m){var x=a.type||"unknown-event";a.currentTarget=m,Nh(x,c,void 0,a),a.currentTarget=null}function ob(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var x=a[m],C=x.event;x=x.listeners;e:{var I=void 0;if(c)for(var O=x.length-1;0<=O;O--){var Y=x[O],te=Y.instance,ce=Y.currentTarget;if(Y=Y.listener,te!==I&&C.isPropagationStopped())break e;ib(C,Y,ce),I=te}else for(O=0;O<x.length;O++){if(Y=x[O],te=Y.instance,ce=Y.currentTarget,Y=Y.listener,te!==I&&C.isPropagationStopped())break e;ib(C,Y,ce),I=te}}}if(Si)throw a=Xa,Si=!1,Xa=null,a}function rt(a,c){var m=c[dp];m===void 0&&(m=c[dp]=new Set);var x=a+"__bubble";m.has(x)||(ab(c,a,2,!1),m.add(x))}function sp(a,c,m){var x=0;c&&(x|=4),ab(m,a,x,c)}var yu="_reactListening"+Math.random().toString(36).slice(2);function ml(a){if(!a[yu]){a[yu]=!0,r.forEach(function(m){m!=="selectionchange"&&(kT.has(m)||sp(m,!1,a),sp(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[yu]||(c[yu]=!0,sp("selectionchange",!1,c))}}function ab(a,c,m,x){switch(Rx(c)){case 1:var C=ON;break;case 4:C=zN;break;default:C=Bh}m=C.bind(null,c,m,a),C=void 0,!Rr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),x?C!==void 0?a.addEventListener(c,m,{capture:!0,passive:C}):a.addEventListener(c,m,!0):C!==void 0?a.addEventListener(c,m,{passive:C}):a.addEventListener(c,m,!1)}function ip(a,c,m,x,C){var I=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var O=x.tag;if(O===3||O===4){var Y=x.stateNode.containerInfo;if(Y===C||Y.nodeType===8&&Y.parentNode===C)break;if(O===4)for(O=x.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===C||te.nodeType===8&&te.parentNode===C))return;O=O.return}for(;Y!==null;){if(O=Ci(Y),O===null)return;if(te=O.tag,te===5||te===6){x=I=O;continue e}Y=Y.parentNode}}x=x.return}xt(function(){var ce=I,ge=bn(m),ye=[];e:{var me=rb.get(a);if(me!==void 0){var Se=Uh,Ee=a;switch(a){case"keypress":if(du(m)===0)break e;case"keydown":case"keyup":Se=ZN;break;case"focusin":Ee="focus",Se=Gh;break;case"focusout":Ee="blur",Se=Gh;break;case"beforeblur":case"afterblur":Se=Gh;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Px;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=nT;break;case Zx:case eb:case tb:Se=UN;break;case nb:Se=sT;break;case"scroll":Se=$N;break;case"wheel":Se=oT;break;case"copy":case"cut":case"paste":Se=qN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Dx}var Ie=(c&4)!==0,Ct=!Ie&&a==="scroll",oe=Ie?me!==null?me+"Capture":null:me;Ie=[];for(var re=ce,ae;re!==null;){ae=re;var be=ae.stateNode;if(ae.tag===5&&be!==null&&(ae=be,oe!==null&&(be=_t(re,oe),be!=null&&Ie.push(gl(re,be,ae)))),Ct)break;re=re.return}0<Ie.length&&(me=new Se(me,Ee,null,m,ge),ye.push({event:me,listeners:Ie}))}}if((c&7)===0){e:{if(me=a==="mouseover"||a==="pointerover",Se=a==="mouseout"||a==="pointerout",me&&m!==Qr&&(Ee=m.relatedTarget||m.fromElement)&&(Ci(Ee)||Ee[Zr]))break e;if((Se||me)&&(me=ge.window===ge?ge:(me=ge.ownerDocument)?me.defaultView||me.parentWindow:window,Se?(Ee=m.relatedTarget||m.toElement,Se=ce,Ee=Ee?Ci(Ee):null,Ee!==null&&(Ct=Ar(Ee),Ee!==Ct||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(Se=null,Ee=ce),Se!==Ee)){if(Ie=Px,be="onMouseLeave",oe="onMouseEnter",re="mouse",(a==="pointerout"||a==="pointerover")&&(Ie=Dx,be="onPointerLeave",oe="onPointerEnter",re="pointer"),Ct=Se==null?me:Co(Se),ae=Ee==null?me:Co(Ee),me=new Ie(be,re+"leave",Se,m,ge),me.target=Ct,me.relatedTarget=ae,be=null,Ci(ge)===ce&&(Ie=new Ie(oe,re+"enter",Ee,m,ge),Ie.target=ae,Ie.relatedTarget=Ct,be=Ie),Ct=be,Se&&Ee)t:{for(Ie=Se,oe=Ee,re=0,ae=Ie;ae;ae=ko(ae))re++;for(ae=0,be=oe;be;be=ko(be))ae++;for(;0<re-ae;)Ie=ko(Ie),re--;for(;0<ae-re;)oe=ko(oe),ae--;for(;re--;){if(Ie===oe||oe!==null&&Ie===oe.alternate)break t;Ie=ko(Ie),oe=ko(oe)}Ie=null}else Ie=null;Se!==null&&lb(ye,me,Se,Ie,!1),Ee!==null&&Ct!==null&&lb(ye,Ct,Ee,Ie,!0)}}e:{if(me=ce?Co(ce):window,Se=me.nodeName&&me.nodeName.toLowerCase(),Se==="select"||Se==="input"&&me.type==="file")var Ae=hT;else if(Bx(me))if(Vx)Ae=yT;else{Ae=mT;var Me=pT}else(Se=me.nodeName)&&Se.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Ae=gT);if(Ae&&(Ae=Ae(a,ce))){Wx(ye,Ae,m,ge);break e}Me&&Me(a,me,ce),a==="focusout"&&(Me=me._wrapperState)&&Me.controlled&&me.type==="number"&&je(me,"number",me.value)}switch(Me=ce?Co(ce):window,a){case"focusin":(Bx(Me)||Me.contentEditable==="true")&&(wo=Me,Zh=ce,hl=null);break;case"focusout":hl=Zh=wo=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,Jx(ye,m,ge);break;case"selectionchange":if(vT)break;case"keydown":case"keyup":Jx(ye,m,ge)}var De;if(Yh)e:{switch(a){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else vo?$x(a,m)&&($e="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&($e="onCompositionStart");$e&&(Fx&&m.locale!=="ko"&&(vo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&vo&&(De=Ix()):(Ps=ge,Vh="value"in Ps?Ps.value:Ps.textContent,vo=!0)),Me=xu(ce,$e),0<Me.length&&($e=new Mx($e,a,null,m,ge),ye.push({event:$e,listeners:Me}),De?$e.data=De:(De=Lx(m),De!==null&&($e.data=De)))),(De=lT?cT(a,m):uT(a,m))&&(ce=xu(ce,"onBeforeInput"),0<ce.length&&(ge=new Mx("onBeforeInput","beforeinput",null,m,ge),ye.push({event:ge,listeners:ce}),ge.data=De))}ob(ye,c)})}function gl(a,c,m){return{instance:a,listener:c,currentTarget:m}}function xu(a,c){for(var m=c+"Capture",x=[];a!==null;){var C=a,I=C.stateNode;C.tag===5&&I!==null&&(C=I,I=_t(a,m),I!=null&&x.unshift(gl(a,I,C)),I=_t(a,c),I!=null&&x.push(gl(a,I,C))),a=a.return}return x}function ko(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function lb(a,c,m,x,C){for(var I=c._reactName,O=[];m!==null&&m!==x;){var Y=m,te=Y.alternate,ce=Y.stateNode;if(te!==null&&te===x)break;Y.tag===5&&ce!==null&&(Y=ce,C?(te=_t(m,I),te!=null&&O.unshift(gl(m,te,Y))):C||(te=_t(m,I),te!=null&&O.push(gl(m,te,Y)))),m=m.return}O.length!==0&&a.push({event:c,listeners:O})}var jT=/\r\n?/g,CT=/\u0000|\uFFFD/g;function cb(a){return(typeof a=="string"?a:""+a).replace(jT,`
`).replace(CT,"")}function bu(a,c,m){if(c=cb(c),cb(a)!==c&&m)throw Error(n(425))}function vu(){}var op=null,ap=null;function lp(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var cp=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(a){return ub.resolve(null).then(a).catch(NT)}:cp;function NT(a){setTimeout(function(){throw a})}function up(a,c){var m=c,x=0;do{var C=m.nextSibling;if(a.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(x===0){a.removeChild(C),ol(c);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=C}while(m);ol(c)}function Ds(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function db(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Mr="__reactFiber$"+jo,yl="__reactProps$"+jo,Zr="__reactContainer$"+jo,dp="__reactEvents$"+jo,TT="__reactListeners$"+jo,RT="__reactHandles$"+jo;function Ci(a){var c=a[Mr];if(c)return c;for(var m=a.parentNode;m;){if(c=m[Zr]||m[Mr]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=db(a);a!==null;){if(m=a[Mr])return m;a=db(a)}return c}a=m,m=a.parentNode}return null}function xl(a){return a=a[Mr]||a[Zr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Co(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function wu(a){return a[yl]||null}var fp=[],_o=-1;function Fs(a){return{current:a}}function st(a){0>_o||(a.current=fp[_o],fp[_o]=null,_o--)}function Ze(a,c){_o++,fp[_o]=a.current,a.current=c}var Os={},rn=Fs(Os),wn=Fs(!1),_i=Os;function Eo(a,c){var m=a.type.contextTypes;if(!m)return Os;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var C={},I;for(I in m)C[I]=c[I];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=C),C}function Sn(a){return a=a.childContextTypes,a!=null}function Su(){st(wn),st(rn)}function fb(a,c,m){if(rn.current!==Os)throw Error(n(168));Ze(rn,c),Ze(wn,m)}function hb(a,c,m){var x=a.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var C in x)if(!(C in c))throw Error(n(108,se(a)||"Unknown",C));return F({},m,x)}function ku(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Os,_i=rn.current,Ze(rn,a),Ze(wn,wn.current),!0}function pb(a,c,m){var x=a.stateNode;if(!x)throw Error(n(169));m?(a=hb(a,c,_i),x.__reactInternalMemoizedMergedChildContext=a,st(wn),st(rn),Ze(rn,a)):st(wn),Ze(wn,m)}var es=null,ju=!1,hp=!1;function mb(a){es===null?es=[a]:es.push(a)}function IT(a){ju=!0,mb(a)}function zs(){if(!hp&&es!==null){hp=!0;var a=0,c=Xe;try{var m=es;for(Xe=1;a<m.length;a++){var x=m[a];do x=x(!0);while(x!==null)}es=null,ju=!1}catch(C){throw es!==null&&(es=es.slice(a+1)),Zc(Za,zs),C}finally{Xe=c,hp=!1}}return null}var No=[],To=0,Cu=null,_u=0,Hn=[],qn=0,Ei=null,ts=1,ns="";function Ni(a,c){No[To++]=_u,No[To++]=Cu,Cu=a,_u=c}function gb(a,c,m){Hn[qn++]=ts,Hn[qn++]=ns,Hn[qn++]=Ei,Ei=a;var x=ts;a=ns;var C=32-Rn(x)-1;x&=~(1<<C),m+=1;var I=32-Rn(c)+C;if(30<I){var O=C-C%5;I=(x&(1<<O)-1).toString(32),x>>=O,C-=O,ts=1<<32-Rn(c)+C|m<<C|x,ns=I+a}else ts=1<<I|m<<C|x,ns=a}function pp(a){a.return!==null&&(Ni(a,1),gb(a,1,0))}function mp(a){for(;a===Cu;)Cu=No[--To],No[To]=null,_u=No[--To],No[To]=null;for(;a===Ei;)Ei=Hn[--qn],Hn[qn]=null,ns=Hn[--qn],Hn[qn]=null,ts=Hn[--qn],Hn[qn]=null}var An=null,Pn=null,it=!1,ir=null;function yb(a,c){var m=Xn(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function xb(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,An=a,Pn=Ds(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,An=a,Pn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Ei!==null?{id:ts,overflow:ns}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Xn(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,An=a,Pn=null,!0):!1;default:return!1}}function gp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function yp(a){if(it){var c=Pn;if(c){var m=c;if(!xb(a,c)){if(gp(a))throw Error(n(418));c=Ds(m.nextSibling);var x=An;c&&xb(a,c)?yb(x,m):(a.flags=a.flags&-4097|2,it=!1,An=a)}}else{if(gp(a))throw Error(n(418));a.flags=a.flags&-4097|2,it=!1,An=a}}}function bb(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;An=a}function Eu(a){if(a!==An)return!1;if(!it)return bb(a),it=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!lp(a.type,a.memoizedProps)),c&&(c=Pn)){if(gp(a))throw vb(),Error(n(418));for(;c;)yb(a,c),c=Ds(c.nextSibling)}if(bb(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){Pn=Ds(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}Pn=null}}else Pn=An?Ds(a.stateNode.nextSibling):null;return!0}function vb(){for(var a=Pn;a;)a=Ds(a.nextSibling)}function Ro(){Pn=An=null,it=!1}function xp(a){ir===null?ir=[a]:ir.push(a)}var AT=_.ReactCurrentBatchConfig;function bl(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var x=m.stateNode}if(!x)throw Error(n(147,a));var C=x,I=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===I?c.ref:(c=function(O){var Y=C.refs;O===null?delete Y[I]:Y[I]=O},c._stringRef=I,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Nu(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function wb(a){var c=a._init;return c(a._payload)}function Sb(a){function c(oe,re){if(a){var ae=oe.deletions;ae===null?(oe.deletions=[re],oe.flags|=16):ae.push(re)}}function m(oe,re){if(!a)return null;for(;re!==null;)c(oe,re),re=re.sibling;return null}function x(oe,re){for(oe=new Map;re!==null;)re.key!==null?oe.set(re.key,re):oe.set(re.index,re),re=re.sibling;return oe}function C(oe,re){return oe=qs(oe,re),oe.index=0,oe.sibling=null,oe}function I(oe,re,ae){return oe.index=ae,a?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<re?(oe.flags|=2,re):ae):(oe.flags|=2,re)):(oe.flags|=1048576,re)}function O(oe){return a&&oe.alternate===null&&(oe.flags|=2),oe}function Y(oe,re,ae,be){return re===null||re.tag!==6?(re=cm(ae,oe.mode,be),re.return=oe,re):(re=C(re,ae),re.return=oe,re)}function te(oe,re,ae,be){var Ae=ae.type;return Ae===R?ge(oe,re,ae.props.children,be,ae.key):re!==null&&(re.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===$&&wb(Ae)===re.type)?(be=C(re,ae.props),be.ref=bl(oe,re,ae),be.return=oe,be):(be=Qu(ae.type,ae.key,ae.props,null,oe.mode,be),be.ref=bl(oe,re,ae),be.return=oe,be)}function ce(oe,re,ae,be){return re===null||re.tag!==4||re.stateNode.containerInfo!==ae.containerInfo||re.stateNode.implementation!==ae.implementation?(re=um(ae,oe.mode,be),re.return=oe,re):(re=C(re,ae.children||[]),re.return=oe,re)}function ge(oe,re,ae,be,Ae){return re===null||re.tag!==7?(re=Fi(ae,oe.mode,be,Ae),re.return=oe,re):(re=C(re,ae),re.return=oe,re)}function ye(oe,re,ae){if(typeof re=="string"&&re!==""||typeof re=="number")return re=cm(""+re,oe.mode,ae),re.return=oe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return ae=Qu(re.type,re.key,re.props,null,oe.mode,ae),ae.ref=bl(oe,null,re),ae.return=oe,ae;case E:return re=um(re,oe.mode,ae),re.return=oe,re;case $:var be=re._init;return ye(oe,be(re._payload),ae)}if(He(re)||U(re))return re=Fi(re,oe.mode,ae,null),re.return=oe,re;Nu(oe,re)}return null}function me(oe,re,ae,be){var Ae=re!==null?re.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Ae!==null?null:Y(oe,re,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return ae.key===Ae?te(oe,re,ae,be):null;case E:return ae.key===Ae?ce(oe,re,ae,be):null;case $:return Ae=ae._init,me(oe,re,Ae(ae._payload),be)}if(He(ae)||U(ae))return Ae!==null?null:ge(oe,re,ae,be,null);Nu(oe,ae)}return null}function Se(oe,re,ae,be,Ae){if(typeof be=="string"&&be!==""||typeof be=="number")return oe=oe.get(ae)||null,Y(re,oe,""+be,Ae);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case N:return oe=oe.get(be.key===null?ae:be.key)||null,te(re,oe,be,Ae);case E:return oe=oe.get(be.key===null?ae:be.key)||null,ce(re,oe,be,Ae);case $:var Me=be._init;return Se(oe,re,ae,Me(be._payload),Ae)}if(He(be)||U(be))return oe=oe.get(ae)||null,ge(re,oe,be,Ae,null);Nu(re,be)}return null}function Ee(oe,re,ae,be){for(var Ae=null,Me=null,De=re,$e=re=0,Gt=null;De!==null&&$e<ae.length;$e++){De.index>$e?(Gt=De,De=null):Gt=De.sibling;var Ye=me(oe,De,ae[$e],be);if(Ye===null){De===null&&(De=Gt);break}a&&De&&Ye.alternate===null&&c(oe,De),re=I(Ye,re,$e),Me===null?Ae=Ye:Me.sibling=Ye,Me=Ye,De=Gt}if($e===ae.length)return m(oe,De),it&&Ni(oe,$e),Ae;if(De===null){for(;$e<ae.length;$e++)De=ye(oe,ae[$e],be),De!==null&&(re=I(De,re,$e),Me===null?Ae=De:Me.sibling=De,Me=De);return it&&Ni(oe,$e),Ae}for(De=x(oe,De);$e<ae.length;$e++)Gt=Se(De,oe,$e,ae[$e],be),Gt!==null&&(a&&Gt.alternate!==null&&De.delete(Gt.key===null?$e:Gt.key),re=I(Gt,re,$e),Me===null?Ae=Gt:Me.sibling=Gt,Me=Gt);return a&&De.forEach(function(Gs){return c(oe,Gs)}),it&&Ni(oe,$e),Ae}function Ie(oe,re,ae,be){var Ae=U(ae);if(typeof Ae!="function")throw Error(n(150));if(ae=Ae.call(ae),ae==null)throw Error(n(151));for(var Me=Ae=null,De=re,$e=re=0,Gt=null,Ye=ae.next();De!==null&&!Ye.done;$e++,Ye=ae.next()){De.index>$e?(Gt=De,De=null):Gt=De.sibling;var Gs=me(oe,De,Ye.value,be);if(Gs===null){De===null&&(De=Gt);break}a&&De&&Gs.alternate===null&&c(oe,De),re=I(Gs,re,$e),Me===null?Ae=Gs:Me.sibling=Gs,Me=Gs,De=Gt}if(Ye.done)return m(oe,De),it&&Ni(oe,$e),Ae;if(De===null){for(;!Ye.done;$e++,Ye=ae.next())Ye=ye(oe,Ye.value,be),Ye!==null&&(re=I(Ye,re,$e),Me===null?Ae=Ye:Me.sibling=Ye,Me=Ye);return it&&Ni(oe,$e),Ae}for(De=x(oe,De);!Ye.done;$e++,Ye=ae.next())Ye=Se(De,oe,$e,Ye.value,be),Ye!==null&&(a&&Ye.alternate!==null&&De.delete(Ye.key===null?$e:Ye.key),re=I(Ye,re,$e),Me===null?Ae=Ye:Me.sibling=Ye,Me=Ye);return a&&De.forEach(function(d6){return c(oe,d6)}),it&&Ni(oe,$e),Ae}function Ct(oe,re,ae,be){if(typeof ae=="object"&&ae!==null&&ae.type===R&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:e:{for(var Ae=ae.key,Me=re;Me!==null;){if(Me.key===Ae){if(Ae=ae.type,Ae===R){if(Me.tag===7){m(oe,Me.sibling),re=C(Me,ae.props.children),re.return=oe,oe=re;break e}}else if(Me.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===$&&wb(Ae)===Me.type){m(oe,Me.sibling),re=C(Me,ae.props),re.ref=bl(oe,Me,ae),re.return=oe,oe=re;break e}m(oe,Me);break}else c(oe,Me);Me=Me.sibling}ae.type===R?(re=Fi(ae.props.children,oe.mode,be,ae.key),re.return=oe,oe=re):(be=Qu(ae.type,ae.key,ae.props,null,oe.mode,be),be.ref=bl(oe,re,ae),be.return=oe,oe=be)}return O(oe);case E:e:{for(Me=ae.key;re!==null;){if(re.key===Me)if(re.tag===4&&re.stateNode.containerInfo===ae.containerInfo&&re.stateNode.implementation===ae.implementation){m(oe,re.sibling),re=C(re,ae.children||[]),re.return=oe,oe=re;break e}else{m(oe,re);break}else c(oe,re);re=re.sibling}re=um(ae,oe.mode,be),re.return=oe,oe=re}return O(oe);case $:return Me=ae._init,Ct(oe,re,Me(ae._payload),be)}if(He(ae))return Ee(oe,re,ae,be);if(U(ae))return Ie(oe,re,ae,be);Nu(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,re!==null&&re.tag===6?(m(oe,re.sibling),re=C(re,ae),re.return=oe,oe=re):(m(oe,re),re=cm(ae,oe.mode,be),re.return=oe,oe=re),O(oe)):m(oe,re)}return Ct}var Io=Sb(!0),kb=Sb(!1),Tu=Fs(null),Ru=null,Ao=null,bp=null;function vp(){bp=Ao=Ru=null}function wp(a){var c=Tu.current;st(Tu),a._currentValue=c}function Sp(a,c,m){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===m)break;a=a.return}}function Po(a,c){Ru=a,bp=Ao=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(kn=!0),a.firstContext=null)}function Gn(a){var c=a._currentValue;if(bp!==a)if(a={context:a,memoizedValue:c,next:null},Ao===null){if(Ru===null)throw Error(n(308));Ao=a,Ru.dependencies={lanes:0,firstContext:a}}else Ao=Ao.next=a;return c}var Ti=null;function kp(a){Ti===null?Ti=[a]:Ti.push(a)}function jb(a,c,m,x){var C=c.interleaved;return C===null?(m.next=m,kp(c)):(m.next=C.next,C.next=m),c.interleaved=m,rs(a,x)}function rs(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var $s=!1;function jp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cb(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ss(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Ls(a,c,m){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(Ke&2)!==0){var C=x.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),x.pending=c,rs(a,m)}return C=x.interleaved,C===null?(c.next=c,kp(x)):(c.next=C.next,C.next=c),x.interleaved=c,rs(a,m)}function Iu(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var x=c.lanes;x&=a.pendingLanes,m|=x,c.lanes=m,zh(a,m)}}function _b(a,c){var m=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var C=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var O={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?C=I=O:I=I.next=O,m=m.next}while(m!==null);I===null?C=I=c:I=I.next=c}else C=I=c;m={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:x.shared,effects:x.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function Au(a,c,m,x){var C=a.updateQueue;$s=!1;var I=C.firstBaseUpdate,O=C.lastBaseUpdate,Y=C.shared.pending;if(Y!==null){C.shared.pending=null;var te=Y,ce=te.next;te.next=null,O===null?I=ce:O.next=ce,O=te;var ge=a.alternate;ge!==null&&(ge=ge.updateQueue,Y=ge.lastBaseUpdate,Y!==O&&(Y===null?ge.firstBaseUpdate=ce:Y.next=ce,ge.lastBaseUpdate=te))}if(I!==null){var ye=C.baseState;O=0,ge=ce=te=null,Y=I;do{var me=Y.lane,Se=Y.eventTime;if((x&me)===me){ge!==null&&(ge=ge.next={eventTime:Se,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Ee=a,Ie=Y;switch(me=c,Se=m,Ie.tag){case 1:if(Ee=Ie.payload,typeof Ee=="function"){ye=Ee.call(Se,ye,me);break e}ye=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ie.payload,me=typeof Ee=="function"?Ee.call(Se,ye,me):Ee,me==null)break e;ye=F({},ye,me);break e;case 2:$s=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,me=C.effects,me===null?C.effects=[Y]:me.push(Y))}else Se={eventTime:Se,lane:me,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},ge===null?(ce=ge=Se,te=ye):ge=ge.next=Se,O|=me;if(Y=Y.next,Y===null){if(Y=C.shared.pending,Y===null)break;me=Y,Y=me.next,me.next=null,C.lastBaseUpdate=me,C.shared.pending=null}}while(!0);if(ge===null&&(te=ye),C.baseState=te,C.firstBaseUpdate=ce,C.lastBaseUpdate=ge,c=C.shared.interleaved,c!==null){C=c;do O|=C.lane,C=C.next;while(C!==c)}else I===null&&(C.shared.lanes=0);Ai|=O,a.lanes=O,a.memoizedState=ye}}function Eb(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var x=a[c],C=x.callback;if(C!==null){if(x.callback=null,x=m,typeof C!="function")throw Error(n(191,C));C.call(x)}}}var vl={},Dr=Fs(vl),wl=Fs(vl),Sl=Fs(vl);function Ri(a){if(a===vl)throw Error(n(174));return a}function Cp(a,c){switch(Ze(Sl,c),Ze(wl,a),Ze(Dr,vl),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Dt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Dt(c,a)}st(Dr),Ze(Dr,c)}function Mo(){st(Dr),st(wl),st(Sl)}function Nb(a){Ri(Sl.current);var c=Ri(Dr.current),m=Dt(c,a.type);c!==m&&(Ze(wl,a),Ze(Dr,m))}function _p(a){wl.current===a&&(st(Dr),st(wl))}var pt=Fs(0);function Pu(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ep=[];function Np(){for(var a=0;a<Ep.length;a++)Ep[a]._workInProgressVersionPrimary=null;Ep.length=0}var Mu=_.ReactCurrentDispatcher,Tp=_.ReactCurrentBatchConfig,Ii=0,mt=null,Ot=null,Ht=null,Du=!1,kl=!1,jl=0,PT=0;function sn(){throw Error(n(321))}function Rp(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!sr(a[m],c[m]))return!1;return!0}function Ip(a,c,m,x,C,I){if(Ii=I,mt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Mu.current=a===null||a.memoizedState===null?OT:zT,a=m(x,C),kl){I=0;do{if(kl=!1,jl=0,25<=I)throw Error(n(301));I+=1,Ht=Ot=null,c.updateQueue=null,Mu.current=$T,a=m(x,C)}while(kl)}if(Mu.current=zu,c=Ot!==null&&Ot.next!==null,Ii=0,Ht=Ot=mt=null,Du=!1,c)throw Error(n(300));return a}function Ap(){var a=jl!==0;return jl=0,a}function Fr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?mt.memoizedState=Ht=a:Ht=Ht.next=a,Ht}function Kn(){if(Ot===null){var a=mt.alternate;a=a!==null?a.memoizedState:null}else a=Ot.next;var c=Ht===null?mt.memoizedState:Ht.next;if(c!==null)Ht=c,Ot=a;else{if(a===null)throw Error(n(310));Ot=a,a={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?mt.memoizedState=Ht=a:Ht=Ht.next=a}return Ht}function Cl(a,c){return typeof c=="function"?c(a):c}function Pp(a){var c=Kn(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var x=Ot,C=x.baseQueue,I=m.pending;if(I!==null){if(C!==null){var O=C.next;C.next=I.next,I.next=O}x.baseQueue=C=I,m.pending=null}if(C!==null){I=C.next,x=x.baseState;var Y=O=null,te=null,ce=I;do{var ge=ce.lane;if((Ii&ge)===ge)te!==null&&(te=te.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),x=ce.hasEagerState?ce.eagerState:a(x,ce.action);else{var ye={lane:ge,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};te===null?(Y=te=ye,O=x):te=te.next=ye,mt.lanes|=ge,Ai|=ge}ce=ce.next}while(ce!==null&&ce!==I);te===null?O=x:te.next=Y,sr(x,c.memoizedState)||(kn=!0),c.memoizedState=x,c.baseState=O,c.baseQueue=te,m.lastRenderedState=x}if(a=m.interleaved,a!==null){C=a;do I=C.lane,mt.lanes|=I,Ai|=I,C=C.next;while(C!==a)}else C===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Mp(a){var c=Kn(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var x=m.dispatch,C=m.pending,I=c.memoizedState;if(C!==null){m.pending=null;var O=C=C.next;do I=a(I,O.action),O=O.next;while(O!==C);sr(I,c.memoizedState)||(kn=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),m.lastRenderedState=I}return[I,x]}function Tb(){}function Rb(a,c){var m=mt,x=Kn(),C=c(),I=!sr(x.memoizedState,C);if(I&&(x.memoizedState=C,kn=!0),x=x.queue,Dp(Pb.bind(null,m,x,a),[a]),x.getSnapshot!==c||I||Ht!==null&&Ht.memoizedState.tag&1){if(m.flags|=2048,_l(9,Ab.bind(null,m,x,C,c),void 0,null),qt===null)throw Error(n(349));(Ii&30)!==0||Ib(m,c,C)}return C}function Ib(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=mt.updateQueue,c===null?(c={lastEffect:null,stores:null},mt.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function Ab(a,c,m,x){c.value=m,c.getSnapshot=x,Mb(c)&&Db(a)}function Pb(a,c,m){return m(function(){Mb(c)&&Db(a)})}function Mb(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!sr(a,m)}catch{return!0}}function Db(a){var c=rs(a,1);c!==null&&cr(c,a,1,-1)}function Fb(a){var c=Fr();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:a},c.queue=a,a=a.dispatch=FT.bind(null,mt,a),[c.memoizedState,a]}function _l(a,c,m,x){return a={tag:a,create:c,destroy:m,deps:x,next:null},c=mt.updateQueue,c===null?(c={lastEffect:null,stores:null},mt.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(x=m.next,m.next=a,a.next=x,c.lastEffect=a)),a}function Ob(){return Kn().memoizedState}function Fu(a,c,m,x){var C=Fr();mt.flags|=a,C.memoizedState=_l(1|c,m,void 0,x===void 0?null:x)}function Ou(a,c,m,x){var C=Kn();x=x===void 0?null:x;var I=void 0;if(Ot!==null){var O=Ot.memoizedState;if(I=O.destroy,x!==null&&Rp(x,O.deps)){C.memoizedState=_l(c,m,I,x);return}}mt.flags|=a,C.memoizedState=_l(1|c,m,I,x)}function zb(a,c){return Fu(8390656,8,a,c)}function Dp(a,c){return Ou(2048,8,a,c)}function $b(a,c){return Ou(4,2,a,c)}function Lb(a,c){return Ou(4,4,a,c)}function Bb(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Wb(a,c,m){return m=m!=null?m.concat([a]):null,Ou(4,4,Bb.bind(null,c,a),m)}function Fp(){}function Vb(a,c){var m=Kn();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&Rp(c,x[1])?x[0]:(m.memoizedState=[a,c],a)}function Ub(a,c){var m=Kn();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&Rp(c,x[1])?x[0]:(a=a(),m.memoizedState=[a,c],a)}function Hb(a,c,m){return(Ii&21)===0?(a.baseState&&(a.baseState=!1,kn=!0),a.memoizedState=m):(sr(m,c)||(m=yo(),mt.lanes|=m,Ai|=m,a.baseState=!0),c)}function MT(a,c){var m=Xe;Xe=m!==0&&4>m?m:4,a(!0);var x=Tp.transition;Tp.transition={};try{a(!1),c()}finally{Xe=m,Tp.transition=x}}function qb(){return Kn().memoizedState}function DT(a,c,m){var x=Us(a);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},Gb(a))Kb(c,m);else if(m=jb(a,c,m,x),m!==null){var C=fn();cr(m,a,x,C),Yb(m,c,x)}}function FT(a,c,m){var x=Us(a),C={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(Gb(a))Kb(c,C);else{var I=a.alternate;if(a.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var O=c.lastRenderedState,Y=I(O,m);if(C.hasEagerState=!0,C.eagerState=Y,sr(Y,O)){var te=c.interleaved;te===null?(C.next=C,kp(c)):(C.next=te.next,te.next=C),c.interleaved=C;return}}catch{}finally{}m=jb(a,c,C,x),m!==null&&(C=fn(),cr(m,a,x,C),Yb(m,c,x))}}function Gb(a){var c=a.alternate;return a===mt||c!==null&&c===mt}function Kb(a,c){kl=Du=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function Yb(a,c,m){if((m&4194240)!==0){var x=c.lanes;x&=a.pendingLanes,m|=x,c.lanes=m,zh(a,m)}}var zu={readContext:Gn,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},OT={readContext:Gn,useCallback:function(a,c){return Fr().memoizedState=[a,c===void 0?null:c],a},useContext:Gn,useEffect:zb,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,Fu(4194308,4,Bb.bind(null,c,a),m)},useLayoutEffect:function(a,c){return Fu(4194308,4,a,c)},useInsertionEffect:function(a,c){return Fu(4,2,a,c)},useMemo:function(a,c){var m=Fr();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var x=Fr();return c=m!==void 0?m(c):c,x.memoizedState=x.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},x.queue=a,a=a.dispatch=DT.bind(null,mt,a),[x.memoizedState,a]},useRef:function(a){var c=Fr();return a={current:a},c.memoizedState=a},useState:Fb,useDebugValue:Fp,useDeferredValue:function(a){return Fr().memoizedState=a},useTransition:function(){var a=Fb(!1),c=a[0];return a=MT.bind(null,a[1]),Fr().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var x=mt,C=Fr();if(it){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),qt===null)throw Error(n(349));(Ii&30)!==0||Ib(x,c,m)}C.memoizedState=m;var I={value:m,getSnapshot:c};return C.queue=I,zb(Pb.bind(null,x,I,a),[a]),x.flags|=2048,_l(9,Ab.bind(null,x,I,m,c),void 0,null),m},useId:function(){var a=Fr(),c=qt.identifierPrefix;if(it){var m=ns,x=ts;m=(x&~(1<<32-Rn(x)-1)).toString(32)+m,c=":"+c+"R"+m,m=jl++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=PT++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},zT={readContext:Gn,useCallback:Vb,useContext:Gn,useEffect:Dp,useImperativeHandle:Wb,useInsertionEffect:$b,useLayoutEffect:Lb,useMemo:Ub,useReducer:Pp,useRef:Ob,useState:function(){return Pp(Cl)},useDebugValue:Fp,useDeferredValue:function(a){var c=Kn();return Hb(c,Ot.memoizedState,a)},useTransition:function(){var a=Pp(Cl)[0],c=Kn().memoizedState;return[a,c]},useMutableSource:Tb,useSyncExternalStore:Rb,useId:qb,unstable_isNewReconciler:!1},$T={readContext:Gn,useCallback:Vb,useContext:Gn,useEffect:Dp,useImperativeHandle:Wb,useInsertionEffect:$b,useLayoutEffect:Lb,useMemo:Ub,useReducer:Mp,useRef:Ob,useState:function(){return Mp(Cl)},useDebugValue:Fp,useDeferredValue:function(a){var c=Kn();return Ot===null?c.memoizedState=a:Hb(c,Ot.memoizedState,a)},useTransition:function(){var a=Mp(Cl)[0],c=Kn().memoizedState;return[a,c]},useMutableSource:Tb,useSyncExternalStore:Rb,useId:qb,unstable_isNewReconciler:!1};function or(a,c){if(a&&a.defaultProps){c=F({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function Op(a,c,m,x){c=a.memoizedState,m=m(x,c),m=m==null?c:F({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var $u={isMounted:function(a){return(a=a._reactInternals)?Ar(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var x=fn(),C=Us(a),I=ss(x,C);I.payload=c,m!=null&&(I.callback=m),c=Ls(a,I,C),c!==null&&(cr(c,a,C,x),Iu(c,a,C))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var x=fn(),C=Us(a),I=ss(x,C);I.tag=1,I.payload=c,m!=null&&(I.callback=m),c=Ls(a,I,C),c!==null&&(cr(c,a,C,x),Iu(c,a,C))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=fn(),x=Us(a),C=ss(m,x);C.tag=2,c!=null&&(C.callback=c),c=Ls(a,C,x),c!==null&&(cr(c,a,x,m),Iu(c,a,x))}};function Xb(a,c,m,x,C,I,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,I,O):c.prototype&&c.prototype.isPureReactComponent?!fl(m,x)||!fl(C,I):!0}function Jb(a,c,m){var x=!1,C=Os,I=c.contextType;return typeof I=="object"&&I!==null?I=Gn(I):(C=Sn(c)?_i:rn.current,x=c.contextTypes,I=(x=x!=null)?Eo(a,C):Os),c=new c(m,I),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=$u,a.stateNode=c,c._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=C,a.__reactInternalMemoizedMaskedChildContext=I),c}function Qb(a,c,m,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==a&&$u.enqueueReplaceState(c,c.state,null)}function zp(a,c,m,x){var C=a.stateNode;C.props=m,C.state=a.memoizedState,C.refs={},jp(a);var I=c.contextType;typeof I=="object"&&I!==null?C.context=Gn(I):(I=Sn(c)?_i:rn.current,C.context=Eo(a,I)),C.state=a.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Op(a,c,I,m),C.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&$u.enqueueReplaceState(C,C.state,null),Au(a,m,C,x),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308)}function Do(a,c){try{var m="",x=c;do m+=G(x),x=x.return;while(x);var C=m}catch(I){C=`
Error generating stack: `+I.message+`
`+I.stack}return{value:a,source:c,stack:C,digest:null}}function $p(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function Lp(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var LT=typeof WeakMap=="function"?WeakMap:Map;function Zb(a,c,m){m=ss(-1,m),m.tag=3,m.payload={element:null};var x=c.value;return m.callback=function(){qu||(qu=!0,tm=x),Lp(a,c)},m}function ev(a,c,m){m=ss(-1,m),m.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var C=c.value;m.payload=function(){return x(C)},m.callback=function(){Lp(a,c)}}var I=a.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){Lp(a,c),typeof x!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),m}function tv(a,c,m){var x=a.pingCache;if(x===null){x=a.pingCache=new LT;var C=new Set;x.set(c,C)}else C=x.get(c),C===void 0&&(C=new Set,x.set(c,C));C.has(m)||(C.add(m),a=e6.bind(null,a,c,m),c.then(a,a))}function nv(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function rv(a,c,m,x,C){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=ss(-1,1),c.tag=2,Ls(m,c,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=C,a)}var BT=_.ReactCurrentOwner,kn=!1;function dn(a,c,m,x){c.child=a===null?kb(c,null,m,x):Io(c,a.child,m,x)}function sv(a,c,m,x,C){m=m.render;var I=c.ref;return Po(c,C),x=Ip(a,c,m,x,I,C),m=Ap(),a!==null&&!kn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,is(a,c,C)):(it&&m&&pp(c),c.flags|=1,dn(a,c,x,C),c.child)}function iv(a,c,m,x,C){if(a===null){var I=m.type;return typeof I=="function"&&!lm(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=I,ov(a,c,I,x,C)):(a=Qu(m.type,null,x,c,c.mode,C),a.ref=c.ref,a.return=c,c.child=a)}if(I=a.child,(a.lanes&C)===0){var O=I.memoizedProps;if(m=m.compare,m=m!==null?m:fl,m(O,x)&&a.ref===c.ref)return is(a,c,C)}return c.flags|=1,a=qs(I,x),a.ref=c.ref,a.return=c,c.child=a}function ov(a,c,m,x,C){if(a!==null){var I=a.memoizedProps;if(fl(I,x)&&a.ref===c.ref)if(kn=!1,c.pendingProps=x=I,(a.lanes&C)!==0)(a.flags&131072)!==0&&(kn=!0);else return c.lanes=a.lanes,is(a,c,C)}return Bp(a,c,m,x,C)}function av(a,c,m){var x=c.pendingProps,C=x.children,I=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Oo,Mn),Mn|=m;else{if((m&1073741824)===0)return a=I!==null?I.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Ze(Oo,Mn),Mn|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=I!==null?I.baseLanes:m,Ze(Oo,Mn),Mn|=x}else I!==null?(x=I.baseLanes|m,c.memoizedState=null):x=m,Ze(Oo,Mn),Mn|=x;return dn(a,c,C,m),c.child}function lv(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Bp(a,c,m,x,C){var I=Sn(m)?_i:rn.current;return I=Eo(c,I),Po(c,C),m=Ip(a,c,m,x,I,C),x=Ap(),a!==null&&!kn?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,is(a,c,C)):(it&&x&&pp(c),c.flags|=1,dn(a,c,m,C),c.child)}function cv(a,c,m,x,C){if(Sn(m)){var I=!0;ku(c)}else I=!1;if(Po(c,C),c.stateNode===null)Bu(a,c),Jb(c,m,x),zp(c,m,x,C),x=!0;else if(a===null){var O=c.stateNode,Y=c.memoizedProps;O.props=Y;var te=O.context,ce=m.contextType;typeof ce=="object"&&ce!==null?ce=Gn(ce):(ce=Sn(m)?_i:rn.current,ce=Eo(c,ce));var ge=m.getDerivedStateFromProps,ye=typeof ge=="function"||typeof O.getSnapshotBeforeUpdate=="function";ye||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==x||te!==ce)&&Qb(c,O,x,ce),$s=!1;var me=c.memoizedState;O.state=me,Au(c,x,O,C),te=c.memoizedState,Y!==x||me!==te||wn.current||$s?(typeof ge=="function"&&(Op(c,m,ge,x),te=c.memoizedState),(Y=$s||Xb(c,m,Y,x,me,te,ce))?(ye||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=te),O.props=x,O.state=te,O.context=ce,x=Y):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{O=c.stateNode,Cb(a,c),Y=c.memoizedProps,ce=c.type===c.elementType?Y:or(c.type,Y),O.props=ce,ye=c.pendingProps,me=O.context,te=m.contextType,typeof te=="object"&&te!==null?te=Gn(te):(te=Sn(m)?_i:rn.current,te=Eo(c,te));var Se=m.getDerivedStateFromProps;(ge=typeof Se=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==ye||me!==te)&&Qb(c,O,x,te),$s=!1,me=c.memoizedState,O.state=me,Au(c,x,O,C);var Ee=c.memoizedState;Y!==ye||me!==Ee||wn.current||$s?(typeof Se=="function"&&(Op(c,m,Se,x),Ee=c.memoizedState),(ce=$s||Xb(c,m,ce,x,me,Ee,te)||!1)?(ge||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(x,Ee,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(x,Ee,te)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===a.memoizedProps&&me===a.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&me===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ee),O.props=x,O.state=Ee,O.context=te,x=ce):(typeof O.componentDidUpdate!="function"||Y===a.memoizedProps&&me===a.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&me===a.memoizedState||(c.flags|=1024),x=!1)}return Wp(a,c,m,x,I,C)}function Wp(a,c,m,x,C,I){lv(a,c);var O=(c.flags&128)!==0;if(!x&&!O)return C&&pb(c,m,!1),is(a,c,I);x=c.stateNode,BT.current=c;var Y=O&&typeof m.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,a!==null&&O?(c.child=Io(c,a.child,null,I),c.child=Io(c,null,Y,I)):dn(a,c,Y,I),c.memoizedState=x.state,C&&pb(c,m,!0),c.child}function uv(a){var c=a.stateNode;c.pendingContext?fb(a,c.pendingContext,c.pendingContext!==c.context):c.context&&fb(a,c.context,!1),Cp(a,c.containerInfo)}function dv(a,c,m,x,C){return Ro(),xp(C),c.flags|=256,dn(a,c,m,x),c.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function Up(a){return{baseLanes:a,cachePool:null,transitions:null}}function fv(a,c,m){var x=c.pendingProps,C=pt.current,I=!1,O=(c.flags&128)!==0,Y;if((Y=O)||(Y=a!==null&&a.memoizedState===null?!1:(C&2)!==0),Y?(I=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(C|=1),Ze(pt,C&1),a===null)return yp(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=x.children,a=x.fallback,I?(x=c.mode,I=c.child,O={mode:"hidden",children:O},(x&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=O):I=Zu(O,x,0,null),a=Fi(a,x,m,null),I.return=c,a.return=c,I.sibling=a,c.child=I,c.child.memoizedState=Up(m),c.memoizedState=Vp,a):Hp(c,O));if(C=a.memoizedState,C!==null&&(Y=C.dehydrated,Y!==null))return WT(a,c,O,x,Y,C,m);if(I){I=x.fallback,O=c.mode,C=a.child,Y=C.sibling;var te={mode:"hidden",children:x.children};return(O&1)===0&&c.child!==C?(x=c.child,x.childLanes=0,x.pendingProps=te,c.deletions=null):(x=qs(C,te),x.subtreeFlags=C.subtreeFlags&14680064),Y!==null?I=qs(Y,I):(I=Fi(I,O,m,null),I.flags|=2),I.return=c,x.return=c,x.sibling=I,c.child=x,x=I,I=c.child,O=a.child.memoizedState,O=O===null?Up(m):{baseLanes:O.baseLanes|m,cachePool:null,transitions:O.transitions},I.memoizedState=O,I.childLanes=a.childLanes&~m,c.memoizedState=Vp,x}return I=a.child,a=I.sibling,x=qs(I,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=m),x.return=c,x.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=x,c.memoizedState=null,x}function Hp(a,c){return c=Zu({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Lu(a,c,m,x){return x!==null&&xp(x),Io(c,a.child,null,m),a=Hp(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function WT(a,c,m,x,C,I,O){if(m)return c.flags&256?(c.flags&=-257,x=$p(Error(n(422))),Lu(a,c,O,x)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(I=x.fallback,C=c.mode,x=Zu({mode:"visible",children:x.children},C,0,null),I=Fi(I,C,O,null),I.flags|=2,x.return=c,I.return=c,x.sibling=I,c.child=x,(c.mode&1)!==0&&Io(c,a.child,null,O),c.child.memoizedState=Up(O),c.memoizedState=Vp,I);if((c.mode&1)===0)return Lu(a,c,O,null);if(C.data==="$!"){if(x=C.nextSibling&&C.nextSibling.dataset,x)var Y=x.dgst;return x=Y,I=Error(n(419)),x=$p(I,x,void 0),Lu(a,c,O,x)}if(Y=(O&a.childLanes)!==0,kn||Y){if(x=qt,x!==null){switch(O&-O){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(x.suspendedLanes|O))!==0?0:C,C!==0&&C!==I.retryLane&&(I.retryLane=C,rs(a,C),cr(x,a,C,-1))}return am(),x=$p(Error(n(421))),Lu(a,c,O,x)}return C.data==="$?"?(c.flags|=128,c.child=a.child,c=t6.bind(null,a),C._reactRetry=c,null):(a=I.treeContext,Pn=Ds(C.nextSibling),An=c,it=!0,ir=null,a!==null&&(Hn[qn++]=ts,Hn[qn++]=ns,Hn[qn++]=Ei,ts=a.id,ns=a.overflow,Ei=c),c=Hp(c,x.children),c.flags|=4096,c)}function hv(a,c,m){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),Sp(a.return,c,m)}function qp(a,c,m,x,C){var I=a.memoizedState;I===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:C}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=m,I.tailMode=C)}function pv(a,c,m){var x=c.pendingProps,C=x.revealOrder,I=x.tail;if(dn(a,c,x.children,m),x=pt.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hv(a,m,c);else if(a.tag===19)hv(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(Ze(pt,x),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(m=c.child,C=null;m!==null;)a=m.alternate,a!==null&&Pu(a)===null&&(C=m),m=m.sibling;m=C,m===null?(C=c.child,c.child=null):(C=m.sibling,m.sibling=null),qp(c,!1,C,m,I);break;case"backwards":for(m=null,C=c.child,c.child=null;C!==null;){if(a=C.alternate,a!==null&&Pu(a)===null){c.child=C;break}a=C.sibling,C.sibling=m,m=C,C=a}qp(c,!0,m,null,I);break;case"together":qp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Bu(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function is(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Ai|=c.lanes,(m&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=qs(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=qs(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function VT(a,c,m){switch(c.tag){case 3:uv(c),Ro();break;case 5:Nb(c);break;case 1:Sn(c.type)&&ku(c);break;case 4:Cp(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,C=c.memoizedProps.value;Ze(Tu,x._currentValue),x._currentValue=C;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(Ze(pt,pt.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?fv(a,c,m):(Ze(pt,pt.current&1),a=is(a,c,m),a!==null?a.sibling:null);Ze(pt,pt.current&1);break;case 19:if(x=(m&c.childLanes)!==0,(a.flags&128)!==0){if(x)return pv(a,c,m);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Ze(pt,pt.current),x)break;return null;case 22:case 23:return c.lanes=0,av(a,c,m)}return is(a,c,m)}var mv,Gp,gv,yv;mv=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Gp=function(){},gv=function(a,c,m,x){var C=a.memoizedProps;if(C!==x){a=c.stateNode,Ri(Dr.current);var I=null;switch(m){case"input":C=de(a,C),x=de(a,x),I=[];break;case"select":C=F({},C,{value:void 0}),x=F({},x,{value:void 0}),I=[];break;case"textarea":C=We(a,C),x=We(a,x),I=[];break;default:typeof C.onClick!="function"&&typeof x.onClick=="function"&&(a.onclick=vu)}Ns(m,x);var O;m=null;for(ce in C)if(!x.hasOwnProperty(ce)&&C.hasOwnProperty(ce)&&C[ce]!=null)if(ce==="style"){var Y=C[ce];for(O in Y)Y.hasOwnProperty(O)&&(m||(m={}),m[O]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(s.hasOwnProperty(ce)?I||(I=[]):(I=I||[]).push(ce,null));for(ce in x){var te=x[ce];if(Y=C!=null?C[ce]:void 0,x.hasOwnProperty(ce)&&te!==Y&&(te!=null||Y!=null))if(ce==="style")if(Y){for(O in Y)!Y.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(m||(m={}),m[O]="");for(O in te)te.hasOwnProperty(O)&&Y[O]!==te[O]&&(m||(m={}),m[O]=te[O])}else m||(I||(I=[]),I.push(ce,m)),m=te;else ce==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Y=Y?Y.__html:void 0,te!=null&&Y!==te&&(I=I||[]).push(ce,te)):ce==="children"?typeof te!="string"&&typeof te!="number"||(I=I||[]).push(ce,""+te):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(ce)?(te!=null&&ce==="onScroll"&&rt("scroll",a),I||Y===te||(I=[])):(I=I||[]).push(ce,te))}m&&(I=I||[]).push("style",m);var ce=I;(c.updateQueue=ce)&&(c.flags|=4)}},yv=function(a,c,m,x){m!==x&&(c.flags|=4)};function El(a,c){if(!it)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function on(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,x=0;if(c)for(var C=a.child;C!==null;)m|=C.lanes|C.childLanes,x|=C.subtreeFlags&14680064,x|=C.flags&14680064,C.return=a,C=C.sibling;else for(C=a.child;C!==null;)m|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=a,C=C.sibling;return a.subtreeFlags|=x,a.childLanes=m,c}function UT(a,c,m){var x=c.pendingProps;switch(mp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(c),null;case 1:return Sn(c.type)&&Su(),on(c),null;case 3:return x=c.stateNode,Mo(),st(wn),st(rn),Np(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(Eu(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ir!==null&&(sm(ir),ir=null))),Gp(a,c),on(c),null;case 5:_p(c);var C=Ri(Sl.current);if(m=c.type,a!==null&&c.stateNode!=null)gv(a,c,m,x,C),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(n(166));return on(c),null}if(a=Ri(Dr.current),Eu(c)){x=c.stateNode,m=c.type;var I=c.memoizedProps;switch(x[Mr]=c,x[yl]=I,a=(c.mode&1)!==0,m){case"dialog":rt("cancel",x),rt("close",x);break;case"iframe":case"object":case"embed":rt("load",x);break;case"video":case"audio":for(C=0;C<pl.length;C++)rt(pl[C],x);break;case"source":rt("error",x);break;case"img":case"image":case"link":rt("error",x),rt("load",x);break;case"details":rt("toggle",x);break;case"input":he(x,I),rt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!I.multiple},rt("invalid",x);break;case"textarea":St(x,I),rt("invalid",x)}Ns(m,I),C=null;for(var O in I)if(I.hasOwnProperty(O)){var Y=I[O];O==="children"?typeof Y=="string"?x.textContent!==Y&&(I.suppressHydrationWarning!==!0&&bu(x.textContent,Y,a),C=["children",Y]):typeof Y=="number"&&x.textContent!==""+Y&&(I.suppressHydrationWarning!==!0&&bu(x.textContent,Y,a),C=["children",""+Y]):s.hasOwnProperty(O)&&Y!=null&&O==="onScroll"&&rt("scroll",x)}switch(m){case"input":le(x),Be(x,I,!0);break;case"textarea":le(x),Vn(x);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(x.onclick=vu)}x=C,c.updateQueue=x,x!==null&&(c.flags|=4)}else{O=C.nodeType===9?C:C.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof x.is=="string"?a=O.createElement(m,{is:x.is}):(a=O.createElement(m),m==="select"&&(O=a,x.multiple?O.multiple=!0:x.size&&(O.size=x.size))):a=O.createElementNS(a,m),a[Mr]=c,a[yl]=x,mv(a,c,!1,!1),c.stateNode=a;e:{switch(O=bi(m,x),m){case"dialog":rt("cancel",a),rt("close",a),C=x;break;case"iframe":case"object":case"embed":rt("load",a),C=x;break;case"video":case"audio":for(C=0;C<pl.length;C++)rt(pl[C],a);C=x;break;case"source":rt("error",a),C=x;break;case"img":case"image":case"link":rt("error",a),rt("load",a),C=x;break;case"details":rt("toggle",a),C=x;break;case"input":he(a,x),C=de(a,x),rt("invalid",a);break;case"option":C=x;break;case"select":a._wrapperState={wasMultiple:!!x.multiple},C=F({},x,{value:void 0}),rt("invalid",a);break;case"textarea":St(a,x),C=We(a,x),rt("invalid",a);break;default:C=x}Ns(m,C),Y=C;for(I in Y)if(Y.hasOwnProperty(I)){var te=Y[I];I==="style"?Jr(a,te):I==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&tr(a,te)):I==="children"?typeof te=="string"?(m!=="textarea"||te!=="")&&qe(a,te):typeof te=="number"&&qe(a,""+te):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?te!=null&&I==="onScroll"&&rt("scroll",a):te!=null&&k(a,I,te,O))}switch(m){case"input":le(a),Be(a,x,!1);break;case"textarea":le(a),Vn(a);break;case"option":x.value!=null&&a.setAttribute("value",""+q(x.value));break;case"select":a.multiple=!!x.multiple,I=x.value,I!=null?dt(a,!!x.multiple,I,!1):x.defaultValue!=null&&dt(a,!!x.multiple,x.defaultValue,!0);break;default:typeof C.onClick=="function"&&(a.onclick=vu)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return on(c),null;case 6:if(a&&c.stateNode!=null)yv(a,c,a.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(n(166));if(m=Ri(Sl.current),Ri(Dr.current),Eu(c)){if(x=c.stateNode,m=c.memoizedProps,x[Mr]=c,(I=x.nodeValue!==m)&&(a=An,a!==null))switch(a.tag){case 3:bu(x.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&bu(x.nodeValue,m,(a.mode&1)!==0)}I&&(c.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[Mr]=c,c.stateNode=x}return on(c),null;case 13:if(st(pt),x=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(it&&Pn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)vb(),Ro(),c.flags|=98560,I=!1;else if(I=Eu(c),x!==null&&x.dehydrated!==null){if(a===null){if(!I)throw Error(n(318));if(I=c.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[Mr]=c}else Ro(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;on(c),I=!1}else ir!==null&&(sm(ir),ir=null),I=!0;if(!I)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(x=x!==null,x!==(a!==null&&a.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(pt.current&1)!==0?zt===0&&(zt=3):am())),c.updateQueue!==null&&(c.flags|=4),on(c),null);case 4:return Mo(),Gp(a,c),a===null&&ml(c.stateNode.containerInfo),on(c),null;case 10:return wp(c.type._context),on(c),null;case 17:return Sn(c.type)&&Su(),on(c),null;case 19:if(st(pt),I=c.memoizedState,I===null)return on(c),null;if(x=(c.flags&128)!==0,O=I.rendering,O===null)if(x)El(I,!1);else{if(zt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(O=Pu(a),O!==null){for(c.flags|=128,El(I,!1),x=O.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=m,m=c.child;m!==null;)I=m,a=x,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=a,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,a=O.dependencies,I.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return Ze(pt,pt.current&1|2),c.child}a=a.sibling}I.tail!==null&&ht()>zo&&(c.flags|=128,x=!0,El(I,!1),c.lanes=4194304)}else{if(!x)if(a=Pu(O),a!==null){if(c.flags|=128,x=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),El(I,!0),I.tail===null&&I.tailMode==="hidden"&&!O.alternate&&!it)return on(c),null}else 2*ht()-I.renderingStartTime>zo&&m!==1073741824&&(c.flags|=128,x=!0,El(I,!1),c.lanes=4194304);I.isBackwards?(O.sibling=c.child,c.child=O):(m=I.last,m!==null?m.sibling=O:c.child=O,I.last=O)}return I.tail!==null?(c=I.tail,I.rendering=c,I.tail=c.sibling,I.renderingStartTime=ht(),c.sibling=null,m=pt.current,Ze(pt,x?m&1|2:m&1),c):(on(c),null);case 22:case 23:return om(),x=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Mn&1073741824)!==0&&(on(c),c.subtreeFlags&6&&(c.flags|=8192)):on(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function HT(a,c){switch(mp(c),c.tag){case 1:return Sn(c.type)&&Su(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Mo(),st(wn),st(rn),Np(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return _p(c),null;case 13:if(st(pt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Ro()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return st(pt),null;case 4:return Mo(),null;case 10:return wp(c.type._context),null;case 22:case 23:return om(),null;case 24:return null;default:return null}}var Wu=!1,an=!1,qT=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Fo(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){bt(a,c,x)}else m.current=null}function Kp(a,c,m){try{m()}catch(x){bt(a,c,x)}}var xv=!1;function GT(a,c){if(op=lu,a=Xx(),Qh(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var C=x.anchorOffset,I=x.focusNode;x=x.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var O=0,Y=-1,te=-1,ce=0,ge=0,ye=a,me=null;t:for(;;){for(var Se;ye!==m||C!==0&&ye.nodeType!==3||(Y=O+C),ye!==I||x!==0&&ye.nodeType!==3||(te=O+x),ye.nodeType===3&&(O+=ye.nodeValue.length),(Se=ye.firstChild)!==null;)me=ye,ye=Se;for(;;){if(ye===a)break t;if(me===m&&++ce===C&&(Y=O),me===I&&++ge===x&&(te=O),(Se=ye.nextSibling)!==null)break;ye=me,me=ye.parentNode}ye=Se}m=Y===-1||te===-1?null:{start:Y,end:te}}else m=null}m=m||{start:0,end:0}}else m=null;for(ap={focusedElem:a,selectionRange:m},lu=!1,Ce=c;Ce!==null;)if(c=Ce,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Ce=a;else for(;Ce!==null;){c=Ce;try{var Ee=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Ie=Ee.memoizedProps,Ct=Ee.memoizedState,oe=c.stateNode,re=oe.getSnapshotBeforeUpdate(c.elementType===c.type?Ie:or(c.type,Ie),Ct);oe.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ae=c.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(be){bt(c,c.return,be)}if(a=c.sibling,a!==null){a.return=c.return,Ce=a;break}Ce=c.return}return Ee=xv,xv=!1,Ee}function Nl(a,c,m){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var C=x=x.next;do{if((C.tag&a)===a){var I=C.destroy;C.destroy=void 0,I!==void 0&&Kp(c,m,I)}C=C.next}while(C!==x)}}function Vu(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var x=m.create;m.destroy=x()}m=m.next}while(m!==c)}}function Yp(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function bv(a){var c=a.alternate;c!==null&&(a.alternate=null,bv(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Mr],delete c[yl],delete c[dp],delete c[TT],delete c[RT])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function vv(a){return a.tag===5||a.tag===3||a.tag===4}function wv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||vv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xp(a,c,m){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=vu));else if(x!==4&&(a=a.child,a!==null))for(Xp(a,c,m),a=a.sibling;a!==null;)Xp(a,c,m),a=a.sibling}function Jp(a,c,m){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(x!==4&&(a=a.child,a!==null))for(Jp(a,c,m),a=a.sibling;a!==null;)Jp(a,c,m),a=a.sibling}var Xt=null,ar=!1;function Bs(a,c,m){for(m=m.child;m!==null;)Sv(a,c,m),m=m.sibling}function Sv(a,c,m){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(ki,m)}catch{}switch(m.tag){case 5:an||Fo(m,c);case 6:var x=Xt,C=ar;Xt=null,Bs(a,c,m),Xt=x,ar=C,Xt!==null&&(ar?(a=Xt,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):Xt.removeChild(m.stateNode));break;case 18:Xt!==null&&(ar?(a=Xt,m=m.stateNode,a.nodeType===8?up(a.parentNode,m):a.nodeType===1&&up(a,m),ol(a)):up(Xt,m.stateNode));break;case 4:x=Xt,C=ar,Xt=m.stateNode.containerInfo,ar=!0,Bs(a,c,m),Xt=x,ar=C;break;case 0:case 11:case 14:case 15:if(!an&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){C=x=x.next;do{var I=C,O=I.destroy;I=I.tag,O!==void 0&&((I&2)!==0||(I&4)!==0)&&Kp(m,c,O),C=C.next}while(C!==x)}Bs(a,c,m);break;case 1:if(!an&&(Fo(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(Y){bt(m,c,Y)}Bs(a,c,m);break;case 21:Bs(a,c,m);break;case 22:m.mode&1?(an=(x=an)||m.memoizedState!==null,Bs(a,c,m),an=x):Bs(a,c,m);break;default:Bs(a,c,m)}}function kv(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new qT),c.forEach(function(x){var C=n6.bind(null,a,x);m.has(x)||(m.add(x),x.then(C,C))})}}function lr(a,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var C=m[x];try{var I=a,O=c,Y=O;e:for(;Y!==null;){switch(Y.tag){case 5:Xt=Y.stateNode,ar=!1;break e;case 3:Xt=Y.stateNode.containerInfo,ar=!0;break e;case 4:Xt=Y.stateNode.containerInfo,ar=!0;break e}Y=Y.return}if(Xt===null)throw Error(n(160));Sv(I,O,C),Xt=null,ar=!1;var te=C.alternate;te!==null&&(te.return=null),C.return=null}catch(ce){bt(C,c,ce)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)jv(c,a),c=c.sibling}function jv(a,c){var m=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(lr(c,a),Or(a),x&4){try{Nl(3,a,a.return),Vu(3,a)}catch(Ie){bt(a,a.return,Ie)}try{Nl(5,a,a.return)}catch(Ie){bt(a,a.return,Ie)}}break;case 1:lr(c,a),Or(a),x&512&&m!==null&&Fo(m,m.return);break;case 5:if(lr(c,a),Or(a),x&512&&m!==null&&Fo(m,m.return),a.flags&32){var C=a.stateNode;try{qe(C,"")}catch(Ie){bt(a,a.return,Ie)}}if(x&4&&(C=a.stateNode,C!=null)){var I=a.memoizedProps,O=m!==null?m.memoizedProps:I,Y=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{Y==="input"&&I.type==="radio"&&I.name!=null&&pe(C,I),bi(Y,O);var ce=bi(Y,I);for(O=0;O<te.length;O+=2){var ge=te[O],ye=te[O+1];ge==="style"?Jr(C,ye):ge==="dangerouslySetInnerHTML"?tr(C,ye):ge==="children"?qe(C,ye):k(C,ge,ye,ce)}switch(Y){case"input":_e(C,I);break;case"textarea":Tn(C,I);break;case"select":var me=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!I.multiple;var Se=I.value;Se!=null?dt(C,!!I.multiple,Se,!1):me!==!!I.multiple&&(I.defaultValue!=null?dt(C,!!I.multiple,I.defaultValue,!0):dt(C,!!I.multiple,I.multiple?[]:"",!1))}C[yl]=I}catch(Ie){bt(a,a.return,Ie)}}break;case 6:if(lr(c,a),Or(a),x&4){if(a.stateNode===null)throw Error(n(162));C=a.stateNode,I=a.memoizedProps;try{C.nodeValue=I}catch(Ie){bt(a,a.return,Ie)}}break;case 3:if(lr(c,a),Or(a),x&4&&m!==null&&m.memoizedState.isDehydrated)try{ol(c.containerInfo)}catch(Ie){bt(a,a.return,Ie)}break;case 4:lr(c,a),Or(a);break;case 13:lr(c,a),Or(a),C=a.child,C.flags&8192&&(I=C.memoizedState!==null,C.stateNode.isHidden=I,!I||C.alternate!==null&&C.alternate.memoizedState!==null||(em=ht())),x&4&&kv(a);break;case 22:if(ge=m!==null&&m.memoizedState!==null,a.mode&1?(an=(ce=an)||ge,lr(c,a),an=ce):lr(c,a),Or(a),x&8192){if(ce=a.memoizedState!==null,(a.stateNode.isHidden=ce)&&!ge&&(a.mode&1)!==0)for(Ce=a,ge=a.child;ge!==null;){for(ye=Ce=ge;Ce!==null;){switch(me=Ce,Se=me.child,me.tag){case 0:case 11:case 14:case 15:Nl(4,me,me.return);break;case 1:Fo(me,me.return);var Ee=me.stateNode;if(typeof Ee.componentWillUnmount=="function"){x=me,m=me.return;try{c=x,Ee.props=c.memoizedProps,Ee.state=c.memoizedState,Ee.componentWillUnmount()}catch(Ie){bt(x,m,Ie)}}break;case 5:Fo(me,me.return);break;case 22:if(me.memoizedState!==null){Ev(ye);continue}}Se!==null?(Se.return=me,Ce=Se):Ev(ye)}ge=ge.sibling}e:for(ge=null,ye=a;;){if(ye.tag===5){if(ge===null){ge=ye;try{C=ye.stateNode,ce?(I=C.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(Y=ye.stateNode,te=ye.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,Y.style.display=nr("display",O))}catch(Ie){bt(a,a.return,Ie)}}}else if(ye.tag===6){if(ge===null)try{ye.stateNode.nodeValue=ce?"":ye.memoizedProps}catch(Ie){bt(a,a.return,Ie)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===a)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===a)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===a)break e;ge===ye&&(ge=null),ye=ye.return}ge===ye&&(ge=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:lr(c,a),Or(a),x&4&&kv(a);break;case 21:break;default:lr(c,a),Or(a)}}function Or(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(vv(m)){var x=m;break e}m=m.return}throw Error(n(160))}switch(x.tag){case 5:var C=x.stateNode;x.flags&32&&(qe(C,""),x.flags&=-33);var I=wv(a);Jp(a,I,C);break;case 3:case 4:var O=x.stateNode.containerInfo,Y=wv(a);Xp(a,Y,O);break;default:throw Error(n(161))}}catch(te){bt(a,a.return,te)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function KT(a,c,m){Ce=a,Cv(a)}function Cv(a,c,m){for(var x=(a.mode&1)!==0;Ce!==null;){var C=Ce,I=C.child;if(C.tag===22&&x){var O=C.memoizedState!==null||Wu;if(!O){var Y=C.alternate,te=Y!==null&&Y.memoizedState!==null||an;Y=Wu;var ce=an;if(Wu=O,(an=te)&&!ce)for(Ce=C;Ce!==null;)O=Ce,te=O.child,O.tag===22&&O.memoizedState!==null?Nv(C):te!==null?(te.return=O,Ce=te):Nv(C);for(;I!==null;)Ce=I,Cv(I),I=I.sibling;Ce=C,Wu=Y,an=ce}_v(a)}else(C.subtreeFlags&8772)!==0&&I!==null?(I.return=C,Ce=I):_v(a)}}function _v(a){for(;Ce!==null;){var c=Ce;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:an||Vu(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!an)if(m===null)x.componentDidMount();else{var C=c.elementType===c.type?m.memoizedProps:or(c.type,m.memoizedProps);x.componentDidUpdate(C,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var I=c.updateQueue;I!==null&&Eb(c,I,x);break;case 3:var O=c.updateQueue;if(O!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Eb(c,O,m)}break;case 5:var Y=c.stateNode;if(m===null&&c.flags&4){m=Y;var te=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&m.focus();break;case"img":te.src&&(m.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ce=c.alternate;if(ce!==null){var ge=ce.memoizedState;if(ge!==null){var ye=ge.dehydrated;ye!==null&&ol(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}an||c.flags&512&&Yp(c)}catch(me){bt(c,c.return,me)}}if(c===a){Ce=null;break}if(m=c.sibling,m!==null){m.return=c.return,Ce=m;break}Ce=c.return}}function Ev(a){for(;Ce!==null;){var c=Ce;if(c===a){Ce=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Ce=m;break}Ce=c.return}}function Nv(a){for(;Ce!==null;){var c=Ce;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Vu(4,c)}catch(te){bt(c,m,te)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var C=c.return;try{x.componentDidMount()}catch(te){bt(c,C,te)}}var I=c.return;try{Yp(c)}catch(te){bt(c,I,te)}break;case 5:var O=c.return;try{Yp(c)}catch(te){bt(c,O,te)}}}catch(te){bt(c,c.return,te)}if(c===a){Ce=null;break}var Y=c.sibling;if(Y!==null){Y.return=c.return,Ce=Y;break}Ce=c.return}}var YT=Math.ceil,Uu=_.ReactCurrentDispatcher,Qp=_.ReactCurrentOwner,Yn=_.ReactCurrentBatchConfig,Ke=0,qt=null,Et=null,Jt=0,Mn=0,Oo=Fs(0),zt=0,Tl=null,Ai=0,Hu=0,Zp=0,Rl=null,jn=null,em=0,zo=1/0,os=null,qu=!1,tm=null,Ws=null,Gu=!1,Vs=null,Ku=0,Il=0,nm=null,Yu=-1,Xu=0;function fn(){return(Ke&6)!==0?ht():Yu!==-1?Yu:Yu=ht()}function Us(a){return(a.mode&1)===0?1:(Ke&2)!==0&&Jt!==0?Jt&-Jt:AT.transition!==null?(Xu===0&&(Xu=yo()),Xu):(a=Xe,a!==0||(a=window.event,a=a===void 0?16:Rx(a.type)),a)}function cr(a,c,m,x){if(50<Il)throw Il=0,nm=null,Error(n(185));ji(a,m,x),((Ke&2)===0||a!==qt)&&(a===qt&&((Ke&2)===0&&(Hu|=m),zt===4&&Hs(a,Jt)),Cn(a,x),m===1&&Ke===0&&(c.mode&1)===0&&(zo=ht()+500,ju&&zs()))}function Cn(a,c){var m=a.callbackNode;Oh(a,c);var x=go(a,a===qt?Jt:0);if(x===0)m!==null&&eu(m),a.callbackNode=null,a.callbackPriority=0;else if(c=x&-x,a.callbackPriority!==c){if(m!=null&&eu(m),c===1)a.tag===0?IT(Rv.bind(null,a)):mb(Rv.bind(null,a)),ET(function(){(Ke&6)===0&&zs()}),m=null;else{switch(Sx(x)){case 1:m=Za;break;case 4:m=nu;break;case 16:m=ho;break;case 536870912:m=ru;break;default:m=ho}m=zv(m,Tv.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function Tv(a,c){if(Yu=-1,Xu=0,(Ke&6)!==0)throw Error(n(327));var m=a.callbackNode;if($o()&&a.callbackNode!==m)return null;var x=go(a,a===qt?Jt:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||c)c=Ju(a,x);else{c=x;var C=Ke;Ke|=2;var I=Av();(qt!==a||Jt!==c)&&(os=null,zo=ht()+500,Mi(a,c));do try{QT();break}catch(Y){Iv(a,Y)}while(!0);vp(),Uu.current=I,Ke=C,Et!==null?c=0:(qt=null,Jt=0,c=zt)}if(c!==0){if(c===2&&(C=el(a),C!==0&&(x=C,c=rm(a,C))),c===1)throw m=Tl,Mi(a,0),Hs(a,x),Cn(a,ht()),m;if(c===6)Hs(a,x);else{if(C=a.current.alternate,(x&30)===0&&!XT(C)&&(c=Ju(a,x),c===2&&(I=el(a),I!==0&&(x=I,c=rm(a,I))),c===1))throw m=Tl,Mi(a,0),Hs(a,x),Cn(a,ht()),m;switch(a.finishedWork=C,a.finishedLanes=x,c){case 0:case 1:throw Error(n(345));case 2:Di(a,jn,os);break;case 3:if(Hs(a,x),(x&130023424)===x&&(c=em+500-ht(),10<c)){if(go(a,0)!==0)break;if(C=a.suspendedLanes,(C&x)!==x){fn(),a.pingedLanes|=a.suspendedLanes&C;break}a.timeoutHandle=cp(Di.bind(null,a,jn,os),c);break}Di(a,jn,os);break;case 4:if(Hs(a,x),(x&4194240)===x)break;for(c=a.eventTimes,C=-1;0<x;){var O=31-Rn(x);I=1<<O,O=c[O],O>C&&(C=O),x&=~I}if(x=C,x=ht()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*YT(x/1960))-x,10<x){a.timeoutHandle=cp(Di.bind(null,a,jn,os),x);break}Di(a,jn,os);break;case 5:Di(a,jn,os);break;default:throw Error(n(329))}}}return Cn(a,ht()),a.callbackNode===m?Tv.bind(null,a):null}function rm(a,c){var m=Rl;return a.current.memoizedState.isDehydrated&&(Mi(a,c).flags|=256),a=Ju(a,c),a!==2&&(c=jn,jn=m,c!==null&&sm(c)),a}function sm(a){jn===null?jn=a:jn.push.apply(jn,a)}function XT(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var C=m[x],I=C.getSnapshot;C=C.value;try{if(!sr(I(),C))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Hs(a,c){for(c&=~Zp,c&=~Hu,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-Rn(c),x=1<<m;a[m]=-1,c&=~x}}function Rv(a){if((Ke&6)!==0)throw Error(n(327));$o();var c=go(a,0);if((c&1)===0)return Cn(a,ht()),null;var m=Ju(a,c);if(a.tag!==0&&m===2){var x=el(a);x!==0&&(c=x,m=rm(a,x))}if(m===1)throw m=Tl,Mi(a,0),Hs(a,c),Cn(a,ht()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Di(a,jn,os),Cn(a,ht()),null}function im(a,c){var m=Ke;Ke|=1;try{return a(c)}finally{Ke=m,Ke===0&&(zo=ht()+500,ju&&zs())}}function Pi(a){Vs!==null&&Vs.tag===0&&(Ke&6)===0&&$o();var c=Ke;Ke|=1;var m=Yn.transition,x=Xe;try{if(Yn.transition=null,Xe=1,a)return a()}finally{Xe=x,Yn.transition=m,Ke=c,(Ke&6)===0&&zs()}}function om(){Mn=Oo.current,st(Oo)}function Mi(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,_T(m)),Et!==null)for(m=Et.return;m!==null;){var x=m;switch(mp(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Su();break;case 3:Mo(),st(wn),st(rn),Np();break;case 5:_p(x);break;case 4:Mo();break;case 13:st(pt);break;case 19:st(pt);break;case 10:wp(x.type._context);break;case 22:case 23:om()}m=m.return}if(qt=a,Et=a=qs(a.current,null),Jt=Mn=c,zt=0,Tl=null,Zp=Hu=Ai=0,jn=Rl=null,Ti!==null){for(c=0;c<Ti.length;c++)if(m=Ti[c],x=m.interleaved,x!==null){m.interleaved=null;var C=x.next,I=m.pending;if(I!==null){var O=I.next;I.next=C,x.next=O}m.pending=x}Ti=null}return a}function Iv(a,c){do{var m=Et;try{if(vp(),Mu.current=zu,Du){for(var x=mt.memoizedState;x!==null;){var C=x.queue;C!==null&&(C.pending=null),x=x.next}Du=!1}if(Ii=0,Ht=Ot=mt=null,kl=!1,jl=0,Qp.current=null,m===null||m.return===null){zt=1,Tl=c,Et=null;break}e:{var I=a,O=m.return,Y=m,te=c;if(c=Jt,Y.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var ce=te,ge=Y,ye=ge.tag;if((ge.mode&1)===0&&(ye===0||ye===11||ye===15)){var me=ge.alternate;me?(ge.updateQueue=me.updateQueue,ge.memoizedState=me.memoizedState,ge.lanes=me.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Se=nv(O);if(Se!==null){Se.flags&=-257,rv(Se,O,Y,I,c),Se.mode&1&&tv(I,ce,c),c=Se,te=ce;var Ee=c.updateQueue;if(Ee===null){var Ie=new Set;Ie.add(te),c.updateQueue=Ie}else Ee.add(te);break e}else{if((c&1)===0){tv(I,ce,c),am();break e}te=Error(n(426))}}else if(it&&Y.mode&1){var Ct=nv(O);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),rv(Ct,O,Y,I,c),xp(Do(te,Y));break e}}I=te=Do(te,Y),zt!==4&&(zt=2),Rl===null?Rl=[I]:Rl.push(I),I=O;do{switch(I.tag){case 3:I.flags|=65536,c&=-c,I.lanes|=c;var oe=Zb(I,te,c);_b(I,oe);break e;case 1:Y=te;var re=I.type,ae=I.stateNode;if((I.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Ws===null||!Ws.has(ae)))){I.flags|=65536,c&=-c,I.lanes|=c;var be=ev(I,Y,c);_b(I,be);break e}}I=I.return}while(I!==null)}Mv(m)}catch(Ae){c=Ae,Et===m&&m!==null&&(Et=m=m.return);continue}break}while(!0)}function Av(){var a=Uu.current;return Uu.current=zu,a===null?zu:a}function am(){(zt===0||zt===3||zt===2)&&(zt=4),qt===null||(Ai&268435455)===0&&(Hu&268435455)===0||Hs(qt,Jt)}function Ju(a,c){var m=Ke;Ke|=2;var x=Av();(qt!==a||Jt!==c)&&(os=null,Mi(a,c));do try{JT();break}catch(C){Iv(a,C)}while(!0);if(vp(),Ke=m,Uu.current=x,Et!==null)throw Error(n(261));return qt=null,Jt=0,zt}function JT(){for(;Et!==null;)Pv(Et)}function QT(){for(;Et!==null&&!Rh();)Pv(Et)}function Pv(a){var c=Ov(a.alternate,a,Mn);a.memoizedProps=a.pendingProps,c===null?Mv(a):Et=c,Qp.current=null}function Mv(a){var c=a;do{var m=c.alternate;if(a=c.return,(c.flags&32768)===0){if(m=UT(m,c,Mn),m!==null){Et=m;return}}else{if(m=HT(m,c),m!==null){m.flags&=32767,Et=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{zt=6,Et=null;return}}if(c=c.sibling,c!==null){Et=c;return}Et=c=a}while(c!==null);zt===0&&(zt=5)}function Di(a,c,m){var x=Xe,C=Yn.transition;try{Yn.transition=null,Xe=1,ZT(a,c,m,x)}finally{Yn.transition=C,Xe=x}return null}function ZT(a,c,m,x){do $o();while(Vs!==null);if((Ke&6)!==0)throw Error(n(327));m=a.finishedWork;var C=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var I=m.lanes|m.childLanes;if(iu(a,I),a===qt&&(Et=qt=null,Jt=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Gu||(Gu=!0,zv(ho,function(){return $o(),null})),I=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||I){I=Yn.transition,Yn.transition=null;var O=Xe;Xe=1;var Y=Ke;Ke|=4,Qp.current=null,GT(a,m),jv(m,a),bT(ap),lu=!!op,ap=op=null,a.current=m,KT(m),tu(),Ke=Y,Xe=O,Yn.transition=I}else a.current=m;if(Gu&&(Gu=!1,Vs=a,Ku=C),I=a.pendingLanes,I===0&&(Ws=null),Ph(m.stateNode),Cn(a,ht()),c!==null)for(x=a.onRecoverableError,m=0;m<c.length;m++)C=c[m],x(C.value,{componentStack:C.stack,digest:C.digest});if(qu)throw qu=!1,a=tm,tm=null,a;return(Ku&1)!==0&&a.tag!==0&&$o(),I=a.pendingLanes,(I&1)!==0?a===nm?Il++:(Il=0,nm=a):Il=0,zs(),null}function $o(){if(Vs!==null){var a=Sx(Ku),c=Yn.transition,m=Xe;try{if(Yn.transition=null,Xe=16>a?16:a,Vs===null)var x=!1;else{if(a=Vs,Vs=null,Ku=0,(Ke&6)!==0)throw Error(n(331));var C=Ke;for(Ke|=4,Ce=a.current;Ce!==null;){var I=Ce,O=I.child;if((Ce.flags&16)!==0){var Y=I.deletions;if(Y!==null){for(var te=0;te<Y.length;te++){var ce=Y[te];for(Ce=ce;Ce!==null;){var ge=Ce;switch(ge.tag){case 0:case 11:case 15:Nl(8,ge,I)}var ye=ge.child;if(ye!==null)ye.return=ge,Ce=ye;else for(;Ce!==null;){ge=Ce;var me=ge.sibling,Se=ge.return;if(bv(ge),ge===ce){Ce=null;break}if(me!==null){me.return=Se,Ce=me;break}Ce=Se}}}var Ee=I.alternate;if(Ee!==null){var Ie=Ee.child;if(Ie!==null){Ee.child=null;do{var Ct=Ie.sibling;Ie.sibling=null,Ie=Ct}while(Ie!==null)}}Ce=I}}if((I.subtreeFlags&2064)!==0&&O!==null)O.return=I,Ce=O;else e:for(;Ce!==null;){if(I=Ce,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Nl(9,I,I.return)}var oe=I.sibling;if(oe!==null){oe.return=I.return,Ce=oe;break e}Ce=I.return}}var re=a.current;for(Ce=re;Ce!==null;){O=Ce;var ae=O.child;if((O.subtreeFlags&2064)!==0&&ae!==null)ae.return=O,Ce=ae;else e:for(O=re;Ce!==null;){if(Y=Ce,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Vu(9,Y)}}catch(Ae){bt(Y,Y.return,Ae)}if(Y===O){Ce=null;break e}var be=Y.sibling;if(be!==null){be.return=Y.return,Ce=be;break e}Ce=Y.return}}if(Ke=C,zs(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(ki,a)}catch{}x=!0}return x}finally{Xe=m,Yn.transition=c}}return!1}function Dv(a,c,m){c=Do(m,c),c=Zb(a,c,1),a=Ls(a,c,1),c=fn(),a!==null&&(ji(a,1,c),Cn(a,c))}function bt(a,c,m){if(a.tag===3)Dv(a,a,m);else for(;c!==null;){if(c.tag===3){Dv(c,a,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ws===null||!Ws.has(x))){a=Do(m,a),a=ev(c,a,1),c=Ls(c,a,1),a=fn(),c!==null&&(ji(c,1,a),Cn(c,a));break}}c=c.return}}function e6(a,c,m){var x=a.pingCache;x!==null&&x.delete(c),c=fn(),a.pingedLanes|=a.suspendedLanes&m,qt===a&&(Jt&m)===m&&(zt===4||zt===3&&(Jt&130023424)===Jt&&500>ht()-em?Mi(a,0):Zp|=m),Cn(a,c)}function Fv(a,c){c===0&&((a.mode&1)===0?c=1:(c=mo,mo<<=1,(mo&130023424)===0&&(mo=4194304)));var m=fn();a=rs(a,c),a!==null&&(ji(a,c,m),Cn(a,m))}function t6(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),Fv(a,m)}function n6(a,c){var m=0;switch(a.tag){case 13:var x=a.stateNode,C=a.memoizedState;C!==null&&(m=C.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(c),Fv(a,m)}var Ov;Ov=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||wn.current)kn=!0;else{if((a.lanes&m)===0&&(c.flags&128)===0)return kn=!1,VT(a,c,m);kn=(a.flags&131072)!==0}else kn=!1,it&&(c.flags&1048576)!==0&&gb(c,_u,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Bu(a,c),a=c.pendingProps;var C=Eo(c,rn.current);Po(c,m),C=Ip(null,c,x,a,C,m);var I=Ap();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Sn(x)?(I=!0,ku(c)):I=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,jp(c),C.updater=$u,c.stateNode=C,C._reactInternals=c,zp(c,x,a,m),c=Wp(null,c,x,!0,I,m)):(c.tag=0,it&&I&&pp(c),dn(null,c,C,m),c=c.child),c;case 16:x=c.elementType;e:{switch(Bu(a,c),a=c.pendingProps,C=x._init,x=C(x._payload),c.type=x,C=c.tag=s6(x),a=or(x,a),C){case 0:c=Bp(null,c,x,a,m);break e;case 1:c=cv(null,c,x,a,m);break e;case 11:c=sv(null,c,x,a,m);break e;case 14:c=iv(null,c,x,or(x.type,a),m);break e}throw Error(n(306,x,""))}return c;case 0:return x=c.type,C=c.pendingProps,C=c.elementType===x?C:or(x,C),Bp(a,c,x,C,m);case 1:return x=c.type,C=c.pendingProps,C=c.elementType===x?C:or(x,C),cv(a,c,x,C,m);case 3:e:{if(uv(c),a===null)throw Error(n(387));x=c.pendingProps,I=c.memoizedState,C=I.element,Cb(a,c),Au(c,x,null,m);var O=c.memoizedState;if(x=O.element,I.isDehydrated)if(I={element:x,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=I,c.memoizedState=I,c.flags&256){C=Do(Error(n(423)),c),c=dv(a,c,x,m,C);break e}else if(x!==C){C=Do(Error(n(424)),c),c=dv(a,c,x,m,C);break e}else for(Pn=Ds(c.stateNode.containerInfo.firstChild),An=c,it=!0,ir=null,m=kb(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ro(),x===C){c=is(a,c,m);break e}dn(a,c,x,m)}c=c.child}return c;case 5:return Nb(c),a===null&&yp(c),x=c.type,C=c.pendingProps,I=a!==null?a.memoizedProps:null,O=C.children,lp(x,C)?O=null:I!==null&&lp(x,I)&&(c.flags|=32),lv(a,c),dn(a,c,O,m),c.child;case 6:return a===null&&yp(c),null;case 13:return fv(a,c,m);case 4:return Cp(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=Io(c,null,x,m):dn(a,c,x,m),c.child;case 11:return x=c.type,C=c.pendingProps,C=c.elementType===x?C:or(x,C),sv(a,c,x,C,m);case 7:return dn(a,c,c.pendingProps,m),c.child;case 8:return dn(a,c,c.pendingProps.children,m),c.child;case 12:return dn(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(x=c.type._context,C=c.pendingProps,I=c.memoizedProps,O=C.value,Ze(Tu,x._currentValue),x._currentValue=O,I!==null)if(sr(I.value,O)){if(I.children===C.children&&!wn.current){c=is(a,c,m);break e}}else for(I=c.child,I!==null&&(I.return=c);I!==null;){var Y=I.dependencies;if(Y!==null){O=I.child;for(var te=Y.firstContext;te!==null;){if(te.context===x){if(I.tag===1){te=ss(-1,m&-m),te.tag=2;var ce=I.updateQueue;if(ce!==null){ce=ce.shared;var ge=ce.pending;ge===null?te.next=te:(te.next=ge.next,ge.next=te),ce.pending=te}}I.lanes|=m,te=I.alternate,te!==null&&(te.lanes|=m),Sp(I.return,m,c),Y.lanes|=m;break}te=te.next}}else if(I.tag===10)O=I.type===c.type?null:I.child;else if(I.tag===18){if(O=I.return,O===null)throw Error(n(341));O.lanes|=m,Y=O.alternate,Y!==null&&(Y.lanes|=m),Sp(O,m,c),O=I.sibling}else O=I.child;if(O!==null)O.return=I;else for(O=I;O!==null;){if(O===c){O=null;break}if(I=O.sibling,I!==null){I.return=O.return,O=I;break}O=O.return}I=O}dn(a,c,C.children,m),c=c.child}return c;case 9:return C=c.type,x=c.pendingProps.children,Po(c,m),C=Gn(C),x=x(C),c.flags|=1,dn(a,c,x,m),c.child;case 14:return x=c.type,C=or(x,c.pendingProps),C=or(x.type,C),iv(a,c,x,C,m);case 15:return ov(a,c,c.type,c.pendingProps,m);case 17:return x=c.type,C=c.pendingProps,C=c.elementType===x?C:or(x,C),Bu(a,c),c.tag=1,Sn(x)?(a=!0,ku(c)):a=!1,Po(c,m),Jb(c,x,C),zp(c,x,C,m),Wp(null,c,x,!0,a,m);case 19:return pv(a,c,m);case 22:return av(a,c,m)}throw Error(n(156,c.tag))};function zv(a,c){return Zc(a,c)}function r6(a,c,m,x){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,c,m,x){return new r6(a,c,m,x)}function lm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function s6(a){if(typeof a=="function")return lm(a)?1:0;if(a!=null){if(a=a.$$typeof,a===B)return 11;if(a===J)return 14}return 2}function qs(a,c){var m=a.alternate;return m===null?(m=Xn(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Qu(a,c,m,x,C,I){var O=2;if(x=a,typeof a=="function")lm(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case R:return Fi(m.children,C,I,c);case A:O=8,C|=8;break;case P:return a=Xn(12,m,c,C|2),a.elementType=P,a.lanes=I,a;case K:return a=Xn(13,m,c,C),a.elementType=K,a.lanes=I,a;case V:return a=Xn(19,m,c,C),a.elementType=V,a.lanes=I,a;case H:return Zu(m,C,I,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:O=10;break e;case L:O=9;break e;case B:O=11;break e;case J:O=14;break e;case $:O=16,x=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Xn(O,m,c,C),c.elementType=a,c.type=x,c.lanes=I,c}function Fi(a,c,m,x){return a=Xn(7,a,x,c),a.lanes=m,a}function Zu(a,c,m,x){return a=Xn(22,a,x,c),a.elementType=H,a.lanes=m,a.stateNode={isHidden:!1},a}function cm(a,c,m){return a=Xn(6,a,null,c),a.lanes=m,a}function um(a,c,m){return c=Xn(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function i6(a,c,m,x,C){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=x,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function dm(a,c,m,x,C,I,O,Y,te){return a=new i6(a,c,m,Y,te),c===1?(c=1,I===!0&&(c|=8)):c=0,I=Xn(3,null,null,c),a.current=I,I.stateNode=a,I.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(I),a}function o6(a,c,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:x==null?null:""+x,children:a,containerInfo:c,implementation:m}}function $v(a){if(!a)return Os;a=a._reactInternals;e:{if(Ar(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Sn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(Sn(m))return hb(a,m,c)}return c}function Lv(a,c,m,x,C,I,O,Y,te){return a=dm(m,x,!0,a,C,I,O,Y,te),a.context=$v(null),m=a.current,x=fn(),C=Us(m),I=ss(x,C),I.callback=c??null,Ls(m,I,C),a.current.lanes=C,ji(a,C,x),Cn(a,x),a}function ed(a,c,m,x){var C=c.current,I=fn(),O=Us(C);return m=$v(m),c.context===null?c.context=m:c.pendingContext=m,c=ss(I,O),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=Ls(C,c,O),a!==null&&(cr(a,C,O,I),Iu(a,C,O)),O}function td(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Bv(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function fm(a,c){Bv(a,c),(a=a.alternate)&&Bv(a,c)}function a6(){return null}var Wv=typeof reportError=="function"?reportError:function(a){console.error(a)};function hm(a){this._internalRoot=a}nd.prototype.render=hm.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));ed(a,c,null,null)},nd.prototype.unmount=hm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Pi(function(){ed(null,a,null,null)}),c[Zr]=null}};function nd(a){this._internalRoot=a}nd.prototype.unstable_scheduleHydration=function(a){if(a){var c=Cx();a={blockedOn:null,target:a,priority:c};for(var m=0;m<As.length&&c!==0&&c<As[m].priority;m++);As.splice(m,0,a),m===0&&Nx(a)}};function pm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function rd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Vv(){}function l6(a,c,m,x,C){if(C){if(typeof x=="function"){var I=x;x=function(){var ce=td(O);I.call(ce)}}var O=Lv(c,x,a,0,null,!1,!1,"",Vv);return a._reactRootContainer=O,a[Zr]=O.current,ml(a.nodeType===8?a.parentNode:a),Pi(),O}for(;C=a.lastChild;)a.removeChild(C);if(typeof x=="function"){var Y=x;x=function(){var ce=td(te);Y.call(ce)}}var te=dm(a,0,!1,null,null,!1,!1,"",Vv);return a._reactRootContainer=te,a[Zr]=te.current,ml(a.nodeType===8?a.parentNode:a),Pi(function(){ed(c,te,m,x)}),te}function sd(a,c,m,x,C){var I=m._reactRootContainer;if(I){var O=I;if(typeof C=="function"){var Y=C;C=function(){var te=td(O);Y.call(te)}}ed(c,O,a,C)}else O=l6(m,c,a,C,x);return td(O)}kx=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Pr(c.pendingLanes);m!==0&&(zh(c,m|1),Cn(c,ht()),(Ke&6)===0&&(zo=ht()+500,zs()))}break;case 13:Pi(function(){var x=rs(a,1);if(x!==null){var C=fn();cr(x,a,1,C)}}),fm(a,1)}},$h=function(a){if(a.tag===13){var c=rs(a,134217728);if(c!==null){var m=fn();cr(c,a,134217728,m)}fm(a,134217728)}},jx=function(a){if(a.tag===13){var c=Us(a),m=rs(a,c);if(m!==null){var x=fn();cr(m,a,c,x)}fm(a,c)}},Cx=function(){return Xe},_x=function(a,c){var m=Xe;try{return Xe=a,c()}finally{Xe=m}},vi=function(a,c,m){switch(c){case"input":if(_e(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==a&&x.form===a.form){var C=wu(x);if(!C)throw Error(n(90));ue(x),_e(x,C)}}}break;case"textarea":Tn(a,m);break;case"select":c=m.value,c!=null&&dt(a,!!m.multiple,c,!1)}},jt=im,Ut=Pi;var c6={usingClientEntryPoint:!1,Events:[xl,Co,wu,Le,ft,im]},Al={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u6={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Jc(a),a===null?null:a.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||a6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{ki=id.inject(u6),Un=id}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c6,_n.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(c))throw Error(n(200));return o6(a,c,null,m)},_n.createRoot=function(a,c){if(!pm(a))throw Error(n(299));var m=!1,x="",C=Wv;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=dm(a,1,!1,null,null,m,!1,x,C),a[Zr]=c.current,ml(a.nodeType===8?a.parentNode:a),new hm(c)},_n.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Jc(c),a=a===null?null:a.stateNode,a},_n.flushSync=function(a){return Pi(a)},_n.hydrate=function(a,c,m){if(!rd(c))throw Error(n(200));return sd(null,a,c,!0,m)},_n.hydrateRoot=function(a,c,m){if(!pm(a))throw Error(n(405));var x=m!=null&&m.hydratedSources||null,C=!1,I="",O=Wv;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(O=m.onRecoverableError)),c=Lv(c,null,a,1,m??null,C,!1,I,O),a[Zr]=c.current,ml(a),x)for(a=0;a<x.length;a++)m=x[a],C=m._getVersion,C=C(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,C]:c.mutableSourceEagerHydrationData.push(m,C);return new nd(c)},_n.render=function(a,c,m){if(!rd(c))throw Error(n(200));return sd(null,a,c,!1,m)},_n.unmountComponentAtNode=function(a){if(!rd(a))throw Error(n(40));return a._reactRootContainer?(Pi(function(){sd(null,null,a,!1,function(){a._reactRootContainer=null,a[Zr]=null})}),!0):!1},_n.unstable_batchedUpdates=im,_n.unstable_renderSubtreeIntoContainer=function(a,c,m,x){if(!rd(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return sd(a,c,m,!1,x)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var Jv;function zS(){if(Jv)return ym.exports;Jv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ym.exports=b6(),ym.exports}var Qv;function v6(){if(Qv)return od;Qv=1;var e=zS();return od.createRoot=e.createRoot,od.hydrateRoot=e.hydrateRoot,od}var w6=v6();const S6=Vf(w6),M0=S.createContext({});function D0(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const $S=typeof window<"u",LS=$S?S.useLayoutEffect:S.useEffect,Uf=S.createContext(null);function F0(e,t){e.indexOf(t)===-1&&e.push(t)}function O0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Hr=(e,t,n)=>n>t?t:n<e?e:n;let z0=()=>{};const gs={},BS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function WS(e){return typeof e=="object"&&e!==null}const VS=e=>/^0[^.\s]+$/u.test(e);function $0(e){let t;return()=>(t===void 0&&(t=e()),t)}const Zn=e=>e,k6=(e,t)=>n=>t(e(n)),Ac=(...e)=>e.reduce(k6),sc=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class L0{constructor(){this.subscriptions=[]}add(t){return F0(this.subscriptions,t),()=>O0(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hs=e=>e*1e3,Qn=e=>e/1e3;function US(e,t){return t?e*(1e3/t):0}const HS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,j6=1e-7,C6=12;function _6(e,t,n,r,s){let o,l,u=0;do l=t+(n-t)/2,o=HS(l,r,s)-e,o>0?n=l:t=l;while(Math.abs(o)>j6&&++u<C6);return l}function Pc(e,t,n,r){if(e===t&&n===r)return Zn;const s=o=>_6(o,0,1,e,n);return o=>o===0||o===1?o:HS(s(o),t,r)}const qS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,GS=e=>t=>1-e(1-t),KS=Pc(.33,1.53,.69,.99),B0=GS(KS),YS=qS(B0),XS=e=>(e*=2)<1?.5*B0(e):.5*(2-Math.pow(2,-10*(e-1))),W0=e=>1-Math.sin(Math.acos(e)),JS=GS(W0),QS=qS(W0),E6=Pc(.42,0,1,1),N6=Pc(0,0,.58,1),ZS=Pc(.42,0,.58,1),T6=e=>Array.isArray(e)&&typeof e[0]!="number",ek=e=>Array.isArray(e)&&typeof e[0]=="number",R6={linear:Zn,easeIn:E6,easeInOut:ZS,easeOut:N6,circIn:W0,circInOut:QS,circOut:JS,backIn:B0,backInOut:YS,backOut:KS,anticipate:XS},I6=e=>typeof e=="string",Zv=e=>{if(ek(e)){z0(e.length===4);const[t,n,r,s]=e;return Pc(t,n,r,s)}else if(I6(e))return R6[e];return e},ad=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function A6(e,t){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(f.schedule(p),e()),p(u)}const f={schedule:(p,h=!1,g=!1)=>{const b=g&&s?n:r;return h&&l.add(p),b.has(p)||b.add(p),p},cancel:p=>{r.delete(p),l.delete(p)},process:p=>{if(u=p,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,o&&(o=!1,f.process(p))}};return f}const P6=40;function tk(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=ad.reduce((k,_)=>(k[_]=A6(o),k),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:h,preRender:g,render:y,postRender:b}=l,w=()=>{const k=gs.useManualTiming?s.timestamp:performance.now();n=!1,gs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(k-s.timestamp,P6),1)),s.timestamp=k,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),p.process(s),h.process(s),g.process(s),y.process(s),b.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(w))},v=()=>{n=!0,r=!0,s.isProcessing||e(w)};return{schedule:ad.reduce((k,_)=>{const N=l[_];return k[_]=(E,R=!1,A=!1)=>(n||v(),N.schedule(E,R,A)),k},{}),cancel:k=>{for(let _=0;_<ad.length;_++)l[ad[_]].cancel(k)},state:s,steps:l}}const{schedule:tt,cancel:ai,state:en,steps:vm}=tk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0);let Ud;function M6(){Ud=void 0}const mn={now:()=>(Ud===void 0&&mn.set(en.isProcessing||gs.useManualTiming?en.timestamp:performance.now()),Ud),set:e=>{Ud=e,queueMicrotask(M6)}},nk=e=>t=>typeof t=="string"&&t.startsWith(e),rk=nk("--"),D6=nk("var(--"),V0=e=>D6(e)?F6.test(e.split("/*")[0].trim()):!1,F6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function e1(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Pa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ic={...Pa,transform:e=>Hr(0,1,e)},ld={...Pa,default:1},Xl=e=>Math.round(e*1e5)/1e5,U0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function O6(e){return e==null}const z6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H0=(e,t)=>n=>!!(typeof n=="string"&&z6.test(n)&&n.startsWith(e)||t&&!O6(n)&&Object.prototype.hasOwnProperty.call(n,t)),sk=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(U0);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},$6=e=>Hr(0,255,e),wm={...Pa,transform:e=>Math.round($6(e))},Ki={test:H0("rgb","red"),parse:sk("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+wm.transform(e)+", "+wm.transform(t)+", "+wm.transform(n)+", "+Xl(ic.transform(r))+")"};function L6(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const wg={test:H0("#"),parse:L6,transform:Ki.transform},Mc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zs=Mc("deg"),Wr=Mc("%"),Re=Mc("px"),B6=Mc("vh"),W6=Mc("vw"),t1={...Wr,parse:e=>Wr.parse(e)/100,transform:e=>Wr.transform(e*100)},sa={test:H0("hsl","hue"),parse:sk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Wr.transform(Xl(t))+", "+Wr.transform(Xl(n))+", "+Xl(ic.transform(r))+")"},Tt={test:e=>Ki.test(e)||wg.test(e)||sa.test(e),parse:e=>Ki.test(e)?Ki.parse(e):sa.test(e)?sa.parse(e):wg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ki.transform(e):sa.transform(e),getAnimatableNone:e=>{const t=Tt.parse(e);return t.alpha=0,Tt.transform(t)}},V6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function U6(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(U0))==null?void 0:t.length)||0)+(((n=e.match(V6))==null?void 0:n.length)||0)>0}const ik="number",ok="color",H6="var",q6="var(",n1="${}",G6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function oc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=t.replace(G6,d=>(Tt.test(d)?(r.color.push(o),s.push(ok),n.push(Tt.parse(d))):d.startsWith(q6)?(r.var.push(o),s.push(H6),n.push(d)):(r.number.push(o),s.push(ik),n.push(parseFloat(d))),++o,n1)).split(n1);return{values:n,split:u,indexes:r,types:s}}function ak(e){return oc(e).values}function lk(e){const{split:t,types:n}=oc(e),r=t.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=t[l],s[l]!==void 0){const u=n[l];u===ik?o+=Xl(s[l]):u===ok?o+=Tt.transform(s[l]):o+=s[l]}return o}}const K6=e=>typeof e=="number"?0:Tt.test(e)?Tt.getAnimatableNone(e):e;function Y6(e){const t=ak(e);return lk(e)(t.map(K6))}const li={test:U6,parse:ak,createTransformer:lk,getAnimatableNone:Y6};function Sm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function X6({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,o=0,l=0;if(!t)s=o=l=n;else{const u=n<.5?n*(1+t):n+t-n*t,d=2*n-u;s=Sm(d,u,e+1/3),o=Sm(d,u,e),l=Sm(d,u,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function lf(e,t){return n=>n>0?t:e}const yt=(e,t,n)=>e+(t-e)*n,km=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},J6=[wg,Ki,sa],Q6=e=>J6.find(t=>t.test(e));function r1(e){const t=Q6(e);if(!t)return!1;let n=t.parse(e);return t===sa&&(n=X6(n)),n}const s1=(e,t)=>{const n=r1(e),r=r1(t);if(!n||!r)return lf(e,t);const s={...n};return o=>(s.red=km(n.red,r.red,o),s.green=km(n.green,r.green,o),s.blue=km(n.blue,r.blue,o),s.alpha=yt(n.alpha,r.alpha,o),Ki.transform(s))},Sg=new Set(["none","hidden"]);function Z6(e,t){return Sg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function eR(e,t){return n=>yt(e,t,n)}function q0(e){return typeof e=="number"?eR:typeof e=="string"?V0(e)?lf:Tt.test(e)?s1:rR:Array.isArray(e)?ck:typeof e=="object"?Tt.test(e)?s1:tR:lf}function ck(e,t){const n=[...e],r=n.length,s=e.map((o,l)=>q0(o)(o,t[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function tR(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=q0(e[s])(e[s],t[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function nR(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],l=e.indexes[o][r[o]],u=e.values[l]??0;n[s]=u,r[o]++}return n}const rR=(e,t)=>{const n=li.createTransformer(t),r=oc(e),s=oc(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Sg.has(e)&&!s.values.length||Sg.has(t)&&!r.values.length?Z6(e,t):Ac(ck(nR(r,s),s.values),n):lf(e,t)};function uk(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?yt(e,t,n):q0(e)(e,t)}const sR=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>tt.update(t,n),stop:()=>ai(t),now:()=>en.isProcessing?en.timestamp:mn.now()}},dk=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let o=0;o<s;o++)r+=Math.round(e(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},cf=2e4;function G0(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<cf;)t+=n,r=e.next(t);return t>=cf?1/0:t}function iR(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(G0(r),cf);return{type:"keyframes",ease:o=>r.next(s*o).value/t,duration:Qn(s)}}const oR=5;function fk(e,t,n){const r=Math.max(t-oR,0);return US(n-e(r),t-r)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jm=.001;function aR({duration:e=wt.duration,bounce:t=wt.bounce,velocity:n=wt.velocity,mass:r=wt.mass}){let s,o,l=1-t;l=Hr(wt.minDamping,wt.maxDamping,l),e=Hr(wt.minDuration,wt.maxDuration,Qn(e)),l<1?(s=f=>{const p=f*l,h=p*e,g=p-n,y=kg(f,l),b=Math.exp(-h);return jm-g/y*b},o=f=>{const h=f*l*e,g=h*n+n,y=Math.pow(l,2)*Math.pow(f,2)*e,b=Math.exp(-h),w=kg(Math.pow(f,2),l);return(-s(f)+jm>0?-1:1)*((g-y)*b)/w}):(s=f=>{const p=Math.exp(-f*e),h=(f-n)*e+1;return-jm+p*h},o=f=>{const p=Math.exp(-f*e),h=(n-f)*(e*e);return p*h});const u=5/e,d=cR(s,o,u);if(e=hs(e),isNaN(d))return{stiffness:wt.stiffness,damping:wt.damping,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:e}}}const lR=12;function cR(e,t,n){let r=n;for(let s=1;s<lR;s++)r=r-e(r)/t(r);return r}function kg(e,t){return e*Math.sqrt(1-t*t)}const uR=["duration","bounce"],dR=["stiffness","damping","mass"];function i1(e,t){return t.some(n=>e[n]!==void 0)}function fR(e){let t={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...e};if(!i1(e,dR)&&i1(e,uR))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Hr(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:wt.mass,stiffness:s,damping:o}}else{const n=aR(e);t={...t,...n,mass:wt.mass},t.isResolvedFromDuration=!0}return t}function uf(e=wt.visualDuration,t=wt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:h,velocity:g,isResolvedFromDuration:y}=fR({...n,velocity:-Qn(n.velocity||0)}),b=g||0,w=f/(2*Math.sqrt(d*p)),v=l-o,j=Qn(Math.sqrt(d/p)),T=Math.abs(v)<5;r||(r=T?wt.restSpeed.granular:wt.restSpeed.default),s||(s=T?wt.restDelta.granular:wt.restDelta.default);let k;if(w<1){const N=kg(j,w);k=E=>{const R=Math.exp(-w*j*E);return l-R*((b+w*j*v)/N*Math.sin(N*E)+v*Math.cos(N*E))}}else if(w===1)k=N=>l-Math.exp(-j*N)*(v+(b+j*v)*N);else{const N=j*Math.sqrt(w*w-1);k=E=>{const R=Math.exp(-w*j*E),A=Math.min(N*E,300);return l-R*((b+w*j*v)*Math.sinh(A)+N*v*Math.cosh(A))/N}}const _={calculatedDuration:y&&h||null,next:N=>{const E=k(N);if(y)u.done=N>=h;else{let R=N===0?b:0;w<1&&(R=N===0?hs(b):fk(k,N,E));const A=Math.abs(R)<=r,P=Math.abs(l-E)<=s;u.done=A&&P}return u.value=u.done?l:E,u},toString:()=>{const N=Math.min(G0(_),cf),E=dk(R=>_.next(N*R).value,N,30);return N+"ms "+E},toTransition:()=>{}};return _}uf.applyToOptions=e=>{const t=iR(e,100,uf);return e.ease=t.ease,e.duration=hs(t.duration),e.type="keyframes",e};function jg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:p}){const h=e[0],g={done:!1,value:h},y=A=>u!==void 0&&A<u||d!==void 0&&A>d,b=A=>u===void 0?d:d===void 0||Math.abs(u-A)<Math.abs(d-A)?u:d;let w=n*t;const v=h+w,j=l===void 0?v:l(v);j!==v&&(w=j-h);const T=A=>-w*Math.exp(-A/r),k=A=>j+T(A),_=A=>{const P=T(A),z=k(A);g.done=Math.abs(P)<=f,g.value=g.done?j:z};let N,E;const R=A=>{y(g.value)&&(N=A,E=uf({keyframes:[g.value,b(g.value)],velocity:fk(k,A,g.value),damping:s,stiffness:o,restDelta:f,restSpeed:p}))};return R(0),{calculatedDuration:null,next:A=>{let P=!1;return!E&&N===void 0&&(P=!0,_(A),R(A)),N!==void 0&&A>=N?E.next(A-N):(!P&&_(A),g)}}}function hR(e,t,n){const r=[],s=n||gs.mix||uk,o=e.length-1;for(let l=0;l<o;l++){let u=s(e[l],e[l+1]);if(t){const d=Array.isArray(t)?t[l]||Zn:t;u=Ac(d,u)}r.push(u)}return r}function pR(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const o=e.length;if(z0(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=hR(t,r,s),d=u.length,f=p=>{if(l&&p<e[0])return t[0];let h=0;if(d>1)for(;h<e.length-2&&!(p<e[h+1]);h++);const g=sc(e[h],e[h+1],p);return u[h](g)};return n?p=>f(Hr(e[0],e[o-1],p)):f}function mR(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=sc(0,t,r);e.push(yt(n,1,s))}}function gR(e){const t=[0];return mR(t,e.length-1),t}function yR(e,t){return e.map(n=>n*t)}function xR(e,t){return e.map(()=>t||ZS).splice(0,e.length-1)}function Jl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=T6(r)?r.map(Zv):Zv(r),o={done:!1,value:t[0]},l=yR(n&&n.length===t.length?n:gR(t),e),u=pR(l,t,{ease:Array.isArray(s)?s:xR(t,s)});return{calculatedDuration:e,next:d=>(o.value=u(d),o.done=d>=e,o)}}const bR=e=>e!==null;function K0(e,{repeat:t,repeatType:n="loop"},r,s=1){const o=e.filter(bR),u=s<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const vR={decay:jg,inertia:jg,tween:Jl,keyframes:Jl,spring:uf};function hk(e){typeof e.type=="string"&&(e.type=vR[e.type])}class Y0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const wR=e=>e/100;class X0 extends Y0{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==mn.now()&&this.tick(mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;hk(t);const{type:n=Jl,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=t;let{keyframes:u}=t;const d=n||Jl;d!==Jl&&typeof u[0]!="number"&&(this.mixKeyframes=Ac(wR,uk(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=G0(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:h,repeatType:g,repeatDelay:y,type:b,onUpdate:w,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let k=this.currentTime,_=r;if(h){const A=Math.min(this.currentTime,s)/u;let P=Math.floor(A),z=A%1;!z&&A>=1&&(z=1),z===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(g==="reverse"?(z=1-z,y&&(z-=y/u)):g==="mirror"&&(_=l)),k=Hr(0,1,z)*u}const N=T?{done:!1,value:p[0]}:_.next(k);o&&(N.value=o(N.value));let{done:E}=N;!T&&d!==null&&(E=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return R&&b!==jg&&(N.value=K0(p,this.options,v,this.speed)),w&&w(N.value),R&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return Qn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Qn(t)}get time(){return Qn(this.currentTime)}set time(t){var n;t=hs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Qn(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:t=sR,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function SR(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Yi=e=>e*180/Math.PI,Cg=e=>{const t=Yi(Math.atan2(e[1],e[0]));return _g(t)},kR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Cg,rotateZ:Cg,skewX:e=>Yi(Math.atan(e[1])),skewY:e=>Yi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},_g=e=>(e=e%360,e<0&&(e+=360),e),o1=Cg,a1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),l1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),jR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:a1,scaleY:l1,scale:e=>(a1(e)+l1(e))/2,rotateX:e=>_g(Yi(Math.atan2(e[6],e[5]))),rotateY:e=>_g(Yi(Math.atan2(-e[2],e[0]))),rotateZ:o1,rotate:o1,skewX:e=>Yi(Math.atan(e[4])),skewY:e=>Yi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Eg(e){return e.includes("scale")?1:0}function Ng(e,t){if(!e||e==="none")return Eg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=jR,s=n;else{const u=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=kR,s=u}if(!s)return Eg(t);const o=r[t],l=s[1].split(",").map(_R);return typeof o=="function"?o(l):l[o]}const CR=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ng(n,t)};function _R(e){return parseFloat(e.trim())}const Ma=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Da=new Set(Ma),c1=e=>e===Pa||e===Re,ER=new Set(["x","y","z"]),NR=Ma.filter(e=>!ER.has(e));function TR(e){const t=[];return NR.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const si={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ng(t,"x"),y:(e,{transform:t})=>Ng(t,"y")};si.translateX=si.x;si.translateY=si.y;const Qi=new Set;let Tg=!1,Rg=!1,Ig=!1;function pk(){if(Rg){const e=Array.from(Qi).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=TR(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))==null||u.set(l)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rg=!1,Tg=!1,Qi.forEach(e=>e.complete(Ig)),Qi.clear()}function mk(){Qi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Rg=!0)})}function RR(){Ig=!0,mk(),pk(),Ig=!1}class J0{constructor(t,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Qi.add(this),Tg||(Tg=!0,tt.read(mk),tt.resolveKeyframes(pk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const o=s==null?void 0:s.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&o===void 0&&s.set(t[0])}SR(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Qi.delete(this)}cancel(){this.state==="scheduled"&&(Qi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IR=e=>e.startsWith("--");function AR(e,t,n){IR(t)?e.style.setProperty(t,n):e.style[t]=n}const PR=$0(()=>window.ScrollTimeline!==void 0),MR={};function DR(e,t){const n=$0(e);return()=>MR[t]??n()}const gk=DR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ul=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,u1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ul([0,.65,.55,1]),circOut:Ul([.55,0,1,.45]),backIn:Ul([.31,.01,.66,-.59]),backOut:Ul([.33,1.53,.69,.99])};function yk(e,t){if(e)return typeof e=="function"?gk()?dk(e,t):"ease-out":ek(e)?Ul(e):Array.isArray(e)?e.map(n=>yk(n,t)||u1.easeOut):u1[e]}function FR(e,t,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[t]:n};d&&(p.offset=d);const h=yk(u,s);Array.isArray(h)&&(p.easing=h);const g={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),e.animate(p,g)}function xk(e){return typeof e=="function"&&"applyToOptions"in e}function OR({type:e,...t}){return xk(e)&&gk()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class zR extends Y0{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=t,z0(typeof t.type!="string");const f=OR(t);this.animation=FR(n,r,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=K0(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):AR(n,r,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const t=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Qn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Qn(t)}get time(){return Qn(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=hs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&PR()?(this.animation.timeline=t,Zn):n(this)}}const bk={anticipate:XS,backInOut:YS,circInOut:QS};function $R(e){return e in bk}function LR(e){typeof e.ease=="string"&&$R(e.ease)&&(e.ease=bk[e.ease])}const Cm=10;class BR extends zR{constructor(t){LR(t),hk(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const u=new X0({...l,autoplay:!1}),d=Math.max(Cm,mn.now()-this.startTime),f=Hr(0,Cm,d-Cm);n.setWithVelocity(u.sample(Math.max(0,d-f)).value,u.sample(d).value,f),u.stop()}}const d1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(li.test(e)||e==="0")&&!e.startsWith("url("));function WR(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function VR(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],l=d1(s,t),u=d1(o,t);return!l||!u?!1:WR(e)||(n==="spring"||xk(n))&&r}function Ag(e){e.duration=0,e.type="keyframes"}const UR=new Set(["opacity","clipPath","filter","transform"]),HR=$0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qR(e){var p;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=e;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return HR()&&n&&UR.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const GR=40;class KR extends Y0{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:p,...h}){var b;super(),this.stop=()=>{var w,v;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=mn.now();const g={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:f,element:p,...h},y=(p==null?void 0:p.KeyframeResolver)||J0;this.keyframeResolver=new y(u,(w,v,j)=>this.onKeyframesResolved(w,v,g,!j),d,f,p),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,n,r,s){var v,j;this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:p}=r;this.resolvedAt=mn.now(),VR(t,o,l,u)||((gs.instantAnimations||!d)&&(p==null||p(K0(t,r,n))),t[0]=t[t.length-1],Ag(r),r.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>GR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!f&&qR(g),b=(j=(v=g.motionValue)==null?void 0:v.owner)==null?void 0:j.current,w=y?new BR({...g,element:b}):new X0(g);w.finished.then(()=>{this.notifyFinished()}).catch(Zn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),RR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function vk(e,t,n,r=0,s=1){const o=Array.from(e).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),l=e.size,u=(l-1)*r;return typeof n=="function"?n(o,l):s===1?o*r:u-o*r}const YR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XR(e){const t=YR.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function wk(e,t,n=1){const[r,s]=XR(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const l=o.trim();return BS(l)?parseFloat(l):l}return V0(s)?wk(s,t,n+1):s}const JR={type:"spring",stiffness:500,damping:25,restSpeed:10},QR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ZR={type:"keyframes",duration:.8},eI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tI=(e,{keyframes:t})=>t.length>2?ZR:Da.has(e)?e.startsWith("scale")?QR(t[1]):JR:eI,nI=e=>e!==null;function rI(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(nI),o=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[o]}function Q0(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}function sI({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const Z0=(e,t,n,r={},s,o)=>l=>{const u=Q0(r,e)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-hs(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:g=>{t.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:o?void 0:s};sI(u)||Object.assign(p,tI(e,p)),p.duration&&(p.duration=hs(p.duration)),p.repeatDelay&&(p.repeatDelay=hs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let h=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Ag(p),p.delay===0&&(h=!0)),(gs.instantAnimations||gs.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(h=!0,Ag(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,h&&!o&&t.get()!==void 0){const g=rI(p.keyframes,u);if(g!==void 0){tt.update(()=>{p.onUpdate(g),p.onComplete()});return}}return u.isSync?new X0(p):new KR(p)};function f1(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function ey(e,t,n,r){if(typeof t=="function"){const[s,o]=f1(r);t=t(n!==void 0?n:e.custom,s,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,o]=f1(r);t=t(n!==void 0?n:e.custom,s,o)}return t}function da(e,t,n){const r=e.getProps();return ey(r,t,n!==void 0?n:r.custom,e)}const Sk=new Set(["width","height","top","left","right","bottom",...Ma]),h1=30,iI=e=>!isNaN(parseFloat(e));class oI{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=mn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=mn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=iI(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new L0);const r=this.events[t].add(n);return t==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>h1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,h1);return US(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wa(e,t){return new oI(e,t)}const Pg=e=>Array.isArray(e);function aI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,wa(n))}function lI(e){return Pg(e)?e[e.length-1]||0:e}function cI(e,t){const n=da(e,t);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const u=lI(o[l]);aI(e,l,u)}}const ln=e=>!!(e&&e.getVelocity);function uI(e){return!!(ln(e)&&e.add)}function Mg(e,t){const n=e.getValue("willChange");if(uI(n))return n.add(t);if(!n&&gs.WillChange){const r=new gs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function ty(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const dI="framerAppearId",kk="data-"+ty(dI);function jk(e){return e.props[kk]}function fI({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Ck(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:l,...u}=t;const d=o==null?void 0:o.reduceMotion;r&&(o=r);const f=[],p=s&&e.animationState&&e.animationState.getState()[s];for(const h in u){const g=e.getValue(h,e.latestValues[h]??null),y=u[h];if(y===void 0||p&&fI(p,h))continue;const b={delay:n,...Q0(o||{},h)},w=g.get();if(w!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===w&&!b.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const k=jk(e);if(k){const _=window.MotionHandoffAnimation(k,h,tt);_!==null&&(b.startTime=_,v=!0)}}Mg(e,h);const j=d??e.shouldReduceMotion;g.start(Z0(h,g,y,j&&Sk.has(h)?{type:!1}:b,e,v));const T=g.animation;T&&f.push(T)}return l&&Promise.all(f).then(()=>{tt.update(()=>{l&&cI(e,l)})}),f}function Dg(e,t,n={}){var d;const r=da(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(Ck(e,r,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:h,staggerDirection:g}=s;return hI(e,t,f,p,h,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[f,p]=u==="beforeChildren"?[o,l]:[l,o];return f().then(()=>p())}else return Promise.all([o(),l(n.delay)])}function hI(e,t,n=0,r=0,s=0,o=1,l){const u=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),u.push(Dg(d,t,{...l,delay:n+(typeof r=="function"?0:r)+vk(e.variantChildren,d,r,s,o)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function pI(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(o=>Dg(e,o,n));r=Promise.all(s)}else if(typeof t=="string")r=Dg(e,t,n);else{const s=typeof t=="function"?da(e,t,n.custom):t;r=Promise.all(Ck(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const mI={test:e=>e==="auto",parse:e=>e},_k=e=>t=>t.test(e),Ek=[Pa,Re,Wr,Zs,W6,B6,mI],p1=e=>Ek.find(_k(e));function gI(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||VS(e):!0}const yI=new Set(["brightness","contrast","saturate","opacity"]);function xI(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(U0)||[];if(!r)return e;const s=n.replace(r,"");let o=yI.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}const bI=/\b([a-z-]*)\(.*?\)/gu,Fg={...li,getAnimatableNone:e=>{const t=e.match(bI);return t?t.map(xI).join(" "):e}},m1={...Pa,transform:Math.round},vI={rotate:Zs,rotateX:Zs,rotateY:Zs,rotateZ:Zs,scale:ld,scaleX:ld,scaleY:ld,scaleZ:ld,skew:Zs,skewX:Zs,skewY:Zs,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:ic,originX:t1,originY:t1,originZ:Re},ny={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,inset:Re,insetBlock:Re,insetBlockStart:Re,insetBlockEnd:Re,insetInline:Re,insetInlineStart:Re,insetInlineEnd:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,paddingBlock:Re,paddingBlockStart:Re,paddingBlockEnd:Re,paddingInline:Re,paddingInlineStart:Re,paddingInlineEnd:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,marginBlock:Re,marginBlockStart:Re,marginBlockEnd:Re,marginInline:Re,marginInlineStart:Re,marginInlineEnd:Re,fontSize:Re,backgroundPositionX:Re,backgroundPositionY:Re,...vI,zIndex:m1,fillOpacity:ic,strokeOpacity:ic,numOctaves:m1},wI={...ny,color:Tt,backgroundColor:Tt,outlineColor:Tt,fill:Tt,stroke:Tt,borderColor:Tt,borderTopColor:Tt,borderRightColor:Tt,borderBottomColor:Tt,borderLeftColor:Tt,filter:Fg,WebkitFilter:Fg},Nk=e=>wI[e];function Tk(e,t){let n=Nk(e);return n!==Fg&&(n=li),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const SI=new Set(["auto","none","0"]);function kI(e,t,n){let r=0,s;for(;r<e.length&&!s;){const o=e[r];typeof o=="string"&&!SI.has(o)&&oc(o).values.length&&(s=e[r]),r++}if(s&&n)for(const o of t)e[o]=Tk(n,s)}class jI extends J0{constructor(t,n,r,s,o){super(t,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let h=t[p];if(typeof h=="string"&&(h=h.trim(),V0(h))){const g=wk(h,n.current);g!==void 0&&(t[p]=g),p===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Sk.has(r)||t.length!==2)return;const[s,o]=t,l=p1(s),u=p1(o),d=e1(s),f=e1(o);if(d!==f&&si[r]){this.needsMeasurement=!0;return}if(l!==u)if(c1(l)&&c1(u))for(let p=0;p<t.length;p++){const h=t[p];typeof h=="string"&&(t[p]=parseFloat(h))}else si[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||gI(t[s]))&&r.push(s);r.length&&kI(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=si[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=si[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function Rk(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(r=>r!=null)}const Ik=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Og(e){return WS(e)&&"offsetHeight"in e}const{schedule:ry}=tk(queueMicrotask,!1),fr={x:!1,y:!1};function Ak(){return fr.x||fr.y}function CI(e){return e==="x"||e==="y"?fr[e]?null:(fr[e]=!0,()=>{fr[e]=!1}):fr.x||fr.y?null:(fr.x=fr.y=!0,()=>{fr.x=fr.y=!1})}function Pk(e,t){const n=Rk(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function g1(e){return!(e.pointerType==="touch"||Ak())}function _I(e,t,n={}){const[r,s,o]=Pk(e,n),l=u=>{if(!g1(u))return;const{target:d}=u,f=t(d,u);if(typeof f!="function"||!d)return;const p=h=>{g1(h)&&(f(h),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const Mk=(e,t)=>t?e===t?!0:Mk(e,t.parentElement):!1,sy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,EI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function NI(e){return EI.has(e.tagName)||e.isContentEditable===!0}const TI=new Set(["INPUT","SELECT","TEXTAREA"]);function RI(e){return TI.has(e.tagName)||e.isContentEditable===!0}const Hd=new WeakSet;function y1(e){return t=>{t.key==="Enter"&&e(t)}}function _m(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const II=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=y1(()=>{if(Hd.has(n))return;_m(n,"down");const s=y1(()=>{_m(n,"up")}),o=()=>_m(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function x1(e){return sy(e)&&!Ak()}function AI(e,t,n={}){const[r,s,o]=Pk(e,n),l=u=>{const d=u.currentTarget;if(!x1(u))return;Hd.add(d);const f=t(d,u),p=(y,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),Hd.has(d)&&Hd.delete(d),x1(y)&&typeof f=="function"&&f(y,{success:b})},h=y=>{p(y,d===window||d===document||n.useGlobalTarget||Mk(d,y.target))},g=y=>{p(y,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",g,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),Og(u)&&(u.addEventListener("focus",f=>II(f,s)),!NI(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function Dk(e){return WS(e)&&"ownerSVGElement"in e}function PI(e){return Dk(e)&&e.tagName==="svg"}const MI=[...Ek,Tt,li],DI=e=>MI.find(_k(e)),b1=()=>({translate:0,scale:1,origin:0,originPoint:0}),ia=()=>({x:b1(),y:b1()}),v1=()=>({min:0,max:0}),Bt=()=>({x:v1(),y:v1()}),zg={current:null},Fk={current:!1},FI=typeof window<"u";function OI(){if(Fk.current=!0,!!FI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zg.current=e.matches;e.addEventListener("change",t),t()}else zg.current=!1}const zI=new WeakMap;function Hf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ac(e){return typeof e=="string"||Array.isArray(e)}const iy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oy=["initial",...iy];function qf(e){return Hf(e.animate)||oy.some(t=>ac(e[t]))}function Ok(e){return!!(qf(e)||e.variants)}function $I(e,t,n){for(const r in t){const s=t[r],o=n[r];if(ln(s))e.addValue(r,s);else if(ln(o))e.addValue(r,wa(s,{owner:e}));else if(o!==s)if(e.hasValue(r)){const l=e.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=e.getStaticValue(r);e.addValue(r,wa(l!==void 0?l:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const w1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let df={};function zk(e){df=e}function LI(){return df}class BI{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=J0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=mn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,tt.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=qf(n),this.isVariantNode=Ok(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const b=g[y];f[y]!==void 0&&ln(b)&&b.set(f[y])}}mount(t){var n;this.current=t,zI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Fk.current||OI(),this.shouldReduceMotion=zg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ai(this.notifyUpdate),ai(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Da.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in df){const n=df[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<w1.length;r++){const s=w1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=t[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=$I(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=wa(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(BS(r)||VS(r))?r=parseFloat(r):!DI(r)&&li.test(n)&&(r=Tk(t,n)),this.setBaseTarget(t,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=ey(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ln(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new L0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){ry.render(this.render)}}class $k extends BI{constructor(){super(...arguments),this.KeyframeResolver=jI}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class pi{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Lk({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function WI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function VI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Em(e){return e===void 0||e===1}function $g({scale:e,scaleX:t,scaleY:n}){return!Em(e)||!Em(t)||!Em(n)}function Vi(e){return $g(e)||Bk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Bk(e){return S1(e.x)||S1(e.y)}function S1(e){return e&&e!=="0%"}function ff(e,t,n){const r=e-n,s=t*r;return n+s}function k1(e,t,n,r,s){return s!==void 0&&(e=ff(e,s,r)),ff(e,n,r)+t}function Lg(e,t=0,n=1,r,s){e.min=k1(e.min,t,n,r,s),e.max=k1(e.max,t,n,r,s)}function Wk(e,{x:t,y:n}){Lg(e.x,t.translate,t.scale,t.originPoint),Lg(e.y,n.translate,n.scale,n.originPoint)}const j1=.999999999999,C1=1.0000000000001;function UI(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,l;for(let u=0;u<s;u++){o=n[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&aa(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,Wk(e,l)),r&&Vi(o.latestValues)&&aa(e,o.latestValues))}t.x<C1&&t.x>j1&&(t.x=1),t.y<C1&&t.y>j1&&(t.y=1)}function oa(e,t){e.min=e.min+t,e.max=e.max+t}function _1(e,t,n,r,s=.5){const o=yt(e.min,e.max,s);Lg(e,t,n,o,r)}function aa(e,t){_1(e.x,t.x,t.scaleX,t.scale,t.originX),_1(e.y,t.y,t.scaleY,t.scale,t.originY)}function Vk(e,t){return Lk(VI(e.getBoundingClientRect(),t))}function HI(e,t,n){const r=Vk(e,n),{scroll:s}=t;return s&&(oa(r.x,s.offset.x),oa(r.y,s.offset.y)),r}const qI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GI=Ma.length;function KI(e,t,n){let r="",s=!0;for(let o=0;o<GI;o++){const l=Ma[o],u=e[l];if(u===void 0)continue;let d=!0;if(typeof u=="number")d=u===(l.startsWith("scale")?1:0);else{const f=parseFloat(u);d=l.startsWith("scale")?f===1:f===0}if(!d||n){const f=Ik(u,ny[l]);if(!d){s=!1;const p=qI[l]||l;r+=`${p}(${f}) `}n&&(t[l]=f)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ay(e,t,n){const{style:r,vars:s,transformOrigin:o}=e;let l=!1,u=!1;for(const d in t){const f=t[d];if(Da.has(d)){l=!0;continue}else if(rk(d)){s[d]=f;continue}else{const p=Ik(f,ny[d]);d.startsWith("origin")?(u=!0,o[d]=p):r[d]=p}}if(t.transform||(l||n?r.transform=KI(t,e.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;r.transformOrigin=`${d} ${f} ${p}`}}function Uk(e,{style:t,vars:n},r,s){const o=e.style;let l;for(l in t)o[l]=t[l];s==null||s.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function E1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ml={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Re.test(e))e=parseFloat(e);else return e;const n=E1(e,t.target.x),r=E1(e,t.target.y);return`${n}% ${r}%`}},YI={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=li.parse(e);if(s.length>5)return r;const o=li.createTransformer(e),l=typeof s[0]!="number"?1:0,u=n.x.scale*t.x,d=n.y.scale*t.y;s[0+l]/=u,s[1+l]/=d;const f=yt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}},Bg={borderRadius:{...Ml,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ml,borderTopRightRadius:Ml,borderBottomLeftRadius:Ml,borderBottomRightRadius:Ml,boxShadow:YI};function Hk(e,{layout:t,layoutId:n}){return Da.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Bg[e]||e==="opacity")}function ly(e,t,n){var l;const r=e.style,s=t==null?void 0:t.style,o={};if(!r)return o;for(const u in r)(ln(r[u])||s&&ln(s[u])||Hk(u,e)||((l=n==null?void 0:n.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(o[u]=r[u]);return o}function XI(e){return window.getComputedStyle(e)}class JI extends $k{constructor(){super(...arguments),this.type="html",this.renderInstance=Uk}readValueFromInstance(t,n){var r;if(Da.has(n))return(r=this.projection)!=null&&r.isProjecting?Eg(n):CR(t,n);{const s=XI(t),o=(rk(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Vk(t,n)}build(t,n,r){ay(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return ly(t,n,r)}}const QI={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZI={offset:"strokeDashoffset",array:"strokeDasharray"};function e3(e,t,n=1,r=0,s=!0){e.pathLength=1;const o=s?QI:ZI;e[o.offset]=`${-r}`,e[o.array]=`${t} ${n}`}const t3=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function qk(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f,p){if(ay(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g}=e;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete h.transformBox);for(const y of t3)h[y]!==void 0&&(g[y]=h[y],delete h[y]);t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&e3(h,s,o,l,!1)}const Gk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Kk=e=>typeof e=="string"&&e.toLowerCase()==="svg";function n3(e,t,n,r){Uk(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Gk.has(s)?s:ty(s),t.attrs[s])}function Yk(e,t,n){const r=ly(e,t,n);for(const s in e)if(ln(e[s])||ln(t[s])){const o=Ma.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=e[s]}return r}class r3 extends $k{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Da.has(n)){const r=Nk(n);return r&&r.default||0}return n=Gk.has(n)?n:ty(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Yk(t,n,r)}build(t,n,r){qk(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){n3(t,n,r,s)}mount(t){this.isSVGTag=Kk(t.tagName),super.mount(t)}}const s3=oy.length;function Xk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Xk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<s3;n++){const r=oy[n],s=e.props[r];(ac(s)||s===!1)&&(t[r]=s)}return t}function Jk(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const i3=[...iy].reverse(),o3=iy.length;function a3(e){return t=>Promise.all(t.map(({animation:n,options:r})=>pI(e,n,r)))}function l3(e){let t=a3(e),n=N1(),r=!0;const s=d=>(f,p)=>{var g;const h=da(e,p,d==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);if(h){const{transition:y,transitionEnd:b,...w}=h;f={...f,...w,...b}}return f};function o(d){t=d(e)}function l(d){const{props:f}=e,p=Xk(e.parent)||{},h=[],g=new Set;let y={},b=1/0;for(let v=0;v<o3;v++){const j=i3[v],T=n[j],k=f[j]!==void 0?f[j]:p[j],_=ac(k),N=j===d?T.isActive:null;N===!1&&(b=v);let E=k===p[j]&&k!==f[j]&&_;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),T.protectedKeys={...y},!T.isActive&&N===null||!k&&!T.prevProp||Hf(k)||typeof k=="boolean")continue;const R=c3(T.prevProp,k);let A=R||j===d&&T.isActive&&!E&&_||v>b&&_,P=!1;const z=Array.isArray(k)?k:[k];let L=z.reduce(s(j),{});N===!1&&(L={});const{prevResolvedValues:B={}}=T,K={...B,...L},V=H=>{A=!0,g.has(H)&&(P=!0,g.delete(H)),T.needsAnimating[H]=!0;const M=e.getValue(H);M&&(M.liveStyle=!1)};for(const H in K){const M=L[H],U=B[H];if(y.hasOwnProperty(H))continue;let F=!1;Pg(M)&&Pg(U)?F=!Jk(M,U):F=M!==U,F?M!=null?V(H):g.add(H):M!==void 0&&g.has(H)?V(H):T.protectedKeys[H]=!0}T.prevProp=k,T.prevResolvedValues=L,T.isActive&&(y={...y,...L}),r&&e.blockInitialAnimation&&(A=!1);const J=E&&R;A&&(!J||P)&&h.push(...z.map(H=>{const M={type:j};if(typeof H=="string"&&r&&!J&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,F=da(U,H);if(U.enteringChildren&&F){const{delayChildren:D}=F.transition||{};M.delay=vk(U.enteringChildren,e,D)}}return{animation:H,options:M}}))}if(g.size){const v={};if(typeof f.initial!="boolean"){const j=da(e,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(v.transition=j.transition)}g.forEach(j=>{const T=e.getBaseTarget(j),k=e.getValue(j);k&&(k.liveStyle=!0),v[j]=T??null}),h.push({animation:v})}let w=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(h):Promise.resolve()}function u(d,f){var h;if(n[d].isActive===f)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(g=>{var y;return(y=g.animationState)==null?void 0:y.setActive(d,f)}),n[d].isActive=f;const p=l(d);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=N1()}}}function c3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Jk(t,e):!1}function Oi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N1(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}function T1(e,t){e.min=t.min,e.max=t.max}function ur(e,t){T1(e.x,t.x),T1(e.y,t.y)}function R1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const Qk=1e-4,u3=1-Qk,d3=1+Qk,Zk=.01,f3=0-Zk,h3=0+Zk;function gn(e){return e.max-e.min}function p3(e,t,n){return Math.abs(e-t)<=n}function I1(e,t,n,r=.5){e.origin=r,e.originPoint=yt(t.min,t.max,e.origin),e.scale=gn(n)/gn(t),e.translate=yt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=u3&&e.scale<=d3||isNaN(e.scale))&&(e.scale=1),(e.translate>=f3&&e.translate<=h3||isNaN(e.translate))&&(e.translate=0)}function Ql(e,t,n,r){I1(e.x,t.x,n.x,r?r.originX:void 0),I1(e.y,t.y,n.y,r?r.originY:void 0)}function A1(e,t,n){e.min=n.min+t.min,e.max=e.min+gn(t)}function m3(e,t,n){A1(e.x,t.x,n.x),A1(e.y,t.y,n.y)}function P1(e,t,n){e.min=t.min-n.min,e.max=e.min+gn(t)}function hf(e,t,n){P1(e.x,t.x,n.x),P1(e.y,t.y,n.y)}function M1(e,t,n,r,s){return e-=t,e=ff(e,1/n,r),s!==void 0&&(e=ff(e,1/s,r)),e}function g3(e,t=0,n=1,r=.5,s,o=e,l=e){if(Wr.test(t)&&(t=parseFloat(t),t=yt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=yt(o.min,o.max,r);e===o&&(u-=t),e.min=M1(e.min,t,n,u,s),e.max=M1(e.max,t,n,u,s)}function D1(e,t,[n,r,s],o,l){g3(e,t[n],t[r],t[s],t.scale,o,l)}const y3=["x","scaleX","originX"],x3=["y","scaleY","originY"];function F1(e,t,n,r){D1(e.x,t,y3,n?n.x:void 0,r?r.x:void 0),D1(e.y,t,x3,n?n.y:void 0,r?r.y:void 0)}function O1(e){return e.translate===0&&e.scale===1}function ej(e){return O1(e.x)&&O1(e.y)}function z1(e,t){return e.min===t.min&&e.max===t.max}function b3(e,t){return z1(e.x,t.x)&&z1(e.y,t.y)}function $1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function tj(e,t){return $1(e.x,t.x)&&$1(e.y,t.y)}function L1(e){return gn(e.x)/gn(e.y)}function B1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Jn(e){return[e("x"),e("y")]}function v3(e,t,n){let r="";const s=e.x.translate/t.x,o=e.y.translate/t.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:h,rotateY:g,skewX:y,skewY:b}=n;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),b&&(r+=`skewY(${b}deg) `)}const u=e.x.scale*t.x,d=e.y.scale*t.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const nj=["TopLeft","TopRight","BottomLeft","BottomRight"],w3=nj.length,W1=e=>typeof e=="string"?parseFloat(e):e,V1=e=>typeof e=="number"||Re.test(e);function S3(e,t,n,r,s,o){s?(e.opacity=yt(0,n.opacity??1,k3(r)),e.opacityExit=yt(t.opacity??1,0,j3(r))):o&&(e.opacity=yt(t.opacity??1,n.opacity??1,r));for(let l=0;l<w3;l++){const u=`border${nj[l]}Radius`;let d=U1(t,u),f=U1(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||V1(d)===V1(f)?(e[u]=Math.max(yt(W1(d),W1(f),r),0),(Wr.test(f)||Wr.test(d))&&(e[u]+="%")):e[u]=f}(t.rotate||n.rotate)&&(e.rotate=yt(t.rotate||0,n.rotate||0,r))}function U1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const k3=rj(0,.5,JS),j3=rj(.5,.95,Zn);function rj(e,t,n){return r=>r<e?0:r>t?1:n(sc(e,t,r))}function C3(e,t,n){const r=ln(e)?e:wa(e);return r.start(Z0("",r,t,n)),r.animation}function lc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const _3=(e,t)=>e.depth-t.depth;class E3{constructor(){this.children=[],this.isDirty=!1}add(t){F0(this.children,t),this.isDirty=!0}remove(t){O0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_3),this.isDirty=!1,this.children.forEach(t)}}function N3(e,t){const n=mn.now(),r=({timestamp:s})=>{const o=s-n;o>=t&&(ai(r),e(o-t))};return tt.setup(r,!0),()=>ai(r)}function qd(e){return ln(e)?e.get():e}class T3{constructor(){this.members=[]}add(t){F0(this.members,t),t.scheduleRender()}remove(t){if(O0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const s=r.options.layoutDependency,o=t.options.layoutDependency;s!==void 0&&o!==void 0&&s===o||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:u}=t.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Gd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Nm=["","X","Y","Z"],R3=1e3;let I3=0;function Tm(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function sj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=jk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(s||o))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&sj(r)}function ij({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=t==null?void 0:t()){this.id=I3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(M3),this.nodes.forEach(z3),this.nodes.forEach($3),this.nodes.forEach(D3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new E3)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new L0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Dk(l)&&!PI(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),e){let p,h=0;const g=()=>this.root.updateBlockedByResize=!1;tt.read(()=>{h=window.innerWidth}),e(l,()=>{const y=window.innerWidth;y!==h&&(h=y,this.root.updateBlockedByResize=!0,p&&p(),p=N3(g,250),Gd.hasAnimatedSinceResize&&(Gd.hasAnimatedSinceResize=!1,this.nodes.forEach(G1)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||U3,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=f.getProps(),j=!this.targetLayout||!tj(this.targetLayout,y),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Q0(b,"layout"),onPlay:w,onComplete:v};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(p,T)}else h||G1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L3),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const h=this.path[p];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(q1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(O3),this.nodes.forEach(A3),this.nodes.forEach(P3)):this.nodes.forEach(q1),this.clearAllSnapshots();const u=mn.now();en.delta=Hr(0,1e3/60,u-en.timestamp),en.timestamp=u,en.isProcessing=!0,vm.update.process(en),vm.preRender.process(en),vm.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ry.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(F3),this.sharedNodes.forEach(B3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gn(this.snapshot.measuredBox.x)&&!gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!ej(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Vi(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),H3(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return Bt();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(q3))){const{scroll:p}=this.root;p&&(oa(u.x,p.offset.x),oa(u.y,p.offset.y))}return u}removeElementScroll(l){var d;const u=Bt();if(ur(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:h,options:g}=p;p!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&ur(u,l),oa(u.x,h.offset.x),oa(u.y,h.offset.y))}return u}applyTransform(l,u=!1){const d=Bt();ur(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&aa(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Vi(p.latestValues)&&aa(d,p.latestValues)}return Vi(this.latestValues)&&aa(d,this.latestValues),d}removeTransform(l){const u=Bt();ur(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Vi(f.latestValues))continue;$g(f.latestValues)&&f.updateSnapshot();const p=Bt(),h=f.measurePageBox();ur(p,h),F1(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Vi(this.latestValues)&&F1(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var y;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:h}=this.options;if(!this.layout||!(p||h))return;this.resolvedRelativeTargetAt=en.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),m3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ur(this.target,this.layout.layoutBox),Wk(this.target,this.targetDelta)):ur(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||$g(this.parent.latestValues)||Bk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),hf(this.relativeTargetOrigin,u,d),ur(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===en.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;ur(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;UI(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Bt());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(R1(this.prevProjectionDelta.x,this.projectionDelta.x),R1(this.prevProjectionDelta.y,this.projectionDelta.y)),Ql(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!B1(this.projectionDelta.x,this.prevProjectionDelta.x)||!B1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ia(),this.projectionDelta=ia(),this.projectionDeltaWithTransform=ia()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},h=ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=Bt(),y=d?d.source:void 0,b=this.layout?this.layout.source:void 0,w=y!==b,v=this.getStack(),j=!v||v.members.length<=1,T=!!(w&&!j&&this.options.crossfade===!0&&!this.path.some(V3));this.animationProgress=0;let k;this.mixTargetDelta=_=>{const N=_/1e3;K1(h.x,l.x,N),K1(h.y,l.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),W3(this.relativeTarget,this.relativeTargetOrigin,g,N),k&&b3(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Bt()),ur(k,this.relativeTarget)),w&&(this.animationValues=p,S3(p,f,this.latestValues,N,T,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Gd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wa(0)),this.currentAnimation=C3(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(R3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&oj(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Bt();const h=gn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+h;const g=gn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+g}ur(u,d),aa(u,p),Ql(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new T3),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&Tm("z",l,f,this.animationValues);for(let p=0;p<Nm.length;p++)Tm(`rotate${Nm[p]}`,l,f,this.animationValues),Tm(`skew${Nm[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=qd(u==null?void 0:u.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=qd(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Vi(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=v3(this.projectionDeltaWithTransform,this.treeScale,p);d&&(h=d(p,h)),l.transform=h;const{x:g,y}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Bg){if(p[b]===void 0)continue;const{correct:w,applyTo:v,isCSSVariable:j}=Bg[b],T=h==="none"?p[b]:w(p[b],f);if(v){const k=v.length;for(let _=0;_<k;_++)l[v[_]]=T}else j?this.options.visualElement.renderState.vars[b]=T:l[b]=T}this.options.layoutId&&(l.pointerEvents=f===this?qd(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(H1),this.root.sharedNodes.clear()}}}function A3(e){e.updateLayout()}function P3(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:o}=e.options,l=t.source!==e.layout.source;o==="size"?Jn(h=>{const g=l?t.measuredBox[h]:t.layoutBox[h],y=gn(g);g.min=r[h].min,g.max=g.min+y}):oj(o,t.layoutBox,r)&&Jn(h=>{const g=l?t.measuredBox[h]:t.layoutBox[h],y=gn(r[h]);g.max=g.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+y)});const u=ia();Ql(u,r,t.layoutBox);const d=ia();l?Ql(d,e.applyTransform(s,!0),t.measuredBox):Ql(d,r,t.layoutBox);const f=!ej(u);let p=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:y}=h;if(g&&y){const b=Bt();hf(b,t.layoutBox,g.layoutBox);const w=Bt();hf(w,r,y.layoutBox),tj(b,w)||(p=!0),h.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function M3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function D3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function F3(e){e.clearSnapshot()}function H1(e){e.clearMeasurements()}function q1(e){e.isLayoutDirty=!1}function O3(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function G1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function z3(e){e.resolveTargetDelta()}function $3(e){e.calcProjection()}function L3(e){e.resetSkewAndRotation()}function B3(e){e.removeLeadSnapshot()}function K1(e,t,n){e.translate=yt(t.translate,0,n),e.scale=yt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Y1(e,t,n,r){e.min=yt(t.min,n.min,r),e.max=yt(t.max,n.max,r)}function W3(e,t,n,r){Y1(e.x,t.x,n.x,r),Y1(e.y,t.y,n.y,r)}function V3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const U3={duration:.45,ease:[.4,0,.1,1]},X1=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),J1=X1("applewebkit/")&&!X1("chrome/")?Math.round:Zn;function Q1(e){e.min=J1(e.min),e.max=J1(e.max)}function H3(e){Q1(e.x),Q1(e.y)}function oj(e,t,n){return e==="position"||e==="preserve-aspect"&&!p3(L1(t),L1(n),.2)}function q3(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const G3=ij({attachResizeListener:(e,t)=>lc(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Rm={current:void 0},aj=ij({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Rm.current){const e=new G3({});e.mount(window),e.setOptions({layoutScroll:!0}),Rm.current=e}return Rm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),cy=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Z1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function K3(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Z1(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Z1(e[s],null)}}}}function Y3(...e){return S.useCallback(K3(...e),e)}class X3 extends S.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Og(r)&&r.offsetWidth||0,o=Og(r)&&r.offsetHeight||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=s-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function J3({children:e,isPresent:t,anchorX:n,anchorY:r,root:s}){var h;const o=S.useId(),l=S.useRef(null),u=S.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=S.useContext(cy),f=((h=e.props)==null?void 0:h.ref)??(e==null?void 0:e.ref),p=Y3(l,f);return S.useInsertionEffect(()=>{const{width:g,height:y,top:b,left:w,right:v,bottom:j}=u.current;if(t||!l.current||!g||!y)return;const T=n==="left"?`left: ${w}`:`right: ${v}`,k=r==="bottom"?`bottom: ${j}`:`top: ${b}`;l.current.dataset.motionPopId=o;const _=document.createElement("style");d&&(_.nonce=d);const N=s??document.head;return N.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${T}px !important;
            ${k}px !important;
          }
        `),()=>{N.contains(_)&&N.removeChild(_)}},[t]),i.jsx(X3,{isPresent:t,childRef:l,sizeRef:u,children:S.cloneElement(e,{ref:p})})}const Q3=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,anchorY:d,root:f})=>{const p=D0(Z3),h=S.useId();let g=!0,y=S.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:n,custom:s,onExitComplete:b=>{p.set(b,!0);for(const w of p.values())if(!w)return;r&&r()},register:b=>(p.set(b,!1),()=>p.delete(b))}),[n,p,r]);return o&&g&&(y={...y}),S.useMemo(()=>{p.forEach((b,w)=>p.set(w,!1))},[n]),S.useEffect(()=>{!n&&!p.size&&r&&r()},[n]),l==="popLayout"&&(e=i.jsx(J3,{isPresent:n,anchorX:u,anchorY:d,root:f,children:e})),i.jsx(Uf.Provider,{value:y,children:e})};function Z3(){return new Map}function lj(e=!0){const t=S.useContext(Uf);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,o=S.useId();S.useEffect(()=>{if(e)return s(o)},[e]);const l=S.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,l]:[!0]}const cd=e=>e.key||"";function ew(e){const t=[];return S.Children.forEach(e,n=>{S.isValidElement(n)&&t.push(n)}),t}const ci=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",anchorY:d="top",root:f})=>{const[p,h]=lj(l),g=S.useMemo(()=>ew(e),[e]),y=l&&!p?[]:g.map(cd),b=S.useRef(!0),w=S.useRef(g),v=D0(()=>new Map),j=S.useRef(new Set),[T,k]=S.useState(g),[_,N]=S.useState(g);LS(()=>{b.current=!1,w.current=g;for(let A=0;A<_.length;A++){const P=cd(_[A]);y.includes(P)?(v.delete(P),j.current.delete(P)):v.get(P)!==!0&&v.set(P,!1)}},[_,y.length,y.join("-")]);const E=[];if(g!==T){let A=[...g];for(let P=0;P<_.length;P++){const z=_[P],L=cd(z);y.includes(L)||(A.splice(P,0,z),E.push(z))}return o==="wait"&&E.length&&(A=E),N(ew(A)),k(g),null}const{forceRender:R}=S.useContext(M0);return i.jsx(i.Fragment,{children:_.map(A=>{const P=cd(A),z=l&&!p?!1:g===_||y.includes(P),L=()=>{if(j.current.has(P))return;if(j.current.add(P),v.has(P))v.set(P,!0);else return;let B=!0;v.forEach(K=>{K||(B=!1)}),B&&(R==null||R(),N(w.current),l&&(h==null||h()),r&&r())};return i.jsx(Q3,{isPresent:z,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:z?void 0:L,anchorX:u,anchorY:d,children:A},P)})})},cj=S.createContext({strict:!1}),tw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let nw=!1;function e4(){if(nw)return;const e={};for(const t in tw)e[t]={isEnabled:n=>tw[t].some(r=>!!n[r])};zk(e),nw=!0}function uj(){return e4(),LI()}function t4(e){const t=uj();for(const n in e)t[n]={...t[n],...e[n]};zk(t)}const n4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||n4.has(e)}let dj=e=>!pf(e);function r4(e){typeof e=="function"&&(dj=t=>t.startsWith("on")?!pf(t):e(t))}try{r4(require("@emotion/is-prop-valid").default)}catch{}function s4(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(dj(s)||n===!0&&pf(s)||!t&&!pf(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Gf=S.createContext({});function i4(e,t){if(qf(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ac(n)?n:void 0,animate:ac(r)?r:void 0}}return e.inherit!==!1?t:{}}function o4(e){const{initial:t,animate:n}=i4(e,S.useContext(Gf));return S.useMemo(()=>({initial:t,animate:n}),[rw(t),rw(n)])}function rw(e){return Array.isArray(e)?e.join(" "):e}const uy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fj(e,t,n){for(const r in t)!ln(t[r])&&!Hk(r,n)&&(e[r]=t[r])}function a4({transformTemplate:e},t){return S.useMemo(()=>{const n=uy();return ay(n,t,e),Object.assign({},n.vars,n.style)},[t])}function l4(e,t){const n=e.style||{},r={};return fj(r,n,e),Object.assign(r,a4(e,t)),r}function c4(e,t){const n={},r=l4(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const hj=()=>({...uy(),attrs:{}});function u4(e,t,n,r){const s=S.useMemo(()=>{const o=hj();return qk(o,t,Kk(r),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};fj(o,e.style,e),s.style={...o,...s.style}}return s}const d4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dy(e){return typeof e!="string"||e.includes("-")?!1:!!(d4.indexOf(e)>-1||/[A-Z]/u.test(e))}function f4(e,t,n,{latestValues:r},s,o=!1,l){const d=(l??dy(e)?u4:c4)(t,r,s,e),f=s4(t,typeof e=="string",o),p=e!==S.Fragment?{...f,...d,ref:n}:{},{children:h}=t,g=S.useMemo(()=>ln(h)?h.get():h,[h]);return S.createElement(e,{...p,children:g})}function h4({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:p4(n,r,s,e),renderState:t()}}function p4(e,t,n,r){const s={},o=r(e,{});for(const g in o)s[g]=qd(o[g]);let{initial:l,animate:u}=e;const d=qf(e),f=Ok(e);t&&f&&!d&&e.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const h=p?u:l;if(h&&typeof h!="boolean"&&!Hf(h)){const g=Array.isArray(h)?h:[h];for(let y=0;y<g.length;y++){const b=ey(e,g[y]);if(b){const{transitionEnd:w,transition:v,...j}=b;for(const T in j){let k=j[T];if(Array.isArray(k)){const _=p?k.length-1:0;k=k[_]}k!==null&&(s[T]=k)}for(const T in w)s[T]=w[T]}}}return s}const pj=e=>(t,n)=>{const r=S.useContext(Gf),s=S.useContext(Uf),o=()=>h4(e,t,r,s);return n?o():D0(o)},m4=pj({scrapeMotionValuesFromProps:ly,createRenderState:uy}),g4=pj({scrapeMotionValuesFromProps:Yk,createRenderState:hj}),y4=Symbol.for("motionComponentSymbol");function x4(e,t,n){const r=S.useRef(n);S.useInsertionEffect(()=>{r.current=n});const s=S.useRef(null);return S.useCallback(o=>{var u;o&&((u=e.onMount)==null||u.call(e,o)),t&&(o?t.mount(o):t.unmount());const l=r.current;if(typeof l=="function")if(o){const d=l(o);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):l(o);else l&&(l.current=o)},[t])}const mj=S.createContext({});function Hl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function b4(e,t,n,r,s,o){var k,_;const{visualElement:l}=S.useContext(Gf),u=S.useContext(cj),d=S.useContext(Uf),f=S.useContext(cy),p=f.reducedMotion,h=f.skipAnimations,g=S.useRef(null),y=S.useRef(!1);r=r||u.renderer,!g.current&&r&&(g.current=r(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p,skipAnimations:h,isSVG:o}),y.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,w=S.useContext(mj);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&v4(g.current,n,s,w);const v=S.useRef(!1);S.useInsertionEffect(()=>{b&&v.current&&b.update(n,d)});const j=n[kk],T=S.useRef(!!j&&!((k=window.MotionHandoffIsComplete)!=null&&k.call(window,j))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,j)));return LS(()=>{y.current=!0,b&&(v.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),T.current&&b.animationState&&b.animationState.animateChanges())}),S.useEffect(()=>{b&&(!T.current&&b.animationState&&b.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,j)}),T.current=!1),b.enteringChildren=void 0)}),b}function v4(e,t,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:gj(e.parent)),e.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Hl(u),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:f})}function gj(e){if(e)return e.options.allowProjection!==!1?e.projection:gj(e.parent)}function Im(e,{forwardMotionProps:t=!1,type:n}={},r,s){r&&t4(r);const o=n?n==="svg":dy(e),l=o?g4:m4;function u(f,p){let h;const g={...S.useContext(cy),...f,layoutId:w4(f)},{isStatic:y}=g,b=o4(f),w=l(f,y);if(!y&&$S){S4();const v=k4(g);h=v.MeasureLayout,b.visualElement=b4(e,w,g,s,v.ProjectionNode,o)}return i.jsxs(Gf.Provider,{value:b,children:[h&&b.visualElement?i.jsx(h,{visualElement:b.visualElement,...g}):null,f4(e,f,x4(w,b.visualElement,p),w,y,t,o)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=S.forwardRef(u);return d[y4]=e,d}function w4({layoutId:e}){const t=S.useContext(M0).id;return t&&e!==void 0?t+"-"+e:e}function S4(e,t){S.useContext(cj).strict}function k4(e){const t=uj(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function j4(e,t){if(typeof Proxy>"u")return Im;const n=new Map,r=(o,l)=>Im(o,l,e,t),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,Im(l,void 0,e,t)),n.get(l))})}const C4=(e,t)=>t.isSVG??dy(e)?new r3(t):new JI(t,{allowProjection:e!==S.Fragment});class _4 extends pi{constructor(t){super(t),t.animationState||(t.animationState=l3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Hf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let E4=0;class N4 extends pi{constructor(){super(...arguments),this.id=E4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const T4={animation:{Feature:_4},exit:{Feature:N4}};function Dc(e){return{point:{x:e.pageX,y:e.pageY}}}const R4=e=>t=>sy(t)&&e(t,Dc(t));function Zl(e,t,n,r){return lc(e,t,R4(n),r)}const yj=({current:e})=>e?e.ownerDocument.defaultView:null,sw=(e,t)=>Math.abs(e-t);function I4(e,t){const n=sw(e.x,t.x),r=sw(e.y,t.y);return Math.sqrt(n**2+r**2)}const iw=new Set(["auto","scroll"]);class xj{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Pm(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=I4(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:v}=y,{timestamp:j}=en;this.history.push({...v,timestamp:j});const{onStart:T,onMove:k}=this.handlers;b||(T&&T(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Am(b,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:j}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Pm(y.type==="pointercancel"?this.lastMoveEventInfo:Am(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,T),v&&v(y,T)},!sy(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const d=Dc(t),f=Am(d,this.transformPagePoint),{point:p}=f,{timestamp:h}=en;this.history=[{...p,timestamp:h}];const{onSessionStart:g}=n;g&&g(t,Pm(f,this.history)),this.removeListeners=Ac(Zl(this.contextWindow,"pointermove",this.handlePointerMove),Zl(this.contextWindow,"pointerup",this.handlePointerUp),Zl(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(iw.has(r.overflowX)||iw.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:s.x-n.x,y:s.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,s),tt.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ai(this.updatePoint)}}function Am(e,t){return t?{point:t(e.point)}:e}function ow(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pm({point:e},t){return{point:e,delta:ow(e,bj(t)),offset:ow(e,A4(t)),velocity:P4(t,.1)}}function A4(e){return e[0]}function bj(e){return e[e.length-1]}function P4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=bj(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>hs(t)));)n--;if(!r)return{x:0,y:0};const o=Qn(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function M4(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?yt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?yt(n,e,r.max):Math.min(e,n)),e}function aw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function D4(e,{top:t,left:n,bottom:r,right:s}){return{x:aw(e.x,n,s),y:aw(e.y,t,r)}}function lw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function F4(e,t){return{x:lw(e.x,t.x),y:lw(e.y,t.y)}}function O4(e,t){let n=.5;const r=gn(e),s=gn(t);return s>r?n=sc(t.min,t.max-r,e.min):r>s&&(n=sc(e.min,e.max-s,t.min)),Hr(0,1,n)}function z4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Wg=.35;function $4(e=Wg){return e===!1?e=0:e===!0&&(e=Wg),{x:cw(e,"left","right"),y:cw(e,"top","bottom")}}function cw(e,t,n){return{min:uw(e,t),max:uw(e,n)}}function uw(e,t){return typeof e=="number"?e:e[t]||0}const L4=new WeakMap;class B4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=h=>{n?(this.stopAnimation(),this.snapToCursor(Dc(h).point)):this.pauseAnimation()},l=(h,g)=>{this.stopAnimation();const{drag:y,dragPropagation:b,onDragStart:w}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CI(y),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(j=>{let T=this.getAxisMotionValue(j).get()||0;if(Wr.test(T)){const{projection:k}=this.visualElement;if(k&&k.layout){const _=k.layout.layoutBox[j];_&&(T=gn(_)*(parseFloat(T)/100))}}this.originPoint[j]=T}),w&&tt.update(()=>w(h,g),!1,!0),Mg(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},u=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:w,onDrag:v}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:j}=g;if(b&&this.currentDirection===null){this.currentDirection=W4(j),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),v&&tt.update(()=>v(h,g),!1,!0)},d=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Jn(h=>{var g;return this.getAnimationState(h)==="paused"&&((g=this.getAxisMotionValue(h).animation)==null?void 0:g.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new xj(t,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:yj(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&tt.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!ud(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(l=M4(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;t&&Hl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=D4(r.layoutBox,t):this.constraints=!1,this.elastic=$4(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Jn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=z4(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Hl(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=HI(r,s.root,this.visualElement.getTransformPagePoint());let l=F4(s.layout.layoutBox,o);if(n){const u=n(WI(l));this.hasMutatedConstraints=!!u,u&&(l=Lk(u))}return l}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Jn(p=>{if(!ud(p,n,this.currentDirection))return;let h=d&&d[p]||{};l&&(h={min:0,max:0});const g=s?200:1e6,y=s?40:1e7,b={type:"inertia",velocity:r?t[p]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(p,b)});return Promise.all(f).then(u)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Mg(this.visualElement,t),r.start(Z0(t,r,0,n,this.visualElement,!1))}stopAnimation(){Jn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Jn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Jn(n=>{const{drag:r}=this.getProps();if(!ud(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n],d=o.get()||0;o.set(t[n]-yt(l,u,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Hl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Jn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=O4({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jn(l=>{if(!ud(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(yt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;L4.set(this.visualElement,this);const t=this.visualElement.current,n=Zl(t,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps(),h=d.target,g=h!==t&&RI(h);f&&p&&!g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Hl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),tt.read(r);const l=lc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Jn(p=>{const h=this.getAxisMotionValue(p);h&&(this.originPoint[p]+=d[p].translate,h.set(h.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Wg,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function ud(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function W4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class V4 extends pi{constructor(t){super(t),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new B4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Mm=e=>(t,n)=>{e&&tt.update(()=>e(t,n),!1,!0)};class U4 extends pi{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(t){this.session=new xj(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Mm(t),onStart:Mm(n),onMove:Mm(r),onEnd:(o,l)=>{delete this.session,s&&tt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Zl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Dm=!1;class H4 extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=t;o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Dm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Gd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,t.layoutDependency!==n&&l.setOptions({...l.options,layoutDependency:n}),Dm=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||tt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ry.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Dm=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vj(e){const[t,n]=lj(),r=S.useContext(M0);return i.jsx(H4,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(mj),isPresent:t,safeToRemove:n})}const q4={pan:{Feature:U4},drag:{Feature:V4,ProjectionNode:aj,MeasureLayout:vj}};function dw(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&tt.postRender(()=>o(t,Dc(t)))}class G4 extends pi{mount(){const{current:t}=this.node;t&&(this.unmount=_I(t,(n,r)=>(dw(this.node,r,"Start"),s=>dw(this.node,s,"End"))))}unmount(){}}class K4 extends pi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ac(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fw(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&tt.postRender(()=>o(t,Dc(t)))}class Y4 extends pi{mount(){const{current:t}=this.node;t&&(this.unmount=AI(t,(n,r)=>(fw(this.node,r,"Start"),(s,{success:o})=>fw(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vg=new WeakMap,Fm=new WeakMap,X4=e=>{const t=Vg.get(e.target);t&&t(e)},J4=e=>{e.forEach(X4)};function Q4({root:e,...t}){const n=e||document;Fm.has(n)||Fm.set(n,{});const r=Fm.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(J4,{root:e,...t})),r[s]}function Z4(e,t,n){const r=Q4(t);return Vg.set(e,n),r.observe(e),()=>{Vg.delete(e),r.unobserve(e)}}const e8={some:0,all:1};class t8 extends pi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=t,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:e8[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:h}=this.node.getProps(),g=f?p:h;g&&g(d)};return Z4(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(n8(t,n))&&this.startObserver()}unmount(){}}function n8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const r8={inView:{Feature:t8},tap:{Feature:Y4},focus:{Feature:K4},hover:{Feature:G4}},s8={layout:{ProjectionNode:aj,MeasureLayout:vj}},i8={...T4,...r8,...q4,...s8},fe=j4(i8,C4),o8={some:0,all:1};function a8(e,t,{root:n,margin:r,amount:s="some"}={}){const o=Rk(e),l=new WeakMap,u=f=>{f.forEach(p=>{const h=l.get(p.target);if(p.isIntersecting!==!!h)if(p.isIntersecting){const g=t(p.target,p);typeof g=="function"?l.set(p.target,g):d.unobserve(p.target)}else typeof h=="function"&&(h(p),l.delete(p.target))})},d=new IntersectionObserver(u,{root:n,rootMargin:r,threshold:typeof s=="number"?s:o8[s]});return o.forEach(f=>d.observe(f)),()=>d.disconnect()}function cc(e,{root:t,margin:n,amount:r,once:s=!1,initial:o=!1}={}){const[l,u]=S.useState(o);return S.useEffect(()=>{if(!e.current||s&&l)return;const d=()=>(u(!0),s?void 0:()=>u(!1)),f={root:t&&t.current||void 0,margin:n,amount:r};return a8(e.current,d,f)},[t,e,n,s,r]),l}/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hw="popstate";function l8(e={}){function t(r,s){let{pathname:o,search:l,hash:u}=r.location;return Ug("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:uc(s)}return u8(t,n,null,e)}function at(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c8(){return Math.random().toString(36).substring(2,10)}function pw(e,t){return{usr:e.state,key:e.key,idx:t}}function Ug(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fa(t):t,state:n,key:t&&t.key||r||c8()}}function uc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function u8(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function h(){u="POP";let v=p(),j=v==null?null:v-f;f=v,d&&d({action:u,location:w.location,delta:j})}function g(v,j){u="PUSH";let T=Ug(w.location,v,j);f=p()+1;let k=pw(T,f),_=w.createHref(T);try{l.pushState(k,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(_)}o&&d&&d({action:u,location:w.location,delta:1})}function y(v,j){u="REPLACE";let T=Ug(w.location,v,j);f=p();let k=pw(T,f),_=w.createHref(T);l.replaceState(k,"",_),o&&d&&d({action:u,location:w.location,delta:0})}function b(v){return d8(v)}let w={get action(){return u},get location(){return e(s,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(hw,h),d=v,()=>{s.removeEventListener(hw,h),d=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let j=b(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:y,go(v){return l.go(v)}};return w}function d8(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),at(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:uc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function wj(e,t,n="/"){return f8(e,t,n,!1)}function f8(e,t,n,r){let s=typeof t=="string"?Fa(t):t,o=ys(s.pathname||"/",n);if(o==null)return null;let l=Sj(e);h8(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=j8(o);u=S8(l[d],f,r)}return u}function Sj(e,t=[],n=[],r="",s=!1){let o=(l,u,d=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;at(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let h=ps([r,p.relativePath]),g=n.concat(p);l.children&&l.children.length>0&&(at(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Sj(l.children,t,g,h,d)),!(l.path==null&&!l.index)&&t.push({path:h,score:v8(h,l.index),routesMeta:g})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let f of kj(l.path))o(l,u,!0,f)}),t}function kj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=kj(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function h8(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:w8(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var p8=/^:[\w-]+$/,m8=3,g8=2,y8=1,x8=10,b8=-2,mw=e=>e==="*";function v8(e,t){let n=e.split("/"),r=n.length;return n.some(mw)&&(r+=b8),t&&(r+=g8),n.filter(s=>!mw(s)).reduce((s,o)=>s+(p8.test(o)?m8:o===""?y8:x8),r)}function w8(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function S8(e,t,n=!1){let{routesMeta:r}=e,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",h=mf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),g=d.route;if(!h&&f&&n&&!r[r.length-1].route.index&&(h=mf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!h)return null;Object.assign(s,h.params),l.push({params:s,pathname:ps([o,h.pathname]),pathnameBase:N8(ps([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=ps([o,h.pathnameBase]))}return l}function mf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=k8(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:h},g)=>{if(p==="*"){let b=u[g]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=u[g];return h&&!y?f[p]=void 0:f[p]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function k8(e,t=!1,n=!0){Sr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function j8(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ys(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var C8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _8(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Fa(e):e,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=gw(n.substring(1),"/"):o=gw(n,t)):o=t,{pathname:o,search:T8(r),hash:R8(s)}}function gw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Om(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E8(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function fy(e){let t=E8(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function hy(e,t,n,r=!1){let s;typeof e=="string"?s=Fa(e):(s={...e},at(!s.pathname||!s.pathname.includes("?"),Om("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Om("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Om("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let h=t.length-1;if(!r&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}u=h>=0?t[h]:"/"}let d=_8(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var ps=e=>e.join("/").replace(/\/\/+/g,"/"),N8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),T8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,R8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,I8=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function A8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function P8(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Cj(e,t){let n=e;if(typeof n!="string"||!C8.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(jj)try{let o=new URL(window.location.href),l=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=ys(l.pathname,t);l.origin===o.origin&&u!=null?n=u+l.search+l.hash:s=!0}catch{Sr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _j=["POST","PUT","PATCH","DELETE"];new Set(_j);var M8=["GET",..._j];new Set(M8);var Oa=S.createContext(null);Oa.displayName="DataRouter";var Kf=S.createContext(null);Kf.displayName="DataRouterState";var D8=S.createContext(!1),Ej=S.createContext({isTransitioning:!1});Ej.displayName="ViewTransition";var F8=S.createContext(new Map);F8.displayName="Fetchers";var O8=S.createContext(null);O8.displayName="Await";var Wn=S.createContext(null);Wn.displayName="Navigation";var Fc=S.createContext(null);Fc.displayName="Location";var Cr=S.createContext({outlet:null,matches:[],isDataRoute:!1});Cr.displayName="Route";var py=S.createContext(null);py.displayName="RouteError";var Nj="REACT_ROUTER_ERROR",z8="REDIRECT",$8="ROUTE_ERROR_RESPONSE";function L8(e){if(e.startsWith(`${Nj}:${z8}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function B8(e){if(e.startsWith(`${Nj}:${$8}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new I8(t.status,t.statusText,t.data)}catch{}}function W8(e,{relative:t}={}){at(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Wn),{hash:s,pathname:o,search:l}=Oc(e,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:ps([n,o])),r.createHref({pathname:u,search:l,hash:s})}function za(){return S.useContext(Fc)!=null}function Kr(){return at(za(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Fc).location}var Tj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rj(e){S.useContext(Wn).static||S.useLayoutEffect(e)}function Pt(){let{isDataRoute:e}=S.useContext(Cr);return e?tA():V8()}function V8(){at(za(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Oa),{basename:t,navigator:n}=S.useContext(Wn),{matches:r}=S.useContext(Cr),{pathname:s}=Kr(),o=JSON.stringify(fy(r)),l=S.useRef(!1);return Rj(()=>{l.current=!0}),S.useCallback((d,f={})=>{if(Sr(l.current,Tj),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=hy(d,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ps([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,o,s,e])}S.createContext(null);function my(){let{matches:e}=S.useContext(Cr),t=e[e.length-1];return t?t.params:{}}function Oc(e,{relative:t}={}){let{matches:n}=S.useContext(Cr),{pathname:r}=Kr(),s=JSON.stringify(fy(n));return S.useMemo(()=>hy(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function U8(e,t){return Ij(e,t)}function Ij(e,t,n,r,s){var T;at(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=S.useContext(Wn),{matches:l}=S.useContext(Cr),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",h=u&&u.route;{let k=h&&h.path||"";Pj(f,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=Kr(),y;if(t){let k=typeof t=="string"?Fa(t):t;at(p==="/"||((T=k.pathname)==null?void 0:T.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=g;let b=y.pathname||"/",w=b;if(p!=="/"){let k=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=wj(e,{pathname:w});Sr(h||v!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Sr(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Y8(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ps([p,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ps([p,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),l,n,r,s);return t&&j?S.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},j):j}function H8(){let e=eA(),t=A8(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,l)}var q8=S.createElement(H8,null),Aj=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=B8(e.digest);n&&(e=n)}let t=e!==void 0?S.createElement(Cr.Provider,{value:this.props.routeContext},S.createElement(py.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?S.createElement(G8,{error:e},t):t}};Aj.contextType=D8;var zm=new WeakMap;function G8({children:e,error:t}){let{basename:n}=S.useContext(Wn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=L8(t.digest);if(r){let s=zm.get(t);if(s)throw s;let o=Cj(r.location,n);if(jj&&!zm.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw zm.set(t,l),l}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function K8({routeContext:e,match:t,children:n}){let r=S.useContext(Oa);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Cr.Provider,{value:e},n)}function Y8(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=n==null?void 0:n.errors;if(l!=null){let p=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);at(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let h=o[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=p),h.route.id){let{loaderData:g,errors:y}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=n&&r?(p,h)=>{var g,y;r(p,{location:n.location,params:((y=(g=n.matches)==null?void 0:g[0])==null?void 0:y.params)??{},unstable_pattern:P8(n.matches),errorInfo:h})}:void 0;return o.reduceRight((p,h,g)=>{let y,b=!1,w=null,v=null;n&&(y=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||q8,u&&(d<0&&g===0?(Pj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):d===g&&(b=!0,v=h.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,g+1)),T=()=>{let k;return y?k=w:b?k=v:h.route.Component?k=S.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=p,S.createElement(K8,{match:h,routeContext:{outlet:p,matches:j,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?S.createElement(Aj,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:T(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):T()},null)}function gy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X8(e){let t=S.useContext(Oa);return at(t,gy(e)),t}function J8(e){let t=S.useContext(Kf);return at(t,gy(e)),t}function Q8(e){let t=S.useContext(Cr);return at(t,gy(e)),t}function yy(e){let t=Q8(e),n=t.matches[t.matches.length-1];return at(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Z8(){return yy("useRouteId")}function eA(){var r;let e=S.useContext(py),t=J8("useRouteError"),n=yy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function tA(){let{router:e}=X8("useNavigate"),t=yy("useNavigate"),n=S.useRef(!1);return Rj(()=>{n.current=!0}),S.useCallback(async(s,o={})=>{Sr(n.current,Tj),n.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var yw={};function Pj(e,t,n){!t&&!yw[e]&&(yw[e]=!0,Sr(!1,n))}S.memo(nA);function nA({routes:e,future:t,state:n,onError:r}){return Ij(e,void 0,n,r,t)}function Mj({to:e,replace:t,state:n,relative:r}){at(za(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Wn);Sr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=S.useContext(Cr),{pathname:l}=Kr(),u=Pt(),d=hy(e,fy(o),l,r==="path"),f=JSON.stringify(d);return S.useEffect(()=>{u(JSON.parse(f),{replace:t,state:n,relative:r})},[u,f,r,t,n]),null}function ot(e){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){at(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[u,s,o,l]);typeof n=="string"&&(n=Fa(n));let{pathname:f="/",search:p="",hash:h="",state:g=null,key:y="default"}=n,b=S.useMemo(()=>{let w=ys(f,u);return w==null?null:{location:{pathname:w,search:p,hash:h,state:g,key:y},navigationType:r}},[u,f,p,h,g,y,r]);return Sr(b!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:S.createElement(Wn.Provider,{value:d},S.createElement(Fc.Provider,{children:t,value:b}))}function Dj({children:e,location:t}){return U8(Hg(e),t)}function Hg(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let o=[...t,s];if(r.type===S.Fragment){n.push.apply(n,Hg(r.props.children,o));return}at(r.type===ot,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Hg(r.props.children,o)),n.push(l)}),n}var Kd="get",Yd="application/x-www-form-urlencoded";function Yf(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function sA(e){return Yf(e)&&e.tagName.toLowerCase()==="button"}function iA(e){return Yf(e)&&e.tagName.toLowerCase()==="form"}function oA(e){return Yf(e)&&e.tagName.toLowerCase()==="input"}function aA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lA(e,t){return e.button===0&&(!t||t==="_self")&&!aA(e)}var dd=null;function cA(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}var uA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $m(e){return e!=null&&!uA.has(e)?(Sr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yd}"`),null):e}function dA(e,t){let n,r,s,o,l;if(iA(e)){let u=e.getAttribute("action");r=u?ys(u,t):null,n=e.getAttribute("method")||Kd,s=$m(e.getAttribute("enctype"))||Yd,o=new FormData(e)}else if(sA(e)||oA(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?ys(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Kd,s=$m(e.getAttribute("formenctype"))||$m(u.getAttribute("enctype"))||Yd,o=new FormData(u,e),!cA()){let{name:f,type:p,value:h}=e;if(p==="image"){let g=f?`${f}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else f&&o.append(f,h)}}else{if(Yf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Kd,r=null,s=Yd,l=e}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fA(e,t,n,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:t&&ys(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function hA(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pA(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function mA(e,t,n){let r=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let l=await hA(o,n);return l.links?l.links():[]}return[]}));return bA(r.flat(1).filter(pA).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xw(e,t,n,r,s,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>{var p;return n[f].pathname!==d.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{var h;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function gA(e,t,{includeHydrateFallback:n}={}){return yA(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function yA(e){return[...new Set(e)]}function xA(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function bA(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let o=JSON.stringify(xA(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function Fj(){let e=S.useContext(Oa);return xy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vA(){let e=S.useContext(Kf);return xy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var by=S.createContext(void 0);by.displayName="FrameworkContext";function Oj(){let e=S.useContext(by);return xy(e,"You must render this element inside a <HydratedRouter> element"),e}function wA(e,t){let n=S.useContext(by),[r,s]=S.useState(!1),[o,l]=S.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:h}=t,g=S.useRef(null);S.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=j=>{j.forEach(T=>{l(T.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return g.current&&v.observe(g.current),()=>{v.disconnect()}}},[e]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{s(!0)},b=()=>{s(!1),l(!1)};return n?e!=="intent"?[o,g,{}]:[o,g,{onFocus:Dl(u,y),onBlur:Dl(d,b),onMouseEnter:Dl(f,y),onMouseLeave:Dl(p,b),onTouchStart:Dl(h,y)}]:[!1,g,{}]}function Dl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function SA({page:e,...t}){let{router:n}=Fj(),r=S.useMemo(()=>wj(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(jA,{page:e,matches:r,...t}):null}function kA(e){let{manifest:t,routeModules:n}=Oj(),[r,s]=S.useState([]);return S.useEffect(()=>{let o=!1;return mA(e,t,n).then(l=>{o||s(l)}),()=>{o=!0}},[e,t,n]),r}function jA({page:e,matches:t,...n}){let r=Kr(),{future:s,manifest:o,routeModules:l}=Oj(),{basename:u}=Fj(),{loaderData:d,matches:f}=vA(),p=S.useMemo(()=>xw(e,t,f,o,r,"data"),[e,t,f,o,r]),h=S.useMemo(()=>xw(e,t,f,o,r,"assets"),[e,t,f,o,r]),g=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,v=!1;if(t.forEach(T=>{var _;let k=o.routes[T.route.id];!k||!k.hasLoader||(!p.some(N=>N.route.id===T.route.id)&&T.route.id in d&&((_=l[T.route.id])!=null&&_.shouldRevalidate)||k.hasClientLoader?v=!0:w.add(T.route.id))}),w.size===0)return[];let j=fA(e,u,s.unstable_trailingSlashAwareDataRequests,"data");return v&&w.size>0&&j.searchParams.set("_routes",t.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[j.pathname+j.search]},[u,s.unstable_trailingSlashAwareDataRequests,d,r,o,p,t,e,l]),y=S.useMemo(()=>gA(h,o),[h,o]),b=kA(h);return S.createElement(S.Fragment,null,g.map(w=>S.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>S.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:v})=>S.createElement("link",{key:w,nonce:n.nonce,...v,crossOrigin:v.crossOrigin??n.crossOrigin})))}function CA(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var _A=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_A&&(window.__reactRouterVersion="7.13.0")}catch{}function EA({basename:e,children:t,unstable_useTransitions:n,window:r}){let s=S.useRef();s.current==null&&(s.current=l8({window:r,v5Compat:!0}));let o=s.current,[l,u]=S.useState({action:o.action,location:o.location}),d=S.useCallback(f=>{n===!1?u(f):S.startTransition(()=>u(f))},[n]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.createElement(rA,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n})}var zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$j=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},b){let{basename:w,unstable_useTransitions:v}=S.useContext(Wn),j=typeof f=="string"&&zj.test(f),T=Cj(f,w);f=T.to;let k=W8(f,{relative:s}),[_,N,E]=wA(r,y),R=IA(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v});function A(z){t&&t(z),z.defaultPrevented||R(z)}let P=S.createElement("a",{...y,...E,href:T.absoluteURL||k,onClick:T.isExternal||o?t:A,ref:CA(b,N),target:d,"data-discover":!j&&n==="render"?"true":void 0});return _&&!j?S.createElement(S.Fragment,null,P,S.createElement(SA,{page:k})):P});$j.displayName="Link";var NA=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},p){let h=Oc(l,{relative:f.relative}),g=Kr(),y=S.useContext(Kf),{navigator:b,basename:w}=S.useContext(Wn),v=y!=null&&FA(h)&&u===!0,j=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(T=T.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&w&&(k=ys(k,w)||k);const _=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let N=T===j||!s&&T.startsWith(j)&&T.charAt(_)==="/",E=k!=null&&(k===j||!s&&k.startsWith(j)&&k.charAt(j.length)==="/"),R={isActive:N,isPending:E,isTransitioning:v},A=N?t:void 0,P;typeof r=="function"?P=r(R):P=[r,N?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(R):o;return S.createElement($j,{...f,"aria-current":A,className:P,ref:p,style:z,to:l,viewTransition:u},typeof d=="function"?d(R):d)});NA.displayName="NavLink";var TA=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:o,method:l=Kd,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},b)=>{let{unstable_useTransitions:w}=S.useContext(Wn),v=MA(),j=DA(u,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&zj.test(u),_=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let E=N.nativeEvent.submitter,R=(E==null?void 0:E.getAttribute("formmethod"))||l,A=()=>v(E||N.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:s,state:o,relative:f,preventScrollReset:p,viewTransition:h,unstable_defaultShouldRevalidate:g});w&&n!==!1?S.startTransition(()=>A()):A()};return S.createElement("form",{ref:b,method:T,action:j,onSubmit:r?d:_,...y,"data-discover":!k&&e==="render"?"true":void 0})});TA.displayName="Form";function RA(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lj(e){let t=S.useContext(Oa);return at(t,RA(e)),t}function IA(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=Pt(),p=Kr(),h=Oc(e,{relative:o});return S.useCallback(g=>{if(lA(g,t)){g.preventDefault();let y=n!==void 0?n:uc(p)===uc(h),b=()=>f(e,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?S.startTransition(()=>b()):b()}},[p,f,h,n,r,t,e,s,o,l,u,d])}var AA=0,PA=()=>`__${String(++AA)}__`;function MA(){let{router:e}=Lj("useSubmit"),{basename:t}=S.useContext(Wn),n=Z8(),r=e.fetch,s=e.navigate;return S.useCallback(async(o,l={})=>{let{action:u,method:d,encType:f,formData:p,body:h}=dA(o,t);if(l.navigate===!1){let g=l.fetcherKey||PA();await r(g,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:h,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:h,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,t,n])}function DA(e,{relative:t}={}){let{basename:n}=S.useContext(Wn),r=S.useContext(Cr);at(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Oc(e||".",{relative:t})},l=Kr();if(e==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(h=>h).forEach(h=>u.append("index",h));let p=u.toString();o.search=p?`?${p}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ps([n,o.pathname])),uc(o)}function FA(e,{relative:t}={}){let n=S.useContext(Ej);at(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Lj("useViewTransitionState"),s=Oc(e,{relative:t});if(!n.isTransitioning)return!1;let o=ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mf(s.pathname,l)!=null||mf(s.pathname,o)!=null}var $a=zS();const Bj=Vf($a);function OA(){const[e,t]=S.useState(!1),n=Pt();return S.useEffect(()=>{const r=()=>{t(window.scrollY>20)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),i.jsx(fe.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${e?"bg-white/80 backdrop-blur-xl border-b border-black/5":"bg-transparent"}`,children:i.jsx("nav",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("a",{href:"/",className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"balemoo.com"}),i.jsxs("div",{className:"flex items-center gap-8",children:[i.jsx("div",{className:"hidden md:flex items-center gap-8",children:["About","Product","Solution"].map(r=>i.jsx("a",{href:`#${r.toLowerCase()}`,className:"transition-opacity duration-300 hover:opacity-50",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,letterSpacing:"-0.01em",color:"#2d2d2d"},children:r},r))}),i.jsx("button",{onClick:()=>n("/login"),className:"group relative px-6 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,letterSpacing:"-0.01em",color:"#1a1a1a"},onMouseEnter:r=>{r.currentTarget.style.backdropFilter="blur(20px)",r.currentTarget.style.WebkitBackdropFilter="blur(20px)",r.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:r=>{r.currentTarget.style.backdropFilter="blur(10px)",r.currentTarget.style.WebkitBackdropFilter="blur(10px)",r.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:"Log In"})]})]})})})}const gf="/assets/balemoo-logo-37_HSVzk.png";function zA(){const e=Pt();return i.jsxs("section",{className:"min-h-screen w-full relative flex items-center justify-center px-6 py-32 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`
            radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
            radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
            radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
            linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
          `}}),i.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx(fe.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},className:"mb-6 flex justify-center",children:i.jsx("img",{src:gf,alt:"Balemoo",style:{height:"clamp(8rem, 15vw, 14rem)",width:"auto"}})}),i.jsx(fe.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.75,delay:.5,ease:[.25,.1,.25,1]},className:"mb-5",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.5rem, 2.5vw, 2.25rem)",fontWeight:500,letterSpacing:"-0.02em",color:"#2d2d2d",lineHeight:1.3},children:"Smart Smiles for Your Event"}),i.jsx(fe.p,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.7,delay:.8,ease:[.25,.1,.25,1]},className:"max-w-2xl mx-auto",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#6b6b6b",lineHeight:1.6},children:"Technology-powered solutions that create seamless and welcoming event experiences."}),i.jsx(fe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.7,delay:1,ease:[.25,.1,.25,1]},className:"mt-8",children:i.jsx("button",{onClick:()=>e("/login"),className:"px-8 py-3 rounded-full transition-all duration-700",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#ffffff",border:"none",cursor:"pointer",transform:"scale(1)"},onMouseEnter:t=>{t.currentTarget.style.transform="scale(1.03)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.15)"},onMouseLeave:t=>{t.currentTarget.style.transform="scale(1)",t.currentTarget.style.boxShadow="none"},children:"Get Started"})})]}),i.jsx(fe.div,{initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.9,delay:1.1,ease:[.25,.1,.25,1]},className:"relative max-w-2xl mx-auto",children:i.jsx("img",{src:gf,alt:"Balemoo 3D Product Illustration",className:"w-full h-auto",style:{filter:"drop-shadow(0 20px 40px rgba(0, 0, 0, 0.08))"}})})]})]})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LA=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),bw=e=>{const t=LA(e);return t.charAt(0).toUpperCase()+t.slice(1)},Wj=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>S.createElement("svg",{ref:d,...BA,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Wj("lucide",s),...u},[...l.map(([f,p])=>S.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const n=S.forwardRef(({className:r,...s},o)=>S.createElement(WA,{ref:o,iconNode:t,className:Wj(`lucide-${$A(bw(e))}`,`lucide-${e}`,r),...s}));return n.displayName=bw(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vw=ve("activity",VA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],HA=ve("arrow-down",UA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],mi=ve("arrow-left",qA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Vj=ve("ban",GA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Uj=ve("briefcase",KA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Xd=ve("calendar-range",YA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xs=ve("calendar",XA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vy=ve("chart-column",JA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],to=ve("check",QA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fo=ve("chevron-down",ZA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wy=ve("chevron-left",eP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fa=ve("chevron-right",tP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Sy=ve("chevron-up",nP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],no=ve("circle-alert",rP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hj=ve("circle-check-big",sP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ui=ve("circle-check",iP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],aP=ve("circle-dot",oP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qj=ve("circle-help",lP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],uP=ve("circle-user",cP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ro=ve("circle-x",dP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Gj=ve("clipboard-list",fP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gi=ve("clock",hP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],mP=ve("code",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Sa=ve("copy",gP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ky=ve("download",yP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zc=ve("eye",xP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],jy=ve("file-json",bP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dc=ve("file-text",vP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Kj=ve("flag",wP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],kP=ve("folder-open",SP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],CP=ve("gift",jP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Yj=ve("git-branch",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Cy=ve("grip-vertical",EP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],TP=ve("heart",NP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qg=ve("image",RP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],Xj=ve("images",IP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],PP=ve("layers",AP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],DP=ve("layout-dashboard",MP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],OP=ve("link",FP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],$P=ve("list-checks",zP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],BP=ve("list",LP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Wt=ve("loader-circle",WP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Jj=ve("lock-open",VP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],br=ve("lock",UP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Qj=ve("log-out",HP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],_y=ve("mail",qP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],KP=ve("message-circle",GP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],fc=ve("message-square",YP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Zj=ve("pause",XP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xf=ve("pen",JP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ZP=ve("phone",QP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],hc=ve("play",eM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vt=ve("plus",tM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ka=ve("qr-code",nM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],sM=ve("radio",rM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e5=ve("refresh-cw",iM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Jf=ve("rotate-ccw",oM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],t5=ve("save",aM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],bs=ve("search",lM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qf=ve("send",cM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ww=ve("settings-2",uM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$c=ve("settings",dM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sw=ve("shield-check",fM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],pM=ve("sliders-horizontal",hM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],gM=ve("smartphone",mM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],xM=ve("sparkles",yM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m16 10-4 4-4-4",key:"894hmk"}]],vM=ve("square-chevron-down",bM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ey=ve("square-pen",wM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],n5=ve("tag",SM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1",key:"18xjzo"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5",key:"fj48gi"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M9 7v10",key:"1vc8ob"}]],kw=ve("text-cursor-input",kM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],r5=ve("timer",jM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]],_M=ve("toggle-left",CM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],At=ve("trash-2",EM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Zf=ve("trending-up",NM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yf=ve("triangle-alert",TM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],ea=ve("type",RM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ny=ve("upload",IM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Ty=ve("user-check",AM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Ry=ve("user-cog",PM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ii=ve("user",MM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],cn=ve("users",DM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],ja=ve("workflow",FM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rt=ve("x",OM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Gg=ve("zap",zM);function $M(){const e=S.useRef(null),t=S.useRef(null),n=cc(e,{once:!0,margin:"-100px"}),r=cc(t,{once:!0,margin:"-100px"});return i.jsxs("div",{className:"relative w-full overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx(fe.div,{className:"absolute inset-0",animate:{background:["radial-gradient(ellipse 100% 80% at 20% 30%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 80% 60%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 50% 80%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)","radial-gradient(ellipse 100% 80% at 80% 40%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 20% 70%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 60% 20%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)","radial-gradient(ellipse 100% 80% at 20% 30%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 80% 60%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 50% 80%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)"]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),i.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]}),i.jsx("section",{ref:e,className:"py-32 px-6",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[i.jsxs(fe.div,{initial:{opacity:0,y:40},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,ease:[.25,.1,.25,1]},children:[i.jsx(fe.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,letterSpacing:"0.05em",color:"#8b5cf6",textTransform:"uppercase"},className:"mb-4",children:"About BALEMOO"}),i.jsx(fe.h2,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.15},className:"mb-6",children:"A Digital Bale for Modern Events"}),i.jsxs(fe.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.4,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.7},children:["BALEMOO is a technology platform built to welcome guests the way people should be welcomed  smoothly, respectfully, and with a smile.",i.jsx("br",{}),i.jsx("br",{}),"Inspired by the Balinese tradition of receiving guests in the bale, we translate that philosophy into modern event technology."]})]}),i.jsx(fe.div,{initial:{opacity:0,y:40,scale:.95},animate:n?{opacity:1,y:0,scale:1}:{},transition:{duration:.9,delay:.5,ease:[.25,.1,.25,1]},className:"relative",children:i.jsx(fe.div,{animate:{y:[0,-15,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:i.jsx("img",{src:gf,alt:"BALEMOO Platform Visualization",className:"w-full h-auto",style:{filter:"drop-shadow(0 25px 50px rgba(0, 0, 0, 0.1))"}})})})]})})}),i.jsx("section",{ref:t,className:"py-32 px-6",children:i.jsx("div",{className:"max-w-5xl mx-auto",children:i.jsxs(fe.div,{initial:{opacity:0,y:60,scale:.95},animate:r?{opacity:1,y:0,scale:1}:{},transition:{duration:.9,ease:[.25,.1,.25,1]},className:"relative rounded-3xl p-12 lg:p-16",style:{background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.4)",boxShadow:"0 25px 60px -15px rgba(0, 0, 0, 0.08), 0 10px 25px -10px rgba(0, 0, 0, 0.04)"},children:[i.jsx(fe.h2,{initial:{opacity:0,y:30},animate:r?{opacity:1,y:0}:{},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.75rem, 3.5vw, 2.75rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.2},className:"mb-8",children:"The Philosophy Behind BALEMOO"}),i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:.4,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.2vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#3a3a3a",lineHeight:1.8},className:"mb-12",children:[i.jsx("p",{className:"mb-6",children:"In Balinese culture, a bale is more than a structure. It is a space of connection  where guests are welcomed, stories begin, and respect is shown through small details."}),i.jsx("p",{className:"mb-6",children:"BALEMOO brings this philosophy into technology. We believe great events start not at the stage, but at the first interaction. That first smile. That smooth check-in. That feeling of being expected."})]}),i.jsx("div",{className:"space-y-6 mb-12",children:[{icon:TP,text:"Technology that stays human"},{icon:Gg,text:"Speed without pressure"},{icon:uP,text:"Systems that support, not replace, hospitality"}].map((s,o)=>i.jsxs(fe.div,{initial:{opacity:0,x:-20},animate:r?{opacity:1,x:0}:{},transition:{duration:.6,delay:.6+o*.1,ease:[.25,.1,.25,1]},className:"flex items-center gap-4",children:[i.jsx(fe.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,delay:1+o*.2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",style:{background:"rgba(139, 92, 246, 0.1)"},children:i.jsx(s.icon,{className:"w-5 h-5",style:{color:"#8b5cf6"}})}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.0625rem",fontWeight:500,letterSpacing:"-0.01em",color:"#2d2d2d"},children:s.text})]},o))}),i.jsx(fe.p,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.125rem, 1.5vw, 1.375rem)",fontWeight:500,letterSpacing:"-0.015em",color:"#1a1a1a",lineHeight:1.5},className:"italic",children:"BALEMOO is where technology becomes the host."})]})})})]})}function LM(){const e=S.useRef(null),t=S.useRef(null),n=cc(e,{once:!0,margin:"-100px"}),r=cc(t,{once:!0,margin:"-100px"}),s=[{id:"kabar",title:"kabar.in",tagline:"Smart Invitations, Made Effortless",description:"Send personalized event invitations through WhatsApp Official Business, complete with RSVP and unique QR codes for every guest.",features:[{icon:KP,text:"WhatsApp Official Business integration"},{icon:Qf,text:"Personalized invitations"},{icon:vw,text:"RSVP tracking"},{icon:ka,text:"Auto-generated QR per guest"}],emphasized:!1},{id:"checkin",title:"check.in",tagline:"Check In Less Than 10 Seconds.",description:"A lightning-fast QR-based check-in system designed for high-scale events. From access control to guest identification, check.in turns arrival into a smooth experience.",features:[{icon:ka,text:"QR scan check-in under 10 seconds"},{icon:Ty,text:"Optional badge printing & guest identification"},{icon:CP,text:"Gift / angpao / access tagging"},{icon:Sw,text:"Custom guest data stored securely per event"}],emphasized:!0},{id:"monitor",title:"monitor.in",tagline:"Real-Time Guest Visibility.",description:"Monitor attendance, arrivals, and guest flow in real time through a simple web dashboard.",features:[{icon:vw,text:"Live attendance updates"},{icon:Zf,text:"Guest arrival analytics"},{icon:ky,text:"Exportable reports"},{icon:Sw,text:"Accessible anywhere"}],emphasized:!1}];return i.jsxs("div",{className:"relative w-full overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx(fe.div,{className:"absolute inset-0",animate:{background:["radial-gradient(ellipse 100% 80% at 30% 20%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 70% 60%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 50% 90%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)","radial-gradient(ellipse 100% 80% at 70% 30%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 30% 70%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 60% 10%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)","radial-gradient(ellipse 100% 80% at 30% 20%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 70% 60%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 50% 90%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)"]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),i.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]}),i.jsx("section",{ref:e,className:"pt-32 pb-16 px-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[i.jsx(fe.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,letterSpacing:"0.05em",color:"#6366f1",textTransform:"uppercase"},className:"mb-4",children:"Our Product"}),i.jsx(fe.h2,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,delay:.1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.15},className:"mb-6",children:"One Platform. Three Connected Experiences."}),i.jsx(fe.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.3,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.6},className:"max-w-3xl mx-auto mb-12",children:"From invitation to check-in to real-time insights  BALEMOO powers every guest interaction with technology."}),i.jsx(fe.div,{initial:{opacity:0,scaleX:0},animate:n?{opacity:1,scaleX:1}:{},transition:{duration:.8,delay:.5,ease:[.25,.1,.25,1]},className:"h-px max-w-xs mx-auto",style:{background:"linear-gradient(to right, transparent, rgba(99, 102, 241, 0.3), transparent)"}})]})}),i.jsx("section",{className:"py-16 px-6",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:s.map((o,l)=>i.jsx(BM,{product:o,index:l,illustration:gf},o.id))})})}),i.jsx("section",{ref:t,className:"py-16 px-6",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.8,ease:[.25,.1,.25,1]},className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4 mb-8",children:[i.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.2,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:i.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(99, 102, 241, 0.2)",boxShadow:"0 8px 20px -5px rgba(0, 0, 0, 0.06)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"kabar.in"})})}),i.jsxs("div",{className:"flex-1 relative h-0.5 mx-2",children:[i.jsx(fe.div,{className:"absolute inset-0",style:{background:"rgba(99, 102, 241, 0.15)"}}),i.jsx(fe.div,{initial:{scaleX:0,originX:0},animate:r?{scaleX:1}:{},transition:{duration:1.2,delay:.5,ease:[.25,.1,.25,1]},className:"absolute inset-0",style:{background:"linear-gradient(to right, #6366f1, #8b5cf6)"}}),i.jsx(fe.div,{initial:{left:"0%"},animate:r?{left:["0%","100%"]}:{},transition:{duration:2,delay:1.5,repeat:1/0,repeatDelay:1,ease:"easeInOut"},className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 rounded-full",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.6)"}}),i.jsx(fe.div,{initial:{opacity:0,scale:0},animate:r?{opacity:1,scale:1}:{},transition:{duration:.3,delay:1.7,ease:[.25,.1,.25,1]},className:"absolute right-0 top-1/2 -translate-y-1/2",style:{width:0,height:0,borderLeft:"6px solid #8b5cf6",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})]}),i.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.4,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:i.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(99, 102, 241, 0.15)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1.5px solid rgba(99, 102, 241, 0.4)",boxShadow:"0 10px 30px -8px rgba(99, 102, 241, 0.3)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,letterSpacing:"-0.01em",color:"#6366f1"},children:"check.in"})})}),i.jsxs("div",{className:"flex-1 relative h-0.5 mx-2",children:[i.jsx(fe.div,{className:"absolute inset-0",style:{background:"rgba(99, 102, 241, 0.15)"}}),i.jsx(fe.div,{initial:{scaleX:0,originX:0},animate:r?{scaleX:1}:{},transition:{duration:1.2,delay:.7,ease:[.25,.1,.25,1]},className:"absolute inset-0",style:{background:"linear-gradient(to right, #8b5cf6, #6366f1)"}}),i.jsx(fe.div,{initial:{left:"0%"},animate:r?{left:["0%","100%"]}:{},transition:{duration:2,delay:1.7,repeat:1/0,repeatDelay:1,ease:"easeInOut"},className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 rounded-full",style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",boxShadow:"0 0 8px rgba(139, 92, 246, 0.6)"}}),i.jsx(fe.div,{initial:{opacity:0,scale:0},animate:r?{opacity:1,scale:1}:{},transition:{duration:.3,delay:1.9,ease:[.25,.1,.25,1]},className:"absolute right-0 top-1/2 -translate-y-1/2",style:{width:0,height:0,borderLeft:"6px solid #6366f1",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})]}),i.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.6,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:i.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(99, 102, 241, 0.2)",boxShadow:"0 8px 20px -5px rgba(0, 0, 0, 0.06)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"monitor.in"})})})]}),i.jsx(fe.p,{initial:{opacity:0,y:10},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:1.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,letterSpacing:"-0.01em",color:"#6b6b6b",textAlign:"center"},children:"A single connected system, built to work seamlessly."})]})})})]})}function BM({product:e,index:t,illustration:n}){const r=S.useRef(null),[s,o]=S.useState(!1),l=cc(r,{once:!0,margin:"-50px"});return i.jsxs(fe.div,{ref:r,initial:{opacity:0,y:60,scale:.95},animate:l?{opacity:1,y:0,scale:1}:{},transition:{duration:.8,delay:t*.15,ease:[.25,.1,.25,1]},whileHover:{y:-8,transition:{duration:.3,ease:[.25,.1,.25,1]}},onHoverStart:()=>o(!0),onHoverEnd:()=>o(!1),className:`relative rounded-3xl p-8 ${e.emphasized?"lg:scale-105 lg:-my-4":""}`,style:{background:e.emphasized?"rgba(255, 255, 255, 0.85)":"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",border:e.emphasized?"1.5px solid rgba(99, 102, 241, 0.3)":"1px solid rgba(255, 255, 255, 0.4)",boxShadow:e.emphasized?"0 30px 70px -20px rgba(99, 102, 241, 0.2), 0 15px 35px -15px rgba(0, 0, 0, 0.08)":"0 25px 60px -15px rgba(0, 0, 0, 0.08), 0 10px 25px -10px rgba(0, 0, 0, 0.04)"},children:[e.emphasized&&i.jsx(fe.div,{className:"absolute inset-0 rounded-3xl -z-10",animate:{opacity:s?.6:.3},transition:{duration:.3},style:{background:"radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.2), transparent 70%)"}}),i.jsxs(fe.div,{className:"mb-6 relative h-48 flex items-center justify-center",animate:{y:[0,-8,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:t*.5},children:[i.jsx("img",{src:n,alt:e.title,className:"h-full w-auto object-contain",style:{filter:"drop-shadow(0 15px 30px rgba(0, 0, 0, 0.1))"}}),e.id==="checkin"&&i.jsx(fe.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",animate:{scale:[1,1.2,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:i.jsx(ka,{className:"w-12 h-12 text-indigo-500 opacity-20"})})]}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:e.emphasized?"1.75rem":"1.5rem",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.2},className:"mb-3",children:e.title}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:e.emphasized?"1.125rem":"1rem",fontWeight:500,letterSpacing:"-0.01em",color:e.emphasized?"#6366f1":"#6b6b6b",lineHeight:1.4},className:"mb-4",children:e.tagline}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.6},className:"mb-6",children:e.description}),i.jsx("div",{className:"space-y-3",children:e.features.map((u,d)=>i.jsxs(fe.div,{initial:{opacity:0,x:-10},animate:l?{opacity:1,x:0}:{},transition:{duration:.5,delay:.3+t*.15+d*.05,ease:[.25,.1,.25,1]},className:"flex items-start gap-3",children:[i.jsx(fe.div,{animate:s?{scale:[1,1.15,1]}:{},transition:{duration:.4,delay:d*.05},className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mt-0.5",style:{background:e.emphasized?"rgba(99, 102, 241, 0.12)":"rgba(0, 0, 0, 0.04)"},children:i.jsx(u.icon,{className:"w-4 h-4",style:{color:e.emphasized?"#6366f1":"#6b6b6b"}})}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:400,letterSpacing:"-0.01em",color:"#3a3a3a",lineHeight:1.5},children:u.text})]},d))})]})}var Lr=function(){return Lr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Lr.apply(this,arguments)};function La(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function WM(e,t,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{f(r.next(p))}catch(h){l(h)}}function d(p){try{f(r.throw(p))}catch(h){l(h)}}function f(p){p.done?o(p.value):s(p.value).then(u,d)}f((r=r.apply(e,t||[])).next())})}function VM(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}const UM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Iy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class HM extends Iy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class jw extends Iy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Cw extends Iy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kg||(Kg={}));class qM{constructor(t,{headers:n={},customFetch:r,region:s=Kg.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=UM(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return WM(this,arguments,void 0,function*(n,r={}){var s;let o,l;try{const{headers:u,method:d,body:f,signal:p,timeout:h}=r;let g={},{region:y}=r;y||(y=this.region);const b=new URL(`${this.url}/${n}`);y&&y!=="any"&&(g["x-region"]=y,b.searchParams.set("forceFunctionRegion",y));let w;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(g["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(g["Content-Type"]="application/json",w=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?w=JSON.stringify(f):w=f;let v=p;h&&(l=new AbortController,o=setTimeout(()=>l.abort(),h),p?(v=l.signal,p.addEventListener("abort",()=>l.abort())):v=l.signal);const j=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),u),body:w,signal:v}).catch(N=>{throw new HM(N)}),T=j.headers.get("x-relay-error");if(T&&T==="true")throw new jw(j);if(!j.ok)throw new Cw(j);let k=((s=j.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return k==="application/json"?_=yield j.json():k==="application/octet-stream"||k==="application/pdf"?_=yield j.blob():k==="text/event-stream"?_=j:k==="multipart/form-data"?_=yield j.formData():_=yield j.text(),{data:_,error:null,response:j}}catch(u){return{data:null,error:u,response:u instanceof Cw||u instanceof jw?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var GM=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},KM=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,d=null,f=o.status,p=o.statusText;if(o.ok){var h,g;if(n.method!=="HEAD"){var y;const j=await o.text();j===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((y=n.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?u=j:u=JSON.parse(j))}const w=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(g=o.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");w&&v&&v.length>1&&(d=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var b;const w=await o.text();try{l=JSON.parse(w),Array.isArray(l)&&o.status===404&&(u=[],l=null,f=200,p="OK")}catch{o.status===404&&w===""?(f=204,p="No Content"):l={message:w}}if(l&&n.isMaybeSingle&&(!(l==null||(b=l.details)===null||b===void 0)&&b.includes("0 rows"))&&(l=null,f=200,p="OK"),l&&n.shouldThrowOnError)throw new GM(l)}return{error:l,data:u,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var l;let u="",d="",f="";const p=o==null?void 0:o.cause;if(p){var h,g,y,b;const j=(h=p==null?void 0:p.message)!==null&&h!==void 0?h:"",T=(g=p==null?void 0:p.code)!==null&&g!==void 0?g:"";u=`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"Error"}: ${j}`,T&&(u+=` (${T})`),p!=null&&p.stack&&(u+=`
${p.stack}`)}else{var w;u=(w=o==null?void 0:o.stack)!==null&&w!==void 0?w:""}const v=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(f="",d="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(f="",d="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(d+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:d,code:f},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},YM=class extends KM{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const _w=new RegExp("[,()]");var ta=class extends YM{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&_w.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&_w.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},XM=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(f=>/\s/.test(f)&&!o?"":(f==='"'&&(o=!o),f)).join(""),{url:u,headers:d}=this.cloneRequestState();return u.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new ta({method:s,url:u,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:o,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);o.searchParams.set("columns",d.join(","))}}return new ta({method:s,url:o,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var o;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),r&&d.append("Prefer",`count=${r}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(f.length>0){const p=[...new Set(f)].map(h=>`"${h}"`);u.searchParams.set("columns",p.join(","))}}return new ta({method:l,url:u,headers:d,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new ta({method:r,url:s,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new ta({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function JM(e,t){if(pc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QM(e){var t=JM(e,"string");return pc(t)=="symbol"?t:t+""}function ZM(e,t,n){return(t=QM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(n),!0).forEach(function(r){ZM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var eD=class s5{constructor(t,{headers:n={},schema:r,fetch:s,timeout:o,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=l;const u=s??globalThis.fetch;o!==void 0&&o>0?this.fetch=(d,f)=>{const p=new AbortController,h=setTimeout(()=>p.abort(),o),g=f==null?void 0:f.signal;if(g){if(g.aborted)return clearTimeout(h),u(d,f);const y=()=>{clearTimeout(h),p.abort()};return g.addEventListener("abort",y,{once:!0}),u(d,fd(fd({},f),{},{signal:p.signal})).finally(()=>{clearTimeout(h),g.removeEventListener("abort",y)})}return u(d,fd(fd({},f),{},{signal:p.signal})).finally(()=>clearTimeout(h))}:this.fetch=u}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new XM(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new s5(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){var l;let u;const d=new URL(`${this.url}/rpc/${t}`);let f;const p=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(p)),h=r&&Object.values(n).some(p);h?(u="POST",f=n):r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([y,b])=>b!==void 0).map(([y,b])=>[y,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([y,b])=>{d.searchParams.append(y,b)})):(u="POST",f=n);const g=new Headers(this.headers);return h?g.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&g.set("Prefer",`count=${o}`),new ta({method:u,url:d,headers:g,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class tD{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nD="2.94.1",rD=`realtime-js/${nD}`,sD="1.0.0",i5="2.0.0",Nw=i5,Yg=1e4,iD=1e3,oD=100;var ti;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ti||(ti={}));var Lt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Lt||(Lt={}));var mr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mr||(mr={}));var Xg;(function(e){e.websocket="websocket"})(Xg||(Xg={}));var qi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(qi||(qi={}));class aD{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var s,o;const l=t.topic,u=(s=t.ref)!==null&&s!==void 0?s:"",d=(o=t.join_ref)!==null&&o!==void 0?o:"",f=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+f.length+h.length,y=new ArrayBuffer(this.HEADER_LENGTH+g);let b=new DataView(y),w=0;b.setUint8(w++,this.KINDS.userBroadcastPush),b.setUint8(w++,d.length),b.setUint8(w++,u.length),b.setUint8(w++,l.length),b.setUint8(w++,f.length),b.setUint8(w++,h.length),b.setUint8(w++,n),Array.from(d,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(u,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(l,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(f,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(h,j=>b.setUint8(w++,j.charCodeAt(0)));var v=new Uint8Array(y.byteLength+r.byteLength);return v.set(new Uint8Array(y),0),v.set(new Uint8Array(r),y.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,o,l,u,d]=r;return n({join_ref:s,ref:o,topic:l,event:u,payload:d})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(t.slice(d,d+s));d=d+s;const p=r.decode(t.slice(d,d+o));d=d+o;const h=r.decode(t.slice(d,d+l));d=d+l;const g=t.slice(d,t.byteLength),y=u===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,b={type:this.BROADCAST_EVENT,event:p,payload:y};return l>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}let o5=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(et||(et={}));const Tw=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=lD(l,e,t,s),o),{}):{}},lD=(e,t,n,r)=>{const s=t.find(u=>u.name===e),o=s==null?void 0:s.type,l=n[e];return o&&!r.includes(o)?a5(o,l):Jg(l)},a5=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return fD(t,n)}switch(e){case et.bool:return cD(t);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return uD(t);case et.json:case et.jsonb:return dD(t);case et.timestamp:return hD(t);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Jg(t);default:return Jg(t)}},Jg=e=>e,cD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},fD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>a5(t,u))}return e},hD=e=>typeof e=="string"?e.replace(" ","T"):e,l5=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Lm{constructor(t,n,r={},s=Yg){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rw||(Rw={}));class ec{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ec.syncState(this.state,s,o,l),this.pendingDiffs.forEach(d=>{this.state=ec.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ec.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),l=this.transformState(n),u={},d={};return this.map(o,(f,p)=>{l[f]||(d[f]=p)}),this.map(l,(f,p)=>{const h=o[f];if(h){const g=p.map(v=>v.presence_ref),y=h.map(v=>v.presence_ref),b=p.filter(v=>y.indexOf(v.presence_ref)<0),w=h.filter(v=>g.indexOf(v.presence_ref)<0);b.length>0&&(u[f]=b),w.length>0&&(d[f]=w)}else u[f]=p}),this.syncDiff(o,{joins:u,leaves:d},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,d)=>{var f;const p=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),p.length>0){const h=t[u].map(y=>y.presence_ref),g=p.filter(y=>h.indexOf(y.presence_ref)<0);t[u].unshift(...g)}r(u,p,d)}),this.map(l,(u,d)=>{let f=t[u];if(!f)return;const p=d.map(h=>h.presence_ref);f=f.filter(h=>p.indexOf(h.presence_ref)<0),t[u]=f,s(u,f,d),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Iw||(Iw={}));var tc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(tc||(tc={}));var ds;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ds||(ds={}));class la{constructor(t,n={config:{}},r){var s,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Lm(this,mr.join,this.params,this.timeout),this.rejoinTimer=new o5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ec(this),this.broadcastEndpointURL=l5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[tc.PRESENCE]&&this.bindings[tc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},g={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(ds.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(ds.CLOSED)),this.updateJoinPayload(Object.assign({config:g},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(ds.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,v=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,j=[];for(let T=0;T<v;T++){const k=w[T],{filter:{event:_,schema:N,table:E,filter:R}}=k,A=y&&y[T];if(A&&A.event===_&&la.isFilterValueEqual(A.schema,N)&&la.isFilterValueEqual(A.table,E)&&la.isFilterValueEqual(A.filter,R))j.push(Object.assign(Object.assign({},k),{id:A.id}));else{this.unsubscribe(),this.state=Lt.errored,t==null||t(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(ds.SUBSCRIBED);return}}).receive("error",y=>{this.state=Lt.errored,t==null||t(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Lt.joined&&t===tc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Lt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Lm(this,mr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Lm(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>oD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:p}=mr;if(r&&[u,d,f,p].indexOf(l)>=0&&r!==this._joinRef())return;let g=this._onMessage(l,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var b,w,v;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(w=y.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(y=>y.callback(g,r)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var b,w,v,j,T,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const _=y.id,N=(b=y.filter)===null||b===void 0?void 0:b.event;return _&&((w=n.ids)===null||w===void 0?void 0:w.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(T=(j=y==null?void 0:y.filter)===null||j===void 0?void 0:j.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return _==="*"||_===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:w,table:v,commit_timestamp:j,type:T,errors:k}=b;g=Object.assign(Object.assign({},{schema:w,table:v,commit_timestamp:j,eventType:T,new:{},old:{},errors:k}),this._getPayloadRecords(b))}y.callback(g,r)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&la.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(mr.close,{},t)}_onError(t){this._on(mr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Tw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Tw(t.columns,t.old_record)),n}}const Bm=()=>{},hd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pD=[1e3,2e3,5e3,1e4],mD=1e4,gD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yD{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yg,this.transport=null,this.heartbeatIntervalMs=hd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bm,this.ref=0,this.reconnectTimer=null,this.vsn=Nw,this.logger=Bm,this.conn=null,this.sendBuffer=[],this.serializer=new aD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Xg.websocket}`,this.httpEndpoint=l5(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ti.connecting:return qi.Connecting;case ti.open:return qi.Open;case ti.closing:return qi.Closing;default:return qi.Closed}}isConnected(){return this.connectionState()===qi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new la(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:s,ref:o}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(iD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${s} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ti.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ti.open||this.conn.readyState===ti.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(mr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([gD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:rD};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(mr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new o5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,o,l,u,d,f,p,h,g,y;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Yg,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:hd.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Bm,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:Nw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(b=>pD[b-1]||mD),this.vsn){case sD:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((b,w)=>w(JSON.stringify(b))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:((b,w)=>w(JSON.parse(b)));break;case i5:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var mc=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xD(e,t,n){const r=new URL(t,e);if(n)for(const[s,o]of Object.entries(n))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function bD(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function vD(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:o,headers:l}){const u=xD(e.baseUrl,r,s),d=await bD(e.auth),f=await t(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),p=await f.text(),h=(f.headers.get("content-type")||"").includes("application/json"),g=h&&p?JSON.parse(p):p;if(!f.ok){const y=h?g:void 0,b=y==null?void 0:y.error;throw new mc((b==null?void 0:b.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:y})}return{status:f.status,headers:f.headers,data:g}}}}function pd(e){return e.join("")}var wD=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:pd(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pd(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pd(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pd(e.namespace)}`}),!0}catch(t){if(t instanceof mc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof mc&&n.status===409)return;throw n}}};function Lo(e){return e.join("")}var SD=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lo(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof mc&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof mc&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},kD=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=vD({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new wD(this.client,t),this.tableOps=new SD(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},eh=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function th(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var md=class extends eh{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},c5=class extends eh{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const jD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),CD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Qg=e=>{if(Array.isArray(e))return e.map(n=>Qg(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Qg(r)}),t},_D=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function ED(e,t){if(gc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ND(e){var t=ED(e,"string");return gc(t)=="symbol"?t:t+""}function TD(e,t,n){return(t=ND(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){TD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Pw=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},RD=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,o=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";t(new md(Pw(l),o,u,r))}).catch(()=>{if(r==="vectors"){const l=o+"";t(new md(s.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";t(new md(s.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";t(new md(s.statusText||`HTTP ${o} error`,o,l,r))}}else t(new c5(Pw(e),e,r))},ID=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?ze(ze({},s),n):(CD(r)?(s.headers=ze({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),ze(ze({},s),n))};async function Fl(e,t,n,r,s,o,l){return new Promise((u,d)=>{e(n,ID(t,r,s,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;if(l==="vectors"){const p=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!p||!p.includes("application/json"))return{}}return f.json()}).then(f=>u(f)).catch(f=>RD(f,d,r,l))})}function u5(e="storage"){return{get:async(t,n,r,s)=>Fl(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,o)=>Fl(t,"POST",n,s,o,r,e),put:async(t,n,r,s,o)=>Fl(t,"PUT",n,s,o,r,e),head:async(t,n,r,s)=>Fl(t,"HEAD",n,ze(ze({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,o)=>Fl(t,"DELETE",n,s,o,r,e)}}const AD=u5("storage"),{get:yc,post:pr,put:Zg,head:PD,remove:Ay}=AD,On=u5("vectors");var Ba=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=jD(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(th(n))return{data:null,error:n};throw n}}},MD=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(th(t))return{data:null,error:t};throw t}}};let d5;d5=Symbol.toStringTag;var DD=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[d5]="BlobDownloadBuilder",this.promise=null}asStream(){return new MD(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(th(t))return{data:null,error:t};throw t}}};const FD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var OD=class extends Ba{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let o;const l=ze(ze({},Mw),r);let u=ze(ze({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",s.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(d))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=ze(ze({},u),r.headers));const f=s._removeEmptyFolders(t),p=s._getFinalPath(f),h=await(e=="PUT"?Zg:pr)(s.fetch,`${s.url}/object/${p}`,o,ze({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:f,id:h.Id,fullPath:h.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const o=s._removeEmptyFolders(e),l=s._getFinalPath(o),u=new URL(s.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",t),s.handleOperation(async()=>{let d;const f=ze({upsert:Mw.upsert},r),p=ze(ze({},s.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType),{path:o,fullPath:(await Zg(s.fetch,u.toString(),d,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=ze({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=await pr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new eh("No token returned by API");return{signedUrl:l.toString(),path:e,token:u}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await pr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await pr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),o=await pr(r.fetch,`${r.url}/object/sign/${s}`,ze({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await pr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(l=>ze(ze({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",o=this._getFinalPath(e),l=()=>yc(this.fetch,`${this.url}/${n}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new DD(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Qg(await yc(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await PD(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(th(r)&&r instanceof c5){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Ay(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=ze(ze(ze({},FD),t),{},{prefix:e||""});return await pr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=ze({},e);return await pr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const zD="2.94.1",Lc={"X-Client-Info":`storage-js/${zD}`};var $D=class extends Ba{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),l=ze(ze({},Lc),t);super(o,l,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await yc(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await yc(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await pr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Zg(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await pr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ay(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},LD=class extends Ba{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=ze(ze({},Lc),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await pr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await yc(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ay(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!_D(e))throw new eh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new kD({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,o){const l=s[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},BD=class extends Ba{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=ze(ze({},Lc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await On.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await On.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},WD=class extends Ba{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=ze(ze({},Lc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},VD=class extends Ba{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=ze(ze({},Lc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await On.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},UD=class extends VD{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new HD(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},HD=class extends BD{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new qD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},qD=class extends WD{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ze(ze({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},GD=class extends $D{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new OD(this.url,this.headers,e,this.fetch)}get vectors(){return new UD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LD(this.url+"/iceberg",this.headers,this.fetch)}};const f5="2.94.1",na=30*1e3,e0=3,Wm=e0*na,KD="http://localhost:9999",YD="supabase.auth.token",XD={"X-Client-Info":`gotrue-js/${f5}`},t0="X-Supabase-Api-Version",h5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=600*1e3;class xc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ZD extends xc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function eF(e){return Pe(e)&&e.name==="AuthApiError"}class Gi extends xc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class js extends xc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Dn extends js{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vm(e){return Pe(e)&&e.name==="AuthSessionMissingError"}class Bo extends js{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gd extends js{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yd extends js{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tF(e){return Pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Dw extends js{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nF extends js{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class n0 extends js{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Um(e){return Pe(e)&&e.name==="AuthRetryableFetchError"}class Fw extends js{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class r0 extends js{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ow=` 	
\r=`.split(""),rF=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ow.length;t+=1)e[Ow[t].charCodeAt(0)]=-2;for(let t=0;t<xf.length;t+=1)e[xf[t].charCodeAt(0)]=t;return e})();function zw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(xf[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(xf[r]),t.queuedBits-=6}}function p5(e,t,n){const r=rF[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $w(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{oF(l,r,n)};for(let l=0;l<e.length;l+=1)p5(e.charCodeAt(l),s,o);return t.join("")}function sF(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function iF(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}sF(r,t)}}function oF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ha(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)p5(e.charCodeAt(s),n,r);return new Uint8Array(t)}function aF(e){const t=[];return iF(e,n=>t.push(n)),new Uint8Array(t)}function Xi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>zw(s,n,r)),zw(null,n,r),t.join("")}function lF(e){return Math.round(Date.now()/1e3)+e}function cF(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",zi={tested:!1,writable:!1},m5=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zi.tested)return zi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zi.tested=!0,zi.writable=!0}catch{zi.tested=!0,zi.writable=!1}return zi.writable};function uF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const g5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ra=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},$i=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Qt=async(e,t)=>{await e.removeItem(t)};class nh{constructor(){this.promise=new nh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}nh.promiseConstructor=Promise;function xd(e){const t=e.split(".");if(t.length!==3)throw new r0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!JD.test(t[r]))throw new r0("JWT not in base64url format");return{header:JSON.parse($w(t[0])),payload:JSON.parse($w(t[1])),signature:ha(t[2]),raw:{header:t[0],payload:t[1]}}}async function fF(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hF(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){s(l);return}}})()})}function pF(e){return("0"+e.toString(16)).substr(-2)}function mF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,pF).join("")}async function gF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function yF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await gF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wo(e,t,n=!1){const r=mF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ra(e,`${t}-code-verifier`,s);const o=await yF(r);return[o,r===o?"plain":"s256"]}const xF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bF(e){const t=e.headers.get(t0);if(!t||!t.match(xF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wF(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const SF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vo(e){if(!SF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hm(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kF(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Lw(e){return JSON.parse(JSON.stringify(e))}const Ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jF=[502,503,504];async function Bw(e){var t;if(!dF(e))throw new n0(Ui(e),0);if(jF.includes(e.status))throw new n0(Ui(e),e.status);let n;try{n=await e.json()}catch(o){throw new Gi(Ui(o),o)}let r;const s=bF(e);if(s&&s.getTime()>=h5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Fw(Ui(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Dn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Fw(Ui(n),e.status,n.weak_password.reasons);throw new ZD(Ui(n),e.status||500,r)}const CF=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Oe(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[t0]||(o[t0]=h5["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await _F(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function _F(e,t,n,r,s,o){const l=CF(t,r,s,o);let u;try{u=await e(n,Object.assign({},l))}catch(d){throw console.error(d),new n0(Ui(d),0)}if(u.ok||await Bw(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Bw(d)}}function dr(e){var t;let n=null;TF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=lF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ww(e){const t=dr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ni(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function EF(e){return{data:e,error:null}}function NF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,l=La(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Vw(e){return e}function TF(e){return e.access_token&&e.refresh_token&&e.expires_in}const qm=["global","local","others"];class RF{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=g5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=qm[0]){if(qm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qm.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ni})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=La(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ni})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Vw});if(p.error)throw p.error;const h=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);f[`${v}Page`]=w}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(Pe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Vo(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ni})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Vo(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ni})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Vo(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ni})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Vo(t.userId);try{const{data:n,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Vo(t.userId),Vo(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Vw});if(p.error)throw p.error;const h=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);f[`${v}Page`]=w}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(Pe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}}function Uw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Uo={debug:!!(globalThis&&m5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class y5 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class IF extends y5{}async function AF(e,t,n){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new IF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Uo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function PF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function x5(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function MF(e){return parseInt(e,16)}function DF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function FF(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:d,resources:f,scheme:p,uri:h,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=x5(e.address),b=p?`${p}://${r}`:r,w=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${y}

${w}`;let j=`URI: ${h}
Version: ${g}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(s&&(j+=`
Expiration Time: ${s.toISOString()}`),u&&(j+=`
Not Before: ${u.toISOString()}`),d&&(j+=`
Request ID: ${d}`),f){let T=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);T+=`
- ${k}`}j+=T}return`${v}
${j}`}class Nt extends Error{constructor({message:t,code:n,cause:r,name:s}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class bf extends Nt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function OF({error:e,options:t}){var n,r,s;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(b5(l)){if(o.rp.id!==l)return new Nt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zF({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(b5(r)){if(n.rpId!==r)return new Nt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class $F{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const LF=new $F;function BF(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=La(e,["challenge","user","excludeCredentials"]),o=ha(t).buffer,l=Object.assign(Object.assign({},n),{id:ha(n.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:ha(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function WF(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=La(e,["challenge","allowCredentials"]),s=ha(t).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ha(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function VF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Xi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function UF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Xi(new Uint8Array(s.authenticatorData)),clientDataJSON:Xi(new Uint8Array(s.clientDataJSON)),signature:Xi(new Uint8Array(s.signature)),userHandle:s.userHandle?Xi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function b5(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Hw(){var e,t;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function HF(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new bf("Browser returned unexpected credential type",t)}:{data:null,error:new bf("Empty credential response",t)}}catch(t){return{data:null,error:OF({error:t,options:e})}}}async function qF(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new bf("Browser returned unexpected credential type",t)}:{data:null,error:new bf("Empty credential response",t)}}catch(t){return{data:null,error:zF({error:t,options:e})}}}const GF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},KF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const o in s){const l=s[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=vf(u,l):r[o]=vf(l)}else r[o]=l}return r}function YF(e,t){return vf(GF,e,t||{})}function XF(e,t){return vf(KF,e,t||{})}class JF{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},o){var l;try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:d};const f=s??LF.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const h=r;if(h)p.name=`${p.id}:${h}`;else{const y=(await this.client.getUser()).data.user,b=((l=y==null?void 0:y.user_metadata)===null||l===void 0?void 0:l.name)||(y==null?void 0:y.email)||(y==null?void 0:y.id)||"User";p.name=`${p.id}:${b}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=YF(u.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:g}=await HF({publicKey:p,signal:f});return h?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}case"request":{const p=XF(u.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:g}=await qF(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:f}));return h?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}}}catch(u){return Pe(u)?{data:null,error:u}:{data:null,error:new Gi("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new xc("rpId is required for WebAuthn authentication")};try{if(!Hw())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new Gi("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new xc("rpId is required for WebAuthn registration")};try{if(!Hw())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var h;return(h=p.data)===null||h===void 0?void 0:h.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new Gi("Unexpected error in register",l)}}}}PF();const QF={url:KD,storageKey:YD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function qw(e,t,n){return await n()}const Ho={};class bc{get jwks(){var t,n;return(n=(t=Ho[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ho[this.storageKey]=Object.assign(Object.assign({},Ho[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ho[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ho[this.storageKey]=Object.assign(Object.assign({},Ho[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},QF),t);if(this.storageKey=o.storageKey,this.instanceID=(n=bc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,bc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Zt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new RF({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=g5(o.fetch),this.lock=o.lock||qw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Zt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=AF:this.lock=qw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:m5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${f5}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Zt()&&(n=uF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Zt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),tF(o)){const d=(t=o.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Pe(n)?this._returnResult({error:n}):this._returnResult({error:new Gi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:dr}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:p,password:h,options:g}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await Wo(this.storage,this.storageKey)),o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:p,password:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:b},xform:dr})}else if("phone"in t){const{phone:p,password:h,options:g}=t;o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:dr})}else throw new gd("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await Qt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ww})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ww})}else throw new gd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new Bo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,o,l,u,d,f,p,h,g;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:w,wallet:v,statement:j,options:T}=t;let k;if(Zt())if(typeof v=="object")k=v;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")k=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const _=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href),N=await k.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=x5(N[0]);let R=(r=T==null?void 0:T.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const P=await k.request({method:"eth_chainId"});R=MF(P)}const A={domain:_.host,address:E,statement:j,uri:_.href,version:"1",chainId:R,nonce:(s=T==null?void 0:T.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(o=T==null?void 0:T.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=T==null?void 0:T.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=T==null?void 0:T.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=T==null?void 0:T.signInWithEthereum)===null||p===void 0?void 0:p.resources};y=FF(A),b=await k.request({method:"personal_sign",params:[DF(y),E]})}try{const{data:w,error:v}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:dr});if(v)throw v;if(!w||!w.session||!w.user){const j=new Bo;return this._returnResult({data:{user:null,session:null},error:j})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Pe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,r,s,o,l,u,d,f,p,h,g,y;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:v,wallet:j,statement:T,options:k}=t;let _;if(Zt())if(typeof j=="object")_=j;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=j}const N=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),T?{statement:T}:null));let R;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")R=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)R=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)b=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((h=(p=k==null?void 0:k.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||h===void 0)&&h.length?["Resources",...k.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(b),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:v,error:j}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Xi(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:dr});if(j)throw j;if(!v||!v.session||!v.user){const T=new Bo;return this._returnResult({data:{user:null,session:null},error:T})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:j})}catch(v){if(Pe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const n=await $i(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new nF;const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:dr});if(await Qt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new Bo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=t,u=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dr}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const p=new Bo;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(Pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,o,l;try{if("email"in t){const{email:u,options:d}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Wo(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:p}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p})}throw new gd("You must provide either an email or phone number.")}catch(u){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:dr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,o,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Wo(this.storage,this.storageKey));const f=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:EF});return!((o=f.data)===null||o===void 0)&&o.url&&Zt()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Dn;const{error:s}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:l}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:l,error:u}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new gd("You must provide either an email or phone number and a type")}catch(n){if(Pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await $i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Wm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await $i(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Hm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=kF(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ni}):await this._useSession(async n=>{var r,s,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dn}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ni})})}catch(n){if(Pe(n))return Vm(n)&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Dn;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Wo(this.storage,this.storageKey));const{data:f,error:p}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:ni});if(p)throw p;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Dn;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=xd(t.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Pe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Dn;const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Zt())throw new yd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Dw("No code detected.");const{data:T,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=t;if(!o||!u||!l||!f)throw new yd("No session defined in URL");const p=Math.round(Date.now()/1e3),h=parseInt(u);let g=p+h;d&&(g=parseInt(d));const y=g-p;y*1e3<=na&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const b=g-h;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,p);const{data:w,error:v}=await this._getUser(o);if(v)throw v;const j={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:g,refresh_token:l,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:t.type},error:null})}catch(r){if(Pe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await $i(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o&&!Vm(o))return this._returnResult({error:o});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(eF(u)&&(u.status===404||u.status===401||u.status===403)||Vm(u)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=cF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wo(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,d,f,p;const{data:h,error:g}=o;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(f=h.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Zt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Pe(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:l,provider:u,token:d,access_token:f,nonce:p}=t,h=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dr}),{data:g,error:y}=h;return y?this._returnResult({data:{user:null,session:null},error:y}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Bo}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:y}))}catch(s){if(await Qt(this.storage,`${this.storageKey}-code-verifier`),Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hF(async s=>(s>0&&await fF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:dr})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Um(o)&&Date.now()+l-r<na})}catch(r){if(this._debug(n,"error",r),Pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Zt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await $i(this.storage,this.storageKey);if(s&&this.userStorage){let l=await $i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await ra(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Hm()}else if(s&&!s.user&&!s.user){const l=await $i(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Qt(this.storage,this.storageKey+"-user"),await ra(this.storage,this.storageKey,s)):s.user=Hm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Wm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Wm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Um(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new nh;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Dn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Pe(o)){const l={data:null,error:o};return Um(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Qt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ra(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Lw(s);await ra(this.storage,this.storageKey,o)}else{const s=Lw(n);await ra(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Qt(this.storage,this.storageKey),await Qt(this.storage,this.storageKey+"-code-verifier"),await Qt(this.storage,this.storageKey+"-user"),this.userStorage&&await Qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),na);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${na}ms, refresh threshold is ${e0} ticks`),s<=e0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof y5)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Wo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?this._returnResult({data:null,error:o}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:f}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?VF(t.webauthn.credential_response):UF(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:BF(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:WF(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,o;if(t)try{const{payload:y}=xd(t);let b=null;y.aal&&(b=y.aal);let w=b;const{data:{user:v},error:j}=await this.getUser(t);if(j)return this._returnResult({data:null,error:j});((r=(n=v==null?void 0:v.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(w="aal2");const k=y.amr||[];return{data:{currentLevel:b,nextLevel:w,currentAuthenticationMethods:k},error:null}}catch(y){if(Pe(y))return this._returnResult({data:null,error:y});throw y}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=xd(l.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(y=>y.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const g=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Dn})})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Dn});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Zt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Dn});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Zt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Dn})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dn})})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+QD>s)return r;const{data:o,error:l}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:b}=await this.getSession();if(b||!y.session)return this._returnResult({data:null,error:b});r=y.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:d}}=xd(r);n!=null&&n.allowExpired||vF(o.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:s,signature:l},error:null}}const p=wF(s.alg),h=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,h,l,aF(`${u}.${d}`)))throw new r0("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Pe(r))return this._returnResult({data:null,error:r});throw r}}}bc.nextInstanceID={};const ZF=bc,eO="2.94.1";let ql="";typeof Deno<"u"?ql="deno":typeof document<"u"?ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ql="react-native":ql="node";const tO={"X-Client-Info":`supabase-js-${ql}/${eO}`},nO={headers:tO},rO={schema:"public"},sO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iO={};function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function oO(e,t){if(vc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aO(e){var t=oO(e,"string");return vc(t)=="symbol"?t:t+""}function lO(e,t,n){return(t=aO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gw(Object(n),!0).forEach(function(r){lO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const cO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uO=()=>Headers,dO=(e,t,n)=>{const r=cO(n),s=uO();return async(o,l)=>{var u;const d=(u=await t())!==null&&u!==void 0?u:e;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,vt(vt({},l),{},{headers:f}))}};function fO(e){return e.endsWith("/")?e:e+"/"}function hO(e,t){var n,r;const{db:s,auth:o,realtime:l,global:u}=e,{db:d,auth:f,realtime:p,global:h}=t,g={db:vt(vt({},d),s),auth:vt(vt({},f),o),realtime:vt(vt({},p),l),storage:{},global:vt(vt(vt({},h),u),{},{headers:vt(vt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function pO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var mO=class extends ZF{constructor(e){super(e)}},gO=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const o=pO(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:rO,realtime:iO,auth:vt(vt({},sO),{},{storageKey:l}),global:nO},d=hO(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=dO(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new eD(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new GD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new qM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:o,flowType:l,lock:u,debug:d,throwOnError:f},p,h){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mO({url:this.authUrl.href,headers:vt(vt({},g),p),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:u,debug:d,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yD(this.realtimeUrl.href,vt(vt({},e),{},{params:vt(vt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const yO=(e,t,n)=>new gO(e,t,n);function xO(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}xO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $n="uvqbmlnavztzobfaiqao",Fe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2cWJtbG5hdnp0em9iZmFpcWFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMTgzMzgsImV4cCI6MjA4Mzg5NDMzOH0.jJKJ3_V9GgKu33o31KAHR5NKDURhrqy6Hvj8CoJB4qc",Li=yO(`https://${$n}.supabase.co`,Fe),v5=S.createContext(void 0);function bO({children:e}){const[t,n]=S.useState(null),[r,s]=S.useState(null),[o,l]=S.useState(!0);S.useEffect(()=>{u();const{data:{subscription:w}}=Li.auth.onAuthStateChange(async(v,j)=>{console.log("Auth state changed:",v),v==="TOKEN_REFRESHED"||v==="SIGNED_IN"?(console.log("Token refreshed or user signed in, updating token"),j!=null&&j.access_token&&await d(j.access_token)):v==="SIGNED_OUT"&&(console.log("User signed out"),n(null),s(null))});return()=>{w.unsubscribe()}},[]);const u=async()=>{try{const{data:{session:w}}=await Li.auth.getSession();w!=null&&w.access_token&&await d(w.access_token)}catch(w){console.error("Error checking user session:",w)}finally{l(!1)}},d=async w=>{var v,j,T;try{console.log("=== FRONTEND: Fetching user role ==="),console.log("Token length:",w==null?void 0:w.length),console.log("Token preview:",(w==null?void 0:w.substring(0,20))+"...");const{data:{user:k},error:_}=await Li.auth.getUser(w);if(k&&!_){console.log("=== FRONTEND: Got user from Supabase directly ==="),console.log("User ID:",k.id),console.log("User email:",k.email),console.log("User metadata:",k.user_metadata),console.log("Role from metadata:",(v=k.user_metadata)==null?void 0:v.role);const E=((j=k.user_metadata)==null?void 0:j.role)||"user",R=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}");R[E]=k.id,localStorage.setItem("balemoo_demo_user_ids",JSON.stringify(R)),n({id:k.id,email:k.email||"",role:E,name:(T=k.user_metadata)==null?void 0:T.name}),s(w);return}console.log("Falling back to server endpoint...");const N=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/user/role`,{headers:{Authorization:`Bearer ${w}`}});if(console.log("Response status:",N.status),N.ok){const E=await N.json();console.log("=== FRONTEND: User data received from server ==="),console.log("Full response:",E),console.log("Role:",E.role),console.log("Email:",E.email),console.log("Name:",E.name);const R=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}");R[E.role]=E.userId,localStorage.setItem("balemoo_demo_user_ids",JSON.stringify(R)),n({id:E.userId,email:E.email,role:E.role,name:E.name}),s(w)}else{const E=await N.text();console.error("Failed to fetch user role, status:",N.status),console.error("Error response:",E)}}catch(k){console.error("Error fetching user role:",k)}},f=async(w,v)=>{var j;try{const{data:T,error:k}=await Li.auth.signInWithPassword({email:w,password:v});if(k)throw k;(j=T.session)!=null&&j.access_token&&await d(T.session.access_token)}catch(T){throw console.error("Sign in error:",T),new Error(T.message||"Failed to sign in")}},p=f,h=async(w,v,j)=>{var T;try{const{data:k,error:_}=await Li.auth.signUp({email:w,password:v,options:{data:{name:j}}});if(_)throw _;(T=k.session)!=null&&T.access_token&&await d(k.session.access_token)}catch(k){throw console.error("Sign up error:",k),new Error(k.message||"Failed to sign up")}},g=async()=>{try{await Li.auth.signOut(),n(null),s(null)}catch(w){console.error("Sign out error:",w)}},y=g,b=async()=>{var w;try{const{data:v,error:j}=await Li.auth.refreshSession();if(j)throw j;if((w=v.session)!=null&&w.access_token)return await d(v.session.access_token),v.session.access_token}catch(v){throw console.error("Refresh session error:",v),new Error(v.message||"Failed to refresh session")}return null};return i.jsx(v5.Provider,{value:{user:t,accessToken:r,login:f,signIn:p,signUp:h,logout:g,signOut:y,refreshSession:b},children:e})}function Kt(){const e=S.useContext(v5);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function vO(){const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,o]=S.useState(""),[l,u]=S.useState(!1),[d,f]=S.useState(!1),[p,h]=S.useState(!1),[g,y]=S.useState(""),[b,w]=S.useState(""),{signIn:v,signUp:j}=Kt(),T=Pt(),k=async()=>{y(""),w(""),h(!0);try{const N=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/init-demo-users`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`}}),E=await N.json();if(N.ok){const R=E.results.filter(P=>P.status==="created").length,A=E.results.filter(P=>P.status==="already_exists").length;R>0?w(` ${R} demo account(s) created successfully! You can now sign in or use Quick Demo Access.`):A>0&&w(" Demo accounts already exist! You can sign in with demo credentials or use Quick Demo Access.")}else throw new Error(E.error||"Failed to initialize demo users")}catch(N){y(N.message||"Failed to initialize demo accounts")}finally{h(!1)}},_=async N=>{N.preventDefault(),y(""),w(""),f(!0);try{l?await j(e,n,s):await v(e,n),T("/projects")}catch(E){let R=E.message||"Authentication failed";R.includes("Invalid login credentials")?R="Invalid credentials. Please check your email and password, or create a new account.":R.includes("already been registered")?(R="This email is already registered. Please sign in instead.",setTimeout(()=>{u(!1),y("")},2e3)):R.includes("Email not confirmed")&&(R="Please confirm your email address before signing in."),y(R);const A=document.querySelector("form");A==null||A.classList.add("shake"),setTimeout(()=>A==null?void 0:A.classList.remove("shake"),500)}finally{f(!1)}};return i.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center px-6",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-md",children:i.jsxs("div",{className:"rounded-3xl p-8 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a"},children:"Balemoo"}),i.jsx("p",{className:"mt-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,color:"#6b6b6b"},children:l?"Create your account":"Welcome back"})]}),g&&i.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 rounded-lg",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:g})}),b&&i.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 rounded-lg",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#22c55e"},children:b})}),i.jsxs("form",{onSubmit:_,className:"space-y-5",children:[l&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Name"}),i.jsx("input",{id:"name",type:"text",value:s,onChange:N=>o(N.target.value),required:l,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Email"}),i.jsx("input",{id:"email",type:"email",value:e,onChange:N=>t(N.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:n,onChange:N=>r(N.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full px-6 py-3 rounded-full transition-all duration-700",style:{background:d?"rgba(0, 0, 0, 0.4)":"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none",cursor:d?"not-allowed":"pointer",transform:"scale(1)"},onMouseEnter:N=>{d||(N.currentTarget.style.transform="scale(1.03)",N.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.15)")},onMouseLeave:N=>{N.currentTarget.style.transform="scale(1)",N.currentTarget.style.boxShadow="none"},children:d?"Please wait...":l?"Sign Up":"Log In"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:()=>{u(!l),y("")},className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6b6b6b",background:"none",border:"none",cursor:"pointer"},children:l?"Already have an account? Log in":"Don't have an account? Sign up"})}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:()=>T("/demo"),className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6",background:"none",border:"none",cursor:"pointer"},children:"Try Quick Demo Access "})}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:k,disabled:p,className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6",background:"none",border:"none",cursor:p?"not-allowed":"pointer"},children:p?"Initializing...":"Initialize Demo Users"})})]})}),i.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
        .shake {
          animation: shake 0.5s ease-in-out;
        }
      `})]})}const w5=S.createContext(void 0);function wO({children:e}){const{user:t,accessToken:n}=Kt(),[r,s]=S.useState([]),[o,l]=S.useState(null),[u,d]=S.useState(null),[f,p]=S.useState(!0),[h,g]=S.useState(null),y=N=>{l(N),N?localStorage.setItem("balemoo_selected_project_id",N.id):localStorage.removeItem("balemoo_selected_project_id"),N&&N.agendas&&N.agendas.length>0?d(N.agendas[0]):d(null)},b=async()=>{if(!t||!n){p(!1);return}try{p(!0),g(null);const N=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/projects`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!N.ok){const P=await N.json();throw new Error(P.error||"Failed to fetch projects")}const R=(await N.json()).projects||[];s(R);const A=localStorage.getItem("balemoo_selected_project_id");if(A){const P=R.find(z=>z.id===A);P&&(l(P),P.agendas&&P.agendas.length>0&&d(P.agendas[0]))}else if(o){const P=R.find(z=>z.id===o.id);P&&l(P)}}catch(N){console.error("Error fetching projects:",N),g(N.message||"Failed to fetch projects"),s([])}finally{p(!1)}};S.useEffect(()=>{t&&n?b():(s([]),p(!1))},[t,n]);const w=async N=>{if(!t||!n)throw new Error("User not authenticated");try{const E=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/projects`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(N)});if(!E.ok){const A=await E.json();throw new Error(A.error||"Failed to create project")}const R=await E.json();return await b(),R.project}catch(E){throw console.error("Error creating project:",E),E}},v=async(N,E)=>{if(!t||!n)throw new Error("User not authenticated");try{console.log("=== UPDATE PROJECT REQUEST (Frontend) ==="),console.log("Project ID:",N),console.log("Updates:",JSON.stringify(E,null,2));const R=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/projects/${N}`,{method:"PUT",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(E)});if(console.log("Response status:",R.status),!R.ok){const P=await R.json();throw console.error("Error response:",P),new Error(P.error||"Failed to update project")}const A=await R.json();console.log("Success response:",A),await b()}catch(R){throw console.error("Error updating project:",R),R}},j=async N=>{if(!t||!n)throw new Error("User not authenticated");try{const E=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/projects/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const R=await E.json();throw new Error(R.error||"Failed to delete project")}await b()}catch(E){throw console.error("Error deleting project:",E),E}},T=async()=>{await b()},k=(N,E,R)=>{const A=r.map(P=>{if(P.id===N){const z=P.agendas.map(L=>L.id===E?{...L,...R}:L);return{...P,agendas:z}}return P});s(A)},_=N=>{var E,R;if(!t)return!1;if(t.role==="admin")return!0;if(N.isActive===!1)return!1;if(N.team){if(t.role==="staff")return((E=N.team.staff)==null?void 0:E.includes(t.id))||!1;if(t.role==="user")return N.team.client===t.id}return((R=N.assignedUsers)==null?void 0:R.includes(t.id))||!1};return i.jsx(w5.Provider,{value:{projects:r,selectedProject:o,setSelectedProject:y,selectedAgenda:u,setSelectedAgenda:d,isProjectAccessible:_,loading:f,error:h,createProject:w,updateProject:v,deleteProject:j,refreshProjects:T,updateAgenda:k},children:e})}function Yt(){const e=S.useContext(w5);if(e===void 0)throw new Error("useProject must be used within a ProjectProvider");return e}const SO=[{id:"kabar-in",title:"kabar.in",description:"Guest CRM, personalized QR generation and management",icon:i.jsx(fc,{className:"w-12 h-12"}),route:"/kabar-in",requiredRoles:["admin"]},{id:"check-in",title:"check.in",description:"QR-based fast guest check-in system",icon:i.jsx(ka,{className:"w-12 h-12"}),route:"/check-in",requiredRoles:["admin","staff"]},{id:"monitor-in",title:"monitor.in",description:"Guest analytics and monitoring dashboard",icon:i.jsx(vy,{className:"w-12 h-12"}),route:"/monitor-in",requiredRoles:["admin","staff","user"]}];function kO(){const{user:e,signOut:t}=Kt(),{project:n,setProject:r}=Yt(),s=Pt(),[o,l]=S.useState(null),[u,d]=S.useState(null),f=g=>{e&&g.requiredRoles.includes(e.role)?s(g.route):(d(g.id),setTimeout(()=>d(null),500))},p=async()=>{await t(),s("/")},h=g=>e&&g.requiredRoles.includes(e.role);return i.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[i.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-6xl mb-12",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 3vw, 2.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a"},children:["Welcome back, ",(e==null?void 0:e.name)||"User"]}),i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#6b6b6b",marginTop:"0.5rem"},children:["Role: ",i.jsx("span",{style:{color:(e==null?void 0:e.role)==="admin"?"#8b5cf6":(e==null?void 0:e.role)==="staff"?"#3b82f6":"#10b981",fontWeight:600,textTransform:"uppercase"},children:(e==null?void 0:e.role)||"unknown"})," | Email: ",e==null?void 0:e.email]})]}),i.jsx("button",{onClick:p,className:"px-6 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:"Sign Out"})]})}),i.jsx("div",{className:"w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-6",children:SO.map((g,y)=>{const b=h(g),w=o===g.id,v=u===g.id;return i.jsxs(fe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2+y*.1,ease:[.25,.1,.25,1]},onClick:()=>f(g),onMouseEnter:()=>l(g.id),onMouseLeave:()=>l(null),className:"relative rounded-3xl p-8 backdrop-blur-xl transition-all duration-700",style:{background:b?"rgba(255, 255, 255, 0.7)":"rgba(200, 200, 200, 0.3)",border:`1px solid ${b?"rgba(255, 255, 255, 0.3)":"rgba(150, 150, 150, 0.2)"}`,boxShadow:w&&b?"0 12px 40px rgba(0, 0, 0, 0.15)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:w&&b?"translateY(-8px)":"translateY(0)",cursor:b?"pointer":"not-allowed",opacity:b?1:.5,filter:b?"none":"grayscale(1)",animation:v?"shake 0.5s ease-in-out":"none"},children:[!b&&i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(br,{className:"w-6 h-6",style:{color:"#9ca3af"}})}),i.jsx("div",{className:"mb-6",style:{color:b?"#1a1a1a":"#9ca3af"},children:g.icon}),i.jsx("h3",{className:"mb-3",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.01em",color:b?"#1a1a1a":"#9ca3af"},children:g.title}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,lineHeight:1.6,color:b?"#6b6b6b":"#9ca3af"},children:g.description}),!b&&w&&i.jsx(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-2 rounded-lg whitespace-nowrap",style:{background:"rgba(0, 0, 0, 0.9)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#ffffff"},children:"You do not have access to this feature"})]},g.id)})}),i.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        .shake-card {
          animation: shake 0.5s ease-in-out;
        }
      `})]})}const jO=[{icon:DP,label:"Dashboard",path:"/kabar-in",color:"#8b5cf6"},{icon:dc,label:"Template Management",path:"/kabar-in/templates",color:"#06b6d4"},{icon:cn,label:"Guest List",path:"/kabar-in/guests",badge:24,color:"#10b981"},{icon:ja,label:"Chatflow Studio",path:"/kabar-in/chatflow",color:"#f59e0b"},{icon:dc,label:"WhatsApp Flows",path:"/kabar-in/whatsapp-flows",color:"#25D366"},{icon:jy,label:"WA JSON Builder",path:"/kabar-in/wa-json-builder",color:"#128C7E"},{icon:sM,label:"Operation Center",path:"/kabar-in/operation",badge:5,color:"#3b82f6"},{icon:fc,label:"Messages",path:"/kabar-in/messages",badge:3,color:"#ec4899"},{icon:Zf,label:"Analytics",path:"/kabar-in/analytics",color:"#6366f1"},{icon:$c,label:"Settings",path:"/kabar-in/settings",color:"#64748b"}];function CO({children:e}){const t=Pt(),n=Kr(),[r,s]=S.useState(!1),[o,l]=S.useState(null),u=d=>d==="/kabar-in"?n.pathname===d:n.pathname.startsWith(d);return i.jsxs("div",{style:{display:"flex",minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",paddingTop:"80px"},children:[i.jsxs(fe.div,{initial:!1,animate:{width:r?"80px":"280px"},transition:{duration:.3,ease:[.4,0,.2,1]},style:{position:"fixed",left:0,top:"80px",bottom:0,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"4px 0 24px rgba(0, 0, 0, 0.08)",zIndex:100,overflow:"hidden"},children:[i.jsxs("div",{style:{padding:r?"1.5rem 1rem":"1.5rem 1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx(ci,{mode:"wait",children:!r&&i.jsxs(fe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:700,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"kabar.in"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.125rem"},children:"Guest CRM Platform"})]})}),i.jsx("button",{onClick:()=>s(!r),style:{width:"32px",height:"32px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(139, 92, 246, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},children:r?i.jsx(fa,{size:18,style:{color:"#8b5cf6"}}):i.jsx(wy,{size:18,style:{color:"#8b5cf6"}})})]}),i.jsx("div",{style:{padding:"1rem 0.75rem",overflowY:"auto",height:"calc(100% - 100px)"},children:jO.map((d,f)=>{const p=d.icon,h=u(d.path),g=o===d.path;return i.jsxs(fe.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:f*.05},onClick:()=>t(d.path),onMouseEnter:()=>l(d.path),onMouseLeave:()=>l(null),style:{width:"100%",display:"flex",alignItems:"center",gap:r?"0":"12px",padding:r?"12px":"12px 16px",marginBottom:"6px",background:h?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":g?"rgba(0, 0, 0, 0.03)":"transparent",border:h?"1px solid rgba(139, 92, 246, 0.3)":"1px solid transparent",borderRadius:"14px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",justifyContent:r?"center":"flex-start",transform:g?"translateX(4px)":"translateX(0)"},children:[h&&i.jsx(fe.div,{layoutId:"activeIndicator",style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:"4px",height:"24px",background:"linear-gradient(180deg, #8b5cf6 0%, #6366f1 100%)",borderRadius:"0 4px 4px 0"},transition:{type:"spring",stiffness:300,damping:30}}),i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:h||g?`linear-gradient(135deg, ${d.color}20 0%, ${d.color}10 100%)`:"transparent",border:`1px solid ${d.color}${h?"40":"00"}`,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:i.jsx(p,{size:20,style:{color:h?d.color:"#6b7280"}})}),i.jsx(ci,{mode:"wait",children:!r&&i.jsxs(fe.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},style:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,overflow:"hidden"},children:[i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:h?600:500,color:h?"#1f2937":"#6b7280",whiteSpace:"nowrap"},children:d.label}),d.badge&&i.jsx(fe.div,{initial:{scale:0},animate:{scale:1},style:{minWidth:"24px",height:"24px",borderRadius:"12px",background:d.color,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},children:i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:700,color:"#ffffff"},children:d.badge})})]})}),r&&g&&i.jsxs(fe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},style:{position:"absolute",left:"100%",marginLeft:"12px",padding:"8px 16px",background:"rgba(0, 0, 0, 0.9)",borderRadius:"8px",whiteSpace:"nowrap",zIndex:1e3,pointerEvents:"none"},children:[i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#ffffff"},children:d.label}),i.jsx("div",{style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%) rotate(45deg)",width:"8px",height:"8px",background:"rgba(0, 0, 0, 0.9)"}})]})]},d.path)})})]}),i.jsx(fe.div,{initial:!1,animate:{marginLeft:r?"80px":"280px"},transition:{duration:.3,ease:[.4,0,.2,1]},style:{flex:1,minHeight:"calc(100vh - 80px)",width:"100%"},children:e})]})}const S5=S.createContext(void 0);function _O({children:e}){const{user:t,accessToken:n}=Kt(),[r,s]=S.useState([]),[o,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${$n}.supabase.co/functions/v1/make-server-deeab278`,p=async T=>{if(!t||!n||t.role!=="admin"){s([]);return}try{l(!0),d(null);const k=new URLSearchParams;T!=null&&T.status&&k.append("status",T.status),T!=null&&T.projectId&&k.append("projectId",T.projectId);const _=await fetch(`${f}/templates?${k.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const E=await _.json();throw new Error(E.error||"Failed to fetch templates")}const N=await _.json();s(N.templates||[])}catch(k){console.error("Error fetching templates:",k),d(k.message||"Failed to fetch templates"),s([])}finally{l(!1)}},h=async T=>{if(!t||!n||t.role!=="admin")return null;try{const k=await fetch(`${f}/templates/${T}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const N=await k.json();throw new Error(N.error||"Failed to fetch template")}return(await k.json()).template}catch(k){return console.error("Error fetching template:",k),null}},g=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{console.log("Creating template with input:",T);const k=await fetch(`${f}/templates`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!k.ok){const N=await k.json();console.error("Backend validation errors:",N);const E=N.errors?`Validation failed: ${N.errors.join(", ")}`:N.error||"Failed to create template";throw new Error(E)}const _=await k.json();return await p(),_.template}catch(k){throw console.error("Error creating template:",k),k}},y=async(T,k)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const _=await fetch(`${f}/templates/${T}`,{method:"PUT",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!_.ok){const E=await _.json();throw new Error(E.error||"Failed to update template")}const N=await _.json();return await p(),N.template}catch(_){throw console.error("Error updating template:",_),_}},b=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const k=await fetch(`${f}/templates/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const _=await k.json();throw new Error(_.error||"Failed to delete template")}await p()}catch(k){throw console.error("Error deleting template:",k),k}},w=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const k=await fetch(`${f}/templates/${T}/submit`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const N=await k.json();throw new Error(N.error||"Failed to submit template")}const _=await k.json();return j(T),_.template}catch(k){throw console.error("Error submitting template:",k),k}},v=async(T,k)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const _=await fetch(`${f}/templates/${T}/reject`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({reason:k})});if(!_.ok){const E=await _.json();throw new Error(E.error||"Failed to reject template")}const N=await _.json();return await p(),N.template}catch(_){throw console.error("Error rejecting template:",_),_}},j=T=>{const k=setInterval(async()=>{try{const _=await h(T);if(!_){clearInterval(k);return}s(N=>N.map(E=>E.id===T?_:E)),_.status!=="PENDING"&&clearInterval(k)}catch(_){console.error("Error polling template:",_),clearInterval(k)}},1e3);setTimeout(()=>clearInterval(k),1e4)};return S.useEffect(()=>{t&&n&&t.role==="admin"?p():s([])},[t,n]),i.jsx(S5.Provider,{value:{templates:r,loading:o,error:u,fetchTemplates:p,getTemplateById:h,createTemplate:g,updateTemplate:y,deleteTemplate:b,submitTemplate:w,simulateReject:v},children:e})}function Wa(){const e=S.useContext(S5);if(e===void 0)throw new Error("useTemplates must be used within a TemplateProvider");return e}const Ks="https://uvqbmlnavztzobfaiqao.supabase.co/functions/v1/make-server-deeab278",k5=S.createContext(void 0),rh=()=>{const e=S.useContext(k5);if(!e)throw new Error("useGuests must be used within a GuestProvider");return e},EO=({children:e})=>{const{user:t,accessToken:n}=Kt(),{selectedProject:r}=Yt(),[s,o]=S.useState([]),[l,u]=S.useState(!1),[d,f]=S.useState(null),[p,h]=S.useState(null),[g,y]=S.useState({search:"",category:"all",rsvp_status:"all",invitation_type:"all"}),[b,w]=S.useState({field:"created_at",direction:"desc"}),v=async()=>{if(!t||t.role!=="admin"||!r||!n){o([]);return}try{u(!0),f(null);const z=await fetch(`${Ks}/guests?projectId=${r.id}`,{headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!z.ok){const B=await z.json();throw new Error(B.error||"Failed to fetch guests")}const L=await z.json();o(L.guests||[])}catch(z){const L=z instanceof Error?z.message:"Failed to fetch guests";f(L),console.error("Error fetching guests:",z)}finally{u(!1)}},j=async()=>{if(!t||t.role!=="admin"||!r||!n){h(null);return}try{const z=await fetch(`${Ks}/guests/stats?projectId=${r.id}`,{headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!z.ok)throw new Error("Failed to fetch guest statistics");const L=await z.json();h(L.stats)}catch(z){console.error("Error fetching guest stats:",z)}},T=async z=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Ks}/guests`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,...z})});if(!L.ok){const V=await L.json();throw new Error(V.error||"Failed to create guest")}const K=(await L.json()).guest;return o(V=>[...V,K]),await j(),K},k=async(z,L)=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const B=await fetch(`${Ks}/guests/${z}`,{method:"PUT",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,...L})});if(!B.ok){const J=await B.json();throw new Error(J.error||"Failed to update guest")}const V=(await B.json()).guest;return o(J=>J.map($=>$.id===z?V:$)),await j(),V},_=async z=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Ks}/guests/${z}?projectId=${r.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!L.ok){const B=await L.json();throw new Error(B.error||"Failed to delete guest")}o(B=>B.filter(K=>K.id!==z)),await j()},N=async z=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Ks}/guests/bulk`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,guests:z})});if(!L.ok){const K=await L.json();throw new Error(K.error||"Failed to import guests")}const B=await L.json();return B.success&&B.success.length>0&&(o(K=>[...K,...B.success]),await j()),{success:B.success||[],failed:B.failed||[]}},E=async z=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Ks}/guests/${z}/checkin`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id})});if(!L.ok){const V=await L.json();throw new Error(V.error||"Failed to check in guest")}const K=(await L.json()).guest;return o(V=>V.map(J=>J.id===z?K:J)),await j(),K},R=async(z=!1)=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");try{u(!0),f(null);const L=`${Ks}/guests/seed?projectId=${r.id}${z?"&clear=true":""}`,B=await fetch(L,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!B.ok){const J=await B.json();throw new Error(J.error||"Failed to seed guests")}const V=(await B.json()).guests||[];return await v(),await j(),V}catch(L){const B=L instanceof Error?L.message:"Failed to seed guests";throw f(B),L}finally{u(!1)}},A=xe.useMemo(()=>{let z=[...s];if(g.search){const L=g.search.toLowerCase();z=z.filter(B=>{var K;return B.name.toLowerCase().includes(L)||B.phone.includes(L)||((K=B.email)==null?void 0:K.toLowerCase().includes(L))||B.tags.some(V=>V.toLowerCase().includes(L))})}return g.category&&g.category!=="all"&&(z=z.filter(L=>L.category===g.category)),g.rsvp_status&&g.rsvp_status!=="all"&&(z=z.filter(L=>L.rsvp_status===g.rsvp_status)),g.invitation_type&&g.invitation_type!=="all"&&(z=z.filter(L=>L.invitation_type===g.invitation_type)),g.tags&&g.tags.length>0&&(z=z.filter(L=>g.tags.some(B=>L.tags.includes(B)))),g.has_plus_one!==void 0&&(z=z.filter(L=>L.plus_one===g.has_plus_one)),g.checked_in!==void 0&&(z=z.filter(L=>g.checked_in?!!L.checked_in_at:!L.checked_in_at)),z.sort((L,B)=>{let K,V;switch(b.field){case"name":K=L.name.toLowerCase(),V=B.name.toLowerCase();break;case"created_at":K=new Date(L.created_at).getTime(),V=new Date(B.created_at).getTime();break;case"rsvp_at":K=L.rsvp_at?new Date(L.rsvp_at).getTime():0,V=B.rsvp_at?new Date(B.rsvp_at).getTime():0;break;case"table_number":K=L.table_number||"",V=B.table_number||"";break;default:return 0}return K<V?b.direction==="asc"?-1:1:K>V?b.direction==="asc"?1:-1:0}),z},[s,g,b]);S.useEffect(()=>{t&&t.role==="admin"&&r&&n?(v(),j()):(o([]),h(null))},[t,r,n]);const P={guests:s,loading:l,error:d,stats:p,fetchGuests:v,fetchGuestStats:j,createGuest:T,updateGuest:k,deleteGuest:_,bulkImportGuests:N,checkInGuest:E,seedSampleGuests:R,filteredGuests:A,setFilters:y,setSortOptions:w,filters:g,sortOptions:b};return i.jsx(k5.Provider,{value:P,children:e})};function bd({icon:e,label:t,value:n,change:r,changeType:s,color:o,delay:l}){return i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:0,right:0,width:"120px",height:"120px",background:`linear-gradient(135deg, ${o}15 0%, ${o}05 100%)`,borderRadius:"0 0 0 100%"}}),i.jsxs("div",{className:"flex items-start justify-between relative z-10",children:[i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6b7280",marginBottom:"0.5rem"},children:t}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#1f2937",letterSpacing:"-0.02em"},children:n}),r&&i.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[i.jsx(Zf,{size:14,style:{color:s==="positive"?"#10b981":s==="negative"?"#ef4444":"#6b7280"}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:s==="positive"?"#10b981":s==="negative"?"#ef4444":"#6b7280"},children:r})]})]}),i.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${o}20 0%, ${o}10 100%)`,border:`1px solid ${o}30`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(e,{size:28,style:{color:o}})})]})]})}function vd({icon:e,title:t,description:n,time:r,color:s}){return i.jsxs("div",{className:"flex items-start gap-3 pb-4 mb-4",style:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:`linear-gradient(135deg, ${s}20 0%, ${s}10 100%)`,border:`1px solid ${s}30`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(e,{size:18,style:{color:s}})}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"0.25rem"},children:t}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n})]}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",whiteSpace:"nowrap"},children:r})]})}function NO(){const{templates:e}=Wa(),{stats:t}=rh(),{user:n}=Kt(),r=e.length,s=e.filter(f=>f.status==="APPROVED").length,o=e.filter(f=>f.status==="PENDING").length,l=e.filter(f=>f.status==="DRAFT").length,u=(t==null?void 0:t.total)||0,d=(t==null?void 0:t.confirmed)||0;return i.jsx("div",{style:{padding:"2rem",minHeight:"100%"},children:i.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[i.jsxs(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[i.jsxs("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#ffffff",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:["Welcome back, ",(n==null?void 0:n.name)||"Admin","! "]}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"rgba(255, 255, 255, 0.9)"},children:"Here's what's happening with your WhatsApp CRM today"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[i.jsx(bd,{icon:fc,label:"Total Templates",value:r,change:"+12% from last month",changeType:"positive",color:"#8b5cf6",delay:0}),i.jsx(bd,{icon:ui,label:"Approved",value:s,change:"+8% from last month",changeType:"positive",color:"#10b981",delay:.1}),i.jsx(bd,{icon:gi,label:"Pending Review",value:o,change:o>0?"Awaiting META approval":"All clear",changeType:"neutral",color:"#f59e0b",delay:.2}),i.jsx(bd,{icon:cn,label:"Total Guests",value:u,change:d>0?`${d} confirmed`:"No guests yet",changeType:d>0?"positive":"neutral",color:"#06b6d4",delay:.3})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[i.jsxs(fe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",marginBottom:"1.5rem"},children:"Recent Activity"}),i.jsx(vd,{icon:ui,title:"Template Approved",description:"'event_invitation' approved by META",time:"2 hours ago",color:"#10b981"}),i.jsx(vd,{icon:Qf,title:"Message Sent",description:"124 WhatsApp messages delivered successfully",time:"5 hours ago",color:"#06b6d4"}),i.jsx(vd,{icon:cn,title:"New Guests Added",description:"42 guests imported from CSV",time:"1 day ago",color:"#8b5cf6"}),i.jsx(vd,{icon:Gg,title:"Chatflow Activated",description:"'Welcome Flow' automation started",time:"2 days ago",color:"#f59e0b"})]}),i.jsxs(fe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",marginBottom:"1.5rem"},children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(wd,{icon:fc,label:"Create New Template",description:"Design a WhatsApp message template",color:"#8b5cf6",onClick:()=>window.location.href="/kabar-in/templates"}),i.jsx(wd,{icon:cn,label:"Add Guests",description:"Import or add new guests to your list",color:"#10b981",onClick:()=>window.location.href="/kabar-in/guests"}),i.jsx(wd,{icon:Gg,label:"Build Chatflow",description:"Create automated conversation flows",color:"#f59e0b",onClick:()=>window.location.href="/kabar-in/chatflow"}),i.jsx(wd,{icon:zc,label:"View Analytics",description:"Check your campaign performance",color:"#06b6d4",onClick:()=>window.location.href="/kabar-in/analytics"})]})]})]}),l>0&&i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-6 rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937",marginBottom:"0.25rem"},children:["You have ",l," draft template",l!==1?"s":""]}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:"Complete and submit them to start using in your campaigns"})]}),i.jsx("button",{onClick:()=>window.location.href="/kabar-in/templates",style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.transform="scale(1.05)"},onMouseLeave:f=>{f.currentTarget.style.transform="scale(1)"},children:"Review Drafts"})]})})]})})}function wd({icon:e,label:t,description:n,color:r,onClick:s}){const[o,l]=xe.useState(!1);return i.jsxs("button",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:o?"rgba(0, 0, 0, 0.02)":"transparent",border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:"16px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:o?"translateX(4px)":"translateX(0)",textAlign:"left"},children:[i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:`linear-gradient(135deg, ${r}20 0%, ${r}10 100%)`,border:`1px solid ${r}30`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx(e,{size:22,style:{color:r}})}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"0.125rem"},children:t}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n})]})]})}const TO={DRAFT:{bg:"rgba(156, 163, 175, 0.1)",border:"rgba(156, 163, 175, 0.2)",text:"#6b7280",icon:"#9ca3af",label:"Draft",Icon:dc},PENDING:{bg:"rgba(251, 191, 36, 0.1)",border:"rgba(251, 191, 36, 0.2)",text:"#d97706",icon:"#f59e0b",label:"Pending",Icon:gi},APPROVED:{bg:"rgba(16, 185, 129, 0.1)",border:"rgba(16, 185, 129, 0.2)",text:"#059669",icon:"#10b981",label:"Approved",Icon:ui},REJECTED:{bg:"rgba(239, 68, 68, 0.1)",border:"rgba(239, 68, 68, 0.2)",text:"#dc2626",icon:"#ef4444",label:"Rejected",Icon:ro}},RO={sm:{padding:"4px 10px",fontSize:"0.75rem",iconSize:14,gap:"4px"},md:{padding:"6px 14px",fontSize:"0.875rem",iconSize:16,gap:"6px"},lg:{padding:"8px 16px",fontSize:"1rem",iconSize:18,gap:"8px"}};function j5({status:e,size:t="md"}){const n=TO[e],r=RO[t],s=n.Icon;return i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:r.gap,padding:r.padding,background:n.bg,border:`1px solid ${n.border}`,borderRadius:"12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:r.fontSize,fontWeight:600,color:n.text,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"all 0.2s ease"},children:[i.jsx(s,{size:r.iconSize,style:{color:n.icon}}),i.jsx("span",{children:n.label})]})}function IO({template:e,onView:t,onEdit:n,onDelete:r}){const[s,o]=S.useState(!1),l=e.status==="DRAFT"||e.status==="REJECTED",u=e.content.body.text.split(`
`).slice(0,2).join(" ").substring(0,120);return i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>t(e),className:"relative rounded-3xl backdrop-blur-xl cursor-pointer",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:s?"0 20px 60px rgba(0, 0, 0, 0.15)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:s?"scale(1.02)":"scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",padding:"1.5rem"},children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("div",{className:"flex items-center justify-center rounded-2xl",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.2)"},children:i.jsx(dc,{size:24,style:{color:"#8b5cf6"}})}),i.jsx(j5,{status:e.status,size:"sm"})]}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem",letterSpacing:"-0.01em"},children:e.name}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6b7280",padding:"4px 10px",background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.2)",borderRadius:"8px"},children:e.category}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6b7280",padding:"4px 10px",background:"rgba(156, 163, 175, 0.1)",border:"1px solid rgba(156, 163, 175, 0.2)",borderRadius:"8px"},children:e.language})]}),i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",lineHeight:"1.5",marginBottom:"1rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[u,"..."]}),e.variables.length>0&&i.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#8b5cf6",marginBottom:"1rem"},children:[e.variables.length," variable",e.variables.length!==1?"s":""]}),i.jsxs("div",{className:"flex items-center gap-2 transition-opacity duration-300",style:{opacity:s?1:0,pointerEvents:s?"auto":"none"},children:[i.jsxs("button",{onClick:d=>{d.stopPropagation(),t(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6366f1",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(99, 102, 241, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(99, 102, 241, 0.1)"},children:[i.jsx(zc,{size:16}),"View"]}),l&&n&&i.jsxs("button",{onClick:d=>{d.stopPropagation(),n(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#10b981",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(16, 185, 129, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(16, 185, 129, 0.1)"},children:[i.jsx(Ey,{size:16}),"Edit"]}),l&&r&&i.jsxs("button",{onClick:d=>{d.stopPropagation(),r(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:[i.jsx(At,{size:16}),"Delete"]})]}),i.jsx("div",{style:{position:"absolute",bottom:"1rem",right:"1.5rem",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",opacity:s?0:1,transition:"opacity 0.3s ease"},children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})}function AO({templates:e,onView:t,onEdit:n,onDelete:r}){const[s,o]=S.useState(""),[l,u]=S.useState("ALL"),[d,f]=S.useState("date"),p=S.useMemo(()=>{let g=[...e];if(s){const y=s.toLowerCase();g=g.filter(b=>b.name.toLowerCase().includes(y)||b.body.toLowerCase().includes(y)||b.category.toLowerCase().includes(y))}return l!=="ALL"&&(g=g.filter(y=>y.status===l)),g.sort((y,b)=>d==="date"?new Date(b.createdAt).getTime()-new Date(y.createdAt).getTime():y.name.localeCompare(b.name)),g},[e,s,l,d]),h=S.useMemo(()=>({ALL:e.length,DRAFT:e.filter(g=>g.status==="DRAFT").length,PENDING:e.filter(g=>g.status==="PENDING").length,APPROVED:e.filter(g=>g.status==="APPROVED").length,REJECTED:e.filter(g=>g.status==="REJECTED").length}),[e]);return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-8 rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[i.jsxs("div",{className:"mb-4 relative",children:[i.jsx(bs,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),i.jsx("input",{type:"text",placeholder:"Search templates...",value:s,onChange:g=>o(g.target.value),style:{width:"100%",padding:"12px 16px 12px 48px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"16px",outline:"none",transition:"all 0.2s ease"},onFocus:g=>{g.currentTarget.style.borderColor="#8b5cf6",g.currentTarget.style.boxShadow="0 0 0 3px rgba(139, 92, 246, 0.1)"},onBlur:g=>{g.currentTarget.style.borderColor="rgba(209, 213, 219, 0.5)",g.currentTarget.style.boxShadow="none"}})]}),i.jsx("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:["ALL","DRAFT","PENDING","APPROVED","REJECTED"].map(g=>i.jsxs("button",{onClick:()=>u(g),style:{padding:"8px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:l===g?"#ffffff":"#6b7280",background:l===g?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":"rgba(156, 163, 175, 0.1)",border:l===g?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(156, 163, 175, 0.2)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:y=>{l!==g&&(y.currentTarget.style.background="rgba(156, 163, 175, 0.2)")},onMouseLeave:y=>{l!==g&&(y.currentTarget.style.background="rgba(156, 163, 175, 0.1)")},children:[g," (",h[g],")"]},g))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pM,{size:18,style:{color:"#6b7280"}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginRight:"8px"},children:"Sort by:"}),i.jsx("button",{onClick:()=>f("date"),style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:d==="date"?600:500,color:d==="date"?"#8b5cf6":"#6b7280",background:d==="date"?"rgba(139, 92, 246, 0.1)":"transparent",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:"Date"}),i.jsx("button",{onClick:()=>f("name"),style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:d==="name"?600:500,color:d==="name"?"#8b5cf6":"#6b7280",background:d==="name"?"rgba(139, 92, 246, 0.1)":"transparent",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:"Name"})]})]}),i.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginBottom:"1.5rem"},children:[p.length," template",p.length!==1?"s":""," found"]}),p.length>0?i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1.5rem"},children:p.map(g=>i.jsx(IO,{template:g,onView:t,onEdit:n,onDelete:r},g.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"4rem 2rem",textAlign:"center"},children:[i.jsx("div",{className:"flex items-center justify-center rounded-full mb-4",style:{width:"80px",height:"80px",background:"rgba(156, 163, 175, 0.1)",border:"1px solid rgba(156, 163, 175, 0.2)"},children:i.jsx(bs,{size:40,style:{color:"#9ca3af"}})}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"No templates found"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:s?"Try adjusting your search or filters":"Create your first template to get started"})]})]})}function Py({template:e,sampleData:t={}}){var s,o,l,u,d;const n=f=>f?f.replace(/\{\{(\w+)\}\}/g,(p,h)=>t[h]||`[${h}]`):"",r=f=>{const p=[];let h=0,g=0;const y=/(\*[^*]+\*|_[^_]+_|~[^~]+~)/g;let b;const w=n(f);for(;(b=y.exec(w))!==null;){b.index>h&&p.push(i.jsx("span",{children:w.slice(h,b.index)},`text-${g++}`));const v=b[0],j=v.slice(1,-1);v.startsWith("*")?p.push(i.jsx("strong",{style:{fontWeight:700},children:j},`bold-${g++}`)):v.startsWith("_")?p.push(i.jsx("em",{style:{fontStyle:"italic"},children:j},`italic-${g++}`)):v.startsWith("~")&&p.push(i.jsx("span",{style:{textDecoration:"line-through"},children:j},`strike-${g++}`)),h=b.index+v.length}return h<w.length&&p.push(i.jsx("span",{children:w.slice(h)},`text-${g++}`)),i.jsx(i.Fragment,{children:p})};return i.jsxs("div",{style:{maxWidth:"400px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:"#075e54",padding:"12px 16px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#d1d5db",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#6b7280"},children:"B"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Balemoo"}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"WhatsApp Business"})]})]}),i.jsxs("div",{style:{background:"#ece5dd",backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d9d9d9' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,padding:"20px 16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",minHeight:"300px"},children:[i.jsxs("div",{style:{background:"#dcf8c6",padding:"10px 12px 6px",borderRadius:"8px",maxWidth:"85%",boxShadow:"0 1px 0.5px rgba(0, 0, 0, 0.13)",position:"relative"},children:[((s=e.content)==null?void 0:s.header)&&i.jsxs("div",{style:{marginBottom:"8px"},children:[e.content.header.type==="TEXT"&&i.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",fontWeight:700,color:"#000000",marginBottom:"4px"},children:n(e.content.header.text||"")}),e.content.header.type==="IMAGE"&&i.jsx("div",{style:{width:"100%",height:"120px",background:"#e5e7eb",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"[Image]"}),e.content.header.type==="VIDEO"&&i.jsx("div",{style:{width:"100%",height:"120px",background:"#1f2937",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#ffffff"},children:"[Video]"}),e.content.header.type==="DOCUMENT"&&i.jsx("div",{style:{padding:"8px 12px",background:"#ffffff",borderRadius:"6px",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#374151"},children:" Document"})]}),i.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",color:"#000000",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:r(((l=(o=e.content)==null?void 0:o.body)==null?void 0:l.text)||"")}),((u=e.content)==null?void 0:u.footer)&&i.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.8125rem",color:"#667781",marginTop:"8px"},children:n(e.content.footer.text)}),i.jsx("div",{style:{textAlign:"right",marginTop:"4px",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.6875rem",color:"#667781"},children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),((d=e.content)==null?void 0:d.buttons)&&e.content.buttons.length>0&&i.jsx("div",{style:{marginTop:"4px",display:"flex",flexDirection:"column",gap:"4px"},children:e.content.buttons.map((f,p)=>i.jsxs("div",{style:{background:"#ffffff",padding:"10px 12px",borderRadius:"8px",textAlign:"center",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#00a5f4",boxShadow:"0 1px 0.5px rgba(0, 0, 0, 0.13)",cursor:"pointer"},children:[f.type==="QUICK_REPLY"&&` ${f.text}`,f.type==="URL"&&` ${f.text}`,f.type==="PHONE_NUMBER"&&` ${f.text}`]},p))})]})]})}function PO(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const MO=e=>{switch(e){case"success":return OO;case"info":return $O;case"warning":return zO;case"error":return LO;default:return null}},DO=Array(12).fill(0),FO=({visible:e,className:t})=>xe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},xe.createElement("div",{className:"sonner-spinner"},DO.map((n,r)=>xe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),OO=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zO=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$O=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LO=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),BO=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},xe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),xe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),WO=()=>{const[e,t]=xe.useState(document.hidden);return xe.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let s0=1;class VO{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,o=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:s0++,l=this.toasts.find(d=>d.id===o),u=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...t,id:o,title:r}),{...d,...t,id:o,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let o=r!==void 0,l;const u=s.then(async f=>{if(l=["resolve",f],xe.isValidElement(f))o=!1,this.create({id:r,type:"default",message:f});else if(HO(f)&&!f.ok){o=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,g=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,b=typeof h=="object"&&!xe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...b})}else if(f instanceof Error){o=!1;const h=typeof n.error=="function"?await n.error(f):n.error,g=typeof n.description=="function"?await n.description(f):n.description,b=typeof h=="object"&&!xe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...b})}else if(n.success!==void 0){o=!1;const h=typeof n.success=="function"?await n.success(f):n.success,g=typeof n.description=="function"?await n.description(f):n.description,b=typeof h=="object"&&!xe.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:g,...b})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){o=!1;const p=typeof n.error=="function"?await n.error(f):n.error,h=typeof n.description=="function"?await n.description(f):n.description,y=typeof p=="object"&&!xe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:h,...y})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,p)=>u.then(()=>l[0]==="reject"?p(l[1]):f(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||s0++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const En=new VO,UO=(e,t)=>{const n=(t==null?void 0:t.id)||s0++;return En.addToast({title:e,...t,id:n}),n},HO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",qO=UO,GO=()=>En.toasts,KO=()=>En.getActiveToasts(),we=Object.assign(qO,{success:En.success,info:En.info,warning:En.warning,error:En.error,custom:En.custom,message:En.message,promise:En.promise,dismiss:En.dismiss,loading:En.loading},{getHistory:GO,getToasts:KO});PO("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Sd(e){return e.label!==void 0}const YO=3,XO="24px",JO="16px",Kw=4e3,QO=356,ZO=14,ez=45,tz=200;function zr(...e){return e.filter(Boolean).join(" ")}function nz(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const rz=e=>{var t,n,r,s,o,l,u,d,f;const{invert:p,toast:h,unstyled:g,interacting:y,setHeights:b,visibleToasts:w,heights:v,index:j,toasts:T,expanded:k,removeToast:_,defaultRichColors:N,closeButton:E,style:R,cancelButtonStyle:A,actionButtonStyle:P,className:z="",descriptionClassName:L="",duration:B,position:K,gap:V,expandByDefault:J,classNames:$,icons:H,closeButtonAriaLabel:M="Close toast"}=e,[U,F]=xe.useState(null),[D,W]=xe.useState(null),[X,ne]=xe.useState(!1),[G,Q]=xe.useState(!1),[se,q]=xe.useState(!1),[ee,ie]=xe.useState(!1),[le,ue]=xe.useState(!1),[Z,de]=xe.useState(0),[he,pe]=xe.useState(0),_e=xe.useRef(h.duration||B||Kw),Be=xe.useRef(null),je=xe.useRef(null),He=j===0,dt=j+1<=w,We=h.type,St=h.dismissible!==!1,Tn=h.className||"",Vn=h.descriptionClassName||"",kt=xe.useMemo(()=>v.findIndex(Le=>Le.toastId===h.id)||0,[v,h.id]),Dt=xe.useMemo(()=>{var Le;return(Le=h.closeButton)!=null?Le:E},[h.closeButton,E]),er=xe.useMemo(()=>h.duration||B||Kw,[h.duration,B]),tr=xe.useRef(0),qe=xe.useRef(0),nn=xe.useRef(0),xn=xe.useRef(null),[nr,Jr]=K.split("-"),Es=xe.useMemo(()=>v.reduce((Le,ft,jt)=>jt>=kt?Le:Le+ft.height,0),[v,kt]),Ns=WO(),bi=h.invert||p,Qr=We==="loading";qe.current=xe.useMemo(()=>kt*V+Es,[kt,Es]),xe.useEffect(()=>{_e.current=er},[er]),xe.useEffect(()=>{ne(!0)},[]),xe.useEffect(()=>{const Le=je.current;if(Le){const ft=Le.getBoundingClientRect().height;return pe(ft),b(jt=>[{toastId:h.id,height:ft,position:h.position},...jt]),()=>b(jt=>jt.filter(Ut=>Ut.toastId!==h.id))}},[b,h.id]),xe.useLayoutEffect(()=>{if(!X)return;const Le=je.current,ft=Le.style.height;Le.style.height="auto";const jt=Le.getBoundingClientRect().height;Le.style.height=ft,pe(jt),b(Ut=>Ut.find(xt=>xt.toastId===h.id)?Ut.map(xt=>xt.toastId===h.id?{...xt,height:jt}:xt):[{toastId:h.id,height:jt,position:h.position},...Ut])},[X,h.title,h.description,b,h.id]);const bn=xe.useCallback(()=>{Q(!0),de(qe.current),b(Le=>Le.filter(ft=>ft.toastId!==h.id)),setTimeout(()=>{_(h)},tz)},[h,_,b,qe]);xe.useEffect(()=>{if(h.promise&&We==="loading"||h.duration===1/0||h.type==="loading")return;let Le;return k||y||Ns?(()=>{if(nn.current<tr.current){const Ut=new Date().getTime()-tr.current;_e.current=_e.current-Ut}nn.current=new Date().getTime()})():(()=>{_e.current!==1/0&&(tr.current=new Date().getTime(),Le=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),bn()},_e.current))})(),()=>clearTimeout(Le)},[k,y,h,We,Ns,bn]),xe.useEffect(()=>{h.delete&&bn()},[bn,h.delete]);function vi(){var Le;if(H!=null&&H.loading){var ft;return xe.createElement("div",{className:zr($==null?void 0:$.loader,h==null||(ft=h.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":We==="loading"},H.loading)}return xe.createElement(FO,{className:zr($==null?void 0:$.loader,h==null||(Le=h.classNames)==null?void 0:Le.loader),visible:We==="loading"})}const Nr=h.icon||(H==null?void 0:H[We])||MO(We);var rr,wi;return xe.createElement("li",{tabIndex:0,ref:je,className:zr(z,Tn,$==null?void 0:$.toast,h==null||(t=h.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[We],h==null||(n=h.classNames)==null?void 0:n[We]),"data-sonner-toast":"","data-rich-colors":(rr=h.richColors)!=null?rr:N,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":X,"data-promise":!!h.promise,"data-swiped":le,"data-removed":G,"data-visible":dt,"data-y-position":nr,"data-x-position":Jr,"data-index":j,"data-front":He,"data-swiping":se,"data-dismissible":St,"data-type":We,"data-invert":bi,"data-swipe-out":ee,"data-swipe-direction":D,"data-expanded":!!(k||J&&X),style:{"--index":j,"--toasts-before":j,"--z-index":T.length-j,"--offset":`${G?Z:qe.current}px`,"--initial-height":J?"auto":`${he}px`,...R,...h.style},onDragEnd:()=>{q(!1),F(null),xn.current=null},onPointerDown:Le=>{Qr||!St||(Be.current=new Date,de(qe.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(q(!0),xn.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,ft,jt;if(ee||!St)return;xn.current=null;const Ut=Number(((Le=je.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Tr=Number(((ft=je.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),xt=new Date().getTime()-((jt=Be.current)==null?void 0:jt.getTime()),_t=U==="x"?Ut:Tr,Rr=Math.abs(_t)/xt;if(Math.abs(_t)>=ez||Rr>.11){de(qe.current),h.onDismiss==null||h.onDismiss.call(h,h),W(U==="x"?Ut>0?"right":"left":Tr>0?"down":"up"),bn(),ie(!0);return}else{var Ft,un;(Ft=je.current)==null||Ft.style.setProperty("--swipe-amount-x","0px"),(un=je.current)==null||un.style.setProperty("--swipe-amount-y","0px")}ue(!1),q(!1),F(null)},onPointerMove:Le=>{var ft,jt,Ut;if(!xn.current||!St||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;const xt=Le.clientY-xn.current.y,_t=Le.clientX-xn.current.x;var Rr;const Ft=(Rr=e.swipeDirections)!=null?Rr:nz(K);!U&&(Math.abs(_t)>1||Math.abs(xt)>1)&&F(Math.abs(_t)>Math.abs(xt)?"x":"y");let un={x:0,y:0};const Ir=vn=>1/(1.5+Math.abs(vn)/20);if(U==="y"){if(Ft.includes("top")||Ft.includes("bottom"))if(Ft.includes("top")&&xt<0||Ft.includes("bottom")&&xt>0)un.y=xt;else{const vn=xt*Ir(xt);un.y=Math.abs(vn)<Math.abs(xt)?vn:xt}}else if(U==="x"&&(Ft.includes("left")||Ft.includes("right")))if(Ft.includes("left")&&_t<0||Ft.includes("right")&&_t>0)un.x=_t;else{const vn=_t*Ir(_t);un.x=Math.abs(vn)<Math.abs(_t)?vn:_t}(Math.abs(un.x)>0||Math.abs(un.y)>0)&&ue(!0),(jt=je.current)==null||jt.style.setProperty("--swipe-amount-x",`${un.x}px`),(Ut=je.current)==null||Ut.style.setProperty("--swipe-amount-y",`${un.y}px`)}},Dt&&!h.jsx&&We!=="loading"?xe.createElement("button",{"aria-label":M,"data-disabled":Qr,"data-close-button":!0,onClick:Qr||!St?()=>{}:()=>{bn(),h.onDismiss==null||h.onDismiss.call(h,h)},className:zr($==null?void 0:$.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(wi=H==null?void 0:H.close)!=null?wi:BO):null,(We||h.icon||h.promise)&&h.icon!==null&&((H==null?void 0:H[We])!==null||h.icon)?xe.createElement("div",{"data-icon":"",className:zr($==null?void 0:$.icon,h==null||(s=h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||vi():null,h.type!=="loading"?Nr:null):null,xe.createElement("div",{"data-content":"",className:zr($==null?void 0:$.content,h==null||(o=h.classNames)==null?void 0:o.content)},xe.createElement("div",{"data-title":"",className:zr($==null?void 0:$.title,h==null||(l=h.classNames)==null?void 0:l.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?xe.createElement("div",{"data-description":"",className:zr(L,Vn,$==null?void 0:$.description,h==null||(u=h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),xe.isValidElement(h.cancel)?h.cancel:h.cancel&&Sd(h.cancel)?xe.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:Le=>{Sd(h.cancel)&&St&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Le),bn())},className:zr($==null?void 0:$.cancelButton,h==null||(d=h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,xe.isValidElement(h.action)?h.action:h.action&&Sd(h.action)?xe.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Le=>{Sd(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Le),!Le.defaultPrevented&&bn())},className:zr($==null?void 0:$.actionButton,h==null||(f=h.classNames)==null?void 0:f.actionButton)},h.action.label):null)};function Yw(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sz(e,t){const n={};return[e,t].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",u=o?JO:XO;function d(f){["top","right","bottom","left"].forEach(p=>{n[`${l}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${l}-${f}`]=u:n[`${l}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const iz=xe.forwardRef(function(t,n){const{invert:r,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:f,mobileOffset:p,theme:h="light",richColors:g,duration:y,style:b,visibleToasts:w=YO,toastOptions:v,dir:j=Yw(),gap:T=ZO,icons:k,containerAriaLabel:_="Notifications"}=t,[N,E]=xe.useState([]),R=xe.useMemo(()=>Array.from(new Set([s].concat(N.filter(D=>D.position).map(D=>D.position)))),[N,s]),[A,P]=xe.useState([]),[z,L]=xe.useState(!1),[B,K]=xe.useState(!1),[V,J]=xe.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=xe.useRef(null),H=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=xe.useRef(null),U=xe.useRef(!1),F=xe.useCallback(D=>{E(W=>{var X;return(X=W.find(ne=>ne.id===D.id))!=null&&X.delete||En.dismiss(D.id),W.filter(({id:ne})=>ne!==D.id)})},[]);return xe.useEffect(()=>En.subscribe(D=>{if(D.dismiss){requestAnimationFrame(()=>{E(W=>W.map(X=>X.id===D.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Bj.flushSync(()=>{E(W=>{const X=W.findIndex(ne=>ne.id===D.id);return X!==-1?[...W.slice(0,X),{...W[X],...D},...W.slice(X+1)]:[D,...W]})})})}),[N]),xe.useEffect(()=>{if(h!=="system"){J(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;const D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:W})=>{J(W?"dark":"light")})}catch{D.addListener(({matches:X})=>{try{J(X?"dark":"light")}catch(ne){console.error(ne)}})}},[h]),xe.useEffect(()=>{N.length<=1&&L(!1)},[N]),xe.useEffect(()=>{const D=W=>{var X;if(o.every(Q=>W[Q]||W.code===Q)){var G;L(!0),(G=$.current)==null||G.focus()}W.code==="Escape"&&(document.activeElement===$.current||(X=$.current)!=null&&X.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[o]),xe.useEffect(()=>{if($.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,U.current=!1)}},[$.current]),xe.createElement("section",{ref:n,"aria-label":`${_} ${H}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((D,W)=>{var X;const[ne,G]=D.split("-");return N.length?xe.createElement("ol",{key:D,dir:j==="auto"?Yw():j,tabIndex:-1,ref:$,className:d,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":ne,"data-lifted":z&&N.length>1&&!l,"data-x-position":G,style:{"--front-toast-height":`${((X=A[0])==null?void 0:X.height)||0}px`,"--width":`${QO}px`,"--gap":`${T}px`,...b,...sz(f,p)},onBlur:Q=>{U.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(U.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||U.current||(U.current=!0,M.current=Q.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{B||L(!1)},onDragEnd:()=>L(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},N.filter(Q=>!Q.position&&W===0||Q.position===D).map((Q,se)=>{var q,ee;return xe.createElement(rz,{key:Q.id,icons:k,index:se,toast:Q,defaultRichColors:g,duration:(q=v==null?void 0:v.duration)!=null?q:y,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:w,closeButton:(ee=v==null?void 0:v.closeButton)!=null?ee:u,interacting:B,position:D,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:F,toasts:N.filter(ie=>ie.position==Q.position),heights:A.filter(ie=>ie.position==Q.position),setHeights:P,expandByDefault:l,gap:T,expanded:z,swipeDirections:t.swipeDirections})})):null}))});function oz({isOpen:e,onClose:t,editTemplate:n}){const{createTemplate:r,updateTemplate:s,submitTemplate:o}=Wa(),{selectedProject:l}=Yt(),[u,d]=S.useState(!1),[f,p]=S.useState(""),[h,g]=S.useState("MARKETING"),[y,b]=S.useState("id"),[w,v]=S.useState("NONE"),[j,T]=S.useState(""),[k,_]=S.useState(""),[N,E]=S.useState(""),[R,A]=S.useState([]);S.useEffect(()=>{var $,H,M,U,F,D,W,X,ne;n?(p(n.name),g(n.category),b(n.language),v(((H=($=n.content)==null?void 0:$.header)==null?void 0:H.type)||"NONE"),T(((U=(M=n.content)==null?void 0:M.header)==null?void 0:U.text)||""),_(((D=(F=n.content)==null?void 0:F.body)==null?void 0:D.text)||""),E(((X=(W=n.content)==null?void 0:W.footer)==null?void 0:X.text)||""),A(((ne=n.content)==null?void 0:ne.buttons)||[])):(p(""),g("MARKETING"),b("id"),v("NONE"),T(""),_(""),E(""),A([]))},[n,e]);const P=S.useMemo(()=>{const $=/\{\{(\w+)\}\}/g,H=new Set;if(w==="TEXT"&&j){let M;for(;(M=$.exec(j))!==null;)H.add(M[1])}if(k){let M;for(;(M=$.exec(k))!==null;)H.add(M[1])}return Array.from(H)},[w,j,k]),z=S.useMemo(()=>{const $={};return P.forEach(H=>{H.toLowerCase().includes("name")?$[H]="John Doe":H.toLowerCase().includes("date")?$[H]="Feb 5, 2026":H.toLowerCase().includes("time")?$[H]="7:00 PM":H.toLowerCase().includes("event")?$[H]="Annual Gala":H.toLowerCase().includes("venue")?$[H]="Grand Ballroom":$[H]="Sample"}),$},[P]),L=()=>{if(R.length>=3){we.error("Maximum 3 buttons allowed");return}A([...R,{type:"QUICK_REPLY",text:""}])},B=$=>{A(R.filter((H,M)=>M!==$))},K=($,H,M)=>{const U=[...R];U[$]={...U[$],[H]:M},A(U)},V=()=>{if(!f.trim())return"Template name is required";if(!/^[a-z0-9_]+$/.test(f))return"Template name must be lowercase alphanumeric with underscores only";if(!k.trim())return"Template body is required";if(k.length>1024)return"Template body must be 1024 characters or less";if(P.length>10)return"Maximum 10 variables allowed";if(w==="TEXT"&&!j.trim())return"Header text is required when header type is TEXT";for(const $ of R){if(!$.text.trim())return"All buttons must have text";if($.type==="URL"&&!$.url)return"URL buttons must have a URL";if($.type==="PHONE_NUMBER"&&!$.phoneNumber)return"Phone number buttons must have a phone number"}return null},J=async($=!1)=>{const H=V();if(H){we.error(H);return}if(!l){we.error("No project selected");return}d(!0);try{const M={name:f,category:h,language:y,content:{header:w!=="NONE"?{type:w,text:w==="TEXT"?j:void 0}:void 0,body:{text:k},footer:N.trim()?{text:N.trim()}:void 0,buttons:R.length>0?R:void 0},projectId:l.id};if(console.log("Sending template input:",JSON.stringify(M,null,2)),n)await s(n.id,M),we.success("Template updated successfully");else{const U=await r(M);we.success("Template created successfully"),$&&U&&(await o(U.id),we.info("Template submitted to META for approval"))}t()}catch(M){we.error(M instanceof Error?M.message:"Failed to save template")}finally{d(!1)}};return e?i.jsx(ci,{children:i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto"},onClick:t,children:i.jsxs(fe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:$=>$.stopPropagation(),className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"1400px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937"},children:n?"Edit Template":"Create New Template"}),i.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:$=>{$.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:$=>{$.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:i.jsx(Rt,{size:20,style:{color:"#6b7280"}})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",padding:"2rem",overflow:"auto",flex:1},children:[i.jsxs("div",{style:{overflow:"auto",paddingRight:"1rem"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Template Name *"}),i.jsx("input",{type:"text",value:f,onChange:$=>p($.target.value.toLowerCase()),placeholder:"event_invitation",disabled:!!n,style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:n?"#f3f4f6":"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"Lowercase, alphanumeric, and underscores only"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Category *"}),i.jsxs("select",{value:h,onChange:$=>g($.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"},children:[i.jsx("option",{value:"MARKETING",children:"Marketing"}),i.jsx("option",{value:"UTILITY",children:"Utility"}),i.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Language *"}),i.jsxs("select",{value:y,onChange:$=>b($.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"},children:[i.jsx("option",{value:"id",children:"Indonesian"}),i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"id_en",children:"Indonesian & English"})]})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Header (Optional)"}),i.jsxs("select",{value:w,onChange:$=>v($.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none",marginBottom:"0.5rem"},children:[i.jsx("option",{value:"NONE",children:"No Header"}),i.jsx("option",{value:"TEXT",children:"Text"}),i.jsx("option",{value:"IMAGE",children:"Image"}),i.jsx("option",{value:"VIDEO",children:"Video"}),i.jsx("option",{value:"DOCUMENT",children:"Document"})]}),w==="TEXT"&&i.jsx("input",{type:"text",value:j,onChange:$=>T($.target.value),placeholder:"Enter header text (supports {{variables}})",style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Body *"}),i.jsx("textarea",{value:k,onChange:$=>_($.target.value),placeholder:"Hello {{name}}, you're invited to {{event}}!",rows:6,style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none",resize:"vertical"}}),i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["Use ","{{variable_name}}"," for dynamic content. Supports *bold*, _italic_, ~strikethrough~"]}),i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:k.length>1024?"#ef4444":"#6b7280",marginTop:"0.25rem"},children:[k.length,"/1024 characters"]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Footer (Optional)"}),i.jsx("input",{type:"text",value:N,onChange:$=>E($.target.value),placeholder:"Powered by Balemoo",style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Buttons (Optional, max 3)"}),i.jsxs("button",{onClick:L,disabled:R.length>=3,style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:R.length>=3?"#9ca3af":"#8b5cf6",background:R.length>=3?"rgba(156, 163, 175, 0.1)":"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",cursor:R.length>=3?"not-allowed":"pointer"},children:[i.jsx(Vt,{size:14}),"Add Button"]})]}),R.map(($,H)=>i.jsxs("div",{style:{padding:"12px",background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"12px",marginBottom:"0.5rem"},children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("select",{value:$.type,onChange:M=>K(H,"type",M.target.value),style:{flex:1,padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"},children:[i.jsx("option",{value:"QUICK_REPLY",children:"Quick Reply"}),i.jsx("option",{value:"URL",children:"URL"}),i.jsx("option",{value:"PHONE_NUMBER",children:"Phone Number"})]}),i.jsx("button",{onClick:()=>B(H),style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",cursor:"pointer"},children:i.jsx(At,{size:14,style:{color:"#ef4444"}})})]}),i.jsx("input",{type:"text",value:$.text,onChange:M=>K(H,"text",M.target.value),placeholder:"Button text",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none",marginBottom:$.type!=="QUICK_REPLY"?"0.5rem":"0"}}),$.type==="URL"&&i.jsx("input",{type:"url",value:$.url||"",onChange:M=>K(H,"url",M.target.value),placeholder:"https://example.com",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"}}),$.type==="PHONE_NUMBER"&&i.jsx("input",{type:"tel",value:$.phoneNumber||"",onChange:M=>K(H,"phoneNumber",M.target.value),placeholder:"+628123456789",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"}})]},H))]}),P.length>0&&i.jsxs("div",{style:{padding:"12px 16px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"12px",marginBottom:"1.5rem"},children:[i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6366f1",marginBottom:"0.5rem"},children:["Detected Variables (",P.length,"/10):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:P.map($=>i.jsx("span",{style:{padding:"4px 10px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6366f1"},children:$},$))})]})]}),i.jsxs("div",{style:{position:"sticky",top:0,height:"fit-content"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Live Preview"}),i.jsx(Py,{template:{name:f,category:h,language:y,content:{header:w!=="NONE"?{type:w,text:w==="TEXT"?j:void 0}:void 0,body:{text:k},footer:N.trim()?{text:N.trim()}:void 0,buttons:R.length>0?R:void 0}},sampleData:z})]})]}),i.jsxs("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:t,disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer"},children:"Cancel"}),i.jsxs("button",{onClick:()=>J(!1),disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[u&&i.jsx(Wt,{size:16,className:"animate-spin"}),"Save as Draft"]}),!n&&i.jsxs("button",{onClick:()=>J(!0),disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[u&&i.jsx(Wt,{size:16,className:"animate-spin"}),"Save & Submit to META"]})]})]})})}):null}function az({isOpen:e,onClose:t,template:n,onEdit:r,onDelete:s}){const{submitTemplate:o,simulateReject:l}=Wa(),[u,d]=S.useState(!1),[f,p]=S.useState(!1),[h,g]=S.useState("");if(!e||!n)return null;const y=n.status==="DRAFT"||n.status==="REJECTED",b=n.status==="DRAFT",w={};n.variables.forEach(_=>{_.toLowerCase().includes("name")?w[_]="John Doe":_.toLowerCase().includes("date")?w[_]="Feb 5, 2026":_.toLowerCase().includes("time")?w[_]="7:00 PM":_.toLowerCase().includes("event")?w[_]="Annual Gala":_.toLowerCase().includes("venue")?w[_]="Grand Ballroom":w[_]="Sample"});const v=async()=>{if(b){d(!0);try{await o(n.id),we.success("Template submitted to META for approval"),t()}catch(_){we.error(_ instanceof Error?_.message:"Failed to submit template")}finally{d(!1)}}},j=async()=>{if(!h.trim()){we.error("Please provide a rejection reason");return}try{await l(n.id,h),we.info("Template rejected (simulation)"),p(!1),g(""),t()}catch(_){we.error(_ instanceof Error?_.message:"Failed to reject template")}},T=()=>{y&&r&&(r(n),t())},k=()=>{y&&s&&(s(n),t())};return i.jsx(ci,{children:i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto"},onClick:t,children:i.jsxs(fe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937"},children:n.name}),i.jsx(j5,{status:n.status,size:"md"})]}),i.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:i.jsx(Rt,{size:20,style:{color:"#6b7280"}})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",padding:"2rem",overflow:"auto",flex:1},children:[i.jsxs("div",{style:{overflow:"auto",paddingRight:"1rem"},children:[i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Template Information"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Category"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:n.category})]}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Language"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:n.language})]}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Created"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:new Date(n.createdAt).toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Last Updated"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:new Date(n.updatedAt).toLocaleString()})]})]})]}),n.variables.length>0&&i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:["Variables (",n.variables.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:n.variables.map(_=>i.jsx("span",{style:{padding:"6px 12px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6366f1"},children:_},_))})]}),(n.submittedAt||n.approvedAt||n.rejectedAt)&&i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Submission History"}),i.jsxs("div",{className:"space-y-3",children:[n.submittedAt&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(gi,{size:18,style:{color:"#f59e0b"}}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Submitted to META"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:new Date(n.submittedAt).toLocaleString()})]})]}),n.approvedAt&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ui,{size:18,style:{color:"#10b981"}}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Approved by META"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:new Date(n.approvedAt).toLocaleString()})]})]}),n.rejectedAt&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ro,{size:18,style:{color:"#ef4444",marginTop:"2px"}}),i.jsxs("div",{children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Rejected by META"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem"},children:new Date(n.rejectedAt).toLocaleString()}),n.rejectionReason&&i.jsx("div",{style:{padding:"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:n.rejectionReason})})]})]})]})]}),n.status==="PENDING"&&i.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px"},children:[i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#dc2626",marginBottom:"0.5rem"},children:" DEV TOOL: Simulate Rejection"}),f?i.jsxs("div",{children:[i.jsx("input",{type:"text",value:h,onChange:_=>g(_.target.value),placeholder:"Rejection reason...",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",outline:"none",marginBottom:"0.5rem"}}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:j,style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#ffffff",background:"#ef4444",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Confirm"}),i.jsx("button",{onClick:()=>{p(!1),g("")},style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]}):i.jsx("button",{onClick:()=>p(!0),style:{padding:"8px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#ffffff",background:"#ef4444",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Simulate Rejection"})]})]}),i.jsxs("div",{style:{position:"sticky",top:0,height:"fit-content"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Preview"}),i.jsx(Py,{template:n,sampleData:w})]})]}),i.jsxs("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{className:"flex gap-2",children:[y&&r&&i.jsxs("button",{onClick:T,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#10b981",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",cursor:"pointer"},children:[i.jsx(Ey,{size:16}),"Edit"]}),y&&s&&i.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",cursor:"pointer"},children:[i.jsx(At,{size:16}),"Delete"]})]}),i.jsxs("div",{className:"flex gap-2",children:[b&&i.jsxs("button",{onClick:v,disabled:u,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:[i.jsx(Qf,{size:16}),u?"Submitting...":"Submit to META"]}),i.jsx("button",{onClick:t,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"12px",cursor:"pointer"},children:"Close"})]})]})]})})})}function lz(){const{user:e}=Kt(),{templates:t,loading:n,error:r,deleteTemplate:s}=Wa(),[o,l]=S.useState(null),[u,d]=S.useState(!1),[f,p]=S.useState(!1),h=(e==null?void 0:e.role)==="admin",g=v=>{l(v),p(!0)},y=v=>{l(v),d(!0)},b=async v=>{if(confirm(`Are you sure you want to delete "${v.name}"?`))try{await s(v.id),we.success("Template deleted successfully")}catch(j){we.error(j instanceof Error?j.message:"Failed to delete template")}},w=()=>{l(null),d(!0)};return h?i.jsxs("div",{style:{padding:"2rem",minHeight:"100%"},children:[i.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[i.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2.5rem",fontWeight:700,color:"#ffffff",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"Template Management"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",color:"rgba(255, 255, 255, 0.9)"},children:"Create and manage WhatsApp message templates"})]}),i.jsxs("button",{onClick:w,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#8b5cf6",background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"16px",cursor:"pointer",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"},onMouseEnter:v=>{v.currentTarget.style.transform="scale(1.05)",v.currentTarget.style.boxShadow="0 12px 48px rgba(0, 0, 0, 0.15)"},onMouseLeave:v=>{v.currentTarget.style.transform="scale(1)",v.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.1)"},children:[i.jsx(Vt,{size:20}),"Create Template"]})]})}),r&&i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6 rounded-2xl",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",padding:"1rem 1.5rem"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:r})}),n&&t.length===0?i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"4rem 2rem"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block rounded-full mb-4",style:{width:"60px",height:"60px",border:"4px solid rgba(139, 92, 246, 0.2)",borderTop:"4px solid #8b5cf6",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Loading templates..."})]})}):i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:i.jsx(AO,{templates:t,onView:g,onEdit:y,onDelete:b})})]}),i.jsx(oz,{isOpen:u,onClose:()=>{d(!1),l(null)},editTemplate:o}),i.jsx(az,{isOpen:f,onClose:()=>{p(!1),l(null)},template:o,onEdit:y,onDelete:b}),i.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]}):i.jsx("div",{style:{padding:"2rem",minHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"3rem",maxWidth:"500px"},children:[i.jsx("div",{className:"flex items-center justify-center rounded-full mx-auto mb-4",style:{width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:i.jsx(dc,{size:40,style:{color:"#ef4444"}})}),i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:"Access Denied"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Only administrators can manage WhatsApp templates."})]})})}const Xw={family:"#10b981",friend:"#3b82f6",colleague:"#f59e0b",vip:"#a855f7",other:"#64748b"},cz={family:"Family",friend:"Friend",colleague:"Colleague",vip:"VIP",other:"Other"},uz={pending:gi,confirmed:ui,declined:ro,maybe:qj},dz={pending:"#f59e0b",confirmed:"#10b981",declined:"#ef4444",maybe:"#6b7280"},fz={pending:"Pending",confirmed:"Confirmed",declined:"Declined",maybe:"Maybe"},hz={ceremony_only:"Ceremony Only",reception_only:"Reception Only",both:"Both Events"},pz=({guest:e,onView:t,onEdit:n,onDelete:r})=>{const s=Xw[e.category]||Xw.other,o=uz[e.rsvp_status],l=dz[e.rsvp_status];return i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{scale:1.02,translateY:-4},transition:{duration:.2},className:"group relative",children:i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",borderRadius:"24px",padding:"24px",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${s}, ${s}88)`}}),e.checked_in_at&&i.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",fontSize:"12px",fontWeight:600,color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(ui,{size:14}),"Checked In"]}),i.jsx("div",{style:{marginBottom:"16px"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:`linear-gradient(135deg, ${s}20, ${s}40)`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ii,{size:20,style:{color:s}})}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#1a1a1a",marginBottom:"2px",lineHeight:"1.2"},children:e.name}),i.jsx("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",background:`${s}15`,borderRadius:"8px",fontSize:"12px",fontWeight:600,color:s},children:cz[e.category]})]})]})}),i.jsxs("div",{style:{marginBottom:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(ZP,{size:16,style:{color:"#6b7280",flexShrink:0}}),i.jsx("span",{style:{fontSize:"14px",color:"#4b5563"},children:e.phone})]}),e.email&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(_y,{size:16,style:{color:"#6b7280",flexShrink:0}}),i.jsx("span",{style:{fontSize:"14px",color:"#4b5563",overflow:"hidden",textOverflow:"ellipsis"},children:e.email})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:`${l}10`,border:`1px solid ${l}30`,borderRadius:"12px",marginBottom:"16px"},children:[i.jsx(o,{size:18,style:{color:l}}),i.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:l},children:fz[e.rsvp_status]}),i.jsx("div",{style:{marginLeft:"auto",fontSize:"12px",color:"#6b7280"},children:hz[e.invitation_type]})]}),e.plus_one&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 12px",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",marginBottom:"16px"},children:[i.jsx(cn,{size:16,style:{color:"#3b82f6"}}),i.jsxs("span",{style:{fontSize:"13px",color:"#4b5563"},children:[e.plus_one_name||"Plus One",e.plus_one_confirmed&&i.jsx("span",{style:{marginLeft:"4px",color:"#10b981",fontWeight:600},children:""})]})]}),e.tags&&e.tags.length>0&&i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"16px"},children:[e.tags.slice(0,3).map((u,d)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.2)",borderRadius:"8px",fontSize:"11px",color:"#6b7280"},children:[i.jsx(n5,{size:12}),u]},d)),e.tags.length>3&&i.jsxs("div",{style:{padding:"4px 10px",background:"rgba(107, 114, 128, 0.1)",borderRadius:"8px",fontSize:"11px",color:"#6b7280"},children:["+",e.tags.length-3," more"]})]}),e.table_number&&i.jsx("div",{style:{marginBottom:"16px"},children:i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#8b5cf6"},children:["Table ",e.table_number]})}),e.rsvp_at&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#9ca3af",marginBottom:"12px"},children:[i.jsx(xs,{size:14}),"RSVP: ",new Date(e.rsvp_at).toLocaleDateString()]}),i.jsxs(fe.div,{initial:{opacity:0,y:10},whileHover:{opacity:1,y:0},transition:{duration:.2},style:{position:"absolute",bottom:"16px",right:"16px",display:"flex",gap:"8px",opacity:0},className:"group-hover:opacity-100",children:[t&&i.jsx("button",{onClick:()=>t(e),style:{padding:"8px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(59, 130, 246, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(59, 130, 246, 0.1)",u.currentTarget.style.transform="scale(1)"},children:i.jsx(zc,{size:16,style:{color:"#3b82f6"}})}),n&&i.jsx("button",{onClick:()=>n(e),style:{padding:"8px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(16, 185, 129, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(16, 185, 129, 0.1)",u.currentTarget.style.transform="scale(1)"},children:i.jsx(Ey,{size:16,style:{color:"#10b981"}})}),r&&i.jsx("button",{onClick:()=>r(e),style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(239, 68, 68, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(239, 68, 68, 0.1)",u.currentTarget.style.transform="scale(1)"},children:i.jsx(At,{size:16,style:{color:"#ef4444"}})})]})]})})},mz=()=>{const{user:e}=Kt(),{selectedProject:t}=Yt(),{guests:n,filteredGuests:r,loading:s,stats:o,filters:l,setFilters:u,deleteGuest:d,createGuest:f}=rh(),[p,h]=S.useState(""),[g,y]=S.useState("all"),[b,w]=S.useState("all"),[v,j]=S.useState(!1);if(!e||e.role!=="admin")return i.jsx("div",{style:{padding:"48px",textAlign:"center"},children:i.jsx("p",{style:{fontSize:"16px",color:"#6b7280"},children:"You need admin access to manage guests."})});xe.useEffect(()=>{u({search:p,rsvp_status:g,category:b})},[p,g,b]);const T=async N=>{if(window.confirm(`Are you sure you want to delete ${N.name}?`))try{await d(N.id),we.success("Guest deleted successfully")}catch(E){we.error(E instanceof Error?E.message:"Failed to delete guest")}},k=async()=>{if(!t){we.error("Please select a project first");return}j(!0);try{const N=["Made","Ketut","Wayan","Nyoman","Putu","Komang","Gede","Kadek","Iluh","Luh","Ni","I","Agung","Ayu","Dewi","Bagus","Rai","Dewa"],E=["Suryawan","Mahendra","Pratama","Wijaya","Kusuma","Saputra","Permana","Santika","Adiputra","Wibawa","Artha","Dharma","Surya","Chandra","Indra"],R=["family","friend","colleague","vip","other"],A=["ceremony_only","reception_only","both"],P=Array.from({length:10},(L,B)=>{const K=N[Math.floor(Math.random()*N.length)],V=E[Math.floor(Math.random()*E.length)],J=`${K} ${V}`,$=`+62${Math.floor(8e8+Math.random()*99999999)}`;return{name:J,phone:$,email:`${K.toLowerCase()}.${V.toLowerCase()}@example.com`,category:R[Math.floor(Math.random()*R.length)],invitation_type:A[Math.floor(Math.random()*A.length)],plus_one:Math.random()>.7,tags:["sample","dummy"]}});let z=0;for(const L of P)try{await f(L),z++}catch(B){console.error("Failed to create guest:",B)}z>0?we.success(`Successfully generated ${z} sample guests for ${t.name}!`):we.error("Failed to generate sample guests")}catch(N){we.error(N instanceof Error?N.message:"Failed to generate sample guests")}finally{j(!1)}},_=[{value:"all",label:"All",icon:cn,count:(o==null?void 0:o.total)||0},{value:"confirmed",label:"Confirmed",icon:ui,count:(o==null?void 0:o.confirmed)||0},{value:"pending",label:"Pending",icon:gi,count:(o==null?void 0:o.pending)||0},{value:"maybe",label:"Maybe",icon:qj,count:(o==null?void 0:o.maybe)||0},{value:"declined",label:"Declined",icon:ro,count:(o==null?void 0:o.declined)||0}];return i.jsxs("div",{style:{padding:"32px",maxWidth:"1600px",margin:"0 auto"},children:[i.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},style:{marginBottom:"32px"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[i.jsxs("div",{children:[i.jsx("h1",{style:{fontSize:"32px",fontWeight:800,background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"8px"},children:"Guest Management"}),i.jsx("p",{style:{fontSize:"16px",color:"#6b7280"},children:"Manage your wedding guest list and track RSVPs"})]}),i.jsxs("div",{style:{display:"flex",gap:"12px"},children:[i.jsxs("button",{onClick:()=>we.info("CSV Import coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[i.jsx(Ny,{size:18}),"Import CSV"]}),i.jsxs("button",{onClick:k,disabled:v,style:{padding:"12px 24px",background:v?"linear-gradient(135deg, #9ca3af, #6b7280)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:v?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:v?"none":"0 4px 12px rgba(139, 92, 246, 0.3)",opacity:v?.6:1},children:[i.jsx(xM,{size:18}),v?"Generating...":"Generate Sample Guests"]}),i.jsxs("button",{onClick:()=>we.info("Add Guest form coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[i.jsx(Vt,{size:18}),"Add Guest"]})]})]})}),o&&i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[{label:"Total Guests",value:o.total,color:"#10b981"},{label:"Confirmed",value:o.confirmed,color:"#10b981"},{label:"Pending",value:o.pending,color:"#f59e0b"},{label:"With Plus One",value:o.with_plus_one,color:"#3b82f6"},{label:"Checked In",value:o.checked_in,color:"#8b5cf6"}].map((N,E)=>i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.06)"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"8px"},children:N.label}),i.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:N.color},children:N.value})]},E))}),i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"24px"},children:[i.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[i.jsx(bs,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),i.jsx("input",{type:"text",placeholder:"Search guests by name, phone, email, or tags...",value:p,onChange:N=>h(N.target.value),style:{width:"100%",padding:"14px 16px 14px 48px",fontSize:"15px",border:"2px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",outline:"none",transition:"all 0.2s",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)"},onFocus:N=>{N.target.style.borderColor="#10b981",N.target.style.boxShadow="0 0 0 3px rgba(16, 185, 129, 0.1)"},onBlur:N=>{N.target.style.borderColor="rgba(16, 185, 129, 0.2)",N.target.style.boxShadow="none"}})]}),i.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:_.map(N=>{const E=N.icon,R=g===N.value;return i.jsxs("button",{onClick:()=>y(N.value),style:{padding:"10px 16px",background:R?"linear-gradient(135deg, #10b981, #059669)":"rgba(255, 255, 255, 0.9)",color:R?"white":"#4b5563",border:R?"none":"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",boxShadow:R?"0 4px 12px rgba(16, 185, 129, 0.3)":"none"},children:[i.jsx(E,{size:16}),N.label,i.jsx("span",{style:{padding:"2px 8px",background:R?"rgba(255, 255, 255, 0.2)":"rgba(16, 185, 129, 0.1)",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:N.count})]},N.value)})})]}),s?i.jsx("div",{style:{textAlign:"center",padding:"48px"},children:i.jsx("div",{style:{fontSize:"16px",color:"#6b7280"},children:"Loading guests..."})}):r.length===0?i.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},style:{textAlign:"center",padding:"64px 32px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[i.jsx(cn,{size:48,style:{color:"#d1d5db",marginBottom:"16px"}}),i.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#1a1a1a",marginBottom:"8px"},children:"No guests found"}),i.jsx("p",{style:{fontSize:"15px",color:"#6b7280",marginBottom:"24px"},children:n.length===0?"Get started by adding your first guest or importing from CSV":"Try adjusting your search or filters"}),i.jsxs("button",{onClick:()=>we.info("Add Guest form coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[i.jsx(Vt,{size:18}),"Add Your First Guest"]})]}):i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:r.map((N,E)=>i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.05},children:i.jsx(pz,{guest:N,onView:()=>we.info("Guest details modal coming soon!"),onEdit:()=>we.info("Edit guest form coming soon!"),onDelete:T})},N.id))})]})};function My({icon:e,title:t,description:n,features:r,color:s}){return i.jsx("div",{style:{padding:"2rem",minHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",style:{maxWidth:"600px"},children:[i.jsxs(fe.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2,type:"spring",stiffness:200},className:"flex items-center justify-center mx-auto mb-6",style:{width:"120px",height:"120px",borderRadius:"30px",background:`linear-gradient(135deg, ${s}20 0%, ${s}10 100%)`,border:`2px solid ${s}40`,position:"relative"},children:[i.jsx(fe.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"30px",background:`linear-gradient(135deg, ${s}30 0%, ${s}10 100%)`}}),i.jsx(e,{size:60,style:{color:s,position:"relative",zIndex:1}})]}),i.jsx(fe.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1rem",letterSpacing:"-0.02em"},children:t}),i.jsx(fe.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",color:"rgba(255, 255, 255, 0.9)",marginBottom:"2rem",lineHeight:1.6},children:n}),i.jsx(fe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},className:"inline-block rounded-full mb-3",style:{padding:"12px 32px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},children:i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:700,background:`linear-gradient(135deg, ${s} 0%, ${gz(s,-20)} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:" Coming Soon"})}),r&&r.length>0&&i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"rounded-3xl backdrop-blur-xl mt-8",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"2rem",textAlign:"left"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"1rem"},children:"Planned Features:"}),i.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:r.map((o,l)=>i.jsxs(fe.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.7+l*.1},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 0",borderBottom:l<r.length-1?"1px solid rgba(0, 0, 0, 0.06)":"none"},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:s,flexShrink:0}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#6b7280"},children:o})]},l))})]}),i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"flex items-center justify-center gap-2 mt-6",children:[0,1,2].map(o=>i.jsx(fe.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:1.5,repeat:1/0,delay:o*.2},style:{width:"10px",height:"10px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.8)"}},o))})]})})}function gz(e,t){const n=parseInt(e.replace("#",""),16),r=Math.min(255,Math.max(0,(n>>16)+t)),s=Math.min(255,Math.max(0,(n>>8&255)+t)),o=Math.min(255,Math.max(0,(n&255)+t));return`#${(r<<16|s<<8|o).toString(16).padStart(6,"0")}`}const C5=S.createContext(void 0);function yz({children:e}){const{user:t,accessToken:n}=Kt(),{selectedProject:r}=Yt(),[s,o]=S.useState([]),[l,u]=S.useState(!1),[d,f]=S.useState(null),p=`https://${$n}.supabase.co/functions/v1/make-server-deeab278`,h=async _=>{if(!t||!n||t.role!=="admin"){o([]);return}try{u(!0),f(null);const N=new URLSearchParams;_!=null&&_.status&&N.append("status",_.status),_!=null&&_.projectId&&N.append("projectId",_.projectId);const E=await fetch(`${p}/chatflows?${N.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const A=await E.json();throw new Error(A.error||"Failed to fetch chatflows")}const R=await E.json();o(R.chatflows||[])}catch(N){console.error("Error fetching chatflows:",N),f(N.message||"Failed to fetch chatflows"),o([])}finally{u(!1)}},g=async(_,N)=>{var E,R;if(!t||!n||t.role!=="admin")return null;if(!N)return console.error(" getChatflowById: projectId is required"),null;console.log(" getChatflowById called for ID:",_,"projectId:",N);try{const A=await fetch(`${p}/chatflows/${_}?projectId=${N}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(console.log(" getChatflowById response status:",A.status),!A.ok){const z=await A.json();throw console.error(" getChatflowById error:",z),new Error(z.error||"Failed to fetch chatflow")}const P=await A.json();return console.log(" getChatflowById raw response:",P),console.log(" getChatflowById chatflow.nodes:",(E=P.chatflow)==null?void 0:E.nodes),(R=P.chatflow)!=null&&R.nodes&&(console.log(" Nodes in response:"),P.chatflow.nodes.forEach((z,L)=>{var B,K;console.log(`  Node ${L+1}:`,{id:z.id,type:z.type,hasConfig:!!((B=z.data)!=null&&B.config),config:(K=z.data)==null?void 0:K.config})})),P.chatflow}catch(A){return console.error(" Error fetching chatflow:",A),null}},y=async _=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const N=await fetch(`${p}/chatflows`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(_)});if(!N.ok){const A=await N.json();throw new Error(A.error||"Failed to create chatflow")}const R=(await N.json()).chatflow;return o(A=>[R,...A]),R}catch(N){throw console.error("Error creating chatflow:",N),N}},b=async(_,N,E)=>{var R,A,P,z;if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!E)throw new Error("Project ID is required");console.log(" ChatflowContext.updateChatflow called:",{id:_,projectId:E,updatesKeys:Object.keys(N),nodesCount:(R=N.nodes)==null?void 0:R.length,edgesCount:(A=N.edges)==null?void 0:A.length,fullUpdates:N});try{const L=JSON.stringify({...N,projectId:E});console.log(" Request body length:",L.length,"bytes"),console.log(" Request body:",L);const B=await fetch(`${p}/chatflows/${_}`,{method:"PUT",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:L});if(console.log(" Response status:",B.status,B.statusText),!B.ok){const J=await B.json();throw console.error(" Backend error response:",J),new Error(J.error||"Failed to update chatflow")}const V=(await B.json()).chatflow;return console.log(" Updated chatflow from backend:",V),console.log(" Saved nodes count:",(P=V.nodes)==null?void 0:P.length),console.log(" Saved nodes with config:",(z=V.nodes)==null?void 0:z.filter(J=>J.data.config).length),o(J=>J.map($=>$.id===_?V:$)),V}catch(L){throw console.error(" Error updating chatflow:",L),L}},w=async(_,N)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!N)throw new Error("Project ID is required");try{const E=await fetch(`${p}/chatflows/${_}?projectId=${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const R=await E.json();throw new Error(R.error||"Failed to delete chatflow")}o(R=>R.filter(A=>A.id!==_))}catch(E){throw console.error("Error deleting chatflow:",E),E}},v=async(_,N,E,R)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!E)throw new Error("Target Project ID is required");try{const A=await fetch(`${p}/chatflows/${_}/clone`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({newName:N,targetProjectId:E,sourceProjectId:R||E})});if(!A.ok){const L=await A.json();throw new Error(L.error||"Failed to clone chatflow")}const z=(await A.json()).chatflow;return await h({projectId:E}),z}catch(A){throw console.error("Error cloning chatflow:",A),A}},j=async(_,N,E)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!E)throw new Error("Project ID is required");try{const R=await fetch(`${p}/chatflows/${_}/test`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({...N,projectId:E})});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to test chatflow")}return(await R.json()).testResults}catch(R){throw console.error("Error testing chatflow:",R),R}},T=async()=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const _=await fetch(`${p}/chatflows/browse`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const E=await _.json();throw new Error(E.error||"Failed to browse chatflows")}return(await _.json()).chatflowsByProject||{}}catch(_){throw console.error("Error browsing chatflows:",_),_}};S.useEffect(()=>{t&&t.role==="admin"&&(r!=null&&r.id)?h({projectId:r.id}):t&&t.role==="admin"&&o([])},[t,r]);const k={chatflows:s,loading:l,error:d,fetchChatflows:h,getChatflowById:g,createChatflow:y,updateChatflow:b,deleteChatflow:w,cloneChatflow:v,testChatflow:j,browseChatflows:T};return i.jsx(C5.Provider,{value:k,children:e})}function sh(){const e=S.useContext(C5);if(e===void 0)throw new Error("useChatflows must be used within a ChatflowProvider");return e}function Mt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Mt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var xz={value:()=>{}};function ih(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Jd(n)}function Jd(e){this._=e}function bz(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Jd.prototype=ih.prototype={constructor:Jd,on:function(e,t){var n=this._,r=bz(e+"",n),s,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((s=(e=r[o]).type)&&(s=vz(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(s=(e=r[o]).type)n[s]=Jw(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Jw(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jd(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function vz(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function Jw(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=xz,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var i0="http://www.w3.org/1999/xhtml";const Qw={svg:"http://www.w3.org/2000/svg",xhtml:i0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oh(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qw.hasOwnProperty(t)?{space:Qw[t],local:e}:e}function wz(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i0&&t.documentElement.namespaceURI===i0?t.createElement(e):t.createElementNS(n,e)}}function Sz(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _5(e){var t=oh(e);return(t.local?Sz:wz)(t)}function kz(){}function Dy(e){return e==null?kz:function(){return this.querySelector(e)}}function jz(e){typeof e!="function"&&(e=Dy(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],l=o.length,u=r[s]=new Array(l),d,f,p=0;p<l;++p)(d=o[p])&&(f=e.call(d,d.__data__,p,o))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f);return new Bn(r,this._parents)}function Cz(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _z(){return[]}function E5(e){return e==null?_z:function(){return this.querySelectorAll(e)}}function Ez(e){return function(){return Cz(e.apply(this,arguments))}}function Nz(e){typeof e=="function"?e=Ez(e):e=E5(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var l=t[o],u=l.length,d,f=0;f<u;++f)(d=l[f])&&(r.push(e.call(d,d.__data__,f,l)),s.push(d));return new Bn(r,s)}function N5(e){return function(){return this.matches(e)}}function T5(e){return function(t){return t.matches(e)}}var Tz=Array.prototype.find;function Rz(e){return function(){return Tz.call(this.children,e)}}function Iz(){return this.firstElementChild}function Az(e){return this.select(e==null?Iz:Rz(typeof e=="function"?e:T5(e)))}var Pz=Array.prototype.filter;function Mz(){return Array.from(this.children)}function Dz(e){return function(){return Pz.call(this.children,e)}}function Fz(e){return this.selectAll(e==null?Mz:Dz(typeof e=="function"?e:T5(e)))}function Oz(e){typeof e!="function"&&(e=N5(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],l=o.length,u=r[s]=[],d,f=0;f<l;++f)(d=o[f])&&e.call(d,d.__data__,f,o)&&u.push(d);return new Bn(r,this._parents)}function R5(e){return new Array(e.length)}function zz(){return new Bn(this._enter||this._groups.map(R5),this._parents)}function wf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wf.prototype={constructor:wf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $z(e){return function(){return e}}function Lz(e,t,n,r,s,o){for(var l=0,u,d=t.length,f=o.length;l<f;++l)(u=t[l])?(u.__data__=o[l],r[l]=u):n[l]=new wf(e,o[l]);for(;l<d;++l)(u=t[l])&&(s[l]=u)}function Bz(e,t,n,r,s,o,l){var u,d,f=new Map,p=t.length,h=o.length,g=new Array(p),y;for(u=0;u<p;++u)(d=t[u])&&(g[u]=y=l.call(d,d.__data__,u,t)+"",f.has(y)?s[u]=d:f.set(y,d));for(u=0;u<h;++u)y=l.call(e,o[u],u,o)+"",(d=f.get(y))?(r[u]=d,d.__data__=o[u],f.delete(y)):n[u]=new wf(e,o[u]);for(u=0;u<p;++u)(d=t[u])&&f.get(g[u])===d&&(s[u]=d)}function Wz(e){return e.__data__}function Vz(e,t){if(!arguments.length)return Array.from(this,Wz);var n=t?Bz:Lz,r=this._parents,s=this._groups;typeof e!="function"&&(e=$z(e));for(var o=s.length,l=new Array(o),u=new Array(o),d=new Array(o),f=0;f<o;++f){var p=r[f],h=s[f],g=h.length,y=Uz(e.call(p,p&&p.__data__,f,r)),b=y.length,w=u[f]=new Array(b),v=l[f]=new Array(b),j=d[f]=new Array(g);n(p,h,w,v,j,y,t);for(var T=0,k=0,_,N;T<b;++T)if(_=w[T]){for(T>=k&&(k=T+1);!(N=v[k])&&++k<b;);_._next=N||null}}return l=new Bn(l,r),l._enter=u,l._exit=d,l}function Uz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hz(){return new Bn(this._exit||this._groups.map(R5),this._parents)}function qz(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function Gz(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,l=Math.min(s,o),u=new Array(s),d=0;d<l;++d)for(var f=n[d],p=r[d],h=f.length,g=u[d]=new Array(h),y,b=0;b<h;++b)(y=f[b]||p[b])&&(g[b]=y);for(;d<s;++d)u[d]=n[d];return new Bn(u,this._parents)}function Kz(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],l;--s>=0;)(l=r[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function Yz(e){e||(e=Xz);function t(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var l=n[o],u=l.length,d=s[o]=new Array(u),f,p=0;p<u;++p)(f=l[p])&&(d[p]=f);d.sort(t)}return new Bn(s,this._parents).order()}function Xz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jz(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qz(){return Array.from(this)}function Zz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var l=r[s];if(l)return l}return null}function e$(){let e=0;for(const t of this)++e;return e}function t$(){return!this.node()}function n$(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,l=s.length,u;o<l;++o)(u=s[o])&&e.call(u,u.__data__,o,s);return this}function r$(e){return function(){this.removeAttribute(e)}}function s$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i$(e,t){return function(){this.setAttribute(e,t)}}function o$(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function a$(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function l$(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function c$(e,t){var n=oh(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?s$:r$:typeof t=="function"?n.local?l$:a$:n.local?o$:i$)(n,t))}function I5(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function u$(e){return function(){this.style.removeProperty(e)}}function d$(e,t,n){return function(){this.style.setProperty(e,t,n)}}function f$(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function h$(e,t,n){return arguments.length>1?this.each((t==null?u$:typeof t=="function"?f$:d$)(e,t,n??"")):Ca(this.node(),e)}function Ca(e,t){return e.style.getPropertyValue(t)||I5(e).getComputedStyle(e,null).getPropertyValue(t)}function p$(e){return function(){delete this[e]}}function m$(e,t){return function(){this[e]=t}}function g$(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function y$(e,t){return arguments.length>1?this.each((t==null?p$:typeof t=="function"?g$:m$)(e,t)):this.node()[e]}function A5(e){return e.trim().split(/^|\s+/)}function Fy(e){return e.classList||new P5(e)}function P5(e){this._node=e,this._names=A5(e.getAttribute("class")||"")}P5.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function M5(e,t){for(var n=Fy(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function D5(e,t){for(var n=Fy(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function x$(e){return function(){M5(this,e)}}function b$(e){return function(){D5(this,e)}}function v$(e,t){return function(){(t.apply(this,arguments)?M5:D5)(this,e)}}function w$(e,t){var n=A5(e+"");if(arguments.length<2){for(var r=Fy(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?v$:t?x$:b$)(n,t))}function S$(){this.textContent=""}function k$(e){return function(){this.textContent=e}}function j$(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function C$(e){return arguments.length?this.each(e==null?S$:(typeof e=="function"?j$:k$)(e)):this.node().textContent}function _$(){this.innerHTML=""}function E$(e){return function(){this.innerHTML=e}}function N$(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function T$(e){return arguments.length?this.each(e==null?_$:(typeof e=="function"?N$:E$)(e)):this.node().innerHTML}function R$(){this.nextSibling&&this.parentNode.appendChild(this)}function I$(){return this.each(R$)}function A$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P$(){return this.each(A$)}function M$(e){var t=typeof e=="function"?e:_5(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function D$(){return null}function F$(e,t){var n=typeof e=="function"?e:_5(e),r=t==null?D$:typeof t=="function"?t:Dy(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function O$(){var e=this.parentNode;e&&e.removeChild(this)}function z$(){return this.each(O$)}function $$(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function L$(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function B$(e){return this.select(e?L$:$$)}function W$(e){return arguments.length?this.property("__data__",e):this.node().__data__}function V$(e){return function(t){e.call(this,t,this.__data__)}}function U$(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function H$(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function q$(e,t,n){return function(){var r=this.__on,s,o=V$(t);if(r){for(var l=0,u=r.length;l<u;++l)if((s=r[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function G$(e,t,n){var r=U$(e+""),s,o=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,f=u.length,p;d<f;++d)for(s=0,p=u[d];s<o;++s)if((l=r[s]).type===p.type&&l.name===p.name)return p.value}return}for(u=t?q$:H$,s=0;s<o;++s)this.each(u(r[s],t,n));return this}function F5(e,t,n){var r=I5(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function K$(e,t){return function(){return F5(this,e,t)}}function Y$(e,t){return function(){return F5(this,e,t.apply(this,arguments))}}function X$(e,t){return this.each((typeof t=="function"?Y$:K$)(e,t))}function*J$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,l;s<o;++s)(l=r[s])&&(yield l)}var O5=[null];function Bn(e,t){this._groups=e,this._parents=t}function Bc(){return new Bn([[document.documentElement]],O5)}function Q$(){return this}Bn.prototype=Bc.prototype={constructor:Bn,select:jz,selectAll:Nz,selectChild:Az,selectChildren:Fz,filter:Oz,data:Vz,enter:zz,exit:Hz,join:qz,merge:Gz,selection:Q$,order:Kz,sort:Yz,call:Jz,nodes:Qz,node:Zz,size:e$,empty:t$,each:n$,attr:c$,style:h$,property:y$,classed:w$,text:C$,html:T$,raise:I$,lower:P$,append:M$,insert:F$,remove:z$,clone:B$,datum:W$,on:G$,dispatch:X$,[Symbol.iterator]:J$};function zn(e){return typeof e=="string"?new Bn([[document.querySelector(e)]],[document.documentElement]):new Bn([[e]],O5)}function Z$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function gr(e,t){if(e=Z$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const eL={passive:!1},wc={capture:!0,passive:!1};function Gm(e){e.stopImmediatePropagation()}function pa(e){e.preventDefault(),e.stopImmediatePropagation()}function z5(e){var t=e.document.documentElement,n=zn(e).on("dragstart.drag",pa,wc);"onselectstart"in t?n.on("selectstart.drag",pa,wc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $5(e,t){var n=e.document.documentElement,r=zn(e).on("dragstart.drag",null);t&&(r.on("click.drag",pa,wc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const kd=e=>()=>e;function o0(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:l,y:u,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}o0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tL(e){return!e.ctrlKey&&!e.button}function nL(){return this.parentNode}function rL(e,t){return t??{x:e.x,y:e.y}}function sL(){return navigator.maxTouchPoints||"ontouchstart"in this}function L5(){var e=tL,t=nL,n=rL,r=sL,s={},o=ih("start","drag","end"),l=0,u,d,f,p,h=0;function g(_){_.on("mousedown.drag",y).filter(r).on("touchstart.drag",v).on("touchmove.drag",j,eL).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(_,N){if(!(p||!e.call(this,_,N))){var E=k(this,t.call(this,_,N),_,N,"mouse");E&&(zn(_.view).on("mousemove.drag",b,wc).on("mouseup.drag",w,wc),z5(_.view),Gm(_),f=!1,u=_.clientX,d=_.clientY,E("start",_))}}function b(_){if(pa(_),!f){var N=_.clientX-u,E=_.clientY-d;f=N*N+E*E>h}s.mouse("drag",_)}function w(_){zn(_.view).on("mousemove.drag mouseup.drag",null),$5(_.view,f),pa(_),s.mouse("end",_)}function v(_,N){if(e.call(this,_,N)){var E=_.changedTouches,R=t.call(this,_,N),A=E.length,P,z;for(P=0;P<A;++P)(z=k(this,R,_,N,E[P].identifier,E[P]))&&(Gm(_),z("start",_,E[P]))}}function j(_){var N=_.changedTouches,E=N.length,R,A;for(R=0;R<E;++R)(A=s[N[R].identifier])&&(pa(_),A("drag",_,N[R]))}function T(_){var N=_.changedTouches,E=N.length,R,A;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<E;++R)(A=s[N[R].identifier])&&(Gm(_),A("end",_,N[R]))}function k(_,N,E,R,A,P){var z=o.copy(),L=gr(P||E,N),B,K,V;if((V=n.call(_,new o0("beforestart",{sourceEvent:E,target:g,identifier:A,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:z}),R))!=null)return B=V.x-L[0]||0,K=V.y-L[1]||0,function J($,H,M){var U=L,F;switch($){case"start":s[A]=J,F=l++;break;case"end":delete s[A],--l;case"drag":L=gr(M||H,N),F=l;break}z.call($,_,new o0($,{sourceEvent:H,subject:V,target:g,identifier:A,active:F,x:L[0]+B,y:L[1]+K,dx:L[0]-U[0],dy:L[1]-U[1],dispatch:z}),R)}}return g.filter=function(_){return arguments.length?(e=typeof _=="function"?_:kd(!!_),g):e},g.container=function(_){return arguments.length?(t=typeof _=="function"?_:kd(_),g):t},g.subject=function(_){return arguments.length?(n=typeof _=="function"?_:kd(_),g):n},g.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:kd(!!_),g):r},g.on=function(){var _=o.on.apply(o,arguments);return _===o?g:_},g.clickDistance=function(_){return arguments.length?(h=(_=+_)*_,g):Math.sqrt(h)},g}function Oy(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function B5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wc(){}var Sc=.7,Sf=1/Sc,ma="\\s*([+-]?\\d+)\\s*",kc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iL=/^#([0-9a-f]{3,8})$/,oL=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),aL=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),lL=new RegExp(`^rgba\\(${ma},${ma},${ma},${kc}\\)$`),cL=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${kc}\\)$`),uL=new RegExp(`^hsl\\(${kc},${Vr},${Vr}\\)$`),dL=new RegExp(`^hsla\\(${kc},${Vr},${Vr},${kc}\\)$`),Zw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oy(Wc,so,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:e2,formatHex:e2,formatHex8:fL,formatHsl:hL,formatRgb:t2,toString:t2});function e2(){return this.rgb().formatHex()}function fL(){return this.rgb().formatHex8()}function hL(){return W5(this).formatHsl()}function t2(){return this.rgb().formatRgb()}function so(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?n2(t):n===3?new Nn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oL.exec(e))?new Nn(t[1],t[2],t[3],1):(t=aL.exec(e))?new Nn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lL.exec(e))?jd(t[1],t[2],t[3],t[4]):(t=cL.exec(e))?jd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uL.exec(e))?i2(t[1],t[2]/100,t[3]/100,1):(t=dL.exec(e))?i2(t[1],t[2]/100,t[3]/100,t[4]):Zw.hasOwnProperty(e)?n2(Zw[e]):e==="transparent"?new Nn(NaN,NaN,NaN,0):null}function n2(e){return new Nn(e>>16&255,e>>8&255,e&255,1)}function jd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Nn(e,t,n,r)}function pL(e){return e instanceof Wc||(e=so(e)),e?(e=e.rgb(),new Nn(e.r,e.g,e.b,e.opacity)):new Nn}function a0(e,t,n,r){return arguments.length===1?pL(e):new Nn(e,t,n,r??1)}function Nn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Oy(Nn,a0,B5(Wc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new Nn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sc:Math.pow(Sc,e),new Nn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Nn(Zi(this.r),Zi(this.g),Zi(this.b),kf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:r2,formatHex:r2,formatHex8:mL,formatRgb:s2,toString:s2}));function r2(){return`#${Ji(this.r)}${Ji(this.g)}${Ji(this.b)}`}function mL(){return`#${Ji(this.r)}${Ji(this.g)}${Ji(this.b)}${Ji((isNaN(this.opacity)?1:this.opacity)*255)}`}function s2(){const e=kf(this.opacity);return`${e===1?"rgb(":"rgba("}${Zi(this.r)}, ${Zi(this.g)}, ${Zi(this.b)}${e===1?")":`, ${e})`}`}function kf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ji(e){return e=Zi(e),(e<16?"0":"")+e.toString(16)}function i2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xr(e,t,n,r)}function W5(e){if(e instanceof xr)return new xr(e.h,e.s,e.l,e.opacity);if(e instanceof Wc||(e=so(e)),!e)return new xr;if(e instanceof xr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),l=NaN,u=o-s,d=(o+s)/2;return u?(t===o?l=(n-r)/u+(n<r)*6:n===o?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?o+s:2-o-s,l*=60):u=d>0&&d<1?0:l,new xr(l,u,d,e.opacity)}function gL(e,t,n,r){return arguments.length===1?W5(e):new xr(e,t,n,r??1)}function xr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Oy(xr,gL,B5(Wc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new xr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sc:Math.pow(Sc,e),new xr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Nn(Km(e>=240?e-240:e+120,s,r),Km(e,s,r),Km(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new xr(o2(this.h),Cd(this.s),Cd(this.l),kf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kf(this.opacity);return`${e===1?"hsl(":"hsla("}${o2(this.h)}, ${Cd(this.s)*100}%, ${Cd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function o2(e){return e=(e||0)%360,e<0?e+360:e}function Cd(e){return Math.max(0,Math.min(1,e||0))}function Km(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zy=e=>()=>e;function yL(e,t){return function(n){return e+n*t}}function xL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bL(e){return(e=+e)==1?V5:function(t,n){return n-t?xL(t,n,e):zy(isNaN(t)?n:t)}}function V5(e,t){var n=t-e;return n?yL(e,n):zy(isNaN(e)?t:e)}const jf=(function e(t){var n=bL(t);function r(s,o){var l=n((s=a0(s)).r,(o=a0(o)).r),u=n(s.g,o.g),d=n(s.b,o.b),f=V5(s.opacity,o.opacity);return function(p){return s.r=l(p),s.g=u(p),s.b=d(p),s.opacity=f(p),s+""}}return r.gamma=e,r})(1);function vL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(o){for(s=0;s<n;++s)r[s]=e[s]*(1-o)+t[s]*o;return r}}function wL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),o=new Array(n),l;for(l=0;l<r;++l)s[l]=nc(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(u){for(l=0;l<r;++l)o[l]=s[l](u);return o}}function kL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function jL(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=nc(e[s],t[s]):r[s]=t[s];return function(o){for(s in n)r[s]=n[s](o);return r}}var l0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ym=new RegExp(l0.source,"g");function CL(e){return function(){return e}}function _L(e){return function(t){return e(t)+""}}function U5(e,t){var n=l0.lastIndex=Ym.lastIndex=0,r,s,o,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=l0.exec(e))&&(s=Ym.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),u[l]?u[l]+=o:u[++l]=o),(r=r[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:$r(r,s)})),n=Ym.lastIndex;return n<t.length&&(o=t.slice(n),u[l]?u[l]+=o:u[++l]=o),u.length<2?d[0]?_L(d[0].x):CL(t):(t=d.length,function(f){for(var p=0,h;p<t;++p)u[(h=d[p]).i]=h.x(f);return u.join("")})}function nc(e,t){var n=typeof t,r;return t==null||n==="boolean"?zy(t):(n==="number"?$r:n==="string"?(r=so(t))?(t=r,jf):U5:t instanceof so?jf:t instanceof Date?kL:wL(t)?vL:Array.isArray(t)?SL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?jL:$r)(e,t)}var a2=180/Math.PI,c0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function H5(e,t,n,r,s,o){var l,u,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*a2,skewX:Math.atan(d)*a2,scaleX:l,scaleY:u}}var _d;function EL(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?c0:H5(t.a,t.b,t.c,t.d,t.e,t.f)}function NL(e){return e==null||(_d||(_d=document.createElementNS("http://www.w3.org/2000/svg","g")),_d.setAttribute("transform",e),!(e=_d.transform.baseVal.consolidate()))?c0:(e=e.matrix,H5(e.a,e.b,e.c,e.d,e.e,e.f))}function q5(e,t,n,r){function s(f){return f.length?f.pop()+" ":""}function o(f,p,h,g,y,b){if(f!==h||p!==g){var w=y.push("translate(",null,t,null,n);b.push({i:w-4,x:$r(f,h)},{i:w-2,x:$r(p,g)})}else(h||g)&&y.push("translate("+h+t+g+n)}function l(f,p,h,g){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),g.push({i:h.push(s(h)+"rotate(",null,r)-2,x:$r(f,p)})):p&&h.push(s(h)+"rotate("+p+r)}function u(f,p,h,g){f!==p?g.push({i:h.push(s(h)+"skewX(",null,r)-2,x:$r(f,p)}):p&&h.push(s(h)+"skewX("+p+r)}function d(f,p,h,g,y,b){if(f!==h||p!==g){var w=y.push(s(y)+"scale(",null,",",null,")");b.push({i:w-4,x:$r(f,h)},{i:w-2,x:$r(p,g)})}else(h!==1||g!==1)&&y.push(s(y)+"scale("+h+","+g+")")}return function(f,p){var h=[],g=[];return f=e(f),p=e(p),o(f.translateX,f.translateY,p.translateX,p.translateY,h,g),l(f.rotate,p.rotate,h,g),u(f.skewX,p.skewX,h,g),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,h,g),f=p=null,function(y){for(var b=-1,w=g.length,v;++b<w;)h[(v=g[b]).i]=v.x(y);return h.join("")}}}var TL=q5(EL,"px, ","px)","deg)"),RL=q5(NL,", ",")",")"),IL=1e-12;function l2(e){return((e=Math.exp(e))+1/e)/2}function AL(e){return((e=Math.exp(e))-1/e)/2}function PL(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qd=(function e(t,n,r){function s(o,l){var u=o[0],d=o[1],f=o[2],p=l[0],h=l[1],g=l[2],y=p-u,b=h-d,w=y*y+b*b,v,j;if(w<IL)j=Math.log(g/f)/t,v=function(R){return[u+R*y,d+R*b,f*Math.exp(t*R*j)]};else{var T=Math.sqrt(w),k=(g*g-f*f+r*w)/(2*f*n*T),_=(g*g-f*f-r*w)/(2*g*n*T),N=Math.log(Math.sqrt(k*k+1)-k),E=Math.log(Math.sqrt(_*_+1)-_);j=(E-N)/t,v=function(R){var A=R*j,P=l2(N),z=f/(n*T)*(P*PL(t*A+N)-AL(N));return[u+z*y,d+z*b,f*P/l2(t*A+N)]}}return v.duration=j*1e3*t/Math.SQRT2,v}return s.rho=function(o){var l=Math.max(.001,+o),u=l*l,d=u*u;return e(l,u,d)},s})(Math.SQRT2,2,4);var _a=0,Gl=0,Ol=0,G5=1e3,Cf,Kl,_f=0,io=0,ah=0,jc=typeof performance=="object"&&performance.now?performance:Date,K5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $y(){return io||(K5(ML),io=jc.now()+ah)}function ML(){io=0}function Ef(){this._call=this._time=this._next=null}Ef.prototype=Y5.prototype={constructor:Ef,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$y():+n)+(t==null?0:+t),!this._next&&Kl!==this&&(Kl?Kl._next=this:Cf=this,Kl=this),this._call=e,this._time=n,u0()},stop:function(){this._call&&(this._call=null,this._time=1/0,u0())}};function Y5(e,t,n){var r=new Ef;return r.restart(e,t,n),r}function DL(){$y(),++_a;for(var e=Cf,t;e;)(t=io-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_a}function c2(){io=(_f=jc.now())+ah,_a=Gl=0;try{DL()}finally{_a=0,OL(),io=0}}function FL(){var e=jc.now(),t=e-_f;t>G5&&(ah-=t,_f=e)}function OL(){for(var e,t=Cf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cf=n);Kl=e,u0(r)}function u0(e){if(!_a){Gl&&(Gl=clearTimeout(Gl));var t=e-io;t>24?(e<1/0&&(Gl=setTimeout(c2,e-jc.now()-ah)),Ol&&(Ol=clearInterval(Ol))):(Ol||(_f=jc.now(),Ol=setInterval(FL,G5)),_a=1,K5(c2))}}function u2(e,t,n){var r=new Ef;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var zL=ih("start","end","cancel","interrupt"),$L=[],X5=0,d2=1,d0=2,Zd=3,f2=4,f0=5,ef=6;function lh(e,t,n,r,s,o){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;LL(e,n,{name:t,index:r,group:s,on:zL,tween:$L,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:X5})}function Ly(e,t){var n=_r(e,t);if(n.state>X5)throw new Error("too late; already scheduled");return n}function Yr(e,t){var n=_r(e,t);if(n.state>Zd)throw new Error("too late; already running");return n}function _r(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function LL(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Y5(o,0,n.time);function o(f){n.state=d2,n.timer.restart(l,n.delay,n.time),n.delay<=f&&l(f-n.delay)}function l(f){var p,h,g,y;if(n.state!==d2)return d();for(p in r)if(y=r[p],y.name===n.name){if(y.state===Zd)return u2(l);y.state===f2?(y.state=ef,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[p]):+p<t&&(y.state=ef,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[p])}if(u2(function(){n.state===Zd&&(n.state=f2,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=d0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===d0){for(n.state=Zd,s=new Array(g=n.tween.length),p=0,h=-1;p<g;++p)(y=n.tween[p].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=y);s.length=h+1}}function u(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=f0,1),h=-1,g=s.length;++h<g;)s[h].call(e,p);n.state===f0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=ef,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function tf(e,t){var n=e.__transition,r,s,o=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){o=!1;continue}s=r.state>d0&&r.state<f0,r.state=ef,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}o&&delete e.__transition}}function BL(e){return this.each(function(){tf(this,e)})}function WL(e,t){var n,r;return function(){var s=Yr(this,e),o=s.tween;if(o!==n){r=n=o;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function VL(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Yr(this,e),l=o.tween;if(l!==r){s=(r=l).slice();for(var u={name:t,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===t){s[d]=u;break}d===f&&s.push(u)}o.tween=s}}function UL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=_r(this.node(),n).tween,s=0,o=r.length,l;s<o;++s)if((l=r[s]).name===e)return l.value;return null}return this.each((t==null?WL:VL)(n,e,t))}function By(e,t,n){var r=e._id;return e.each(function(){var s=Yr(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return _r(s,r).value[t]}}function J5(e,t){var n;return(typeof t=="number"?$r:t instanceof so?jf:(n=so(t))?(t=n,jf):U5)(e,t)}function HL(e){return function(){this.removeAttribute(e)}}function qL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GL(e,t,n){var r,s=n+"",o;return function(){var l=this.getAttribute(e);return l===s?null:l===r?o:o=t(r=l,n)}}function KL(e,t,n){var r,s=n+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===r?o:o=t(r=l,n)}}function YL(e,t,n){var r,s,o;return function(){var l,u=n(this),d;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=u+"",l===d?null:l===r&&d===s?o:(s=d,o=t(r=l,u)))}}function XL(e,t,n){var r,s,o;return function(){var l,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=u+"",l===d?null:l===r&&d===s?o:(s=d,o=t(r=l,u)))}}function JL(e,t){var n=oh(e),r=n==="transform"?RL:J5;return this.attrTween(e,typeof t=="function"?(n.local?XL:YL)(n,r,By(this,"attr."+e,t)):t==null?(n.local?qL:HL)(n):(n.local?KL:GL)(n,r,t))}function QL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ZL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function eB(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ZL(e,o)),n}return s._value=t,s}function tB(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&QL(e,o)),n}return s._value=t,s}function nB(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=oh(e);return this.tween(n,(r.local?eB:tB)(r,t))}function rB(e,t){return function(){Ly(this,e).delay=+t.apply(this,arguments)}}function sB(e,t){return t=+t,function(){Ly(this,e).delay=t}}function iB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rB:sB)(t,e)):_r(this.node(),t).delay}function oB(e,t){return function(){Yr(this,e).duration=+t.apply(this,arguments)}}function aB(e,t){return t=+t,function(){Yr(this,e).duration=t}}function lB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oB:aB)(t,e)):_r(this.node(),t).duration}function cB(e,t){if(typeof t!="function")throw new Error;return function(){Yr(this,e).ease=t}}function uB(e){var t=this._id;return arguments.length?this.each(cB(t,e)):_r(this.node(),t).ease}function dB(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Yr(this,e).ease=n}}function fB(e){if(typeof e!="function")throw new Error;return this.each(dB(this._id,e))}function hB(e){typeof e!="function"&&(e=N5(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],l=o.length,u=r[s]=[],d,f=0;f<l;++f)(d=o[f])&&e.call(d,d.__data__,f,o)&&u.push(d);return new vs(r,this._parents,this._name,this._id)}function pB(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),l=new Array(r),u=0;u<o;++u)for(var d=t[u],f=n[u],p=d.length,h=l[u]=new Array(p),g,y=0;y<p;++y)(g=d[y]||f[y])&&(h[y]=g);for(;u<r;++u)l[u]=t[u];return new vs(l,this._parents,this._name,this._id)}function mB(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gB(e,t,n){var r,s,o=mB(t)?Ly:Yr;return function(){var l=o(this,e),u=l.on;u!==r&&(s=(r=u).copy()).on(t,n),l.on=s}}function yB(e,t){var n=this._id;return arguments.length<2?_r(this.node(),n).on.on(e):this.each(gB(n,e,t))}function xB(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bB(){return this.on("end.remove",xB(this._id))}function vB(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dy(e));for(var r=this._groups,s=r.length,o=new Array(s),l=0;l<s;++l)for(var u=r[l],d=u.length,f=o[l]=new Array(d),p,h,g=0;g<d;++g)(p=u[g])&&(h=e.call(p,p.__data__,g,u))&&("__data__"in p&&(h.__data__=p.__data__),f[g]=h,lh(f[g],t,n,g,f,_r(p,n)));return new vs(o,this._parents,t,n)}function wB(e){var t=this._name,n=this._id;typeof e!="function"&&(e=E5(e));for(var r=this._groups,s=r.length,o=[],l=[],u=0;u<s;++u)for(var d=r[u],f=d.length,p,h=0;h<f;++h)if(p=d[h]){for(var g=e.call(p,p.__data__,h,d),y,b=_r(p,n),w=0,v=g.length;w<v;++w)(y=g[w])&&lh(y,t,n,w,g,b);o.push(g),l.push(p)}return new vs(o,l,t,n)}var SB=Bc.prototype.constructor;function kB(){return new SB(this._groups,this._parents)}function jB(e,t){var n,r,s;return function(){var o=Ca(this,e),l=(this.style.removeProperty(e),Ca(this,e));return o===l?null:o===n&&l===r?s:s=t(n=o,r=l)}}function Q5(e){return function(){this.style.removeProperty(e)}}function CB(e,t,n){var r,s=n+"",o;return function(){var l=Ca(this,e);return l===s?null:l===r?o:o=t(r=l,n)}}function _B(e,t,n){var r,s,o;return function(){var l=Ca(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),Ca(this,e))),l===d?null:l===r&&d===s?o:(s=d,o=t(r=l,u))}}function EB(e,t){var n,r,s,o="style."+t,l="end."+o,u;return function(){var d=Yr(this,e),f=d.on,p=d.value[o]==null?u||(u=Q5(t)):void 0;(f!==n||s!==p)&&(r=(n=f).copy()).on(l,s=p),d.on=r}}function NB(e,t,n){var r=(e+="")=="transform"?TL:J5;return t==null?this.styleTween(e,jB(e,r)).on("end.style."+e,Q5(e)):typeof t=="function"?this.styleTween(e,_B(e,r,By(this,"style."+e,t))).each(EB(this._id,e)):this.styleTween(e,CB(e,r,t),n).on("end.style."+e,null)}function TB(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function RB(e,t,n){var r,s;function o(){var l=t.apply(this,arguments);return l!==s&&(r=(s=l)&&TB(e,l,n)),r}return o._value=t,o}function IB(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,RB(e,t,n??""))}function AB(e){return function(){this.textContent=e}}function PB(e){return function(){var t=e(this);this.textContent=t??""}}function MB(e){return this.tween("text",typeof e=="function"?PB(By(this,"text",e)):AB(e==null?"":e+""))}function DB(e){return function(t){this.textContent=e.call(this,t)}}function FB(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&DB(s)),t}return r._value=e,r}function OB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,FB(e))}function zB(){for(var e=this._name,t=this._id,n=Z5(),r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){var p=_r(d,t);lh(d,e,n,f,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new vs(r,this._parents,e,n)}function $B(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,l){var u={value:l},d={value:function(){--s===0&&o()}};n.each(function(){var f=Yr(this,r),p=f.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),f.on=t}),s===0&&o()})}var LB=0;function vs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Z5(){return++LB}var as=Bc.prototype;vs.prototype={constructor:vs,select:vB,selectAll:wB,selectChild:as.selectChild,selectChildren:as.selectChildren,filter:hB,merge:pB,selection:kB,transition:zB,call:as.call,nodes:as.nodes,node:as.node,size:as.size,empty:as.empty,each:as.each,on:yB,attr:JL,attrTween:nB,style:NB,styleTween:IB,text:MB,textTween:OB,remove:bB,tween:UL,delay:iB,duration:lB,ease:uB,easeVarying:fB,end:$B,[Symbol.iterator]:as[Symbol.iterator]};function BB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var WB={time:null,delay:0,duration:250,ease:BB};function VB(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function UB(e){var t,n;e instanceof vs?(t=e._id,e=e._name):(t=Z5(),(n=WB).time=$y(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],u=l.length,d,f=0;f<u;++f)(d=l[f])&&lh(d,e,t,f,l,n||VB(d,t));return new vs(r,this._parents,e,t)}Bc.prototype.interrupt=BL;Bc.prototype.transition=UB;const Ed=e=>()=>e;function HB(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function fs(e,t,n){this.k=e,this.x=t,this.y=n}fs.prototype={constructor:fs,scale:function(e){return e===1?this:new fs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ch=new fs(1,0,0);eC.prototype=fs.prototype;function eC(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ch;return e.__zoom}function Xm(e){e.stopImmediatePropagation()}function zl(e){e.preventDefault(),e.stopImmediatePropagation()}function qB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function GB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function h2(){return this.__zoom||ch}function KB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YB(){return navigator.maxTouchPoints||"ontouchstart"in this}function XB(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function tC(){var e=qB,t=GB,n=XB,r=KB,s=YB,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Qd,f=ih("start","zoom","end"),p,h,g,y=500,b=150,w=0,v=10;function j(V){V.property("__zoom",h2).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(V,J,$,H){var M=V.selection?V.selection():V;M.property("__zoom",h2),V!==M?N(V,J,$,H):M.interrupt().each(function(){E(this,arguments).event(H).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},j.scaleBy=function(V,J,$,H){j.scaleTo(V,function(){var M=this.__zoom.k,U=typeof J=="function"?J.apply(this,arguments):J;return M*U},$,H)},j.scaleTo=function(V,J,$,H){j.transform(V,function(){var M=t.apply(this,arguments),U=this.__zoom,F=$==null?_(M):typeof $=="function"?$.apply(this,arguments):$,D=U.invert(F),W=typeof J=="function"?J.apply(this,arguments):J;return n(k(T(U,W),F,D),M,l)},$,H)},j.translateBy=function(V,J,$,H){j.transform(V,function(){return n(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),l)},null,H)},j.translateTo=function(V,J,$,H,M){j.transform(V,function(){var U=t.apply(this,arguments),F=this.__zoom,D=H==null?_(U):typeof H=="function"?H.apply(this,arguments):H;return n(ch.translate(D[0],D[1]).scale(F.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof $=="function"?-$.apply(this,arguments):-$),U,l)},H,M)};function T(V,J){return J=Math.max(o[0],Math.min(o[1],J)),J===V.k?V:new fs(J,V.x,V.y)}function k(V,J,$){var H=J[0]-$[0]*V.k,M=J[1]-$[1]*V.k;return H===V.x&&M===V.y?V:new fs(V.k,H,M)}function _(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function N(V,J,$,H){V.on("start.zoom",function(){E(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(H).end()}).tween("zoom",function(){var M=this,U=arguments,F=E(M,U).event(H),D=t.apply(M,U),W=$==null?_(D):typeof $=="function"?$.apply(M,U):$,X=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ne=M.__zoom,G=typeof J=="function"?J.apply(M,U):J,Q=d(ne.invert(W).concat(X/ne.k),G.invert(W).concat(X/G.k));return function(se){if(se===1)se=G;else{var q=Q(se),ee=X/q[2];se=new fs(ee,W[0]-q[0]*ee,W[1]-q[1]*ee)}F.zoom(null,se)}})}function E(V,J,$){return!$&&V.__zooming||new R(V,J)}function R(V,J){this.that=V,this.args=J,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,J),this.taps=0}R.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,J){return this.mouse&&V!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var J=zn(this.that).datum();f.call(V,this.that,new HB(V,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:f}),J)}};function A(V,...J){if(!e.apply(this,arguments))return;var $=E(this,J).event(V),H=this.__zoom,M=Math.max(o[0],Math.min(o[1],H.k*Math.pow(2,r.apply(this,arguments)))),U=gr(V);if($.wheel)($.mouse[0][0]!==U[0]||$.mouse[0][1]!==U[1])&&($.mouse[1]=H.invert($.mouse[0]=U)),clearTimeout($.wheel);else{if(H.k===M)return;$.mouse=[U,H.invert(U)],tf(this),$.start()}zl(V),$.wheel=setTimeout(F,b),$.zoom("mouse",n(k(T(H,M),$.mouse[0],$.mouse[1]),$.extent,l));function F(){$.wheel=null,$.end()}}function P(V,...J){if(g||!e.apply(this,arguments))return;var $=V.currentTarget,H=E(this,J,!0).event(V),M=zn(V.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",X,!0),U=gr(V,$),F=V.clientX,D=V.clientY;z5(V.view),Xm(V),H.mouse=[U,this.__zoom.invert(U)],tf(this),H.start();function W(ne){if(zl(ne),!H.moved){var G=ne.clientX-F,Q=ne.clientY-D;H.moved=G*G+Q*Q>w}H.event(ne).zoom("mouse",n(k(H.that.__zoom,H.mouse[0]=gr(ne,$),H.mouse[1]),H.extent,l))}function X(ne){M.on("mousemove.zoom mouseup.zoom",null),$5(ne.view,H.moved),zl(ne),H.event(ne).end()}}function z(V,...J){if(e.apply(this,arguments)){var $=this.__zoom,H=gr(V.changedTouches?V.changedTouches[0]:V,this),M=$.invert(H),U=$.k*(V.shiftKey?.5:2),F=n(k(T($,U),H,M),t.apply(this,J),l);zl(V),u>0?zn(this).transition().duration(u).call(N,F,H,V):zn(this).call(j.transform,F,H,V)}}function L(V,...J){if(e.apply(this,arguments)){var $=V.touches,H=$.length,M=E(this,J,V.changedTouches.length===H).event(V),U,F,D,W;for(Xm(V),F=0;F<H;++F)D=$[F],W=gr(D,this),W=[W,this.__zoom.invert(W),D.identifier],M.touch0?!M.touch1&&M.touch0[2]!==W[2]&&(M.touch1=W,M.taps=0):(M.touch0=W,U=!0,M.taps=1+!!p);p&&(p=clearTimeout(p)),U&&(M.taps<2&&(h=W[0],p=setTimeout(function(){p=null},y)),tf(this),M.start())}}function B(V,...J){if(this.__zooming){var $=E(this,J).event(V),H=V.changedTouches,M=H.length,U,F,D,W;for(zl(V),U=0;U<M;++U)F=H[U],D=gr(F,this),$.touch0&&$.touch0[2]===F.identifier?$.touch0[0]=D:$.touch1&&$.touch1[2]===F.identifier&&($.touch1[0]=D);if(F=$.that.__zoom,$.touch1){var X=$.touch0[0],ne=$.touch0[1],G=$.touch1[0],Q=$.touch1[1],se=(se=G[0]-X[0])*se+(se=G[1]-X[1])*se,q=(q=Q[0]-ne[0])*q+(q=Q[1]-ne[1])*q;F=T(F,Math.sqrt(se/q)),D=[(X[0]+G[0])/2,(X[1]+G[1])/2],W=[(ne[0]+Q[0])/2,(ne[1]+Q[1])/2]}else if($.touch0)D=$.touch0[0],W=$.touch0[1];else return;$.zoom("touch",n(k(F,D,W),$.extent,l))}}function K(V,...J){if(this.__zooming){var $=E(this,J).event(V),H=V.changedTouches,M=H.length,U,F;for(Xm(V),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),U=0;U<M;++U)F=H[U],$.touch0&&$.touch0[2]===F.identifier?delete $.touch0:$.touch1&&$.touch1[2]===F.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(F=gr(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<v)){var D=zn(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return j.wheelDelta=function(V){return arguments.length?(r=typeof V=="function"?V:Ed(+V),j):r},j.filter=function(V){return arguments.length?(e=typeof V=="function"?V:Ed(!!V),j):e},j.touchable=function(V){return arguments.length?(s=typeof V=="function"?V:Ed(!!V),j):s},j.extent=function(V){return arguments.length?(t=typeof V=="function"?V:Ed([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),j):t},j.scaleExtent=function(V){return arguments.length?(o[0]=+V[0],o[1]=+V[1],j):[o[0],o[1]]},j.translateExtent=function(V){return arguments.length?(l[0][0]=+V[0][0],l[1][0]=+V[1][0],l[0][1]=+V[0][1],l[1][1]=+V[1][1],j):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},j.constrain=function(V){return arguments.length?(n=V,j):n},j.duration=function(V){return arguments.length?(u=+V,j):u},j.interpolate=function(V){return arguments.length?(d=V,j):d},j.on=function(){var V=f.on.apply(f,arguments);return V===f?j:V},j.clickDistance=function(V){return arguments.length?(w=(V=+V)*V,j):Math.sqrt(w)},j.tapDistance=function(V){return arguments.length?(v=+V,j):v},j}const qr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Cc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nC=["Enter"," ","Escape"],rC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ea;(function(e){e.Strict="strict",e.Loose="loose"})(Ea||(Ea={}));var eo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(eo||(eo={}));var _c;(function(e){e.Partial="partial",e.Full="full"})(_c||(_c={}));const sC={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ri;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ri||(ri={}));var Nf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nf||(Nf={}));var ke;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ke||(ke={}));const p2={[ke.Left]:ke.Right,[ke.Right]:ke.Left,[ke.Top]:ke.Bottom,[ke.Bottom]:ke.Top};function iC(e){return e===null?null:e?"valid":"invalid"}const oC=e=>"id"in e&&"source"in e&&"target"in e,JB=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Wy=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Vc=(e,t=[0,0])=>{const{width:n,height:r}=Cs(e),s=e.origin??t,o=n*s[0],l=r*s[1];return{x:e.position.x-o,y:e.position.y-l}},QB=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const o=typeof s=="string";let l=!t.nodeLookup&&!o?s:void 0;t.nodeLookup&&(l=o?t.nodeLookup.get(s):Wy(s)?s:t.nodeLookup.get(s.id));const u=l?Tf(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return uh(r,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dh(n)},Uc=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(n=uh(n,Tf(s)),r=!0)}),r?dh(n):{x:0,y:0,width:0,height:0}},Vy=(e,t,[n,r,s]=[0,0,1],o=!1,l=!1)=>{const u={...qc(t,[n,r,s]),width:t.width/s,height:t.height/s},d=[];for(const f of e.values()){const{measured:p,selectable:h=!0,hidden:g=!1}=f;if(l&&!h||g)continue;const y=p.width??f.width??f.initialWidth??null,b=p.height??f.height??f.initialHeight??null,w=Ec(u,Ta(f)),v=(y??0)*(b??0),j=o&&w>0;(!f.internals.handleBounds||j||w>=v||f.dragging)&&d.push(f)}return d},ZB=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function e7(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function t7({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:o},l){if(e.size===0)return Promise.resolve(!0);const u=e7(e,l),d=Uc(u),f=Uy(d,t,n,(l==null?void 0:l.minZoom)??s,(l==null?void 0:l.maxZoom)??o,(l==null?void 0:l.padding)??.1);return await r.setViewport(f,{duration:l==null?void 0:l.duration,ease:l==null?void 0:l.ease,interpolate:l==null?void 0:l.interpolate}),Promise.resolve(!0)}function aC({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:o}){const l=n.get(e),u=l.parentId?n.get(l.parentId):void 0,{x:d,y:f}=u?u.internals.positionAbsolute:{x:0,y:0},p=l.origin??r;let h=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!u)o==null||o("005",qr.error005());else{const y=u.measured.width,b=u.measured.height;y&&b&&(h=[[d,f],[d+y,f+b]])}else u&&Ra(l.extent)&&(h=[[l.extent[0][0]+d,l.extent[0][1]+f],[l.extent[1][0]+d,l.extent[1][1]+f]]);const g=Ra(h)?oo(t,h,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&(o==null||o("015",qr.error015())),{position:{x:g.x-d+(l.measured.width??0)*p[0],y:g.y-f+(l.measured.height??0)*p[1]},positionAbsolute:g}}async function n7({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const o=new Set(e.map(g=>g.id)),l=[];for(const g of n){if(g.deletable===!1)continue;const y=o.has(g.id),b=!y&&g.parentId&&l.find(w=>w.id===g.parentId);(y||b)&&l.push(g)}const u=new Set(t.map(g=>g.id)),d=r.filter(g=>g.deletable!==!1),p=ZB(l,d);for(const g of d)u.has(g.id)&&!p.find(b=>b.id===g.id)&&p.push(g);if(!s)return{edges:p,nodes:l};const h=await s({nodes:l,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:l}:{edges:[],nodes:[]}:h}const Na=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),oo=(e={x:0,y:0},t,n)=>({x:Na(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Na(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function lC(e,t,n){const{width:r,height:s}=Cs(n),{x:o,y:l}=n.internals.positionAbsolute;return oo(e,[[o,l],[o+r,l+s]],t)}const m2=(e,t,n)=>e<t?Na(Math.abs(e-t),1,t)/t:e>n?-Na(Math.abs(e-n),1,t)/t:0,cC=(e,t,n=15,r=40)=>{const s=m2(e.x,r,t.width-r)*n,o=m2(e.y,r,t.height-r)*n;return[s,o]},uh=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),h0=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),dh=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ta=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Wy(e)?e.internals.positionAbsolute:Vc(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Tf=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Wy(e)?e.internals.positionAbsolute:Vc(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},uC=(e,t)=>dh(uh(h0(e),h0(t))),Ec=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},g2=e=>vr(e.width)&&vr(e.height)&&vr(e.x)&&vr(e.y),vr=e=>!isNaN(e)&&isFinite(e),r7=(e,t)=>{},Hc=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),qc=({x:e,y:t},[n,r,s],o=!1,l=[1,1])=>{const u={x:(e-n)/s,y:(t-r)/s};return o?Hc(u,l):u},Rf=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function qo(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function s7(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=qo(e,n),s=qo(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=qo(e.top??e.y??0,n),s=qo(e.bottom??e.y??0,n),o=qo(e.left??e.x??0,t),l=qo(e.right??e.x??0,t);return{top:r,right:l,bottom:s,left:o,x:o+l,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function i7(e,t,n,r,s,o){const{x:l,y:u}=Rf(e,[t,n,r]),{x:d,y:f}=Rf({x:e.x+e.width,y:e.y+e.height},[t,n,r]),p=s-d,h=o-f;return{left:Math.floor(l),top:Math.floor(u),right:Math.floor(p),bottom:Math.floor(h)}}const Uy=(e,t,n,r,s,o)=>{const l=s7(o,t,n),u=(t-l.x)/e.width,d=(n-l.y)/e.height,f=Math.min(u,d),p=Na(f,r,s),h=e.x+e.width/2,g=e.y+e.height/2,y=t/2-h*p,b=n/2-g*p,w=i7(e,y,b,p,t,n),v={left:Math.min(w.left-l.left,0),top:Math.min(w.top-l.top,0),right:Math.min(w.right-l.right,0),bottom:Math.min(w.bottom-l.bottom,0)};return{x:y-v.left+v.right,y:b-v.top+v.bottom,zoom:p}},Nc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ra(e){return e!=null&&e!=="parent"}function Cs(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function dC(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function fC(e,t={width:0,height:0},n,r,s){const o={...e},l=r.get(n);if(l){const u=l.origin||s;o.x+=l.internals.positionAbsolute.x-(t.width??0)*u[0],o.y+=l.internals.positionAbsolute.y-(t.height??0)*u[1]}return o}function y2(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function o7(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function a7(e){return{...rC,...e||{}}}function rc(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:o,y:l}=wr(e),u=qc({x:o-((s==null?void 0:s.left)??0),y:l-((s==null?void 0:s.top)??0)},r),{x:d,y:f}=n?Hc(u,t):u;return{xSnapped:d,ySnapped:f,...u}}const Hy=e=>({width:e.offsetWidth,height:e.offsetHeight}),hC=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},l7=["INPUT","SELECT","TEXTAREA"];function pC(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:l7.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const mC=e=>"clientX"in e,wr=(e,t)=>{var o,l;const n=mC(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,s=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},x2=(e,t,n,r,s)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:s,position:l.getAttribute("data-handlepos"),x:(u.left-n.left)/r,y:(u.top-n.top)/r,...Hy(l)}})};function gC({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:u}){const d=e*.125+s*.375+l*.375+n*.125,f=t*.125+o*.375+u*.375+r*.125,p=Math.abs(d-e),h=Math.abs(f-t);return[d,f,p,h]}function Nd(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function b2({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case ke.Left:return[t-Nd(t-r,o),n];case ke.Right:return[t+Nd(r-t,o),n];case ke.Top:return[t,n-Nd(n-s,o)];case ke.Bottom:return[t,n+Nd(s-n,o)]}}function yC({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:s,targetPosition:o=ke.Top,curvature:l=.25}){const[u,d]=b2({pos:n,x1:e,y1:t,x2:r,y2:s,c:l}),[f,p]=b2({pos:o,x1:r,y1:s,x2:e,y2:t,c:l}),[h,g,y,b]=gC({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${e},${t} C${u},${d} ${f},${p} ${r},${s}`,h,g,y,b]}function xC({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,l=Math.abs(r-t)/2,u=r<t?r+l:r-l;return[o,u,s,l]}function c7({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const l=s&&n?r+1e3:r,u=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return l+u}function u7({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const o=uh(Tf(e),Tf(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return Ec(l,dh(o))>0}const d7=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,f7=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),bC=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||d7;let s;return oC(e)?s={...e}:s={...e,id:r(e)},f7(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function vC({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,l,u]=xC({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,l,u]}const v2={[ke.Left]:{x:-1,y:0},[ke.Right]:{x:1,y:0},[ke.Top]:{x:0,y:-1},[ke.Bottom]:{x:0,y:1}},h7=({source:e,sourcePosition:t=ke.Bottom,target:n})=>t===ke.Left||t===ke.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},w2=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function p7({source:e,sourcePosition:t=ke.Bottom,target:n,targetPosition:r=ke.Top,center:s,offset:o,stepPosition:l}){const u=v2[t],d=v2[r],f={x:e.x+u.x*o,y:e.y+u.y*o},p={x:n.x+d.x*o,y:n.y+d.y*o},h=h7({source:f,sourcePosition:t,target:p}),g=h.x!==0?"x":"y",y=h[g];let b=[],w,v;const j={x:0,y:0},T={x:0,y:0},[,,k,_]=xC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[g]*d[g]===-1){g==="x"?(w=s.x??f.x+(p.x-f.x)*l,v=s.y??(f.y+p.y)/2):(w=s.x??(f.x+p.x)/2,v=s.y??f.y+(p.y-f.y)*l);const E=[{x:w,y:f.y},{x:w,y:p.y}],R=[{x:f.x,y:v},{x:p.x,y:v}];u[g]===y?b=g==="x"?E:R:b=g==="x"?R:E}else{const E=[{x:f.x,y:p.y}],R=[{x:p.x,y:f.y}];if(g==="x"?b=u.x===y?R:E:b=u.y===y?E:R,t===r){const B=Math.abs(e[g]-n[g]);if(B<=o){const K=Math.min(o-1,o-B);u[g]===y?j[g]=(f[g]>e[g]?-1:1)*K:T[g]=(p[g]>n[g]?-1:1)*K}}if(t!==r){const B=g==="x"?"y":"x",K=u[g]===d[B],V=f[B]>p[B],J=f[B]<p[B];(u[g]===1&&(!K&&V||K&&J)||u[g]!==1&&(!K&&J||K&&V))&&(b=g==="x"?E:R)}const A={x:f.x+j.x,y:f.y+j.y},P={x:p.x+T.x,y:p.y+T.y},z=Math.max(Math.abs(A.x-b[0].x),Math.abs(P.x-b[0].x)),L=Math.max(Math.abs(A.y-b[0].y),Math.abs(P.y-b[0].y));z>=L?(w=(A.x+P.x)/2,v=b[0].y):(w=b[0].x,v=(A.y+P.y)/2)}return[[e,{x:f.x+j.x,y:f.y+j.y},...b,{x:p.x+T.x,y:p.y+T.y},n],w,v,k,_]}function m7(e,t,n,r){const s=Math.min(w2(e,t)/2,w2(t,n)/2,r),{x:o,y:l}=t;if(e.x===o&&o===n.x||e.y===l&&l===n.y)return`L${o} ${l}`;if(e.y===l){const f=e.x<n.x?-1:1,p=e.y<n.y?1:-1;return`L ${o+s*f},${l}Q ${o},${l} ${o},${l+s*p}`}const u=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${o},${l+s*d}Q ${o},${l} ${o+s*u},${l}`}function p0({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:s,targetPosition:o=ke.Top,borderRadius:l=5,centerX:u,centerY:d,offset:f=20,stepPosition:p=.5}){const[h,g,y,b,w]=p7({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:u,y:d},offset:f,stepPosition:p});return[h.reduce((j,T,k)=>{let _="";return k>0&&k<h.length-1?_=m7(h[k-1],T,h[k+1],l):_=`${k===0?"M":"L"}${T.x} ${T.y}`,j+=_,j},""),g,y,b,w]}function S2(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function g7(e){var h;const{sourceNode:t,targetNode:n}=e;if(!S2(t)||!S2(n))return null;const r=t.internals.handleBounds||k2(t.handles),s=n.internals.handleBounds||k2(n.handles),o=j2((r==null?void 0:r.source)??[],e.sourceHandle),l=j2(e.connectionMode===Ea.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!o||!l)return(h=e.onError)==null||h.call(e,"008",qr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=(o==null?void 0:o.position)||ke.Bottom,d=(l==null?void 0:l.position)||ke.Top,f=ao(t,o,u),p=ao(n,l,d);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:u,targetPosition:d}}function k2(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ao(e,t,n=ke.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:l,height:u}=t??Cs(e);if(r)return{x:s+l/2,y:o+u/2};switch((t==null?void 0:t.position)??n){case ke.Top:return{x:s+l/2,y:o};case ke.Right:return{x:s+l,y:o+u/2};case ke.Bottom:return{x:s+l/2,y:o+u};case ke.Left:return{x:s,y:o+u/2}}}function j2(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function m0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function y7(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const o=new Set;return e.reduce((l,u)=>([u.markerStart||r,u.markerEnd||s].forEach(d=>{if(d&&typeof d=="object"){const f=m0(d,t);o.has(f)||(l.push({id:f,color:d.color||n,...d}),o.add(f))}}),l),[]).sort((l,u)=>l.id.localeCompare(u.id))}const wC=1e3,x7=10,qy={nodeOrigin:[0,0],nodeExtent:Cc,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},b7={...qy,checkEquality:!0};function Gy(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function v7(e,t,n){const r=Gy(qy,n);for(const s of e.values())if(s.parentId)Yy(s,e,t,r);else{const o=Vc(s,r.nodeOrigin),l=Ra(s.extent)?s.extent:r.nodeExtent,u=oo(o,l,Cs(s));s.internals.positionAbsolute=u}}function w7(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const s of e.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(o):s.type==="target"&&r.push(o)}return{source:n,target:r}}function Ky(e){return e==="manual"}function g0(e,t,n,r={}){var f,p;const s=Gy(b7,r),o={i:0},l=new Map(t),u=s!=null&&s.elevateNodesOnSelect&&!Ky(s.zIndexMode)?wC:0;let d=e.length>0;t.clear(),n.clear();for(const h of e){let g=l.get(h.id);if(s.checkEquality&&h===(g==null?void 0:g.internals.userNode))t.set(h.id,g);else{const y=Vc(h,s.nodeOrigin),b=Ra(h.extent)?h.extent:s.nodeExtent,w=oo(y,b,Cs(h));g={...s.defaults,...h,measured:{width:(f=h.measured)==null?void 0:f.width,height:(p=h.measured)==null?void 0:p.height},internals:{positionAbsolute:w,handleBounds:w7(h,g),z:SC(h,u,s.zIndexMode),userNode:h}},t.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(d=!1),h.parentId&&Yy(g,t,n,r,o)}return d}function S7(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Yy(e,t,n,r,s){const{elevateNodesOnSelect:o,nodeOrigin:l,nodeExtent:u,zIndexMode:d}=Gy(qy,r),f=e.parentId,p=t.get(f);if(!p){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}S7(e,n),s&&!p.parentId&&p.internals.rootParentIndex===void 0&&d==="auto"&&(p.internals.rootParentIndex=++s.i,p.internals.z=p.internals.z+s.i*x7),s&&p.internals.rootParentIndex!==void 0&&(s.i=p.internals.rootParentIndex);const h=o&&!Ky(d)?wC:0,{x:g,y,z:b}=k7(e,p,l,u,h,d),{positionAbsolute:w}=e.internals,v=g!==w.x||y!==w.y;(v||b!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:g,y}:w,z:b}})}function SC(e,t,n){const r=vr(e.zIndex)?e.zIndex:0;return Ky(n)?r:r+(e.selected?t:0)}function k7(e,t,n,r,s,o){const{x:l,y:u}=t.internals.positionAbsolute,d=Cs(e),f=Vc(e,n),p=Ra(e.extent)?oo(f,e.extent,d):f;let h=oo({x:l+p.x,y:u+p.y},r,d);e.extent==="parent"&&(h=lC(h,d,t));const g=SC(e,s,o),y=t.internals.z??0;return{x:h.x,y:h.y,z:y>=g?y+1:g}}function Xy(e,t,n,r=[0,0]){var l;const s=[],o=new Map;for(const u of e){const d=t.get(u.parentId);if(!d)continue;const f=((l=o.get(u.parentId))==null?void 0:l.expandedRect)??Ta(d),p=uC(f,u.rect);o.set(u.parentId,{expandedRect:p,parent:d})}return o.size>0&&o.forEach(({expandedRect:u,parent:d},f)=>{var k;const p=d.internals.positionAbsolute,h=Cs(d),g=d.origin??r,y=u.x<p.x?Math.round(Math.abs(p.x-u.x)):0,b=u.y<p.y?Math.round(Math.abs(p.y-u.y)):0,w=Math.max(h.width,Math.round(u.width)),v=Math.max(h.height,Math.round(u.height)),j=(w-h.width)*g[0],T=(v-h.height)*g[1];(y>0||b>0||j||T)&&(s.push({id:f,type:"position",position:{x:d.position.x-y+j,y:d.position.y-b+T}}),(k=n.get(f))==null||k.forEach(_=>{e.some(N=>N.id===_.id)||s.push({id:_.id,type:"position",position:{x:_.position.x+y,y:_.position.y+b}})})),(h.width<u.width||h.height<u.height||y||b)&&s.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:w+(y?g[0]*y-j:0),height:v+(b?g[1]*b-T:0)}})}),s}function j7(e,t,n,r,s,o,l){const u=r==null?void 0:r.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const f=[],p=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(p.transform),g=[];for(const y of e.values()){const b=t.get(y.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const w=Hy(y.nodeElement),v=b.measured.width!==w.width||b.measured.height!==w.height;if(!!(w.width&&w.height&&(v||!b.internals.handleBounds||y.force))){const T=y.nodeElement.getBoundingClientRect(),k=Ra(b.extent)?b.extent:o;let{positionAbsolute:_}=b.internals;b.parentId&&b.extent==="parent"?_=lC(_,w,t.get(b.parentId)):k&&(_=oo(_,k,w));const N={...b,measured:w,internals:{...b.internals,positionAbsolute:_,handleBounds:{source:x2("source",y.nodeElement,T,h,b.id),target:x2("target",y.nodeElement,T,h,b.id)}}};t.set(b.id,N),b.parentId&&Yy(N,t,n,{nodeOrigin:s,zIndexMode:l}),d=!0,v&&(f.push({id:b.id,type:"dimensions",dimensions:w}),b.expandParent&&b.parentId&&g.push({id:b.id,parentId:b.parentId,rect:Ta(N,s)}))}}if(g.length>0){const y=Xy(g,t,n,s);f.push(...y)}return{changes:f,updatedInternals:d}}async function C7({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,o]],r),u=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(u)}function C2(e,t,n,r,s,o){let l=s;const u=r.get(l)||new Map;r.set(l,u.set(n,t)),l=`${s}-${e}`;const d=r.get(l)||new Map;if(r.set(l,d.set(n,t)),o){l=`${s}-${e}-${o}`;const f=r.get(l)||new Map;r.set(l,f.set(n,t))}}function kC(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:o,sourceHandle:l=null,targetHandle:u=null}=r,d={edgeId:r.id,source:s,target:o,sourceHandle:l,targetHandle:u},f=`${s}-${l}--${o}-${u}`,p=`${o}-${u}--${s}-${l}`;C2("source",d,p,e,s,l),C2("target",d,f,e,o,u),t.set(r.id,r)}}function jC(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:jC(n,t):!1}function _2(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function _7(e,t,n,r){const s=new Map;for(const[o,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!jC(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(o);u&&s.set(o,{id:o,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return s}function Jm({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var l,u,d;const s=[];for(const[f,p]of t){const h=(l=n.get(f))==null?void 0:l.internals.userNode;h&&s.push({...h,position:p.position,dragging:r})}if(!e)return[s[0],s];const o=(u=n.get(e))==null?void 0:u.internals.userNode;return[o?{...o,position:((d=t.get(e))==null?void 0:d.position)||o.position,dragging:r}:s[0],s]}function E7({dragItems:e,snapGrid:t,x:n,y:r}){const s=e.values().next().value;if(!s)return null;const o={x:n-s.distance.x,y:r-s.distance.y},l=Hc(o,t);return{x:l.x-o.x,y:l.y-o.y}}function N7({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let o={x:null,y:null},l=0,u=new Map,d=!1,f={x:0,y:0},p=null,h=!1,g=null,y=!1,b=!1,w=null;function v({noDragClassName:T,handleSelector:k,domNode:_,isSelectable:N,nodeId:E,nodeClickDistance:R=0}){g=zn(_);function A({x:B,y:K}){const{nodeLookup:V,nodeExtent:J,snapGrid:$,snapToGrid:H,nodeOrigin:M,onNodeDrag:U,onSelectionDrag:F,onError:D,updateNodePositions:W}=t();o={x:B,y:K};let X=!1;const ne=u.size>1,G=ne&&J?h0(Uc(u)):null,Q=ne&&H?E7({dragItems:u,snapGrid:$,x:B,y:K}):null;for(const[se,q]of u){if(!V.has(se))continue;let ee={x:B-q.distance.x,y:K-q.distance.y};H&&(ee=Q?{x:Math.round(ee.x+Q.x),y:Math.round(ee.y+Q.y)}:Hc(ee,$));let ie=null;if(ne&&J&&!q.extent&&G){const{positionAbsolute:Z}=q.internals,de=Z.x-G.x+J[0][0],he=Z.x+q.measured.width-G.x2+J[1][0],pe=Z.y-G.y+J[0][1],_e=Z.y+q.measured.height-G.y2+J[1][1];ie=[[de,pe],[he,_e]]}const{position:le,positionAbsolute:ue}=aC({nodeId:se,nextPosition:ee,nodeLookup:V,nodeExtent:ie||J,nodeOrigin:M,onError:D});X=X||q.position.x!==le.x||q.position.y!==le.y,q.position=le,q.internals.positionAbsolute=ue}if(b=b||X,!!X&&(W(u,!0),w&&(r||U||!E&&F))){const[se,q]=Jm({nodeId:E,dragItems:u,nodeLookup:V});r==null||r(w,u,se,q),U==null||U(w,se,q),E||F==null||F(w,q)}}async function P(){if(!p)return;const{transform:B,panBy:K,autoPanSpeed:V,autoPanOnNodeDrag:J}=t();if(!J){d=!1,cancelAnimationFrame(l);return}const[$,H]=cC(f,p,V);($!==0||H!==0)&&(o.x=(o.x??0)-$/B[2],o.y=(o.y??0)-H/B[2],await K({x:$,y:H})&&A(o)),l=requestAnimationFrame(P)}function z(B){var ne;const{nodeLookup:K,multiSelectionActive:V,nodesDraggable:J,transform:$,snapGrid:H,snapToGrid:M,selectNodesOnDrag:U,onNodeDragStart:F,onSelectionDragStart:D,unselectNodesAndEdges:W}=t();h=!0,(!U||!N)&&!V&&E&&((ne=K.get(E))!=null&&ne.selected||W()),N&&U&&E&&(e==null||e(E));const X=rc(B.sourceEvent,{transform:$,snapGrid:H,snapToGrid:M,containerBounds:p});if(o=X,u=_7(K,J,X,E),u.size>0&&(n||F||!E&&D)){const[G,Q]=Jm({nodeId:E,dragItems:u,nodeLookup:K});n==null||n(B.sourceEvent,u,G,Q),F==null||F(B.sourceEvent,G,Q),E||D==null||D(B.sourceEvent,Q)}}const L=L5().clickDistance(R).on("start",B=>{const{domNode:K,nodeDragThreshold:V,transform:J,snapGrid:$,snapToGrid:H}=t();p=(K==null?void 0:K.getBoundingClientRect())||null,y=!1,b=!1,w=B.sourceEvent,V===0&&z(B),o=rc(B.sourceEvent,{transform:J,snapGrid:$,snapToGrid:H,containerBounds:p}),f=wr(B.sourceEvent,p)}).on("drag",B=>{const{autoPanOnNodeDrag:K,transform:V,snapGrid:J,snapToGrid:$,nodeDragThreshold:H,nodeLookup:M}=t(),U=rc(B.sourceEvent,{transform:V,snapGrid:J,snapToGrid:$,containerBounds:p});if(w=B.sourceEvent,(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||E&&!M.has(E))&&(y=!0),!y){if(!d&&K&&h&&(d=!0,P()),!h){const F=wr(B.sourceEvent,p),D=F.x-f.x,W=F.y-f.y;Math.sqrt(D*D+W*W)>H&&z(B)}(o.x!==U.xSnapped||o.y!==U.ySnapped)&&u&&h&&(f=wr(B.sourceEvent,p),A(U))}}).on("end",B=>{if(!(!h||y)&&(d=!1,h=!1,cancelAnimationFrame(l),u.size>0)){const{nodeLookup:K,updateNodePositions:V,onNodeDragStop:J,onSelectionDragStop:$}=t();if(b&&(V(u,!1),b=!1),s||J||!E&&$){const[H,M]=Jm({nodeId:E,dragItems:u,nodeLookup:K,dragging:!1});s==null||s(B.sourceEvent,u,H,M),J==null||J(B.sourceEvent,H,M),E||$==null||$(B.sourceEvent,M)}}}).filter(B=>{const K=B.target;return!B.button&&(!T||!_2(K,`.${T}`,_))&&(!k||_2(K,k,_))});g.call(L)}function j(){g==null||g.on(".drag",null)}return{update:v,destroy:j}}function T7(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ec(s,Ta(o))>0&&r.push(o);return r}const R7=250;function I7(e,t,n,r){var u,d;let s=[],o=1/0;const l=T7(e,n,t+R7);for(const f of l){const p=[...((u=f.internals.handleBounds)==null?void 0:u.source)??[],...((d=f.internals.handleBounds)==null?void 0:d.target)??[]];for(const h of p){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:g,y}=ao(f,h,h.position,!0),b=Math.sqrt(Math.pow(g-e.x,2)+Math.pow(y-e.y,2));b>t||(b<o?(s=[{...h,x:g,y}],o=b):b===o&&s.push({...h,x:g,y}))}}if(!s.length)return null;if(s.length>1){const f=r.type==="source"?"target":"source";return s.find(p=>p.type===f)??s[0]}return s[0]}function CC(e,t,n,r,s,o=!1){var f,p,h;const l=r.get(e);if(!l)return null;const u=s==="strict"?(f=l.internals.handleBounds)==null?void 0:f[t]:[...((p=l.internals.handleBounds)==null?void 0:p.source)??[],...((h=l.internals.handleBounds)==null?void 0:h.target)??[]],d=(n?u==null?void 0:u.find(g=>g.id===n):u==null?void 0:u[0])??null;return d&&o?{...d,...ao(l,d,d.position,!0)}:d}function _C(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function A7(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const EC=()=>!0;function P7(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:o,isTarget:l,domNode:u,nodeLookup:d,lib:f,autoPanOnConnect:p,flowId:h,panBy:g,cancelConnection:y,onConnectStart:b,onConnect:w,onConnectEnd:v,isValidConnection:j=EC,onReconnectEnd:T,updateConnection:k,getTransform:_,getFromHandle:N,autoPanSpeed:E,dragThreshold:R=1,handleDomNode:A}){const P=hC(e.target);let z=0,L;const{x:B,y:K}=wr(e),V=_C(o,A),J=u==null?void 0:u.getBoundingClientRect();let $=!1;if(!J||!V)return;const H=CC(s,V,r,d,t);if(!H)return;let M=wr(e,J),U=!1,F=null,D=!1,W=null;function X(){if(!p||!J)return;const[le,ue]=cC(M,J,E);g({x:le,y:ue}),z=requestAnimationFrame(X)}const ne={...H,nodeId:s,type:V,position:H.position},G=d.get(s);let se={inProgress:!0,isValid:null,from:ao(G,ne,ke.Left,!0),fromHandle:ne,fromPosition:ne.position,fromNode:G,to:M,toHandle:null,toPosition:p2[ne.position],toNode:null,pointer:M};function q(){$=!0,k(se),b==null||b(e,{nodeId:s,handleId:r,handleType:V})}R===0&&q();function ee(le){if(!$){const{x:_e,y:Be}=wr(le),je=_e-B,He=Be-K;if(!(je*je+He*He>R*R))return;q()}if(!N()||!ne){ie(le);return}const ue=_();M=wr(le,J),L=I7(qc(M,ue,!1,[1,1]),n,d,ne),U||(X(),U=!0);const Z=NC(le,{handle:L,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:l?"target":"source",isValidConnection:j,doc:P,lib:f,flowId:h,nodeLookup:d});W=Z.handleDomNode,F=Z.connection,D=A7(!!L,Z.isValid);const de=d.get(s),he=de?ao(de,ne,ke.Left,!0):se.from,pe={...se,from:he,isValid:D,to:Z.toHandle&&D?Rf({x:Z.toHandle.x,y:Z.toHandle.y},ue):M,toHandle:Z.toHandle,toPosition:D&&Z.toHandle?Z.toHandle.position:p2[ne.position],toNode:Z.toHandle?d.get(Z.toHandle.nodeId):null,pointer:M};k(pe),se=pe}function ie(le){if(!("touches"in le&&le.touches.length>0)){if($){(L||W)&&F&&D&&(w==null||w(F));const{inProgress:ue,...Z}=se,de={...Z,toPosition:se.toHandle?se.toPosition:null};v==null||v(le,de),o&&(T==null||T(le,de))}y(),cancelAnimationFrame(z),U=!1,D=!1,F=null,W=null,P.removeEventListener("mousemove",ee),P.removeEventListener("mouseup",ie),P.removeEventListener("touchmove",ee),P.removeEventListener("touchend",ie)}}P.addEventListener("mousemove",ee),P.addEventListener("mouseup",ie),P.addEventListener("touchmove",ee),P.addEventListener("touchend",ie)}function NC(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:o,doc:l,lib:u,flowId:d,isValidConnection:f=EC,nodeLookup:p}){const h=o==="target",g=t?l.querySelector(`.${u}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:b}=wr(e),w=l.elementFromPoint(y,b),v=w!=null&&w.classList.contains(`${u}-flow__handle`)?w:g,j={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const T=_C(void 0,v),k=v.getAttribute("data-nodeid"),_=v.getAttribute("data-handleid"),N=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!k||!T)return j;const R={source:h?k:r,sourceHandle:h?_:s,target:h?r:k,targetHandle:h?s:_};j.connection=R;const P=N&&E&&(n===Ea.Strict?h&&T==="source"||!h&&T==="target":k!==r||_!==s);j.isValid=P&&f(R),j.toHandle=CC(k,T,_,p,n,!0)}return j}const y0={onPointerDown:P7,isValid:NC};function M7({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=zn(e);function o({translateExtent:u,width:d,height:f,zoomStep:p=1,pannable:h=!0,zoomable:g=!0,inversePan:y=!1}){const b=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const _=n(),N=k.sourceEvent.ctrlKey&&Nc()?10:1,E=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*p,R=_[2]*Math.pow(2,E*N);t.scaleTo(R)};let w=[0,0];const v=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(w=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},j=k=>{const _=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const N=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],E=[N[0]-w[0],N[1]-w[1]];w=N;const R=r()*Math.max(_[2],Math.log(_[2]))*(y?-1:1),A={x:_[0]-E[0]*R,y:_[1]-E[1]*R},P=[[0,0],[d,f]];t.setViewportConstrained({x:A.x,y:A.y,zoom:_[2]},P,u)},T=tC().on("start",v).on("zoom",h?j:null).on("zoom.wheel",g?b:null);s.call(T,{})}function l(){s.on("zoom",null)}return{update:o,destroy:l,pointer:gr}}const fh=e=>({x:e.x,y:e.y,zoom:e.k}),Qm=({x:e,y:t,zoom:n})=>ch.translate(e,t).scale(n),ca=(e,t)=>e.target.closest(`.${t}`),TC=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),D7=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Zm=(e,t=0,n=D7,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},RC=e=>{const t=e.ctrlKey&&Nc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function F7({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:l,onPanZoomStart:u,onPanZoom:d,onPanZoomEnd:f}){return p=>{if(ca(p,t))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&l){const v=gr(p),j=RC(p),T=h*Math.pow(2,j);r.scaleTo(n,T,v,p);return}const g=p.deltaMode===1?20:1;let y=s===eo.Vertical?0:p.deltaX*g,b=s===eo.Horizontal?0:p.deltaY*g;!Nc()&&p.shiftKey&&s!==eo.Vertical&&(y=p.deltaY*g,b=0),r.translateBy(n,-(y/h)*o,-(b/h)*o,{internal:!0});const w=fh(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(p,w),e.panScrollTimeout=setTimeout(()=>{f==null||f(p,w),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u==null||u(p,w))}}function O7({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const o=r.type==="wheel",l=!t&&o&&!r.ctrlKey,u=ca(r,e);if(r.ctrlKey&&o&&u&&r.preventDefault(),l||u)return null;r.preventDefault(),n.call(this,r,s)}}function z7({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,l,u;if((o=r.sourceEvent)!=null&&o.internal)return;const s=fh(r.transform);e.mouseButton=((l=r.sourceEvent)==null?void 0:l.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((u=r.sourceEvent)==null?void 0:u.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function $7({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return o=>{var l,u;e.usedRightMouseButton=!!(n&&TC(t,e.mouseButton??0)),(l=o.sourceEvent)!=null&&l.sync||r([o.transform.x,o.transform.y,o.transform.k]),s&&!((u=o.sourceEvent)!=null&&u.internal)&&(s==null||s(o.sourceEvent,fh(o.transform)))}}function L7({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:o}){return l=>{var u;if(!((u=l.sourceEvent)!=null&&u.internal)&&(e.isZoomingOrPanning=!1,o&&TC(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&o(l.sourceEvent),e.usedRightMouseButton=!1,r(!1),s)){const d=fh(l.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(l.sourceEvent,d)},n?150:0)}}}function B7({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:l,noWheelClassName:u,noPanClassName:d,lib:f,connectionInProgress:p}){return h=>{var v;const g=e||t,y=n&&h.ctrlKey,b=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(ca(h,`${f}-flow__node`)||ca(h,`${f}-flow__edge`)))return!0;if(!r&&!g&&!s&&!o&&!n||l||p&&!b||ca(h,u)&&b||ca(h,d)&&(!b||s&&b&&!e)||!n&&h.ctrlKey&&b)return!1;if(!n&&h.type==="touchstart"&&((v=h.touches)==null?void 0:v.length)>1)return h.preventDefault(),!1;if(!g&&!s&&!y&&b||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const w=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||b)&&w}}function W7({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),h=tC().scaleExtent([t,n]).translateExtent(r),g=zn(e).call(h);T({x:s.x,y:s.y,zoom:Na(s.zoom,t,n)},[[0,0],[p.width,p.height]],r);const y=g.on("wheel.zoom"),b=g.on("dblclick.zoom");h.wheelDelta(RC);function w(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?nc:Qd).transform(Zm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function v({noWheelClassName:L,noPanClassName:B,onPaneContextMenu:K,userSelectionActive:V,panOnScroll:J,panOnDrag:$,panOnScrollMode:H,panOnScrollSpeed:M,preventScrolling:U,zoomOnPinch:F,zoomOnScroll:D,zoomOnDoubleClick:W,zoomActivationKeyPressed:X,lib:ne,onTransformChange:G,connectionInProgress:Q,paneClickDistance:se,selectionOnDrag:q}){V&&!f.isZoomingOrPanning&&j();const ee=J&&!X&&!V;h.clickDistance(q?1/0:!vr(se)||se<0?0:se);const ie=ee?F7({zoomPanValues:f,noWheelClassName:L,d3Selection:g,d3Zoom:h,panOnScrollMode:H,panOnScrollSpeed:M,zoomOnPinch:F,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):O7({noWheelClassName:L,preventScrolling:U,d3ZoomHandler:y});if(g.on("wheel.zoom",ie,{passive:!1}),!V){const ue=z7({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});h.on("start",ue);const Z=$7({zoomPanValues:f,panOnDrag:$,onPaneContextMenu:!!K,onPanZoom:o,onTransformChange:G});h.on("zoom",Z);const de=L7({zoomPanValues:f,panOnDrag:$,panOnScroll:J,onPaneContextMenu:K,onPanZoomEnd:u,onDraggingChange:d});h.on("end",de)}const le=B7({zoomActivationKeyPressed:X,panOnDrag:$,zoomOnScroll:D,panOnScroll:J,zoomOnDoubleClick:W,zoomOnPinch:F,userSelectionActive:V,noPanClassName:B,noWheelClassName:L,lib:ne,connectionInProgress:Q});h.filter(le),W?g.on("dblclick.zoom",b):g.on("dblclick.zoom",null)}function j(){h.on("zoom",null)}async function T(L,B,K){const V=Qm(L),J=h==null?void 0:h.constrain()(V,B,K);return J&&await w(J),new Promise($=>$(J))}async function k(L,B){const K=Qm(L);return await w(K,B),new Promise(V=>V(K))}function _(L){if(g){const B=Qm(L),K=g.property("__zoom");(K.k!==L.zoom||K.x!==L.x||K.y!==L.y)&&(h==null||h.transform(g,B,null,{sync:!0}))}}function N(){const L=g?eC(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function E(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?nc:Qd).scaleTo(Zm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function R(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?nc:Qd).scaleBy(Zm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function A(L){h==null||h.scaleExtent(L)}function P(L){h==null||h.translateExtent(L)}function z(L){const B=!vr(L)||L<0?0:L;h==null||h.clickDistance(B)}return{update:v,destroy:j,setViewport:k,setViewportConstrained:T,getViewport:N,scaleTo:E,scaleBy:R,setScaleExtent:A,setTranslateExtent:P,syncViewport:_,setClickDistance:z}}var Ia;(function(e){e.Line="line",e.Handle="handle"})(Ia||(Ia={}));function V7({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:o}){const l=e-t,u=n-r,d=[l>0?1:l<0?-1:0,u>0?1:u<0?-1:0];return l&&s&&(d[0]=d[0]*-1),u&&o&&(d[1]=d[1]*-1),d}function E2(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function Ys(e,t){return Math.max(0,t-e)}function Xs(e,t){return Math.max(0,e-t)}function Td(e,t,n){return Math.max(0,t-e,e-n)}function N2(e,t){return e?!t:t}function U7(e,t,n,r,s,o,l,u){let{affectsX:d,affectsY:f}=t;const{isHorizontal:p,isVertical:h}=t,g=p&&h,{xSnapped:y,ySnapped:b}=n,{minWidth:w,maxWidth:v,minHeight:j,maxHeight:T}=r,{x:k,y:_,width:N,height:E,aspectRatio:R}=e;let A=Math.floor(p?y-e.pointerX:0),P=Math.floor(h?b-e.pointerY:0);const z=N+(d?-A:A),L=E+(f?-P:P),B=-o[0]*N,K=-o[1]*E;let V=Td(z,w,v),J=Td(L,j,T);if(l){let M=0,U=0;d&&A<0?M=Ys(k+A+B,l[0][0]):!d&&A>0&&(M=Xs(k+z+B,l[1][0])),f&&P<0?U=Ys(_+P+K,l[0][1]):!f&&P>0&&(U=Xs(_+L+K,l[1][1])),V=Math.max(V,M),J=Math.max(J,U)}if(u){let M=0,U=0;d&&A>0?M=Xs(k+A,u[0][0]):!d&&A<0&&(M=Ys(k+z,u[1][0])),f&&P>0?U=Xs(_+P,u[0][1]):!f&&P<0&&(U=Ys(_+L,u[1][1])),V=Math.max(V,M),J=Math.max(J,U)}if(s){if(p){const M=Td(z/R,j,T)*R;if(V=Math.max(V,M),l){let U=0;!d&&!f||d&&!f&&g?U=Xs(_+K+z/R,l[1][1])*R:U=Ys(_+K+(d?A:-A)/R,l[0][1])*R,V=Math.max(V,U)}if(u){let U=0;!d&&!f||d&&!f&&g?U=Ys(_+z/R,u[1][1])*R:U=Xs(_+(d?A:-A)/R,u[0][1])*R,V=Math.max(V,U)}}if(h){const M=Td(L*R,w,v)/R;if(J=Math.max(J,M),l){let U=0;!d&&!f||f&&!d&&g?U=Xs(k+L*R+B,l[1][0])/R:U=Ys(k+(f?P:-P)*R+B,l[0][0])/R,J=Math.max(J,U)}if(u){let U=0;!d&&!f||f&&!d&&g?U=Ys(k+L*R,u[1][0])/R:U=Xs(k+(f?P:-P)*R,u[0][0])/R,J=Math.max(J,U)}}}P=P+(P<0?J:-J),A=A+(A<0?V:-V),s&&(g?z>L*R?P=(N2(d,f)?-A:A)/R:A=(N2(d,f)?-P:P)*R:p?(P=A/R,f=d):(A=P*R,d=f));const $=d?k+A:k,H=f?_+P:_;return{width:N+(d?-A:A),height:E+(f?-P:P),x:o[0]*A*(d?-1:1)+$,y:o[1]*P*(f?-1:1)+H}}const IC={width:0,height:0,x:0,y:0},H7={...IC,pointerX:0,pointerY:0,aspectRatio:1};function q7(e){return[[0,0],[e.measured.width,e.measured.height]]}function G7(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,o=e.measured.width??0,l=e.measured.height??0,u=n[0]*o,d=n[1]*l;return[[r-u,s-d],[r+o-u,s+l-d]]}function K7({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const o=zn(e);let l={controlDirection:E2("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:f,boundaries:p,keepAspectRatio:h,resizeDirection:g,onResizeStart:y,onResize:b,onResizeEnd:w,shouldResize:v}){let j={...IC},T={...H7};l={boundaries:p,resizeDirection:g,keepAspectRatio:h,controlDirection:E2(f)};let k,_=null,N=[],E,R,A,P=!1;const z=L5().on("start",L=>{const{nodeLookup:B,transform:K,snapGrid:V,snapToGrid:J,nodeOrigin:$,paneDomNode:H}=n();if(k=B.get(t),!k)return;_=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:U}=rc(L.sourceEvent,{transform:K,snapGrid:V,snapToGrid:J,containerBounds:_});j={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},T={...j,pointerX:M,pointerY:U,aspectRatio:j.width/j.height},E=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(E=B.get(k.parentId),R=E&&k.extent==="parent"?q7(E):void 0),N=[],A=void 0;for(const[F,D]of B)if(D.parentId===t&&(N.push({id:F,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const W=G7(D,k,D.origin??$);A?A=[[Math.min(W[0][0],A[0][0]),Math.min(W[0][1],A[0][1])],[Math.max(W[1][0],A[1][0]),Math.max(W[1][1],A[1][1])]]:A=W}y==null||y(L,{...j})}).on("drag",L=>{const{transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:J}=n(),$=rc(L.sourceEvent,{transform:B,snapGrid:K,snapToGrid:V,containerBounds:_}),H=[];if(!k)return;const{x:M,y:U,width:F,height:D}=j,W={},X=k.origin??J,{width:ne,height:G,x:Q,y:se}=U7(T,l.controlDirection,$,l.boundaries,l.keepAspectRatio,X,R,A),q=ne!==F,ee=G!==D,ie=Q!==M&&q,le=se!==U&&ee;if(!ie&&!le&&!q&&!ee)return;if((ie||le||X[0]===1||X[1]===1)&&(W.x=ie?Q:j.x,W.y=le?se:j.y,j.x=W.x,j.y=W.y,N.length>0)){const he=Q-M,pe=se-U;for(const _e of N)_e.position={x:_e.position.x-he+X[0]*(ne-F),y:_e.position.y-pe+X[1]*(G-D)},H.push(_e)}if((q||ee)&&(W.width=q&&(!l.resizeDirection||l.resizeDirection==="horizontal")?ne:j.width,W.height=ee&&(!l.resizeDirection||l.resizeDirection==="vertical")?G:j.height,j.width=W.width,j.height=W.height),E&&k.expandParent){const he=X[0]*(W.width??0);W.x&&W.x<he&&(j.x=he,T.x=T.x-(W.x-he));const pe=X[1]*(W.height??0);W.y&&W.y<pe&&(j.y=pe,T.y=T.y-(W.y-pe))}const ue=V7({width:j.width,prevWidth:F,height:j.height,prevHeight:D,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),Z={...j,direction:ue};(v==null?void 0:v(L,Z))!==!1&&(P=!0,b==null||b(L,Z),r(W,H))}).on("end",L=>{P&&(w==null||w(L,{...j}),s==null||s({...j}),P=!1)});o.call(z)}function d(){o.on(".drag",null)}return{update:u,destroy:d}}var eg={exports:{}},tg={},ng={exports:{}},rg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function Y7(){if(T2)return rg;T2=1;var e=Ic();function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function u(h,g){var y=g(),b=r({inst:{value:y,getSnapshot:g}}),w=b[0].inst,v=b[1];return o(function(){w.value=y,w.getSnapshot=g,d(w)&&v({inst:w})},[h,y,g]),s(function(){return d(w)&&v({inst:w}),h(function(){d(w)&&v({inst:w})})},[h]),l(y),y}function d(h){var g=h.getSnapshot;h=h.value;try{var y=g();return!n(h,y)}catch{return!0}}function f(h,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return rg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,rg}var R2;function X7(){return R2||(R2=1,ng.exports=Y7()),ng.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function J7(){if(I2)return tg;I2=1;var e=Ic(),t=X7();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return tg.useSyncExternalStoreWithSelector=function(f,p,h,g,y){var b=o(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=u(function(){function j(E){if(!T){if(T=!0,k=E,E=g(E),y!==void 0&&w.hasValue){var R=w.value;if(y(R,E))return _=R}return _=E}if(R=_,r(k,E))return R;var A=g(E);return y!==void 0&&y(R,A)?(k=E,R):(k=E,_=A)}var T=!1,k,_,N=h===void 0?null:h;return[function(){return j(p())},N===null?void 0:function(){return j(N())}]},[p,h,g,y]);var v=s(f,b[0],b[1]);return l(function(){w.hasValue=!0,w.value=v},[v]),d(v),v},tg}var A2;function Q7(){return A2||(A2=1,eg.exports=J7()),eg.exports}var Z7=Q7();const e9=Vf(Z7),t9={},P2=e=>{let t;const n=new Set,r=(p,h)=>{const g=typeof p=="function"?p(t):p;if(!Object.is(g,t)){const y=t;t=h??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(b=>b(t,y))}},s=()=>t,d={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(t9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,s,d);return d},n9=e=>e?P2(e):P2,{useDebugValue:r9}=xe,{useSyncExternalStoreWithSelector:s9}=e9,i9=e=>e;function AC(e,t=i9,n){const r=s9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return r9(r),r}const M2=(e,t)=>{const n=n9(e),r=(s,o=t)=>AC(n,s,o);return Object.assign(r,n),r},o9=(e,t)=>e?M2(e,t):M2;function lt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const hh=S.createContext(null),a9=hh.Provider,PC=qr.error001();function Ge(e,t){const n=S.useContext(hh);if(n===null)throw new Error(PC);return AC(n,e,t)}function ut(){const e=S.useContext(hh);if(e===null)throw new Error(PC);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const D2={display:"none"},l9={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},MC="react-flow__node-desc",DC="react-flow__edge-desc",c9="react-flow__aria-live",u9=e=>e.ariaLiveMessage,d9=e=>e.ariaLabelConfig;function f9({rfId:e}){const t=Ge(u9);return i.jsx("div",{id:`${c9}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:l9,children:t})}function h9({rfId:e,disableKeyboardA11y:t}){const n=Ge(d9);return i.jsxs(i.Fragment,{children:[i.jsx("div",{id:`${MC}-${e}`,style:D2,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),i.jsx("div",{id:`${DC}-${e}`,style:D2,children:n["edge.a11yDescription.default"]}),!t&&i.jsx(f9,{rfId:e})]})}const ph=S.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},o)=>{const l=`${e}`.split("-");return i.jsx("div",{className:Mt(["react-flow__panel",n,...l]),style:r,ref:o,...s,children:t})});ph.displayName="Panel";function p9({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:i.jsx(ph,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:i.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const m9=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Rd=e=>e.id;function g9(e,t){return lt(e.selectedNodes.map(Rd),t.selectedNodes.map(Rd))&&lt(e.selectedEdges.map(Rd),t.selectedEdges.map(Rd))}function y9({onSelectionChange:e}){const t=ut(),{selectedNodes:n,selectedEdges:r}=Ge(m9,g9);return S.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,r,e]),null}const x9=e=>!!e.onSelectionChangeHandlers;function b9({onSelectionChange:e}){const t=Ge(x9);return e||t?i.jsx(y9,{onSelectionChange:e}):null}const FC=[0,0],v9={x:0,y:0,zoom:1},w9=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],F2=[...w9,"rfId"],S9=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),O2={translateExtent:Cc,nodeOrigin:FC,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function k9(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:l,reset:u,setDefaultNodesAndEdges:d}=Ge(S9,lt),f=ut();S.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{p.current=O2,u()}),[]);const p=S.useRef(O2);return S.useEffect(()=>{for(const h of F2){const g=e[h],y=p.current[h];g!==y&&(typeof e[h]>"u"||(h==="nodes"?t(g):h==="edges"?n(g):h==="minZoom"?r(g):h==="maxZoom"?s(g):h==="translateExtent"?o(g):h==="nodeExtent"?l(g):h==="ariaLabelConfig"?f.setState({ariaLabelConfig:a7(g)}):h==="fitView"?f.setState({fitViewQueued:g}):h==="fitViewOptions"?f.setState({fitViewOptions:g}):f.setState({[h]:g})))}p.current=e},F2.map(h=>e[h])),null}function z2(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function j9(e){var r;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const s=z2(),o=()=>n(s!=null&&s.matches?"dark":"light");return o(),s==null||s.addEventListener("change",o),()=>{s==null||s.removeEventListener("change",o)}},[e]),t!==null?t:(r=z2())!=null&&r.matches?"dark":"light"}const $2=typeof document<"u"?document:null;function Tc(e=null,t={target:$2,actInsideInputWithModifier:!0}){const[n,r]=S.useState(!1),s=S.useRef(!1),o=S.useRef(new Set([])),[l,u]=S.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((h,g)=>h.concat(...g),[]);return[f,p]}return[[],[]]},[e]);return S.useEffect(()=>{const d=(t==null?void 0:t.target)??$2,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const p=y=>{var v,j;if(s.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!s.current||s.current&&!f)&&pC(y))return!1;const w=B2(y.code,u);if(o.current.add(y[w]),L2(l,o.current,!1)){const T=((j=(v=y.composedPath)==null?void 0:v.call(y))==null?void 0:j[0])||y.target,k=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";t.preventDefault!==!1&&(s.current||!k)&&y.preventDefault(),r(!0)}},h=y=>{const b=B2(y.code,u);L2(l,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(y[b]),y.key==="Meta"&&o.current.clear(),s.current=!1},g=()=>{o.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",p),d==null||d.addEventListener("keyup",h),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d==null||d.removeEventListener("keydown",p),d==null||d.removeEventListener("keyup",h),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function L2(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function B2(e,t){return t.includes(e)?"code":"key"}const C9=()=>{const e=ut();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,o],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:o,maxZoom:l,panZoom:u}=e.getState(),d=Uy(t,r,s,o,l,(n==null?void 0:n.padding)??.1);return u?(await u.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:o,domNode:l}=e.getState();if(!l)return t;const{x:u,y:d}=l.getBoundingClientRect(),f={x:t.x-u,y:t.y-d},p=n.snapGrid??s,h=n.snapToGrid??o;return qc(f,r,h,p)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:o}=r.getBoundingClientRect(),l=Rf(t,n);return{x:l.x+s,y:l.y+o}}}),[])};function OC(e,t){const n=[],r=new Map,s=[];for(const o of e)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const l=r.get(o.id);l?l.push(o):r.set(o.id,[o])}for(const o of t){const l=r.get(o.id);if(!l){n.push(o);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const u={...o};for(const d of l)_9(d,u);n.push(u)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function _9(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function zC(e,t){return OC(e,t)}function $C(e,t){return OC(e,t)}function Hi(e,t){return{id:e,type:"select",selected:t}}function ua(e,t=new Set,n=!1){const r=[];for(const[s,o]of e){const l=t.has(s);!(o.selected===void 0&&!l)&&o.selected!==l&&(n&&(o.selected=l),r.push(Hi(o.id,l)))}return r}function W2({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,l]of e.entries()){const u=t.get(l.id),d=((s=u==null?void 0:u.internals)==null?void 0:s.userNode)??u;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function V2(e){return{id:e.id,type:"remove"}}const U2=e=>JB(e),E9=e=>oC(e);function LC(e){return S.forwardRef(e)}const N9=typeof window<"u"?S.useLayoutEffect:S.useEffect;function H2(e){const[t,n]=S.useState(BigInt(0)),[r]=S.useState(()=>T9(()=>n(s=>s+BigInt(1))));return N9(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function T9(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const BC=S.createContext(null);function R9({children:e}){const t=ut(),n=S.useCallback(u=>{const{nodes:d=[],setNodes:f,hasDefaultNodes:p,onNodesChange:h,nodeLookup:g,fitViewQueued:y,onNodesChangeMiddlewareMap:b}=t.getState();let w=d;for(const j of u)w=typeof j=="function"?j(w):j;let v=W2({items:w,lookup:g});for(const j of b.values())v=j(v);p&&f(w),v.length>0?h==null||h(v):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:j,nodes:T,setNodes:k}=t.getState();j&&k(T)})},[]),r=H2(n),s=S.useCallback(u=>{const{edges:d=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:g}=t.getState();let y=d;for(const b of u)y=typeof b=="function"?b(y):b;p?f(y):h&&h(W2({items:y,lookup:g}))},[]),o=H2(s),l=S.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return i.jsx(BC.Provider,{value:l,children:e})}function I9(){const e=S.useContext(BC);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const A9=e=>!!e.panZoom;function Jy(){const e=C9(),t=ut(),n=I9(),r=Ge(A9),s=S.useMemo(()=>{const o=h=>t.getState().nodeLookup.get(h),l=h=>{n.nodeQueue.push(h)},u=h=>{n.edgeQueue.push(h)},d=h=>{var j,T;const{nodeLookup:g,nodeOrigin:y}=t.getState(),b=U2(h)?h:g.get(h.id),w=b.parentId?fC(b.position,b.measured,b.parentId,g,y):b.position,v={...b,position:w,width:((j=b.measured)==null?void 0:j.width)??b.width,height:((T=b.measured)==null?void 0:T.height)??b.height};return Ta(v)},f=(h,g,y={replace:!1})=>{l(b=>b.map(w=>{if(w.id===h){const v=typeof g=="function"?g(w):g;return y.replace&&U2(v)?v:{...w,...v}}return w}))},p=(h,g,y={replace:!1})=>{u(b=>b.map(w=>{if(w.id===h){const v=typeof g=="function"?g(w):g;return y.replace&&E9(v)?v:{...w,...v}}return w}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var g;return(g=o(h))==null?void 0:g.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(g=>({...g}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:l,setEdges:u,addNodes:h=>{const g=Array.isArray(h)?h:[h];n.nodeQueue.push(y=>[...y,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:y}=t.getState(),[b,w,v]=y;return{nodes:h.map(j=>({...j})),edges:g.map(j=>({...j})),viewport:{x:b,y:w,zoom:v}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:y,edges:b,onNodesDelete:w,onEdgesDelete:v,triggerNodeChanges:j,triggerEdgeChanges:T,onDelete:k,onBeforeDelete:_}=t.getState(),{nodes:N,edges:E}=await n7({nodesToRemove:h,edgesToRemove:g,nodes:y,edges:b,onBeforeDelete:_}),R=E.length>0,A=N.length>0;if(R){const P=E.map(V2);v==null||v(E),T(P)}if(A){const P=N.map(V2);w==null||w(N),j(P)}return(A||R)&&(k==null||k({nodes:N,edges:E})),{deletedNodes:N,deletedEdges:E}},getIntersectingNodes:(h,g=!0,y)=>{const b=g2(h),w=b?h:d(h),v=y!==void 0;return w?(y||t.getState().nodes).filter(j=>{const T=t.getState().nodeLookup.get(j.id);if(T&&!b&&(j.id===h.id||!T.internals.positionAbsolute))return!1;const k=Ta(v?j:T),_=Ec(k,w);return g&&_>0||_>=k.width*k.height||_>=w.width*w.height}):[]},isNodeIntersecting:(h,g,y=!0)=>{const w=g2(h)?h:d(h);if(!w)return!1;const v=Ec(w,g);return y&&v>0||v>=g.width*g.height||v>=w.width*w.height},updateNode:f,updateNodeData:(h,g,y={replace:!1})=>{f(h,b=>{const w=typeof g=="function"?g(b):g;return y.replace?{...b,data:w}:{...b,data:{...b.data,...w}}},y)},updateEdge:p,updateEdgeData:(h,g,y={replace:!1})=>{p(h,b=>{const w=typeof g=="function"?g(b):g;return y.replace?{...b,data:w}:{...b,data:{...b.data,...w}}},y)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return QB(h,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:h,id:g,nodeId:y})=>{var b;return Array.from(((b=t.getState().connectionLookup.get(`${y}-${h}${g?`-${g}`:""}`))==null?void 0:b.values())??[])},getNodeConnections:({type:h,handleId:g,nodeId:y})=>{var b;return Array.from(((b=t.getState().connectionLookup.get(`${y}${h?g?`-${h}-${g}`:`-${h}`:""}`))==null?void 0:b.values())??[])},fitView:async h=>{const g=t.getState().fitViewResolver??o7();return t.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return S.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const q2=e=>e.selected,P9=typeof window<"u"?window:void 0;function M9({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ut(),{deleteElements:r}=Jy(),s=Tc(e,{actInsideInputWithModifier:!1}),o=Tc(t,{target:P9});S.useEffect(()=>{if(s){const{edges:l,nodes:u}=n.getState();r({nodes:u.filter(q2),edges:l.filter(q2)}),n.setState({nodesSelectionActive:!1})}},[s]),S.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function D9(e){const t=ut();S.useEffect(()=>{const n=()=>{var s,o,l,u;if(!e.current||!(((o=(s=e.current).checkVisibility)==null?void 0:o.call(s))??!0))return!1;const r=Hy(e.current);(r.height===0||r.width===0)&&((u=(l=t.getState()).onError)==null||u.call(l,"004",qr.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const mh={position:"absolute",width:"100%",height:"100%",top:0,left:0},F9=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function O9({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=eo.Free,zoomOnDoubleClick:l=!0,panOnDrag:u=!0,defaultViewport:d,translateExtent:f,minZoom:p,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:y=!0,children:b,noWheelClassName:w,noPanClassName:v,onViewportChange:j,isControlledViewport:T,paneClickDistance:k,selectionOnDrag:_}){const N=ut(),E=S.useRef(null),{userSelectionActive:R,lib:A,connectionInProgress:P}=Ge(F9,lt),z=Tc(g),L=S.useRef();D9(E);const B=S.useCallback(K=>{j==null||j({x:K[0],y:K[1],zoom:K[2]}),T||N.setState({transform:K})},[j,T]);return S.useEffect(()=>{if(E.current){L.current=W7({domNode:E.current,minZoom:p,maxZoom:h,translateExtent:f,viewport:d,onDraggingChange:$=>N.setState({paneDragging:$}),onPanZoomStart:($,H)=>{const{onViewportChangeStart:M,onMoveStart:U}=N.getState();U==null||U($,H),M==null||M(H)},onPanZoom:($,H)=>{const{onViewportChange:M,onMove:U}=N.getState();U==null||U($,H),M==null||M(H)},onPanZoomEnd:($,H)=>{const{onViewportChangeEnd:M,onMoveEnd:U}=N.getState();U==null||U($,H),M==null||M(H)}});const{x:K,y:V,zoom:J}=L.current.getViewport();return N.setState({panZoom:L.current,transform:[K,V,J],domNode:E.current.closest(".react-flow")}),()=>{var $;($=L.current)==null||$.destroy()}}},[]),S.useEffect(()=>{var K;(K=L.current)==null||K.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:l,panOnDrag:u,zoomActivationKeyPressed:z,preventScrolling:y,noPanClassName:v,userSelectionActive:R,noWheelClassName:w,lib:A,onTransformChange:B,connectionInProgress:P,selectionOnDrag:_,paneClickDistance:k})},[e,t,n,r,s,o,l,u,z,y,v,R,w,A,B,P,_,k]),i.jsx("div",{className:"react-flow__renderer",ref:E,style:mh,children:b})}const z9=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function $9(){const{userSelectionActive:e,userSelectionRect:t}=Ge(z9,lt);return e&&t?i.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const sg=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},L9=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function B9({isSelecting:e,selectionKeyPressed:t,selectionMode:n=_c.Full,panOnDrag:r,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:l,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:p,onPaneMouseEnter:h,onPaneMouseMove:g,onPaneMouseLeave:y,children:b}){const w=ut(),{userSelectionActive:v,elementsSelectable:j,dragging:T,connectionInProgress:k}=Ge(L9,lt),_=j&&(e||v),N=S.useRef(null),E=S.useRef(),R=S.useRef(new Set),A=S.useRef(new Set),P=S.useRef(!1),z=M=>{if(P.current||k){P.current=!1;return}d==null||d(M),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},L=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}f==null||f(M)},B=p?M=>p(M):void 0,K=M=>{P.current&&(M.stopPropagation(),P.current=!1)},V=M=>{var G,Q;const{domNode:U}=w.getState();if(E.current=U==null?void 0:U.getBoundingClientRect(),!E.current)return;const F=M.target===N.current;if(!F&&!!M.target.closest(".nokey")||!e||!(o&&F||t)||M.button!==0||!M.isPrimary)return;(Q=(G=M.target)==null?void 0:G.setPointerCapture)==null||Q.call(G,M.pointerId),P.current=!1;const{x:X,y:ne}=wr(M.nativeEvent,E.current);w.setState({userSelectionRect:{width:0,height:0,startX:X,startY:ne,x:X,y:ne}}),F||(M.stopPropagation(),M.preventDefault())},J=M=>{const{userSelectionRect:U,transform:F,nodeLookup:D,edgeLookup:W,connectionLookup:X,triggerNodeChanges:ne,triggerEdgeChanges:G,defaultEdgeOptions:Q,resetSelectedElements:se}=w.getState();if(!E.current||!U)return;const{x:q,y:ee}=wr(M.nativeEvent,E.current),{startX:ie,startY:le}=U;if(!P.current){const pe=t?0:s;if(Math.hypot(q-ie,ee-le)<=pe)return;se(),l==null||l(M)}P.current=!0;const ue={startX:ie,startY:le,x:q<ie?q:ie,y:ee<le?ee:le,width:Math.abs(q-ie),height:Math.abs(ee-le)},Z=R.current,de=A.current;R.current=new Set(Vy(D,ue,F,n===_c.Partial,!0).map(pe=>pe.id)),A.current=new Set;const he=(Q==null?void 0:Q.selectable)??!0;for(const pe of R.current){const _e=X.get(pe);if(_e)for(const{edgeId:Be}of _e.values()){const je=W.get(Be);je&&(je.selectable??he)&&A.current.add(Be)}}if(!y2(Z,R.current)){const pe=ua(D,R.current,!0);ne(pe)}if(!y2(de,A.current)){const pe=ua(W,A.current);G(pe)}w.setState({userSelectionRect:ue,userSelectionActive:!0,nodesSelectionActive:!1})},$=M=>{var U,F;M.button===0&&((F=(U=M.target)==null?void 0:U.releasePointerCapture)==null||F.call(U,M.pointerId),!v&&M.target===N.current&&w.getState().userSelectionRect&&(z==null||z(M)),w.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(u==null||u(M),w.setState({nodesSelectionActive:R.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return i.jsxs("div",{className:Mt(["react-flow__pane",{draggable:H,dragging:T,selection:e}]),onClick:_?void 0:sg(z,N),onContextMenu:sg(L,N),onWheel:sg(B,N),onPointerEnter:_?void 0:h,onPointerMove:_?J:g,onPointerUp:_?$:void 0,onPointerDownCapture:_?V:void 0,onClickCapture:_?K:void 0,onPointerLeave:y,ref:N,style:mh,children:[b,i.jsx($9,{})]})}function x0({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeLookup:u,onError:d}=t.getState(),f=u.get(e);if(!f){d==null||d("012",qr.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&l)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var p;return(p=r==null?void 0:r.current)==null?void 0:p.blur()})):s([e])}function WC({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,nodeClickDistance:l}){const u=ut(),[d,f]=S.useState(!1),p=S.useRef();return S.useEffect(()=>{p.current=N7({getStoreItems:()=>u.getState(),onNodeMouseDown:h=>{x0({id:h,store:u,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),S.useEffect(()=>{var h,g;if(t)(h=p.current)==null||h.destroy();else if(e.current)return(g=p.current)==null||g.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:s,nodeClickDistance:l}),()=>{var y;(y=p.current)==null||y.destroy()}},[n,r,t,o,e,s]),d}const W9=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function VC(){const e=ut();return S.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:o,nodesDraggable:l,onError:u,updateNodePositions:d,nodeLookup:f,nodeOrigin:p}=e.getState(),h=new Map,g=W9(l),y=s?o[0]:5,b=s?o[1]:5,w=n.direction.x*y*n.factor,v=n.direction.y*b*n.factor;for(const[,j]of f){if(!g(j))continue;let T={x:j.internals.positionAbsolute.x+w,y:j.internals.positionAbsolute.y+v};s&&(T=Hc(T,o));const{position:k,positionAbsolute:_}=aC({nodeId:j.id,nextPosition:T,nodeLookup:f,nodeExtent:r,nodeOrigin:p,onError:u});j.position=k,j.internals.positionAbsolute=_,h.set(j.id,j)}d(h)},[])}const Qy=S.createContext(null),V9=Qy.Provider;Qy.Consumer;const UC=()=>S.useContext(Qy),U9=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),H9=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:o,connection:l}=r,{fromHandle:u,toHandle:d,isValid:f}=l,p=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n,connectingTo:p,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:o===Ea.Strict?(u==null?void 0:u.type)!==n:e!==(u==null?void 0:u.nodeId)||t!==(u==null?void 0:u.id),connectionInProcess:!!u,clickConnectionInProcess:!!s,valid:p&&f}};function q9({type:e="source",position:t=ke.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:u,children:d,className:f,onMouseDown:p,onTouchStart:h,...g},y){var J,$;const b=l||null,w=e==="target",v=ut(),j=UC(),{connectOnClick:T,noPanClassName:k,rfId:_}=Ge(U9,lt),{connectingFrom:N,connectingTo:E,clickConnecting:R,isPossibleEndHandle:A,connectionInProcess:P,clickConnectionInProcess:z,valid:L}=Ge(H9(j,b,e),lt);j||($=(J=v.getState()).onError)==null||$.call(J,"010",qr.error010());const B=H=>{const{defaultEdgeOptions:M,onConnect:U,hasDefaultEdges:F}=v.getState(),D={...M,...H};if(F){const{edges:W,setEdges:X}=v.getState();X(bC(D,W))}U==null||U(D),u==null||u(D)},K=H=>{if(!j)return;const M=mC(H.nativeEvent);if(s&&(M&&H.button===0||!M)){const U=v.getState();y0.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:w,handleId:b,nodeId:j,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:B,isValidConnection:n||U.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}M?p==null||p(H):h==null||h(H)},V=H=>{const{onClickConnectStart:M,onClickConnectEnd:U,connectionClickStartHandle:F,connectionMode:D,isValidConnection:W,lib:X,rfId:ne,nodeLookup:G,connection:Q}=v.getState();if(!j||!F&&!s)return;if(!F){M==null||M(H.nativeEvent,{nodeId:j,handleId:b,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:j,type:e,id:b}});return}const se=hC(H.target),q=n||W,{connection:ee,isValid:ie}=y0.isValid(H.nativeEvent,{handle:{nodeId:j,id:b,type:e},connectionMode:D,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:q,flowId:ne,doc:se,lib:X,nodeLookup:G});ie&&ee&&B(ee);const le=structuredClone(Q);delete le.inProgress,le.toPosition=le.toHandle?le.toHandle.position:null,U==null||U(H,le),v.setState({connectionClickStartHandle:null})};return i.jsx("div",{"data-handleid":b,"data-nodeid":j,"data-handlepos":t,"data-id":`${_}-${j}-${b}-${e}`,className:Mt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,f,{source:!w,target:w,connectable:r,connectablestart:s,connectableend:o,clickconnecting:R,connectingfrom:N,connectingto:E,valid:L,connectionindicator:r&&(!P||A)&&(P||z?o:s)}]),onMouseDown:K,onTouchStart:K,onClick:T?V:void 0,ref:y,...g,children:d})}const It=S.memo(LC(q9));function G9({data:e,isConnectable:t,sourcePosition:n=ke.Bottom}){return i.jsxs(i.Fragment,{children:[e==null?void 0:e.label,i.jsx(It,{type:"source",position:n,isConnectable:t})]})}function K9({data:e,isConnectable:t,targetPosition:n=ke.Top,sourcePosition:r=ke.Bottom}){return i.jsxs(i.Fragment,{children:[i.jsx(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,i.jsx(It,{type:"source",position:r,isConnectable:t})]})}function Y9(){return null}function X9({data:e,isConnectable:t,targetPosition:n=ke.Top}){return i.jsxs(i.Fragment,{children:[i.jsx(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const If={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},G2={input:G9,default:K9,output:X9,group:Y9};function J9(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const Q9=e=>{const{width:t,height:n,x:r,y:s}=Uc(e.nodeLookup,{filter:o=>!!o.selected});return{width:vr(t)?t:null,height:vr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function Z9({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ut(),{width:s,height:o,transformString:l,userSelectionActive:u}=Ge(Q9,lt),d=VC(),f=S.useRef(null);if(S.useEffect(()=>{var g;n||(g=f.current)==null||g.focus({preventScroll:!0})},[n]),WC({nodeRef:f}),u||!s||!o)return null;const p=e?g=>{const y=r.getState().nodes.filter(b=>b.selected);e(g,y)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(If,g.key)&&(g.preventDefault(),d({direction:If[g.key],factor:g.shiftKey?4:1}))};return i.jsx("div",{className:Mt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:i.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:o}})})}const K2=typeof window<"u"?window:void 0,eW=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function HC({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,paneClickDistance:u,deleteKeyCode:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:w,zoomActivationKeyCode:v,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:_,panOnScrollSpeed:N,panOnScrollMode:E,zoomOnDoubleClick:R,panOnDrag:A,defaultViewport:P,translateExtent:z,minZoom:L,maxZoom:B,preventScrolling:K,onSelectionContextMenu:V,noWheelClassName:J,noPanClassName:$,disableKeyboardA11y:H,onViewportChange:M,isControlledViewport:U}){const{nodesSelectionActive:F,userSelectionActive:D}=Ge(eW,lt),W=Tc(f,{target:K2}),X=Tc(w,{target:K2}),ne=X||A,G=X||_,Q=p&&ne!==!0,se=W||D||Q;return M9({deleteKeyCode:d,multiSelectionKeyCode:b}),i.jsx(O9,{onPaneContextMenu:o,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:G,panOnScrollSpeed:N,panOnScrollMode:E,zoomOnDoubleClick:R,panOnDrag:!W&&ne,defaultViewport:P,translateExtent:z,minZoom:L,maxZoom:B,zoomActivationKeyCode:v,preventScrolling:K,noWheelClassName:J,noPanClassName:$,onViewportChange:M,isControlledViewport:U,paneClickDistance:u,selectionOnDrag:Q,children:i.jsxs(B9,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:ne,isSelecting:!!se,selectionMode:h,selectionKeyPressed:W,paneClickDistance:u,selectionOnDrag:Q,children:[e,F&&i.jsx(Z9,{onSelectionContextMenu:V,noPanClassName:$,disableKeyboardA11y:H})]})})}HC.displayName="FlowRenderer";const tW=S.memo(HC),nW=e=>t=>e?Vy(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function rW(e){return Ge(S.useCallback(nW(e),[e]),lt)}const sW=e=>e.updateNodeInternals;function iW(){const e=Ge(sW),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:s.target,force:!0})}),e(r)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function oW({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=ut(),o=S.useRef(null),l=S.useRef(null),u=S.useRef(e.sourcePosition),d=S.useRef(e.targetPosition),f=S.useRef(t),p=n&&!!e.internals.handleBounds;return S.useEffect(()=>{o.current&&!e.hidden&&(!p||l.current!==o.current)&&(l.current&&(r==null||r.unobserve(l.current)),r==null||r.observe(o.current),l.current=o.current)},[p,e.hidden]),S.useEffect(()=>()=>{l.current&&(r==null||r.unobserve(l.current),l.current=null)},[]),S.useEffect(()=>{if(o.current){const h=f.current!==t,g=u.current!==e.sourcePosition,y=d.current!==e.targetPosition;(h||g||y)&&(f.current=t,u.current=e.sourcePosition,d.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function aW({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:o,onDoubleClick:l,nodesDraggable:u,elementsSelectable:d,nodesConnectable:f,nodesFocusable:p,resizeObserver:h,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:b,rfId:w,nodeTypes:v,nodeClickDistance:j,onError:T}){const{node:k,internals:_,isParent:N}=Ge(q=>{const ee=q.nodeLookup.get(e),ie=q.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:ie}},lt);let E=k.type||"default",R=(v==null?void 0:v[E])||G2[E];R===void 0&&(T==null||T("003",qr.error003(E)),E="default",R=(v==null?void 0:v.default)||G2.default);const A=!!(k.draggable||u&&typeof k.draggable>"u"),P=!!(k.selectable||d&&typeof k.selectable>"u"),z=!!(k.connectable||f&&typeof k.connectable>"u"),L=!!(k.focusable||p&&typeof k.focusable>"u"),B=ut(),K=dC(k),V=oW({node:k,nodeType:E,hasDimensions:K,resizeObserver:h}),J=WC({nodeRef:V,disabled:k.hidden||!A,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:j}),$=VC();if(k.hidden)return null;const H=Cs(k),M=J9(k),U=P||A||t||n||r||s,F=n?q=>n(q,{..._.userNode}):void 0,D=r?q=>r(q,{..._.userNode}):void 0,W=s?q=>s(q,{..._.userNode}):void 0,X=o?q=>o(q,{..._.userNode}):void 0,ne=l?q=>l(q,{..._.userNode}):void 0,G=q=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ie}=B.getState();P&&(!ee||!A||ie>0)&&x0({id:e,store:B,nodeRef:V}),t&&t(q,{..._.userNode})},Q=q=>{if(!(pC(q.nativeEvent)||b)){if(nC.includes(q.key)&&P){const ee=q.key==="Escape";x0({id:e,store:B,unselect:ee,nodeRef:V})}else if(A&&k.selected&&Object.prototype.hasOwnProperty.call(If,q.key)){q.preventDefault();const{ariaLabelConfig:ee}=B.getState();B.setState({ariaLiveMessage:ee["node.a11yDescription.ariaLiveMessage"]({direction:q.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),$({direction:If[q.key],factor:q.shiftKey?4:1})}}},se=()=>{var de;if(b||!((de=V.current)!=null&&de.matches(":focus-visible")))return;const{transform:q,width:ee,height:ie,autoPanOnNodeFocus:le,setCenter:ue}=B.getState();if(!le)return;Vy(new Map([[e,k]]),{x:0,y:0,width:ee,height:ie},q,!0).length>0||ue(k.position.x+H.width/2,k.position.y+H.height/2,{zoom:q[2]})};return i.jsx("div",{className:Mt(["react-flow__node",`react-flow__node-${E}`,{[y]:A},k.className,{selected:k.selected,selectable:P,parent:N,draggable:A,dragging:J}]),ref:V,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:U?"all":"none",visibility:K?"visible":"hidden",...k.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:D,onMouseLeave:W,onContextMenu:X,onClick:G,onDoubleClick:ne,onKeyDown:L?Q:void 0,tabIndex:L?0:void 0,onFocus:L?se:void 0,role:k.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${MC}-${w}`,"aria-label":k.ariaLabel,...k.domAttributes,children:i.jsx(V9,{value:e,children:i.jsx(R,{id:e,data:k.data,type:E,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:k.selected??!1,selectable:P,draggable:A,deletable:k.deletable??!0,isConnectable:z,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:J,dragHandle:k.dragHandle,zIndex:_.z,parentId:k.parentId,...H})})})}var lW=S.memo(aW);const cW=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function qC(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:o}=Ge(cW,lt),l=rW(e.onlyRenderVisibleElements),u=iW();return i.jsx("div",{className:"react-flow__nodes",style:mh,children:l.map(d=>i.jsx(lW,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:o},d))})}qC.displayName="NodeRenderer";const uW=S.memo(qC);function dW(e){return Ge(S.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),l=n.nodeLookup.get(s.target);o&&l&&u7({sourceNode:o,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),lt)}const fW=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return i.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},hW=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return i.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Y2={[Nf.Arrow]:fW,[Nf.ArrowClosed]:hW};function pW(e){const t=ut();return S.useMemo(()=>{var s,o;return Object.prototype.hasOwnProperty.call(Y2,e)?Y2[e]:((o=(s=t.getState()).onError)==null||o.call(s,"009",qr.error009(e)),null)},[e])}const mW=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const d=pW(t);return d?i.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:u,refX:"0",refY:"0",children:i.jsx(d,{color:n,strokeWidth:l})}):null},GC=({defaultColor:e,rfId:t})=>{const n=Ge(o=>o.edges),r=Ge(o=>o.defaultEdgeOptions),s=S.useMemo(()=>y7(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?i.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:i.jsx("defs",{children:s.map(o=>i.jsx(mW,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};GC.displayName="MarkerDefinitions";var gW=S.memo(GC);function KC({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...p}){const[h,g]=S.useState({x:1,y:0,width:0,height:0}),y=Mt(["react-flow__edge-textwrapper",f]),b=S.useRef(null);return S.useEffect(()=>{if(b.current){const w=b.current.getBBox();g({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?i.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:y,visibility:h.width?"visible":"hidden",...p,children:[s&&i.jsx("rect",{width:h.width+2*l[0],x:-l[0],y:-l[1],height:h.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:u,ry:u}),i.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:b,style:r,children:n}),d]}):null}KC.displayName="EdgeText";const yW=S.memo(KC);function gh({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,interactionWidth:f=20,...p}){return i.jsxs(i.Fragment,{children:[i.jsx("path",{...p,d:e,fill:"none",className:Mt(["react-flow__edge-path",p.className])}),f?i.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&vr(t)&&vr(n)?i.jsx(yW,{x:t,y:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function X2({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===ke.Left||e===ke.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function YC({sourceX:e,sourceY:t,sourcePosition:n=ke.Bottom,targetX:r,targetY:s,targetPosition:o=ke.Top}){const[l,u]=X2({pos:n,x1:e,y1:t,x2:r,y2:s}),[d,f]=X2({pos:o,x1:r,y1:s,x2:e,y2:t}),[p,h,g,y]=gC({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${e},${t} C${l},${u} ${d},${f} ${r},${s}`,p,h,g,y]}function XC(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:w,markerStart:v,interactionWidth:j})=>{const[T,k,_]=YC({sourceX:n,sourceY:r,sourcePosition:l,targetX:s,targetY:o,targetPosition:u}),N=e.isInternal?void 0:t;return i.jsx(gh,{id:N,path:T,labelX:k,labelY:_,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:w,markerStart:v,interactionWidth:j})})}const xW=XC({isInternal:!1}),JC=XC({isInternal:!0});xW.displayName="SimpleBezierEdge";JC.displayName="SimpleBezierEdgeInternal";function QC(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:g,sourcePosition:y=ke.Bottom,targetPosition:b=ke.Top,markerEnd:w,markerStart:v,pathOptions:j,interactionWidth:T})=>{const[k,_,N]=p0({sourceX:n,sourceY:r,sourcePosition:y,targetX:s,targetY:o,targetPosition:b,borderRadius:j==null?void 0:j.borderRadius,offset:j==null?void 0:j.offset,stepPosition:j==null?void 0:j.stepPosition}),E=e.isInternal?void 0:t;return i.jsx(gh,{id:E,path:k,labelX:_,labelY:N,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:w,markerStart:v,interactionWidth:T})})}const ZC=QC({isInternal:!1}),e_=QC({isInternal:!0});ZC.displayName="SmoothStepEdge";e_.displayName="SmoothStepEdgeInternal";function t_(e){return S.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return i.jsx(ZC,{...n,id:r,pathOptions:S.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const bW=t_({isInternal:!1}),n_=t_({isInternal:!0});bW.displayName="StepEdge";n_.displayName="StepEdgeInternal";function r_(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,interactionWidth:w})=>{const[v,j,T]=vC({sourceX:n,sourceY:r,targetX:s,targetY:o}),k=e.isInternal?void 0:t;return i.jsx(gh,{id:k,path:v,labelX:j,labelY:T,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:b,interactionWidth:w})})}const vW=r_({isInternal:!1}),s_=r_({isInternal:!0});vW.displayName="StraightEdge";s_.displayName="StraightEdgeInternal";function i_(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:l=ke.Bottom,targetPosition:u=ke.Top,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:w,markerStart:v,pathOptions:j,interactionWidth:T})=>{const[k,_,N]=yC({sourceX:n,sourceY:r,sourcePosition:l,targetX:s,targetY:o,targetPosition:u,curvature:j==null?void 0:j.curvature}),E=e.isInternal?void 0:t;return i.jsx(gh,{id:E,path:k,labelX:_,labelY:N,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:w,markerStart:v,interactionWidth:T})})}const wW=i_({isInternal:!1}),o_=i_({isInternal:!0});wW.displayName="BezierEdge";o_.displayName="BezierEdgeInternal";const J2={default:o_,straight:s_,step:n_,smoothstep:e_,simplebezier:JC},Q2={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},SW=(e,t,n)=>n===ke.Left?e-t:n===ke.Right?e+t:e,kW=(e,t,n)=>n===ke.Top?e-t:n===ke.Bottom?e+t:e,Z2="react-flow__edgeupdater";function eS({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:u}){return i.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:Mt([Z2,`${Z2}-${u}`]),cx:SW(t,r,e),cy:kW(n,r,e),r,stroke:"transparent",fill:"transparent"})}function jW({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,setReconnecting:g,setUpdateHover:y}){const b=ut(),w=(_,N)=>{if(_.button!==0)return;const{autoPanOnConnect:E,domNode:R,isValidConnection:A,connectionMode:P,connectionRadius:z,lib:L,onConnectStart:B,onConnectEnd:K,cancelConnection:V,nodeLookup:J,rfId:$,panBy:H,updateConnection:M}=b.getState(),U=N.type==="target",F=(X,ne)=>{g(!1),h==null||h(X,n,N.type,ne)},D=X=>f==null?void 0:f(n,X),W=(X,ne)=>{g(!0),p==null||p(_,n,N.type),B==null||B(X,ne)};y0.onPointerDown(_.nativeEvent,{autoPanOnConnect:E,connectionMode:P,connectionRadius:z,domNode:R,handleId:N.id,nodeId:N.nodeId,nodeLookup:J,isTarget:U,edgeUpdaterType:N.type,lib:L,flowId:$,cancelConnection:V,panBy:H,isValidConnection:A,onConnect:D,onConnectStart:W,onConnectEnd:K,onReconnectEnd:F,updateConnection:M,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},v=_=>w(_,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),j=_=>w(_,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>y(!0),k=()=>y(!1);return i.jsxs(i.Fragment,{children:[(e===!0||e==="source")&&i.jsx(eS,{position:u,centerX:r,centerY:s,radius:t,onMouseDown:v,onMouseEnter:T,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&i.jsx(eS,{position:d,centerX:o,centerY:l,radius:t,onMouseDown:j,onMouseEnter:T,onMouseOut:k,type:"target"})]})}function CW({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:o,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,reconnectRadius:p,onReconnect:h,onReconnectStart:g,onReconnectEnd:y,rfId:b,edgeTypes:w,noPanClassName:v,onError:j,disableKeyboardA11y:T}){let k=Ge(ue=>ue.edgeLookup.get(e));const _=Ge(ue=>ue.defaultEdgeOptions);k=_?{..._,...k}:k;let N=k.type||"default",E=(w==null?void 0:w[N])||J2[N];E===void 0&&(j==null||j("011",qr.error011(N)),N="default",E=(w==null?void 0:w.default)||J2.default);const R=!!(k.focusable||t&&typeof k.focusable>"u"),A=typeof h<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),P=!!(k.selectable||r&&typeof k.selectable>"u"),z=S.useRef(null),[L,B]=S.useState(!1),[K,V]=S.useState(!1),J=ut(),{zIndex:$,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W}=Ge(S.useCallback(ue=>{const Z=ue.nodeLookup.get(k.source),de=ue.nodeLookup.get(k.target);if(!Z||!de)return{zIndex:k.zIndex,...Q2};const he=g7({id:e,sourceNode:Z,targetNode:de,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:ue.connectionMode,onError:j});return{zIndex:c7({selected:k.selected,zIndex:k.zIndex,sourceNode:Z,targetNode:de,elevateOnSelect:ue.elevateEdgesOnSelect,zIndexMode:ue.zIndexMode}),...he||Q2}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),lt),X=S.useMemo(()=>k.markerStart?`url('#${m0(k.markerStart,b)}')`:void 0,[k.markerStart,b]),ne=S.useMemo(()=>k.markerEnd?`url('#${m0(k.markerEnd,b)}')`:void 0,[k.markerEnd,b]);if(k.hidden||H===null||M===null||U===null||F===null)return null;const G=ue=>{var pe;const{addSelectedEdges:Z,unselectNodesAndEdges:de,multiSelectionActive:he}=J.getState();P&&(J.setState({nodesSelectionActive:!1}),k.selected&&he?(de({nodes:[],edges:[k]}),(pe=z.current)==null||pe.blur()):Z([e])),s&&s(ue,k)},Q=o?ue=>{o(ue,{...k})}:void 0,se=l?ue=>{l(ue,{...k})}:void 0,q=u?ue=>{u(ue,{...k})}:void 0,ee=d?ue=>{d(ue,{...k})}:void 0,ie=f?ue=>{f(ue,{...k})}:void 0,le=ue=>{var Z;if(!T&&nC.includes(ue.key)&&P){const{unselectNodesAndEdges:de,addSelectedEdges:he}=J.getState();ue.key==="Escape"?((Z=z.current)==null||Z.blur(),de({edges:[k]})):he([e])}};return i.jsx("svg",{style:{zIndex:$},children:i.jsxs("g",{className:Mt(["react-flow__edge",`react-flow__edge-${N}`,k.className,v,{selected:k.selected,animated:k.animated,inactive:!P&&!s,updating:L,selectable:P}]),onClick:G,onDoubleClick:Q,onContextMenu:se,onMouseEnter:q,onMouseMove:ee,onMouseLeave:ie,onKeyDown:R?le:void 0,tabIndex:R?0:void 0,role:k.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":R?`${DC}-${b}`:void 0,ref:z,...k.domAttributes,children:[!K&&i.jsx(E,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:P,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:X,markerEnd:ne,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),A&&i.jsx(jW,{edge:k,isReconnectable:A,reconnectRadius:p,onReconnect:h,onReconnectStart:g,onReconnectEnd:y,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W,setUpdateHover:B,setReconnecting:V})]})})}var _W=S.memo(CW);const EW=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function a_({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:o,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:b,disableKeyboardA11y:w}){const{edgesFocusable:v,edgesReconnectable:j,elementsSelectable:T,onError:k}=Ge(EW,lt),_=dW(t);return i.jsxs("div",{className:"react-flow__edges",children:[i.jsx(gW,{defaultColor:e,rfId:n}),_.map(N=>i.jsx(_W,{id:N,edgesFocusable:v,edgesReconnectable:j,elementsSelectable:T,noPanClassName:s,onReconnect:o,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onClick:p,reconnectRadius:h,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:b,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:w},N))]})}a_.displayName="EdgeRenderer";const NW=S.memo(a_),TW=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function RW({children:e}){const t=Ge(TW);return i.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function IW(e){const t=Jy(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const AW=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function PW(e){const t=Ge(AW),n=ut();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function MW(e){return e.connection.inProgress?{...e.connection,to:qc(e.connection.to,e.transform)}:{...e.connection}}function DW(e){return MW}function FW(e){const t=DW();return Ge(t,lt)}const OW=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function zW({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:o,height:l,isValid:u,inProgress:d}=Ge(OW,lt);return!(o&&s&&d)?null:i.jsx("svg",{style:e,width:o,height:l,className:"react-flow__connectionline react-flow__container",children:i.jsx("g",{className:Mt(["react-flow__connection",iC(u)]),children:i.jsx(l_,{style:t,type:n,CustomComponent:r,isValid:u})})})}const l_=({style:e,type:t=ri.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:o,fromNode:l,fromHandle:u,fromPosition:d,to:f,toNode:p,toHandle:h,toPosition:g,pointer:y}=FW();if(!s)return;if(n)return i.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:u,fromX:o.x,fromY:o.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:iC(r),toNode:p,toHandle:h,pointer:y});let b="";const w={sourceX:o.x,sourceY:o.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(t){case ri.Bezier:[b]=yC(w);break;case ri.SimpleBezier:[b]=YC(w);break;case ri.Step:[b]=p0({...w,borderRadius:0});break;case ri.SmoothStep:[b]=p0(w);break;default:[b]=vC(w)}return i.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};l_.displayName="ConnectionLine";const $W={};function tS(e=$W){S.useRef(e),ut(),S.useEffect(()=>{},[e])}function LW(){ut(),S.useRef(!1),S.useEffect(()=>{},[])}function c_({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:w,connectionLineComponent:v,connectionLineContainerStyle:j,selectionKeyCode:T,selectionOnDrag:k,selectionMode:_,multiSelectionKeyCode:N,panActivationKeyCode:E,zoomActivationKeyCode:R,deleteKeyCode:A,onlyRenderVisibleElements:P,elementsSelectable:z,defaultViewport:L,translateExtent:B,minZoom:K,maxZoom:V,preventScrolling:J,defaultMarkerColor:$,zoomOnScroll:H,zoomOnPinch:M,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:D,zoomOnDoubleClick:W,panOnDrag:X,onPaneClick:ne,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:se,onPaneScroll:q,onPaneContextMenu:ee,paneClickDistance:ie,nodeClickDistance:le,onEdgeContextMenu:ue,onEdgeMouseEnter:Z,onEdgeMouseMove:de,onEdgeMouseLeave:he,reconnectRadius:pe,onReconnect:_e,onReconnectStart:Be,onReconnectEnd:je,noDragClassName:He,noWheelClassName:dt,noPanClassName:We,disableKeyboardA11y:St,nodeExtent:Tn,rfId:Vn,viewport:kt,onViewportChange:Dt}){return tS(e),tS(t),LW(),IW(n),PW(kt),i.jsx(tW,{onPaneClick:ne,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:se,onPaneContextMenu:ee,onPaneScroll:q,paneClickDistance:ie,deleteKeyCode:A,selectionKeyCode:T,selectionOnDrag:k,selectionMode:_,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:N,panActivationKeyCode:E,zoomActivationKeyCode:R,elementsSelectable:z,zoomOnScroll:H,zoomOnPinch:M,zoomOnDoubleClick:W,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:D,panOnDrag:X,defaultViewport:L,translateExtent:B,minZoom:K,maxZoom:V,onSelectionContextMenu:h,preventScrolling:J,noDragClassName:He,noWheelClassName:dt,noPanClassName:We,disableKeyboardA11y:St,onViewportChange:Dt,isControlledViewport:!!kt,children:i.jsxs(RW,{children:[i.jsx(NW,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:_e,onReconnectStart:Be,onReconnectEnd:je,onlyRenderVisibleElements:P,onEdgeContextMenu:ue,onEdgeMouseEnter:Z,onEdgeMouseMove:de,onEdgeMouseLeave:he,reconnectRadius:pe,defaultMarkerColor:$,noPanClassName:We,disableKeyboardA11y:St,rfId:Vn}),i.jsx(zW,{style:w,type:b,component:v,containerStyle:j}),i.jsx("div",{className:"react-flow__edgelabel-renderer"}),i.jsx(uW,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:le,onlyRenderVisibleElements:P,noPanClassName:We,noDragClassName:He,disableKeyboardA11y:St,nodeExtent:Tn,rfId:Vn}),i.jsx("div",{className:"react-flow__viewport-portal"})]})})}c_.displayName="GraphView";const BW=S.memo(c_),nS=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d=.5,maxZoom:f=2,nodeOrigin:p,nodeExtent:h,zIndexMode:g="basic"}={})=>{const y=new Map,b=new Map,w=new Map,v=new Map,j=r??t??[],T=n??e??[],k=p??[0,0],_=h??Cc;kC(w,v,j);const N=g0(T,y,b,{nodeOrigin:k,nodeExtent:_,zIndexMode:g});let E=[0,0,1];if(l&&s&&o){const R=Uc(y,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:A,y:P,zoom:z}=Uy(R,s,o,d,f,(u==null?void 0:u.padding)??.1);E=[A,P,z]}return{rfId:"1",width:s??0,height:o??0,transform:E,nodes:T,nodesInitialized:N,nodeLookup:y,parentLookup:b,edges:j,edgeLookup:v,connectionLookup:w,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:d,maxZoom:f,translateExtent:Cc,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ea.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:u,fitViewResolver:null,connection:{...sC},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:r7,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:rC,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},WW=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:h,zIndexMode:g})=>o9((y,b)=>{async function w(){const{nodeLookup:v,panZoom:j,fitViewOptions:T,fitViewResolver:k,width:_,height:N,minZoom:E,maxZoom:R}=b();j&&(await t7({nodes:v,width:_,height:N,panZoom:j,minZoom:E,maxZoom:R},T),k==null||k.resolve(!0),y({fitViewResolver:null}))}return{...nS({nodes:e,edges:t,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:h,defaultNodes:n,defaultEdges:r,zIndexMode:g}),setNodes:v=>{const{nodeLookup:j,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:_,fitViewQueued:N,zIndexMode:E}=b(),R=g0(v,j,T,{nodeOrigin:k,nodeExtent:h,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:E});N&&R?(w(),y({nodes:v,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:v,nodesInitialized:R})},setEdges:v=>{const{connectionLookup:j,edgeLookup:T}=b();kC(j,T,v),y({edges:v})},setDefaultNodesAndEdges:(v,j)=>{if(v){const{setNodes:T}=b();T(v),y({hasDefaultNodes:!0})}if(j){const{setEdges:T}=b();T(j),y({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:j,nodeLookup:T,parentLookup:k,domNode:_,nodeOrigin:N,nodeExtent:E,debug:R,fitViewQueued:A,zIndexMode:P}=b(),{changes:z,updatedInternals:L}=j7(v,T,k,_,N,E,P);L&&(v7(T,k,{nodeOrigin:N,nodeExtent:E,zIndexMode:P}),A?(w(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),(z==null?void 0:z.length)>0&&(R&&console.log("React Flow: trigger node changes",z),j==null||j(z)))},updateNodePositions:(v,j=!1)=>{const T=[];let k=[];const{nodeLookup:_,triggerNodeChanges:N,connection:E,updateConnection:R,onNodesChangeMiddlewareMap:A}=b();for(const[P,z]of v){const L=_.get(P),B=!!(L!=null&&L.expandParent&&(L!=null&&L.parentId)&&(z!=null&&z.position)),K={id:P,type:"position",position:B?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:j};if(L&&E.inProgress&&E.fromNode.id===L.id){const V=ao(L,E.fromHandle,ke.Left,!0);R({...E,from:V})}B&&L.parentId&&T.push({id:P,parentId:L.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),k.push(K)}if(T.length>0){const{parentLookup:P,nodeOrigin:z}=b(),L=Xy(T,_,P,z);k.push(...L)}for(const P of A.values())k=P(k);N(k)},triggerNodeChanges:v=>{const{onNodesChange:j,setNodes:T,nodes:k,hasDefaultNodes:_,debug:N}=b();if(v!=null&&v.length){if(_){const E=zC(v,k);T(E)}N&&console.log("React Flow: trigger node changes",v),j==null||j(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:j,setEdges:T,edges:k,hasDefaultEdges:_,debug:N}=b();if(v!=null&&v.length){if(_){const E=$C(v,k);T(E)}N&&console.log("React Flow: trigger edge changes",v),j==null||j(v)}},addSelectedNodes:v=>{const{multiSelectionActive:j,edgeLookup:T,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(j){const E=v.map(R=>Hi(R,!0));_(E);return}_(ua(k,new Set([...v]),!0)),N(ua(T))},addSelectedEdges:v=>{const{multiSelectionActive:j,edgeLookup:T,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(j){const E=v.map(R=>Hi(R,!0));N(E);return}N(ua(T,new Set([...v]))),_(ua(k,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:j}={})=>{const{edges:T,nodes:k,nodeLookup:_,triggerNodeChanges:N,triggerEdgeChanges:E}=b(),R=v||k,A=j||T,P=R.map(L=>{const B=_.get(L.id);return B&&(B.selected=!1),Hi(L.id,!1)}),z=A.map(L=>Hi(L.id,!1));N(P),E(z)},setMinZoom:v=>{const{panZoom:j,maxZoom:T}=b();j==null||j.setScaleExtent([v,T]),y({minZoom:v})},setMaxZoom:v=>{const{panZoom:j,minZoom:T}=b();j==null||j.setScaleExtent([T,v]),y({maxZoom:v})},setTranslateExtent:v=>{var j;(j=b().panZoom)==null||j.setTranslateExtent(v),y({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:j,triggerNodeChanges:T,triggerEdgeChanges:k,elementsSelectable:_}=b();if(!_)return;const N=j.reduce((R,A)=>A.selected?[...R,Hi(A.id,!1)]:R,[]),E=v.reduce((R,A)=>A.selected?[...R,Hi(A.id,!1)]:R,[]);T(N),k(E)},setNodeExtent:v=>{const{nodes:j,nodeLookup:T,parentLookup:k,nodeOrigin:_,elevateNodesOnSelect:N,nodeExtent:E,zIndexMode:R}=b();v[0][0]===E[0][0]&&v[0][1]===E[0][1]&&v[1][0]===E[1][0]&&v[1][1]===E[1][1]||(g0(j,T,k,{nodeOrigin:_,nodeExtent:v,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:R}),y({nodeExtent:v}))},panBy:v=>{const{transform:j,width:T,height:k,panZoom:_,translateExtent:N}=b();return C7({delta:v,panZoom:_,transform:j,translateExtent:N,width:T,height:k})},setCenter:async(v,j,T)=>{const{width:k,height:_,maxZoom:N,panZoom:E}=b();if(!E)return Promise.resolve(!1);const R=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:N;return await E.setViewport({x:k/2-v*R,y:_/2-j*R,zoom:R},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...sC}})},updateConnection:v=>{y({connection:v})},reset:()=>y({...nS()})}},Object.is);function VW({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:o,initialMinZoom:l,initialMaxZoom:u,initialFitViewOptions:d,fitView:f,nodeOrigin:p,nodeExtent:h,zIndexMode:g,children:y}){const[b]=S.useState(()=>WW({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:f,minZoom:l,maxZoom:u,fitViewOptions:d,nodeOrigin:p,nodeExtent:h,zIndexMode:g}));return i.jsx(a9,{value:b,children:i.jsx(R9,{children:y})})}function UW({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:o,height:l,fitView:u,fitViewOptions:d,minZoom:f,maxZoom:p,nodeOrigin:h,nodeExtent:g,zIndexMode:y}){return S.useContext(hh)?i.jsx(i.Fragment,{children:e}):i.jsx(VW,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:o,initialHeight:l,fitView:u,initialFitViewOptions:d,initialMinZoom:f,initialMaxZoom:p,nodeOrigin:h,nodeExtent:g,zIndexMode:y,children:e})}const HW={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qW({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o,edgeTypes:l,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:h,onMoveEnd:g,onConnect:y,onConnectStart:b,onConnectEnd:w,onClickConnectStart:v,onClickConnectEnd:j,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:_,onNodeContextMenu:N,onNodeDoubleClick:E,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:L,onDelete:B,onSelectionChange:K,onSelectionDragStart:V,onSelectionDrag:J,onSelectionDragStop:$,onSelectionContextMenu:H,onSelectionStart:M,onSelectionEnd:U,onBeforeDelete:F,connectionMode:D,connectionLineType:W=ri.Bezier,connectionLineStyle:X,connectionLineComponent:ne,connectionLineContainerStyle:G,deleteKeyCode:Q="Backspace",selectionKeyCode:se="Shift",selectionOnDrag:q=!1,selectionMode:ee=_c.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:le=Nc()?"Meta":"Control",zoomActivationKeyCode:ue=Nc()?"Meta":"Control",snapToGrid:Z,snapGrid:de,onlyRenderVisibleElements:he=!1,selectNodesOnDrag:pe,nodesDraggable:_e,autoPanOnNodeFocus:Be,nodesConnectable:je,nodesFocusable:He,nodeOrigin:dt=FC,edgesFocusable:We,edgesReconnectable:St,elementsSelectable:Tn=!0,defaultViewport:Vn=v9,minZoom:kt=.5,maxZoom:Dt=2,translateExtent:er=Cc,preventScrolling:tr=!0,nodeExtent:qe,defaultMarkerColor:nn="#b1b1b7",zoomOnScroll:xn=!0,zoomOnPinch:nr=!0,panOnScroll:Jr=!1,panOnScrollSpeed:Es=.5,panOnScrollMode:Ns=eo.Free,zoomOnDoubleClick:bi=!0,panOnDrag:Qr=!0,onPaneClick:bn,onPaneMouseEnter:vi,onPaneMouseMove:Nr,onPaneMouseLeave:rr,onPaneScroll:wi,onPaneContextMenu:Le,paneClickDistance:ft=1,nodeClickDistance:jt=0,children:Ut,onReconnect:Tr,onReconnectStart:xt,onReconnectEnd:_t,onEdgeContextMenu:Rr,onEdgeDoubleClick:Ft,onEdgeMouseEnter:un,onEdgeMouseMove:Ir,onEdgeMouseLeave:vn,reconnectRadius:Si=10,onNodesChange:Xa,onEdgesChange:_h,noDragClassName:Eh="nodrag",noWheelClassName:Nh="nowheel",noPanClassName:Ar="nopan",fitView:Ja,fitViewOptions:Qa,connectOnClick:Th,attributionPosition:Jc,proOptions:Qc,defaultEdgeOptions:Zc,elevateNodesOnSelect:eu=!0,elevateEdgesOnSelect:Rh=!1,disableKeyboardA11y:tu=!1,autoPanOnConnect:ht,autoPanOnNodeDrag:Ih,autoPanSpeed:Za,connectionRadius:nu,isValidConnection:ho,onError:Ah,style:ru,id:ki,nodeDragThreshold:Un,connectionDragThreshold:Ph,viewport:Rn,onViewportChange:Mh,width:Dh,height:Fh,colorMode:po="light",debug:mo,onScroll:Pr,ariaLabelConfig:go,zIndexMode:su="basic",...Oh},el){const yo=ki||"1",tl=j9(po),ji=S.useCallback(iu=>{iu.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Pr==null||Pr(iu)},[Pr]);return i.jsx("div",{"data-testid":"rf__wrapper",...Oh,onScroll:ji,style:{...ru,...HW},ref:el,className:Mt(["react-flow",s,tl]),id:ki,role:"application",children:i.jsxs(UW,{nodes:e,edges:t,width:Dh,height:Fh,fitView:Ja,fitViewOptions:Qa,minZoom:kt,maxZoom:Dt,nodeOrigin:dt,nodeExtent:qe,zIndexMode:su,children:[i.jsx(BW,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:_,onNodeContextMenu:N,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:l,connectionLineType:W,connectionLineStyle:X,connectionLineComponent:ne,connectionLineContainerStyle:G,selectionKeyCode:se,selectionOnDrag:q,selectionMode:ee,deleteKeyCode:Q,multiSelectionKeyCode:le,panActivationKeyCode:ie,zoomActivationKeyCode:ue,onlyRenderVisibleElements:he,defaultViewport:Vn,translateExtent:er,minZoom:kt,maxZoom:Dt,preventScrolling:tr,zoomOnScroll:xn,zoomOnPinch:nr,zoomOnDoubleClick:bi,panOnScroll:Jr,panOnScrollSpeed:Es,panOnScrollMode:Ns,panOnDrag:Qr,onPaneClick:bn,onPaneMouseEnter:vi,onPaneMouseMove:Nr,onPaneMouseLeave:rr,onPaneScroll:wi,onPaneContextMenu:Le,paneClickDistance:ft,nodeClickDistance:jt,onSelectionContextMenu:H,onSelectionStart:M,onSelectionEnd:U,onReconnect:Tr,onReconnectStart:xt,onReconnectEnd:_t,onEdgeContextMenu:Rr,onEdgeDoubleClick:Ft,onEdgeMouseEnter:un,onEdgeMouseMove:Ir,onEdgeMouseLeave:vn,reconnectRadius:Si,defaultMarkerColor:nn,noDragClassName:Eh,noWheelClassName:Nh,noPanClassName:Ar,rfId:yo,disableKeyboardA11y:tu,nodeExtent:qe,viewport:Rn,onViewportChange:Mh}),i.jsx(k9,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:b,onConnectEnd:w,onClickConnectStart:v,onClickConnectEnd:j,nodesDraggable:_e,autoPanOnNodeFocus:Be,nodesConnectable:je,nodesFocusable:He,edgesFocusable:We,edgesReconnectable:St,elementsSelectable:Tn,elevateNodesOnSelect:eu,elevateEdgesOnSelect:Rh,minZoom:kt,maxZoom:Dt,nodeExtent:qe,onNodesChange:Xa,onEdgesChange:_h,snapToGrid:Z,snapGrid:de,connectionMode:D,translateExtent:er,connectOnClick:Th,defaultEdgeOptions:Zc,fitView:Ja,fitViewOptions:Qa,onNodesDelete:z,onEdgesDelete:L,onDelete:B,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:P,onSelectionDrag:J,onSelectionDragStart:V,onSelectionDragStop:$,onMove:p,onMoveStart:h,onMoveEnd:g,noPanClassName:Ar,nodeOrigin:dt,rfId:yo,autoPanOnConnect:ht,autoPanOnNodeDrag:Ih,autoPanSpeed:Za,onError:Ah,connectionRadius:nu,isValidConnection:ho,selectNodesOnDrag:pe,nodeDragThreshold:Un,connectionDragThreshold:Ph,onBeforeDelete:F,debug:mo,ariaLabelConfig:go,zIndexMode:su}),i.jsx(b9,{onSelectionChange:K}),Ut,i.jsx(p9,{proOptions:Qc,position:Jc}),i.jsx(h9,{rfId:yo,disableKeyboardA11y:tu})]})})}var GW=LC(qW);function KW(e){const[t,n]=S.useState(e),r=S.useCallback(s=>n(o=>zC(s,o)),[]);return[t,n,r]}function YW(e){const[t,n]=S.useState(e),r=S.useCallback(s=>n(o=>$C(s,o)),[]);return[t,n,r]}function XW({dimensions:e,lineWidth:t,variant:n,className:r}){return i.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Mt(["react-flow__background-pattern",n,r])})}function JW({radius:e,className:t}){return i.jsx("circle",{cx:e,cy:e,r:e,className:Mt(["react-flow__background-pattern","dots",t])})}var ms;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ms||(ms={}));const QW={[ms.Dots]:1,[ms.Lines]:1,[ms.Cross]:6},ZW=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function u_({id:e,variant:t=ms.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=0,color:l,bgColor:u,style:d,className:f,patternClassName:p}){const h=S.useRef(null),{transform:g,patternId:y}=Ge(ZW,lt),b=r||QW[t],w=t===ms.Dots,v=t===ms.Cross,j=Array.isArray(n)?n:[n,n],T=[j[0]*g[2]||1,j[1]*g[2]||1],k=b*g[2],_=Array.isArray(o)?o:[o,o],N=v?[k,k]:T,E=[_[0]*g[2]||1+N[0]/2,_[1]*g[2]||1+N[1]/2],R=`${y}${e||""}`;return i.jsxs("svg",{className:Mt(["react-flow__background",f]),style:{...d,...mh,"--xy-background-color-props":u,"--xy-background-pattern-color-props":l},ref:h,"data-testid":"rf__background",children:[i.jsx("pattern",{id:R,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:w?i.jsx(JW,{radius:k/2,className:p}):i.jsx(XW,{dimensions:N,lineWidth:s,variant:t,className:p})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}u_.displayName="Background";const eV=S.memo(u_);function tV(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:i.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function nV(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:i.jsx("path",{d:"M0 0h32v4.2H0z"})})}function rV(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:i.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sV(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iV(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Id({children:e,className:t,...n}){return i.jsx("button",{type:"button",className:Mt(["react-flow__controls-button",t]),...n,children:e})}const oV=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function d_({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:u,onInteractiveChange:d,className:f,children:p,position:h="bottom-left",orientation:g="vertical","aria-label":y}){const b=ut(),{isInteractive:w,minZoomReached:v,maxZoomReached:j,ariaLabelConfig:T}=Ge(oV,lt),{zoomIn:k,zoomOut:_,fitView:N}=Jy(),E=()=>{k(),o==null||o()},R=()=>{_(),l==null||l()},A=()=>{N(s),u==null||u()},P=()=>{b.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),d==null||d(!w)},z=g==="horizontal"?"horizontal":"vertical";return i.jsxs(ph,{className:Mt(["react-flow__controls",z,f]),position:h,style:e,"data-testid":"rf__controls","aria-label":y??T["controls.ariaLabel"],children:[t&&i.jsxs(i.Fragment,{children:[i.jsx(Id,{onClick:E,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:j,children:i.jsx(tV,{})}),i.jsx(Id,{onClick:R,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:v,children:i.jsx(nV,{})})]}),n&&i.jsx(Id,{className:"react-flow__controls-fitview",onClick:A,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:i.jsx(rV,{})}),r&&i.jsx(Id,{className:"react-flow__controls-interactive",onClick:P,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:w?i.jsx(iV,{}):i.jsx(sV,{})}),p]})}d_.displayName="Controls";const aV=S.memo(d_);function lV({id:e,x:t,y:n,width:r,height:s,style:o,color:l,strokeColor:u,strokeWidth:d,className:f,borderRadius:p,shapeRendering:h,selected:g,onClick:y}){const{background:b,backgroundColor:w}=o||{},v=l||b||w;return i.jsx("rect",{className:Mt(["react-flow__minimap-node",{selected:g},f]),x:t,y:n,rx:p,ry:p,width:r,height:s,style:{fill:v,stroke:u,strokeWidth:d},shapeRendering:h,onClick:y?j=>y(j,e):void 0})}const cV=S.memo(lV),uV=e=>e.nodes.map(t=>t.id),ig=e=>e instanceof Function?e:()=>e;function dV({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:o=cV,onClick:l}){const u=Ge(uV,lt),d=ig(t),f=ig(e),p=ig(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return i.jsx(i.Fragment,{children:u.map(g=>i.jsx(hV,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:o,onClick:l,shapeRendering:h},g))})}function fV({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:l,NodeComponent:u,onClick:d}){const{node:f,x:p,y:h,width:g,height:y}=Ge(b=>{const{internals:w}=b.nodeLookup.get(e),v=w.userNode,{x:j,y:T}=w.positionAbsolute,{width:k,height:_}=Cs(v);return{node:v,x:j,y:T,width:k,height:_}},lt);return!f||f.hidden||!dC(f)?null:i.jsx(u,{x:p,y:h,width:g,height:y,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:s,strokeColor:n(f),strokeWidth:o,shapeRendering:l,onClick:d,id:f.id})}const hV=S.memo(fV);var pV=S.memo(dV);const mV=200,gV=150,yV=e=>!e.hidden,xV=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?uC(Uc(e.nodeLookup,{filter:yV}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},bV="react-flow__minimap-desc";function f_({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:d,maskColor:f,maskStrokeColor:p,maskStrokeWidth:h,position:g="bottom-right",onClick:y,onNodeClick:b,pannable:w=!1,zoomable:v=!1,ariaLabel:j,inversePan:T,zoomStep:k=1,offsetScale:_=5}){const N=ut(),E=S.useRef(null),{boundingRect:R,viewBB:A,rfId:P,panZoom:z,translateExtent:L,flowWidth:B,flowHeight:K,ariaLabelConfig:V}=Ge(xV,lt),J=(e==null?void 0:e.width)??mV,$=(e==null?void 0:e.height)??gV,H=R.width/J,M=R.height/$,U=Math.max(H,M),F=U*J,D=U*$,W=_*U,X=R.x-(F-R.width)/2-W,ne=R.y-(D-R.height)/2-W,G=F+W*2,Q=D+W*2,se=`${bV}-${P}`,q=S.useRef(0),ee=S.useRef();q.current=U,S.useEffect(()=>{if(E.current&&z)return ee.current=M7({domNode:E.current,panZoom:z,getTransform:()=>N.getState().transform,getViewScale:()=>q.current}),()=>{var Z;(Z=ee.current)==null||Z.destroy()}},[z]),S.useEffect(()=>{var Z;(Z=ee.current)==null||Z.update({translateExtent:L,width:B,height:K,inversePan:T,pannable:w,zoomStep:k,zoomable:v})},[w,v,T,k,L,B,K]);const ie=y?Z=>{var pe;const[de,he]=((pe=ee.current)==null?void 0:pe.pointer(Z))||[0,0];y(Z,{x:de,y:he})}:void 0,le=b?S.useCallback((Z,de)=>{const he=N.getState().nodeLookup.get(de).internals.userNode;b(Z,he)},[]):void 0,ue=j??V["minimap.ariaLabel"];return i.jsx(ph,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*U:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Mt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:i.jsxs("svg",{width:J,height:$,viewBox:`${X} ${ne} ${G} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":se,ref:E,onClick:ie,children:[ue&&i.jsx("title",{id:se,children:ue}),i.jsx(pV,{onClick:le,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:u}),i.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-W},${ne-W}h${G+W*2}v${Q+W*2}h${-G-W*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}f_.displayName="MiniMap";const vV=S.memo(f_),wV=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,SV={[Ia.Line]:"right",[Ia.Handle]:"bottom-right"};function kV({nodeId:e,position:t,variant:n=Ia.Handle,className:r,style:s=void 0,children:o,color:l,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:g,autoScale:y=!0,shouldResize:b,onResizeStart:w,onResize:v,onResizeEnd:j}){const T=UC(),k=typeof e=="string"?e:T,_=ut(),N=S.useRef(null),E=n===Ia.Handle,R=Ge(S.useCallback(wV(E&&y),[E,y]),lt),A=S.useRef(null),P=t??SV[n];S.useEffect(()=>{if(!(!N.current||!k))return A.current||(A.current=K7({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:L,transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:J,domNode:$}=_.getState();return{nodeLookup:L,transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:J,paneDomNode:$}},onChange:(L,B)=>{const{triggerNodeChanges:K,nodeLookup:V,parentLookup:J,nodeOrigin:$}=_.getState(),H=[],M={x:L.x,y:L.y},U=V.get(k);if(U&&U.expandParent&&U.parentId){const F=U.origin??$,D=L.width??U.measured.width??0,W=L.height??U.measured.height??0,X={id:U.id,parentId:U.parentId,rect:{width:D,height:W,...fC({x:L.x??U.position.x,y:L.y??U.position.y},{width:D,height:W},U.parentId,V,F)}},ne=Xy([X],V,J,$);H.push(...ne),M.x=L.x?Math.max(F[0]*D,L.x):void 0,M.y=L.y?Math.max(F[1]*W,L.y):void 0}if(M.x!==void 0&&M.y!==void 0){const F={id:k,type:"position",position:{...M}};H.push(F)}if(L.width!==void 0&&L.height!==void 0){const D={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};H.push(D)}for(const F of B){const D={...F,type:"position"};H.push(D)}K(H)},onEnd:({width:L,height:B})=>{const K={id:k,type:"dimensions",resizing:!1,dimensions:{width:L,height:B}};_.getState().triggerNodeChanges([K])}})),A.current.update({controlPosition:P,boundaries:{minWidth:u,minHeight:d,maxWidth:f,maxHeight:p},keepAspectRatio:h,resizeDirection:g,onResizeStart:w,onResize:v,onResizeEnd:j,shouldResize:b}),()=>{var L;(L=A.current)==null||L.destroy()}},[P,u,d,f,p,h,w,v,j,b]);const z=P.split("-");return i.jsx("div",{className:Mt(["react-flow__resize-control","nodrag",...z,n,r]),ref:N,style:{...s,scale:R,...l&&{[E?"backgroundColor":"borderColor"]:l}},children:o})}S.memo(kV);function jV({data:e,selected:t}){return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%)",border:t?"2px solid #f59e0b":"1px solid rgba(245, 158, 11, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(245, 158, 11, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ja,{size:18,style:{color:"#f59e0b"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Start"})]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Flow starting point"}),i.jsx(It,{type:"source",position:ke.Bottom,style:{background:"#f59e0b",width:"12px",height:"12px",border:"2px solid white"}})]})}function CV({data:e,selected:t}){var n,r;return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:t?"2px solid #06b6d4":"1px solid rgba(6, 182, 212, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(6, 182, 212, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#06b6d4",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(_y,{size:18,style:{color:"#06b6d4"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Send Template"})]}),((n=e.config)==null?void 0:n.templateName)&&i.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#06b6d4",fontWeight:500,marginBottom:"4px"},children:[" ",e.config.templateName]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:(r=e.config)!=null&&r.templateId?"Template configured":"Send WhatsApp template"}),i.jsx(It,{type:"source",position:ke.Bottom,style:{background:"#06b6d4",width:"12px",height:"12px",border:"2px solid white"}})]})}function _V({data:e,selected:t}){return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%)",border:t?"2px solid #3b82f6":"1px solid rgba(59, 130, 246, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(59, 130, 246, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#3b82f6",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(59, 130, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(gi,{size:18,style:{color:"#3b82f6"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Wait Reply"})]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Wait for user response"}),i.jsx(It,{type:"source",position:ke.Bottom,style:{background:"#3b82f6",width:"12px",height:"12px",border:"2px solid white"}})]})}function EV({data:e,selected:t}){var n,r,s;return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",border:t?"2px solid #8b5cf6":"1px solid rgba(139, 92, 246, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(139, 92, 246, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#8b5cf6",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Yj,{size:18,style:{color:"#8b5cf6"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Condition"})]}),((n=e.config)==null?void 0:n.variable)&&((r=e.config)==null?void 0:r.value)&&i.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#8b5cf6",fontWeight:500,marginBottom:"4px",padding:"6px 8px",background:"rgba(139, 92, 246, 0.1)",borderRadius:"6px"},children:[e.config.variable," ",e.config.operator==="equals"?"==":e.config.operator==="not_equals"?"!=":e.config.operator==="contains"?"":"~"," ",e.config.value]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:(s=e.config)!=null&&s.variable?"Condition configured":"Branch based on logic"}),i.jsx(It,{type:"source",position:ke.Bottom,id:"true",style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white",left:"30%"}}),i.jsx(It,{type:"source",position:ke.Bottom,id:"false",style:{background:"#ef4444",width:"12px",height:"12px",border:"2px solid white",left:"70%"}})]})}function NV({data:e,selected:t}){return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:t?"2px solid #10b981":"1px solid rgba(16, 185, 129, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(r5,{size:18,style:{color:"#10b981"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Delay"})]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Wait for duration"}),i.jsx(It,{type:"source",position:ke.Bottom,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}})]})}function TV({data:e,selected:t}){var l,u,d;const n=e.config,r=((l=n==null?void 0:n.questions)==null?void 0:l.length)||0,s=(n==null?void 0:n.enableConfirmation)||!1,o=((u=n==null?void 0:n.onMaxRetry)==null?void 0:u.action)==="jump_to_node"&&((d=n==null?void 0:n.onMaxRetry)==null?void 0:d.jumpToNodeId);return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.08) 100%)",border:t?"2px solid #10b981":"1px solid rgba(16, 185, 129, 0.3)",minWidth:"220px",boxShadow:t?"0 8px 24px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Gj,{size:18,style:{color:"#10b981"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Guest Form"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:r>0?`${r} question${r>1?"s":""}`:"No questions yet"}),s&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",color:"#059669"},children:[i.jsx(Hj,{size:12}),i.jsx("span",{children:"Confirmation enabled"})]}),o&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",color:"#f59e0b"},children:[i.jsx(Jf,{size:12}),i.jsx("span",{children:"Retry jump configured"})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",paddingTop:"8px",borderTop:"1px solid rgba(16, 185, 129, 0.2)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",position:"relative"},children:[i.jsx(It,{type:"source",position:ke.Bottom,id:"confirmed",style:{position:"relative",transform:"none",background:"#10b981",width:"10px",height:"10px",border:"2px solid white",left:0,bottom:0}}),i.jsx("span",{style:{fontSize:"0.65rem",color:"#059669",fontWeight:500},children:"Confirmed"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",position:"relative"},children:[i.jsx("span",{style:{fontSize:"0.65rem",color:"#f59e0b",fontWeight:500},children:"Max Retry"}),i.jsx(It,{type:"source",position:ke.Bottom,id:"max_retry",style:{position:"relative",transform:"none",background:"#f59e0b",width:"10px",height:"10px",border:"2px solid white",right:0,bottom:0}})]})]})]})}function RV({data:e,selected:t}){return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, rgba(236, 72, 153, 0.05) 100%)",border:t?"2px solid #ec4899":"1px solid rgba(236, 72, 153, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(236, 72, 153, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#ec4899",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Ry,{size:18,style:{color:"#ec4899"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Update Guest"})]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Modify guest data"}),i.jsx(It,{type:"source",position:ke.Bottom,style:{background:"#ec4899",width:"12px",height:"12px",border:"2px solid white"}})]})}function IV({data:e,selected:t}){return i.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(100, 116, 139, 0.15) 0%, rgba(100, 116, 139, 0.05) 100%)",border:t?"2px solid #64748b":"1px solid rgba(100, 116, 139, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(100, 116, 139, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[i.jsx(It,{type:"target",position:ke.Top,style:{background:"#64748b",width:"12px",height:"12px",border:"2px solid white"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Kj,{size:18,style:{color:"#64748b"}})}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"End"})]}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"End conversation"})]})}const AV={trigger:jV,send_template:CV,wait_reply:_V,condition:EV,delay:NV,guest_form:TV,update_guest:RV,end:IV};function PV({nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onNodeSelect:s,isLocked:o=!1}){const[l,u,d]=KW(e),[f,p,h]=YW(t),[g,y]=S.useState(null),b=S.useMemo(()=>{const E=[];return e.forEach(R=>{var A;if(R.type==="guest_form"){const P=R.data.config;((A=P==null?void 0:P.onMaxRetry)==null?void 0:A.action)==="jump_to_node"&&P.onMaxRetry.jumpToNodeId&&e.some(L=>L.id===P.onMaxRetry.jumpToNodeId)&&E.push({id:`ghost_${R.id}_${P.onMaxRetry.jumpToNodeId}`,source:R.id,target:P.onMaxRetry.jumpToNodeId,sourceHandle:"max_retry",type:"smoothstep",animated:!0,style:{stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"5,5",opacity:.7},label:"Max Retry",labelStyle:{fontSize:10,fill:"#f59e0b",fontWeight:600},labelBgStyle:{fill:"rgba(255, 255, 255, 0.9)"},selectable:!1,deletable:!1,data:{isGhost:!0}})}}),E},[e]);S.useEffect(()=>{u(e)},[e,u]),S.useEffect(()=>{p(t)},[t,p]),S.useEffect(()=>{const E=R=>{if(!o&&(R.key==="Delete"||R.key==="Backspace")&&g){if(g.startsWith("ghost_"))return;const A=f.filter(P=>P.id!==g);p(A),r(A),y(null)}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[g,f,p,r,o]);const w=S.useCallback(E=>{if(o)return;const R=bC({...E,type:"smoothstep",animated:!0,style:{stroke:"rgba(139, 92, 246, 0.6)",strokeWidth:2}},f);p(R),r(R)},[f,p,r,o]),v=S.useCallback((E,R)=>{y(null),s(R)},[s]),j=S.useCallback((E,R)=>{R.id.startsWith("ghost_")||(y(R.id),s(null))},[s]),T=S.useCallback(()=>{y(null),s(null)},[s]),k=S.useCallback(E=>{o||(E.preventDefault(),E.dataTransfer.dropEffect="move")},[o]),_=S.useCallback(E=>{if(o)return;E.preventDefault();const R=E.dataTransfer.getData("application/reactflow");if(!R)return;const A={x:E.clientX-250,y:E.clientY-100},P={trigger:"Start",send_template:"Send Template",wait_reply:"Wait Reply",condition:"Condition",delay:"Delay",guest_form:"Guest Form",update_guest:"Update Guest",end:"End"},z={id:`${R}_${Date.now()}`,type:R,position:A,data:{label:P[R]||`New ${R.replace("_"," ")}`,config:null}},L=[...l,z];u(L),n(L)},[l,u,n,o]),N=S.useMemo(()=>[...f.map(R=>({...R,style:{...R.style,stroke:g===R.id?"#ef4444":"rgba(139, 92, 246, 0.6)",strokeWidth:g===R.id?3:2}})),...b],[f,b,g]);return i.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[g&&!g.startsWith("ghost_")&&i.jsxs("div",{style:{position:"absolute",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:10,padding:"8px 16px",background:"rgba(239, 68, 68, 0.9)",color:"white",borderRadius:"8px",fontSize:"0.875rem",fontWeight:500,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:["Press ",i.jsx("strong",{children:"Delete"})," or ",i.jsx("strong",{children:"Backspace"})," to remove connection"]}),i.jsxs(GW,{nodes:l,edges:N,onNodesChange:E=>{d(E),u(R=>(n(R),R))},onEdgesChange:E=>{const R=E.filter(A=>"id"in A&&typeof A.id=="string"?!A.id.startsWith("ghost_"):!0);h(R),r(f)},onConnect:w,onNodeClick:v,onEdgeClick:j,onPaneClick:T,onDragOver:k,onDrop:_,nodeTypes:AV,fitView:!0,deleteKeyCode:null,style:{background:"rgba(255, 255, 255, 0.5)"},children:[i.jsx(eV,{variant:ms.Dots,gap:20,size:1,color:"rgba(245, 158, 11, 0.15)"}),i.jsx(aV,{style:{background:"rgba(255, 255, 255, 0.9)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.2)"}}),i.jsx(vV,{style:{background:"rgba(255, 255, 255, 0.9)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.2)"},nodeColor:E=>({trigger:"#f59e0b",send_template:"#06b6d4",wait_reply:"#3b82f6",condition:"#8b5cf6",delay:"#10b981",guest_form:"#10b981",update_guest:"#ec4899",end:"#64748b"})[E.type||"default"]||"#999"})]})]})}function tn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function MV(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Ad=43200,rS=1440;let DV={};function FV(){return DV}function sS(e){const t=tn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function nf(e,t){const n=tn(e),r=tn(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function OV(e){return MV(e,Date.now())}function zV(e,t){const n=tn(e),r=tn(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function $V(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function LV(e,t){return+tn(e)-+tn(t)}function BV(e){const t=tn(e);return t.setHours(23,59,59,999),t}function WV(e){const t=tn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function VV(e){const t=tn(e);return+BV(t)==+WV(t)}function UV(e,t){const n=tn(e),r=tn(t),s=nf(n,r),o=Math.abs(zV(n,r));let l;if(o<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let u=nf(n,r)===-s;VV(tn(e))&&o===1&&nf(e,r)===1&&(u=!1),l=s*(o-Number(u))}return l===0?0:l}function HV(e,t,n){const r=LV(e,t)/1e3;return $V(n==null?void 0:n.roundingMethod)(r)}const qV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GV=(e,t,n)=>{let r;const s=qV[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function og(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const KV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JV={date:og({formats:KV,defaultWidth:"full"}),time:og({formats:YV,defaultWidth:"full"}),dateTime:og({formats:XV,defaultWidth:"full"})},QV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZV=(e,t,n,r)=>QV[e];function $l(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):l;s=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[u]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const eU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oU=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},aU={ordinalNumber:oU,era:$l({values:eU,defaultWidth:"wide"}),quarter:$l({values:tU,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$l({values:nU,defaultWidth:"wide"}),day:$l({values:rU,defaultWidth:"wide"}),dayPeriod:$l({values:sU,defaultWidth:"wide",formattingValues:iU,defaultFormattingWidth:"wide"})};function Ll(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const l=o[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?cU(u,h=>h.test(l)):lU(u,h=>h.test(l));let f;f=e.valueCallback?e.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function lU(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function cU(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function uU(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=t.slice(s.length);return{value:l,rest:u}}}const dU=/^(\d+)(th|st|nd|rd)?/i,fU=/\d+/i,hU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pU={any:[/^b/i,/^(a|c)/i]},mU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gU={any:[/1/i,/2/i,/3/i,/4/i]},yU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},SU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kU={ordinalNumber:uU({matchPattern:dU,parsePattern:fU,valueCallback:e=>parseInt(e,10)}),era:Ll({matchPatterns:hU,defaultMatchWidth:"wide",parsePatterns:pU,defaultParseWidth:"any"}),quarter:Ll({matchPatterns:mU,defaultMatchWidth:"wide",parsePatterns:gU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ll({matchPatterns:yU,defaultMatchWidth:"wide",parsePatterns:xU,defaultParseWidth:"any"}),day:Ll({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:vU,defaultParseWidth:"any"}),dayPeriod:Ll({matchPatterns:wU,defaultMatchWidth:"any",parsePatterns:SU,defaultParseWidth:"any"})},jU={code:"en-US",formatDistance:GV,formatLong:JV,formatRelative:ZV,localize:aU,match:kU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CU(e,t,n){const r=FV(),s=(n==null?void 0:n.locale)??r.locale??jU,o=2520,l=nf(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let d,f;l>0?(d=tn(t),f=tn(e)):(d=tn(e),f=tn(t));const p=HV(f,d),h=(sS(f)-sS(d))/1e3,g=Math.round((p-h)/60);let y;if(g<2)return n!=null&&n.includeSeconds?p<5?s.formatDistance("lessThanXSeconds",5,u):p<10?s.formatDistance("lessThanXSeconds",10,u):p<20?s.formatDistance("lessThanXSeconds",20,u):p<40?s.formatDistance("halfAMinute",0,u):p<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):g===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",g,u);if(g<45)return s.formatDistance("xMinutes",g,u);if(g<90)return s.formatDistance("aboutXHours",1,u);if(g<rS){const b=Math.round(g/60);return s.formatDistance("aboutXHours",b,u)}else{if(g<o)return s.formatDistance("xDays",1,u);if(g<Ad){const b=Math.round(g/rS);return s.formatDistance("xDays",b,u)}else if(g<Ad*2)return y=Math.round(g/Ad),s.formatDistance("aboutXMonths",y,u)}if(y=UV(f,d),y<12){const b=Math.round(g/Ad);return s.formatDistance("xMonths",b,u)}else{const b=y%12,w=Math.trunc(y/12);return b<3?s.formatDistance("aboutXYears",w,u):b<9?s.formatDistance("overXYears",w,u):s.formatDistance("almostXYears",w+1,u)}}function _U(e,t){return CU(e,OV(e),t)}function EU({chatflow:e,onClose:t}){const{templates:n}=Wa(),[r,s]=S.useState([]),[o,l]=S.useState([]),[u,d]=S.useState({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),f=S.useRef(u);f.current=u;const p=S.useRef(null),h=S.useRef(null),[g,y]=S.useState(null),[b,w]=S.useState(!1),[v,j]=S.useState(!1),[T,k]=S.useState(""),[_,N]=S.useState(0),[E,R]=S.useState({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}});S.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[o]),S.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[r]);const A=F=>{s(D=>[...D,{...F,id:Date.now().toString(),timestamp:new Date}])},P=F=>{l(D=>[...D,{...F,timestamp:new Date}])},z=F=>new Promise(D=>setTimeout(D,F)),L=(F,D)=>{const W=D?e.edges.find(X=>X.source===F&&X.sourceHandle===D):e.edges.find(X=>X.source===F);return W&&e.nodes.find(X=>X.id===W.target)||null},B=async F=>{var D,W;console.log(" [EXECUTE NODE] Starting:",F.type,F.data.label,F.id),y(F.id);try{switch(F.type){case"trigger":P({nodeId:F.id,nodeName:F.data.label,action:"Start Flow",result:"success",message:"Flow triggered"});const X=L(F.id);X&&(await z(500),await B(X));break;case"send_template":const ne=F.data.config,G=ne==null?void 0:ne.templateId,Q=n.find(qe=>qe.id===G);if(Q){P({nodeId:F.id,nodeName:F.data.label,action:"Send Template",result:"success",message:`Sending "${Q.name}"`});let qe=Q.content.body.text;console.log(" [SEND TEMPLATE] Original message:",qe),console.log(" [SEND TEMPLATE] Config variables:",ne==null?void 0:ne.variables),console.log(" [SEND TEMPLATE] Available variables:",f.current),ne!=null&&ne.variables&&Object.entries(ne.variables).forEach(([nn,xn])=>{const nr=xn.replace(/\{\{|\}\}/g,""),Jr=f.current[nr]||`[${nn}]`;console.log(` [SEND TEMPLATE] Replace {{${nn}}} with "${Jr}" (from ${nr})`);const Es=new RegExp(`\\{\\{${nn}\\}\\}`,"g");qe=qe.replace(Es,Jr)}),Object.entries(f.current).forEach(([nn,xn])=>{const nr=new RegExp(`\\{\\{${nn}\\}\\}`,"g");qe=qe.replace(nr,xn)}),console.log(" [SEND TEMPLATE] Final message:",qe),A({type:"sent",content:qe})}else P({nodeId:F.id,nodeName:F.data.label,action:"Send Template",result:"error",message:"Template not found or not configured"}),A({type:"sent",content:"[Template not configured]"});const se=L(F.id);se&&(await z(1e3),await B(se));break;case"wait_reply":const q=F.data.config;P({nodeId:F.id,nodeName:F.data.label,action:"Wait Reply",result:"waiting",message:q!=null&&q.expectedValues?`Waiting for user input (expected: ${q.expectedValues.join(", ")})...`:"Waiting for user input..."}),j(!0),N(0);break;case"condition":const ee=F.data.config;console.log(" [CONDITION NODE] Starting evaluation:",{nodeId:F.id,nodeName:F.data.label,config:ee,allVariables:f.current});const ie=f.current[(ee==null?void 0:ee.variable)||""],le=(ee==null?void 0:ee.value)||"",ue=(ee==null?void 0:ee.operator)||"equals",Z=(ee==null?void 0:ee.caseSensitive)||!1;console.log(" [CONDITION NODE] Values to compare:",{variableName:ee==null?void 0:ee.variable,variableValue:ie,compareValue:le,operator:ue,caseSensitive:Z});let de=ie!==void 0?String(ie):"",he=le;Z||(de=de.toLowerCase(),he=he.toLowerCase()),console.log(" [CONDITION NODE] After case handling:",{varVal:de,compVal:he});let pe=!1;try{switch(ue){case"equals":pe=de===he;break;case"not_equals":pe=de!==he;break;case"contains":pe=de.includes(he);break;case"matches":pe=new RegExp(he,Z?"":"i").test(String(ie));break;default:pe=!1}}catch(qe){console.error("Error evaluating condition:",qe),pe=!1}console.log(" [CONDITION NODE] Condition result:",pe),P({nodeId:F.id,nodeName:F.data.label,action:"Evaluate Condition",result:"success",message:`${ee==null?void 0:ee.variable} ${ue} "${le}"  ${pe?"TRUE":"FALSE"} (value: "${ie}")`});const _e=e.edges.filter(qe=>qe.source===F.id);console.log(" [CONDITION NODE] All edges from this node:",_e);const Be=pe?"true":"false";console.log(" [CONDITION NODE] Looking for edge with sourceHandle:",Be);const je=L(F.id,Be);console.log(" [CONDITION NODE] Next node found:",je==null?void 0:je.id,(D=je==null?void 0:je.data)==null?void 0:D.label),je?(await z(800),await B(je)):(P({nodeId:F.id,nodeName:F.data.label,action:"Condition Error",result:"error",message:`No ${pe?"TRUE":"FALSE"} path defined. Please connect both true and false edges.`}),w(!1));break;case"delay":const He=((W=F.data.config)==null?void 0:W.duration)||1;P({nodeId:F.id,nodeName:F.data.label,action:"Delay",result:"success",message:`Waiting ${He} seconds...`}),await z(He*1e3);const dt=L(F.id);dt&&await B(dt);break;case"set_variable":const We=F.data.config;We!=null&&We.variableName&&(We!=null&&We.value)?(d(qe=>({...qe,[We.variableName]:We.value})),P({nodeId:F.id,nodeName:F.data.label,action:"Set Variable",result:"success",message:`Set ${We.variableName} = "${We.value}"`})):P({nodeId:F.id,nodeName:F.data.label,action:"Set Variable",result:"error",message:"Variable name or value not configured"});const St=L(F.id);St&&(await z(500),await B(St));break;case"update_guest":const Tn=F.data.config;P({nodeId:F.id,nodeName:F.data.label,action:"Update Guest",result:"success",message:"Guest data would be updated (simulation only)"});const Vn=L(F.id);Vn&&(await z(500),await B(Vn));break;case"guest_form":const kt=F.data.config;if(!kt||!kt.questions||kt.questions.length===0){P({nodeId:F.id,nodeName:F.data.label,action:"Guest Form Error",result:"error",message:"No questions configured in guest form"});const qe=L(F.id);qe&&(await z(500),await B(qe));break}P({nodeId:F.id,nodeName:F.data.label,action:"Start Guest Form",result:"success",message:`Starting form with ${kt.questions.length} question(s)`}),R({isActive:!0,nodeId:F.id,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}});const Dt=kt.questions[0];let tr=Dt.promptMessage||Dt.question;Dt.type==="choice"&&Dt.options&&Dt.options.length>0&&(tr+=`

Pilihan: ${Dt.options.join(", ")}`),A({type:"sent",content:tr}),P({nodeId:F.id,nodeName:F.data.label,action:"Ask Question",result:"waiting",message:`Q1/${kt.questions.length}: ${Dt.variableName}`}),j(!0);break;case"end":P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"success",message:"Flow completed"}),w(!1),y(null);break}}catch(X){console.error(" [EXECUTE NODE] Error executing node:",F.id,X),P({nodeId:F.id,nodeName:F.data.label,action:"Execution Error",result:"error",message:`Error: ${X instanceof Error?X.message:String(X)}`}),w(!1)}},K=async()=>{if(console.log(" [SIMULATOR] Starting flow test..."),!e||!e.nodes||e.nodes.length===0){console.error(" [SIMULATOR] No nodes in chatflow!"),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:"No nodes found in chatflow. Please add nodes to the flow first."});return}const F=e.nodes.find(D=>D.type==="trigger");if(!F){console.error(" [SIMULATOR] No trigger node found!"),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:"No trigger node found. Please add a Trigger node to start the flow."}),w(!0);return}s([]),l([]),d({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),w(!0),j(!1),N(0);try{await B(F)}catch(D){console.error(" [SIMULATOR] Execution error:",D),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:`Execution error: ${D instanceof Error?D.message:String(D)}`}),w(!1)}},V=async()=>{var X,ne,G;if(!T.trim()||!v)return;if(console.log(" [SEND REPLY] User input:",T),console.log(" [SEND REPLY] Current node ID:",g),console.log(" [SEND REPLY] Guest form active:",E.isActive),A({type:"received",content:T}),E.isActive&&E.nodeId){await J(T.trim()),k("");return}const F=e.nodes.find(Q=>Q.id===g);console.log(" [SEND REPLY] Current node:",F),console.log(" [SEND REPLY] Config saveAs:",(X=F==null?void 0:F.data.config)==null?void 0:X.saveAs);const D=F==null?void 0:F.data.config;if(D!=null&&D.expectedValues&&D.expectedValues.length>0){const Q=D.caseSensitive||!1,se=Q?T.trim():T.trim().toLowerCase(),q=D.expectedValues.map(ie=>Q?ie:ie.toLowerCase());console.log(" [VALIDATION] Expected values:",q),console.log(" [VALIDATION] User input (normalized):",se);const ee=q.includes(se);if(console.log(" [VALIDATION] Is valid:",ee),ee)P({nodeId:F.id,nodeName:F.data.label,action:"Validation Success",result:"success",message:`Valid input: "${T}"`}),N(0);else{const ie=D.maxRetries||3,le=_+1;if(console.log(" [VALIDATION] Invalid input. Retry",le,"/",ie),le<ie){const ue=D.retryMessage||`Maaf, mohon jawab dengan salah satu dari: ${D.expectedValues.join(", ")}`;A({type:"sent",content:ue}),P({nodeId:F.id,nodeName:F.data.label,action:"Validation Failed",result:"error",message:`Invalid input "${T}". Retry ${le}/${ie}`}),N(le),k("");return}else{const ue=D.fallbackAction||"end",Z=D.fallbackMessage||"Maaf, kami tidak dapat memproses jawaban Anda.";if(P({nodeId:F.id,nodeName:F.data.label,action:"Max Retries Reached",result:"error",message:`Max retries (${ie}) reached. Action: ${ue}`}),A({type:"sent",content:Z}),N(0),k(""),ue==="end"){j(!1),P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"error",message:"Flow ended due to max retries reached"}),w(!1),y(null);return}else if(ue==="wait_again"){P({nodeId:F.id,nodeName:F.data.label,action:"Wait for Reply Again",result:"error",message:"Waiting for user input again (unlimited retries after fallback)"});return}j(!1),P({nodeId:F.id,nodeName:F.data.label,action:"Continue with Invalid",result:"error",message:`Continuing flow with invalid input: "${T}"`})}}}let W=f.current;if((ne=F==null?void 0:F.data.config)!=null&&ne.saveAs){const Q=F.data.config.saveAs;console.log(" [SEND REPLY] Saving to variable:",Q,"=",T),W={...f.current,[Q]:T},d(W),console.log(" [SEND REPLY] Updated variables:",W)}else console.log(" [SEND REPLY] No saveAs configured, variable NOT saved");if(k(""),j(!1),await z(100),g){const Q=L(g);console.log(" [SEND REPLY] Next node:",Q==null?void 0:Q.id,(G=Q==null?void 0:Q.data)==null?void 0:G.label),Q&&(await z(400),await B(Q))}},J=async F=>{const D=e.nodes.find(q=>q.id===E.nodeId);if(!D)return;const W=D.data.config,X=W.questions;if(E.isConfirmationPhase){const q=W.confirmYesKeywords||["ya","yes","benar","ok"],ee=W.confirmNoKeywords||["tidak","no","salah","ulang"],ie=F.toLowerCase();if(q.some(le=>ie===le.toLowerCase())){P({nodeId:D.id,nodeName:D.data.label,action:"Form Confirmed",result:"success",message:"User confirmed all answers"});const le={...f.current,...E.collectedAnswers};d(le),f.current=le,R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1);const ue=L(D.id,"confirmed");if(ue)await z(500),await B(ue);else{const Z=L(D.id);Z&&(await z(500),await B(Z))}return}else if(ee.some(le=>ie===le.toLowerCase())){const le=E.confirmRetryCount+1,ue=W.maxConfirmRetries||3;if(le>=ue){P({nodeId:D.id,nodeName:D.data.label,action:"Max Confirm Retries",result:"error",message:`Max confirmation retries (${ue}) reached`}),await H(D,W);return}P({nodeId:D.id,nodeName:D.data.label,action:"Re-enter Data",result:"success",message:`User wants to re-enter. Retry ${le}/${ue}`}),R(he=>({...he,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:le,isConfirmationPhase:!1,collectedAnswers:{}}));const Z=X[0];let de=Z.promptMessage||Z.question;Z.type==="choice"&&Z.options&&(de+=`

Pilihan: ${Z.options.join(", ")}`),A({type:"sent",content:de});return}else{A({type:"sent",content:`Mohon jawab dengan "${q[0]}" atau "${ee[0]}"`});return}}const ne=X[E.currentQuestionIndex],G=$(ne,F);if(!G.valid){const q=E.questionRetryCount+1,ee=W.maxQuestionRetries||3;if(q>=ee){P({nodeId:D.id,nodeName:D.data.label,action:"Max Question Retries",result:"error",message:`Max retries for question "${ne.variableName}"`}),await H(D,W);return}P({nodeId:D.id,nodeName:D.data.label,action:"Invalid Answer",result:"error",message:`${G.error}. Retry ${q}/${ee}`}),R(le=>({...le,questionRetryCount:q}));const ie=ne.errorMessage||G.error||"Jawaban tidak valid";A({type:"sent",content:ie});return}const Q={...E.collectedAnswers,[ne.variableName]:F};P({nodeId:D.id,nodeName:D.data.label,action:"Answer Saved",result:"success",message:`${ne.variableName} = "${F}"`});const se=E.currentQuestionIndex+1;if(se<X.length){R(ie=>({...ie,currentQuestionIndex:se,questionRetryCount:0,collectedAnswers:Q}));const q=X[se];let ee=q.promptMessage||q.question;q.type==="choice"&&q.options&&(ee+=`

Pilihan: ${q.options.join(", ")}`),await z(500),A({type:"sent",content:ee}),P({nodeId:D.id,nodeName:D.data.label,action:"Ask Question",result:"waiting",message:`Q${se+1}/${X.length}: ${q.variableName}`})}else if(R(q=>({...q,collectedAnswers:Q})),W.enableConfirmation){let q=W.confirmationMessage||`Data yang Anda masukkan:
`;Object.entries(Q).forEach(([ee,ie])=>{const le=new RegExp(`\\{\\{${ee}\\}\\}`,"g");q=q.replace(le,ie)}),W.confirmationMessage||(q=`Data yang Anda masukkan:
`,X.forEach(ee=>{q+=` ${ee.question}: ${Q[ee.variableName]||"-"}
`}),q+=`
Apakah sudah benar? (Ya/Tidak)`),R(ee=>({...ee,isConfirmationPhase:!0,collectedAnswers:Q})),await z(500),A({type:"sent",content:q}),P({nodeId:D.id,nodeName:D.data.label,action:"Confirm Data",result:"waiting",message:"Waiting for confirmation..."})}else{P({nodeId:D.id,nodeName:D.data.label,action:"Form Complete",result:"success",message:"All questions answered"});const q={...f.current,...Q};d(q),f.current=q,R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1);const ee=L(D.id,"confirmed")||L(D.id);ee&&(await z(500),await B(ee))}},$=(F,D)=>{if(F.required&&!D.trim())return{valid:!1,error:"Jawaban tidak boleh kosong"};switch(F.type){case"number":const W=parseInt(D);return isNaN(W)?{valid:!1,error:"Mohon masukkan angka"}:F.min!==void 0&&W<F.min?{valid:!1,error:`Minimal ${F.min}`}:F.max!==void 0&&W>F.max?{valid:!1,error:`Maksimal ${F.max}`}:{valid:!0};case"choice":return F.options&&F.options.length>0&&!F.options.map(ne=>ne.toLowerCase()).includes(D.toLowerCase())?{valid:!1,error:`Pilih salah satu: ${F.options.join(", ")}`}:{valid:!0};case"text":default:return{valid:!0}}},H=async(F,D)=>{const W=D.onMaxRetry;if(W!=null&&W.sendCSMessage&&W.csMessage&&A({type:"sent",content:W.csMessage}),R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1),(W==null?void 0:W.action)==="jump_to_node"&&W.jumpToNodeId){const ne=e.nodes.find(G=>G.id===W.jumpToNodeId);if(ne){P({nodeId:F.id,nodeName:F.data.label,action:"Jump to Node",result:"success",message:`Jumping to ${ne.data.label}`}),await z(500),await B(ne);return}}const X=L(F.id,"max_retry");X?(await z(500),await B(X)):(P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"error",message:"Flow ended due to max retries"}),w(!1),y(null))},M=()=>{s([]),l([]),d({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),y(null),w(!1),j(!1),k(""),N(0),R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}})},U=i.jsx(ci,{children:i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:i.jsxs(fe.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:F=>F.stopPropagation(),style:{background:"#fff",borderRadius:"24px",width:"90vw",height:"85vh",maxWidth:"1200px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.2)"},children:[i.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)"},children:[i.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,color:"#fff"},children:["Flow Simulator - ",(e==null?void 0:e.name)||"Unknown"]}),i.jsx("button",{onClick:t,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer"},children:i.jsx(Rt,{size:24,style:{color:"#fff"}})})]}),i.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"400px 300px",gap:"1px",background:"#e5e7eb",overflow:"hidden"},children:[i.jsxs("div",{style:{background:"#ece5dd",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsx("div",{style:{background:"#075e54",padding:"12px 16px",color:"#fff",fontSize:"0.875rem",fontWeight:600},children:"Test User"}),i.jsx("div",{ref:h,style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:r.map(F=>i.jsx("div",{style:{alignSelf:F.type==="sent"?"flex-end":"flex-start",background:F.type==="sent"?"#dcf8c6":"#fff",padding:"8px 12px",borderRadius:"8px",maxWidth:"70%",fontSize:"0.875rem",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:F.content},F.id))}),i.jsxs("div",{style:{padding:"12px",background:"#f0f0f0",display:"flex",gap:"8px"},children:[i.jsx("input",{type:"text",value:T,onChange:F=>k(F.target.value),onKeyPress:F=>F.key==="Enter"&&V(),placeholder:v?"Type a message...":"Waiting for flow...",disabled:!v,style:{flex:1,padding:"8px 12px",borderRadius:"20px",border:"none",fontSize:"0.875rem"}}),i.jsx("button",{onClick:V,disabled:!v||!T.trim(),style:{background:v?"#25d366":"#ccc",color:"#fff",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:v?"pointer":"not-allowed"},children:i.jsx(Qf,{size:18})})]})]}),i.jsxs("div",{style:{background:"#fff",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",maxHeight:"200px",overflowY:"auto"},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Variables"}),Object.entries(u).map(([F,D])=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"6px",padding:"4px 8px",background:"#f9fafb",borderRadius:"4px"},children:[i.jsxs("span",{style:{color:"#6b7280"},children:[F,":"]}),i.jsx("span",{style:{fontWeight:500},children:JSON.stringify(D)})]},F)),Object.keys(u).length===0&&i.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"No variables yet"})]}),i.jsxs("div",{ref:p,style:{flex:1,padding:"16px",overflowY:"auto",minHeight:0},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Execution Log"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.map((F,D)=>i.jsxs("div",{style:{padding:"8px",background:F.result==="error"?"#fee2e2":F.result==="waiting"?"#fef3c7":"#d1fae5",borderRadius:"6px",fontSize:"0.75rem"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:F.nodeName}),i.jsxs("div",{style:{color:"#6b7280",wordBreak:"break-word"},children:[F.action,": ",F.message]})]},D)),o.length===0&&i.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"No logs yet. Click Start to begin."})]})]})]})]}),i.jsx("div",{style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"12px",justifyContent:"center",background:"#f9fafb",position:"relative",zIndex:10},children:b?i.jsxs("button",{onClick:M,style:{padding:"10px 24px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},children:[i.jsx(Jf,{size:16}),"Reset"]}):i.jsxs("button",{type:"button",onClick:K,style:{padding:"10px 24px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[i.jsx(hc,{size:16}),"Start Flow Test"]})})]})})});return $a.createPortal(U,document.body)}function NU({chatflowName:e,onBack:t,onSave:n,onTest:r,onUpdateName:s,onDelete:o,onToggleLock:l,isSaving:u=!1,hasUnsavedChanges:d=!1,lastSaved:f=null,validation:p,currentChatflow:h,isLocked:g=!1}){const[y,b]=S.useState(!1),[w,v]=S.useState(!1),[j,T]=S.useState(!1),[k,_]=S.useState(e),[N,E]=S.useState(!1),R=S.useRef(null),A=S.useRef(null);S.useEffect(()=>{const K=V=>{R.current&&!R.current.contains(V.target)&&b(!1)};if(y)return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[y]),S.useEffect(()=>{j&&A.current&&(A.current.focus(),A.current.select())},[j]),S.useEffect(()=>{_(e)},[e]);const P=()=>{T(!0),_(e)},z=()=>{k.trim()&&k!==e&&(s==null||s(k.trim())),T(!1)},L=()=>{_(e),T(!1)},B=K=>{K.key==="Enter"?z():K.key==="Escape"&&L()};return i.jsxs("div",{style:{height:"70px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 2rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:i.jsx(mi,{size:20,style:{color:"#f59e0b"}})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"2px"},children:"Chatflow Studio"}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:j?i.jsxs(i.Fragment,{children:[i.jsx("input",{ref:A,type:"text",value:k,onChange:K=>_(K.target.value),onKeyDown:B,style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",padding:"4px 8px",border:"2px solid #f59e0b",borderRadius:"6px",outline:"none",minWidth:"200px"}}),i.jsx("button",{onClick:z,style:{padding:"4px",background:"#10b981",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(to,{size:16,style:{color:"#fff"}})}),i.jsx("button",{onClick:L,style:{padding:"4px",background:"#ef4444",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Rt,{size:16,style:{color:"#fff"}})})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",margin:0},children:e}),s&&i.jsx("button",{onClick:P,style:{padding:"4px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s ease"},title:"Edit chatflow name",children:i.jsx(Xf,{size:14,style:{color:"#f59e0b"}})})]})})]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px",marginLeft:"16px"},children:[u&&i.jsxs(i.Fragment,{children:[i.jsx(Wt,{size:14,style:{animation:"spin 1s linear infinite"}}),i.jsx("span",{children:"Saving..."})]}),!u&&d&&i.jsx("span",{children:"Unsaved changes"}),!u&&!d&&f&&i.jsxs("span",{children:["Saved ",_U(f,{addSuffix:!0})]})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},children:[p&&!p.valid&&i.jsxs("div",{onClick:()=>b(!y),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"#fee2e2",borderRadius:"8px",cursor:"pointer"},children:[i.jsx(no,{size:16,style:{color:"#dc2626"}}),i.jsxs("span",{style:{fontSize:"0.875rem",color:"#dc2626",fontWeight:500},children:[p.errors.length," error(s)"]})]}),p&&p.valid&&p.warnings.length>0&&i.jsxs("div",{onClick:()=>b(!y),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"#fef3c7",borderRadius:"8px",cursor:"pointer"},children:[i.jsx(yf,{size:16,style:{color:"#f59e0b"}}),i.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:500},children:[p.warnings.length," warning(s)"]})]}),y&&p&&i.jsxs("div",{ref:R,onClick:K=>K.stopPropagation(),style:{position:"absolute",top:"50px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"350px",maxWidth:"450px",maxHeight:"400px",overflow:"auto",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Validation Results"}),i.jsx("button",{onClick:()=>b(!1),style:{background:"none",border:"none",cursor:"pointer"},children:i.jsx(ro,{size:20,style:{color:"#6b7280"}})})]}),p.errors.map((K,V)=>i.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#fee2e2",borderRadius:"8px",marginBottom:"8px"},children:[i.jsx(ro,{size:16,style:{color:"#dc2626",flexShrink:0,marginTop:"2px"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#dc2626",flex:1},children:K})]},`error-${V}`)),p.warnings.map((K,V)=>i.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#fef3c7",borderRadius:"8px",marginBottom:"8px"},children:[i.jsx(yf,{size:16,style:{color:"#f59e0b",flexShrink:0,marginTop:"2px"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#92400e",flex:1},children:K})]},`warning-${V}`)),p.valid&&p.warnings.length===0&&i.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#d1fae5",borderRadius:"8px"},children:[i.jsx(ui,{size:16,style:{color:"#10b981",flexShrink:0}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#065f46"},children:"Flow is valid"})]})]}),i.jsxs(fe.button,{whileHover:{scale:u||!d?1:1.05},whileTap:{scale:u||!d?1:.95},onClick:n,disabled:u||!d,style:{padding:"10px 20px",borderRadius:"12px",background:d&&!u?"rgba(16, 185, 129, 0.1)":"rgba(156, 163, 175, 0.1)",border:d&&!u?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(156, 163, 175, 0.2)",display:"flex",alignItems:"center",gap:"8px",cursor:u||!d?"not-allowed":"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:d&&!u?"#10b981":"#9ca3af",transition:"all 0.2s ease",opacity:u||!d?.6:1},children:[u?i.jsx(Wt,{size:16,style:{animation:"spin 1s linear infinite"}}):i.jsx(t5,{size:16}),"Save"]}),i.jsxs(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v(!0),style:{padding:"10px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)",border:"none",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:[i.jsx(hc,{size:16}),"Test Flow"]}),i.jsx(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(100, 116, 139, 0.1)",border:"1px solid rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:i.jsx($c,{size:18,style:{color:"#64748b"}})}),l&&i.jsx(fe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:g?"Unlock chatflow for editing":"Lock chatflow (set to active)",style:{width:"40px",height:"40px",borderRadius:"12px",background:g?"rgba(245, 158, 11, 0.1)":"rgba(100, 116, 139, 0.1)",border:g?"1px solid rgba(245, 158, 11, 0.3)":"1px solid rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:g?i.jsx(br,{size:18,style:{color:"#f59e0b"}}):i.jsx(Jj,{size:18,style:{color:"#64748b"}})}),o&&i.jsxs("div",{style:{position:"relative"},children:[i.jsx(fe.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:K=>{K.preventDefault(),K.stopPropagation(),E(!0)},title:"Delete chatflow",style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:i.jsx(At,{size:18,style:{color:"#ef4444"}})}),N&&i.jsxs("div",{onClick:K=>K.stopPropagation(),style:{position:"absolute",top:"50px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"280px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[i.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",fontWeight:600,color:"#1f2937"},children:"Delete Chatflow?"}),i.jsxs("p",{style:{margin:"0 0 16px 0",fontSize:"0.875rem",color:"#6b7280"},children:['This action cannot be undone. The chatflow "',e,'" will be permanently deleted.']}),i.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[i.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),K.stopPropagation(),E(!1)},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:"0.875rem",fontWeight:500,cursor:"pointer"},children:"Cancel"}),i.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),K.stopPropagation(),E(!1),o()},style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"#ef4444",color:"#fff",fontSize:"0.875rem",fontWeight:500,cursor:"pointer"},children:"Delete"})]})]})]})]}),w&&h&&i.jsx(EU,{chatflow:h,onClose:()=>v(!1)})]})}const TU=[{type:"trigger",icon:ja,label:"Start",description:"Flow starting point",color:"#f59e0b"},{type:"send_template",icon:_y,label:"Send Template",description:"Send WhatsApp template",color:"#06b6d4"},{type:"wait_reply",icon:gi,label:"Wait Reply",description:"Wait for user response",color:"#3b82f6"},{type:"condition",icon:Yj,label:"Condition",description:"Branch based on logic",color:"#8b5cf6"},{type:"delay",icon:r5,label:"Delay",description:"Wait for duration",color:"#10b981"},{type:"guest_form",icon:Gj,label:"Guest Form",description:"Collect guest information",color:"#10b981"},{type:"update_guest",icon:Ry,label:"Update Guest",description:"Update guest data",color:"#ec4899"},{type:"end",icon:Kj,label:"End",description:"Flow ending point",color:"#64748b"}];function RU({onCollapse:e}){const t=(n,r)=>{n.dataTransfer.setData("application/reactflow",r),n.dataTransfer.effectAllowed="move"};return i.jsxs("div",{style:{width:"280px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRight:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Node Palette"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",margin:"4px 0 0 0"},children:"Drag nodes to canvas"})]}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:TU.map(n=>{const r=n.icon;return i.jsx(fe.div,{draggable:!0,onDragStart:s=>t(s,n.type),whileHover:{scale:1.02,x:4},style:{padding:"12px",borderRadius:"12px",background:`linear-gradient(135deg, ${n.color}15 0%, ${n.color}08 100%)`,border:`1px solid ${n.color}30`,cursor:"grab",transition:"all 0.2s ease"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:`${n.color}20`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(r,{size:18,style:{color:n.color}})}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"2px"},children:n.label}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n.description})]})]})},n.type)})})})]})}function IU({node:e}){return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"8px"},children:"Start Node"}),i.jsxs("p",{style:{fontSize:"0.8125rem",color:"#15803d",lineHeight:"1.5"},children:["This is the ",i.jsx("strong",{children:"starting point"})," of your flow. Every flow must have exactly one Start node."]}),i.jsx("p",{style:{fontSize:"0.8125rem",color:"#15803d",lineHeight:"1.5",marginTop:"8px"},children:"The Start node doesn't trigger anything automatically - it simply marks where the flow begins when executed."})]}),i.jsx("div",{style:{padding:"12px",background:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:i.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",margin:0},children:[" ",i.jsx("strong",{children:"Tip:"})," Connect the Start node to your first action (usually Send Template)."]})})]})}function AU({node:e,onChange:t}){const{templates:n}=Wa(),r=e.data.config,s=n.filter(p=>p.status==="APPROVED"),o=s.find(p=>p.id===(r==null?void 0:r.templateId)),u=o?(p=>{if(!p)return[];const h=/\{\{(\w+)\}\}/g,g=p.matchAll(h),y=new Set;for(const b of g)y.add(b[1]);return Array.from(y)})(o.content.body.text):[],d=p=>{const h={...r||{templateId:"",templateName:""},...p};console.log(" SendTemplateConfig updating:",{nodeId:e.id,oldConfig:r,updates:p,newConfig:h}),t({...e,data:{...e.data,config:h}})},f=(p,h)=>{const g={...(r==null?void 0:r.variables)||{},[p]:h};d({variables:g})};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"WhatsApp Template"}),i.jsxs("select",{value:(r==null?void 0:r.templateId)||"",onChange:p=>{const h=s.find(g=>g.id===p.target.value);t({...e,data:{...e.data,label:(h==null?void 0:h.name)||"Send Template",config:{...r||{templateId:"",templateName:""},templateId:p.target.value,templateName:(h==null?void 0:h.name)||""}}})},style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"",children:"Select Template"}),s.map(p=>i.jsxs("option",{value:p.id,children:[p.name," (",p.category,")"]},p.id))]}),s.length===0&&i.jsx("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"4px"},children:"No approved templates available. Create and approve a template first."})]}),o&&i.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Preview"}),i.jsx(Py,{template:o,sampleData:Object.fromEntries(u.map(p=>{var h;return[p,((h=r==null?void 0:r.variables)==null?void 0:h[p])||`[${p}]`]}))})]}),u.length>0&&i.jsxs("div",{children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Variable Mapping"}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"12px"},children:"Map template variables to guest fields or flow variables"}),u.map(p=>{var g;const h=((g=r==null?void 0:r.variables)==null?void 0:g[p])||"";return i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{fontSize:"0.8125rem",fontWeight:500,color:"#6b7280",marginBottom:"6px",display:"block"},children:`{{${p}}}`}),i.jsxs("select",{value:h,onChange:y=>f(p,y.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"",children:"Select source"}),i.jsxs("optgroup",{label:"Guest Fields",children:[i.jsx("option",{value:"{{guest.name}}",children:"Guest Name"}),i.jsx("option",{value:"{{guest.phone}}",children:"Guest Phone"}),i.jsx("option",{value:"{{guest.email}}",children:"Guest Email"}),i.jsx("option",{value:"{{guest.table}}",children:"Table Number"}),i.jsx("option",{value:"{{guest.rsvpStatus}}",children:"RSVP Status"})]}),i.jsxs("optgroup",{label:"Event Fields",children:[i.jsx("option",{value:"{{event.name}}",children:"Event Name"}),i.jsx("option",{value:"{{event.date}}",children:"Event Date"}),i.jsx("option",{value:"{{event.venue}}",children:"Event Venue"})]})]})]},p)})]})]})}function PU({node:e,onChange:t}){const n=e.data.config,[r,s]=S.useState(""),o=h=>{const g={...n||{},...h};console.log(" WaitReplyConfig updating:",{nodeId:e.id,oldConfig:n,updates:h,newConfig:g}),t({...e,data:{...e.data,config:g}})},l=(n==null?void 0:n.expectedValues)||[],u=h=>{const g=h.trim();g&&!l.includes(g)&&o({expectedValues:[...l,g]}),s("")},d=h=>{o({expectedValues:l.filter(g=>g!==h)})},f=h=>{h.key==="Enter"||h.key===";"?(h.preventDefault(),u(r)):h.key==="Backspace"&&!r&&l.length>0&&d(l[l.length-1])},p=()=>{r.trim()&&u(r)};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Timeout (seconds)"}),i.jsx("input",{type:"number",value:(n==null?void 0:n.timeout)||300,onChange:h=>o({timeout:parseInt(h.target.value)||300}),min:0,placeholder:"300",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"How long to wait for a user reply (default: 300 seconds = 5 minutes)"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Timeout Action"}),i.jsxs("select",{value:(n==null?void 0:n.timeoutAction)||"continue",onChange:h=>o({timeoutAction:h.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"continue",children:"Continue to next node"}),i.jsx("option",{value:"end",children:"End flow"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"What to do when timeout is reached"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Save Reply As Variable"}),i.jsx("input",{type:"text",value:(n==null?void 0:n.saveAs)||"",onChange:h=>o({saveAs:h.target.value}),placeholder:"e.g., userReply, rsvpResponse",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Store the user's reply in a variable for later use"})]}),i.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"12px"},children:"Input Validation (Optional)"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Expected Values"}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",background:"#fff",minHeight:"42px",alignItems:"center"},children:[l.map((h,g)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"6px",fontSize:"0.8125rem",fontWeight:500,color:"#166534"},children:[i.jsx("span",{children:h}),i.jsx("button",{type:"button",onClick:()=>d(h),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",padding:0,background:"rgba(22, 101, 52, 0.1)",border:"none",borderRadius:"50%",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:y=>y.currentTarget.style.background="rgba(22, 101, 52, 0.2)",onMouseLeave:y=>y.currentTarget.style.background="rgba(22, 101, 52, 0.1)",children:i.jsx(Rt,{size:12,style:{color:"#166534"}})})]},g)),i.jsx("input",{type:"text",value:r,onChange:h=>s(h.target.value),onKeyDown:f,onBlur:p,placeholder:l.length===0?"Type and press Enter or ;":"Add more...",style:{flex:1,minWidth:"100px",padding:"4px",border:"none",outline:"none",fontSize:"0.875rem",background:"transparent"}})]}),i.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:["Type a value and press ",i.jsx("kbd",{style:{background:"#f3f4f6",padding:"1px 4px",borderRadius:"3px",border:"1px solid #d1d5db"},children:"Enter"})," or ",i.jsx("kbd",{style:{background:"#f3f4f6",padding:"1px 4px",borderRadius:"3px",border:"1px solid #d1d5db"},children:";"})," to add. Leave empty to accept any input."]})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Retry Message"}),i.jsx("textarea",{value:(n==null?void 0:n.retryMessage)||"",onChange:h=>o({retryMessage:h.target.value}),placeholder:"e.g., Maaf, mohon jawab dengan 'yes' atau 'no' saja.",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Message to send when user input is invalid"})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Max Retries"}),i.jsx("input",{type:"number",value:(n==null?void 0:n.maxRetries)||3,onChange:h=>o({maxRetries:parseInt(h.target.value)||3}),min:1,max:10,placeholder:"3",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Maximum number of retry attempts (default: 3)"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:(n==null?void 0:n.caseSensitive)||!1,onChange:h=>o({caseSensitive:h.target.checked}),style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Case sensitive validation"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",marginLeft:"24px"},children:'If checked, "YES" and "yes" will be treated as different'})]}),i.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"2px solid #bbf7d0"},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"12px"},children:"After Max Retries"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Fallback Action"}),i.jsxs("select",{value:(n==null?void 0:n.fallbackAction)||"end",onChange:h=>o({fallbackAction:h.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"end",children:"End flow (stop execution)"}),i.jsx("option",{value:"continue",children:"Continue to next node"}),i.jsx("option",{value:"wait_again",children:"Wait for reply again (unlimited retries)"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"What to do after max retry attempts reached"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Fallback Message"}),i.jsx("textarea",{value:(n==null?void 0:n.fallbackMessage)||"",onChange:h=>o({fallbackMessage:h.target.value}),placeholder:"e.g., Maaf kami tidak dapat memproses jawaban Anda. Silakan hubungi CS kami di +6281234567890",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),i.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:["Message to send before ",(n==null?void 0:n.fallbackAction)==="continue"?"continuing":"ending"," the flow"]})]})]})]})]})}function MU({node:e,onChange:t}){const n=e.data.config,r=s=>{const o={...n||{variable:"",operator:"equals",value:""},...s};console.log(" ConditionConfig updating:",{nodeId:e.id,oldConfig:n,updates:s,newConfig:o}),t({...e,data:{...e.data,config:o}})};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Variable to Check"}),i.jsx("input",{type:"text",value:(n==null?void 0:n.variable)||"",onChange:s=>r({variable:s.target.value}),placeholder:"e.g., userReply, rsvpStatus",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Variable name from wait_reply or set_variable nodes"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Operator"}),i.jsxs("select",{value:(n==null?void 0:n.operator)||"equals",onChange:s=>r({operator:s.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"equals",children:"Equals"}),i.jsx("option",{value:"not_equals",children:"Not Equals"}),i.jsx("option",{value:"contains",children:"Contains"}),i.jsx("option",{value:"matches",children:"Matches (regex)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Value to Compare"}),i.jsx("input",{type:"text",value:(n==null?void 0:n.value)||"",onChange:s=>r({value:s.target.value}),placeholder:"e.g., yes, confirm, hadir",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:(n==null?void 0:n.caseSensitive)||!1,onChange:s=>r({caseSensitive:s.target.checked}),style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Case sensitive"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",marginLeft:"24px"},children:'If unchecked, "YES" and "yes" will be treated as the same'})]}),i.jsxs("div",{style:{padding:"12px",background:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:[i.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",fontWeight:500},children:[i.jsx("strong",{children:"Note:"})," Connect two edges from this node:"]}),i.jsxs("ul",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"4px",paddingLeft:"20px"},children:[i.jsx("li",{children:"True path: When condition matches"}),i.jsx("li",{children:"False path: When condition doesn't match"})]})]})]})}function DU({node:e,onChange:t}){const n=e.data.config,r=o=>{const l={...n||{duration:1,unit:"seconds"},...o};console.log(" DelayConfig updating:",{nodeId:e.id,oldConfig:n,updates:o,newConfig:l}),t({...e,data:{...e.data,config:l}})},s=()=>{const o=(n==null?void 0:n.duration)||1,l=(n==null?void 0:n.unit)||"seconds";return o===1?`1 ${l.slice(0,-1)}`:`${o} ${l}`};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Duration"}),i.jsx("input",{type:"number",value:(n==null?void 0:n.duration)||1,onChange:o=>r({duration:parseInt(o.target.value)||1}),min:1,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Time Unit"}),i.jsxs("select",{value:(n==null?void 0:n.unit)||"seconds",onChange:o=>r({unit:o.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"seconds",children:"Seconds"}),i.jsx("option",{value:"minutes",children:"Minutes"}),i.jsx("option",{value:"hours",children:"Hours"}),i.jsx("option",{value:"days",children:"Days"})]})]}),i.jsxs("div",{style:{padding:"12px",background:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[i.jsxs("p",{style:{fontSize:"0.875rem",color:"#166534",fontWeight:500},children:["Will wait for: ",i.jsx("strong",{children:s()})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#15803d",marginTop:"4px"},children:"The flow will pause before continuing to the next node"})]})]})}const FU=()=>({questions:[],enableConfirmation:!1,confirmationMessage:"",confirmYesKeywords:["ya","benar","ok","sudah"],confirmNoKeywords:["tidak","salah","ulang","bukan"],maxQuestionRetries:3,maxConfirmRetries:3,onMaxRetry:{sendCSMessage:!1,csMessage:"",action:"end",jumpToNodeId:void 0}}),OU=()=>({id:`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:"",type:"text",variableName:"",required:!0,promptMessage:"",errorMessage:"Jawaban tidak valid. Silakan coba lagi."});function zU({node:e,onChange:t,allNodes:n=[]}){var w,v,j,T,k,_,N,E,R;const r=e.data.config||FU(),[s,o]=S.useState(null),[l,u]=S.useState({questions:!0,confirmation:!1,retry:!1,maxRetry:!1}),d=A=>{const P={...r,...A};t({...e,data:{...e.data,config:P}})},f=()=>{const A=OU();d({questions:[...r.questions,A]}),o(A.id)},p=(A,P)=>{d({questions:r.questions.map(z=>z.id===A?{...z,...P}:z)})},h=A=>{d({questions:r.questions.filter(P=>P.id!==A)}),s===A&&o(null)},g=(A,P)=>{const z=[...r.questions],L=P==="up"?A-1:A+1;L<0||L>=z.length||([z[A],z[L]]=[z[L],z[A]],d({questions:z}))},y=A=>{u(P=>({...P,[A]:!P[A]}))},b=n.filter(A=>A.id!==e.id&&A.type!=="end");return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsx(Pd,{title:"Questions",count:r.questions.length,expanded:l.questions,onToggle:()=>y("questions")}),l.questions&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.questions.length===0?i.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:"No questions yet. Add your first question below."}):r.questions.map((A,P)=>i.jsx($U,{question:A,index:P,isEditing:s===A.id,onEdit:()=>o(A.id),onSave:()=>o(null),onUpdate:z=>p(A.id,z),onDelete:()=>h(A.id),onMoveUp:()=>g(P,"up"),onMoveDown:()=>g(P,"down"),canMoveUp:P>0,canMoveDown:P<r.questions.length-1},A.id)),i.jsxs("button",{onClick:f,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"2px dashed #10b981",background:"rgba(16, 185, 129, 0.05)",color:"#10b981",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:[i.jsx(Vt,{size:18}),"Add Question"]})]}),i.jsx(Pd,{title:"Confirmation",expanded:l.confirmation,onToggle:()=>y("confirmation"),badge:r.enableConfirmation?"ON":"OFF",badgeColor:r.enableConfirmation?"#10b981":"#6b7280"}),l.confirmation&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.enableConfirmation,onChange:A=>d({enableConfirmation:A.target.checked}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Enable confirmation before submit"})]}),r.enableConfirmation&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Confirmation Message"}),i.jsx("textarea",{value:r.confirmationMessage||"",onChange:A=>d({confirmationMessage:A.target.value}),placeholder:"Data Anda:\\n- Nama: {{nama}}\\n- Jumlah: {{jumlah}} orang\\n\\nSudah benar? Balas 'Ya' atau 'Tidak'",style:{...pn,minHeight:"100px",resize:"vertical"}}),i.jsxs("p",{style:rf,children:["Use ","{{variableName}}"," to include collected values"]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Yes Keywords"}),i.jsx("input",{type:"text",value:((w=r.confirmYesKeywords)==null?void 0:w.join(", "))||"",onChange:A=>d({confirmYesKeywords:A.target.value.split(",").map(P=>P.trim()).filter(Boolean)}),placeholder:"ya, benar, ok",style:pn})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"No Keywords"}),i.jsx("input",{type:"text",value:((v=r.confirmNoKeywords)==null?void 0:v.join(", "))||"",onChange:A=>d({confirmNoKeywords:A.target.value.split(",").map(P=>P.trim()).filter(Boolean)}),placeholder:"tidak, salah, ulang",style:pn})]})]})]})]}),i.jsx(Pd,{title:"Retry Settings",expanded:l.retry,onToggle:()=>y("retry")}),l.retry&&i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Max Question Retries"}),i.jsx("input",{type:"number",min:1,max:10,value:r.maxQuestionRetries||3,onChange:A=>d({maxQuestionRetries:parseInt(A.target.value)||3}),style:pn}),i.jsx("p",{style:rf,children:"Per invalid answer"})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Max Confirm Retries"}),i.jsx("input",{type:"number",min:1,max:10,value:r.maxConfirmRetries||3,onChange:A=>d({maxConfirmRetries:parseInt(A.target.value)||3}),style:pn}),i.jsx("p",{style:rf,children:'When answering "No"'})]})]})}),i.jsx(Pd,{title:"After Max Retries",expanded:l.maxRetry,onToggle:()=>y("maxRetry")}),l.maxRetry&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:((j=r.onMaxRetry)==null?void 0:j.sendCSMessage)||!1,onChange:A=>d({onMaxRetry:{...r.onMaxRetry,sendCSMessage:A.target.checked}}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Send CS contact message"})]}),((T=r.onMaxRetry)==null?void 0:T.sendCSMessage)&&i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"CS Message"}),i.jsx("input",{type:"text",value:((k=r.onMaxRetry)==null?void 0:k.csMessage)||"",onChange:A=>d({onMaxRetry:{...r.onMaxRetry,csMessage:A.target.value}}),placeholder:"Hubungi CS kami: +62812345678",style:pn})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Then"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"radio",name:"maxRetryAction",checked:((_=r.onMaxRetry)==null?void 0:_.action)==="end",onChange:()=>d({onMaxRetry:{...r.onMaxRetry,action:"end",jumpToNodeId:void 0}}),style:{accentColor:"#10b981"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"End flow"})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"radio",name:"maxRetryAction",checked:((N=r.onMaxRetry)==null?void 0:N.action)==="jump_to_node",onChange:()=>d({onMaxRetry:{...r.onMaxRetry,action:"jump_to_node"}}),style:{accentColor:"#10b981"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"Jump to node:"})]}),((E=r.onMaxRetry)==null?void 0:E.action)==="jump_to_node"&&i.jsxs("select",{value:((R=r.onMaxRetry)==null?void 0:R.jumpToNodeId)||"",onChange:A=>d({onMaxRetry:{...r.onMaxRetry,jumpToNodeId:A.target.value||void 0}}),style:{...pn,marginLeft:"24px"},children:[i.jsx("option",{value:"",children:"Select target node..."}),b.map(A=>i.jsxs("option",{value:A.id,children:[A.data.label||A.type," (",A.type,")"]},A.id))]})]})]}),i.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #fcd34d"},children:i.jsxs("p",{style:{fontSize:"0.75rem",color:"#92400e",margin:0},children:[i.jsx("strong",{children:"Note:"})," Max 3 global restarts per guest to prevent infinite loops."]})})]})]})}function Pd({title:e,count:t,expanded:n,onToggle:r,badge:s,badgeColor:o}){return i.jsxs("button",{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",cursor:"pointer",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e}),t!==void 0&&i.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",background:"#10b981",color:"white",fontSize:"0.7rem",fontWeight:600},children:t}),s&&i.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",background:o||"#6b7280",color:"white",fontSize:"0.7rem",fontWeight:600},children:s})]}),n?i.jsx(Sy,{size:18,color:"#6b7280"}):i.jsx(fo,{size:18,color:"#6b7280"})]})}function $U({question:e,index:t,isEditing:n,onEdit:r,onSave:s,onUpdate:o,onDelete:l,onMoveUp:u,onMoveDown:d,canMoveUp:f,canMoveDown:p}){var h;return n?i.jsxs("div",{style:{padding:"16px",borderRadius:"12px",border:"2px solid #10b981",background:"rgba(16, 185, 129, 0.05)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[i.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#10b981"},children:["Edit Question ",t+1]}),i.jsx("button",{onClick:s,style:Bl,children:i.jsx(Rt,{size:16})})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Question Text"}),i.jsx("input",{type:"text",value:e.question,onChange:g=>o({question:g.target.value}),placeholder:"Siapa nama lengkap Anda?",style:pn})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Answer Type"}),i.jsxs("select",{value:e.type,onChange:g=>o({type:g.target.value}),style:pn,children:[i.jsx("option",{value:"text",children:"Text (free input)"}),i.jsx("option",{value:"number",children:"Number"}),i.jsx("option",{value:"choice",children:"Choice (options)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Variable Name"}),i.jsx("input",{type:"text",value:e.variableName,onChange:g=>o({variableName:g.target.value.replace(/\s/g,"_")}),placeholder:"nama",style:pn}),i.jsxs("p",{style:rf,children:["Available as ","{{"+(e.variableName||"variableName")+"}}"]})]})]}),e.type==="number"&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Min Value"}),i.jsx("input",{type:"number",value:e.min||"",onChange:g=>o({min:g.target.value?parseInt(g.target.value):void 0}),placeholder:"1",style:pn})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Max Value"}),i.jsx("input",{type:"number",value:e.max||"",onChange:g=>o({max:g.target.value?parseInt(g.target.value):void 0}),placeholder:"10",style:pn})]})]}),e.type==="choice"&&i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Options (one per line)"}),i.jsx("textarea",{value:((h=e.options)==null?void 0:h.join(`
`))||"",onChange:g=>o({options:g.target.value.split(`
`).filter(Boolean)}),placeholder:"Halal\\nVegetarian\\nTidak ada",style:{...pn,minHeight:"80px"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Custom Prompt Message (optional)"}),i.jsx("input",{type:"text",value:e.promptMessage||"",onChange:g=>o({promptMessage:g.target.value}),placeholder:"Balas dengan nama lengkap Anda ya!",style:pn})]}),i.jsxs("div",{children:[i.jsx("label",{style:hn,children:"Error Message"}),i.jsx("input",{type:"text",value:e.errorMessage||"",onChange:g=>o({errorMessage:g.target.value}),placeholder:"Jawaban tidak valid. Silakan coba lagi.",style:pn})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:e.required,onChange:g=>o({required:g.target.checked}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"Required"})]})]})]}):i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",color:"#9ca3af"},children:[i.jsx("button",{onClick:u,disabled:!f,style:{...Bl,opacity:f?1:.3},children:i.jsx(Sy,{size:14})}),i.jsx("button",{onClick:d,disabled:!p,style:{...Bl,opacity:p?1:.3},children:i.jsx(fo,{size:14})})]}),i.jsx(Cy,{size:16,color:"#9ca3af"}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"#1f2937",marginBottom:"2px"},children:["Q",t+1,": ",e.question||"(no question text)"]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[e.type," | ","{{",e.variableName||"?","}}"," | ",e.required?"Required":"Optional"]})]}),i.jsx("button",{onClick:r,style:Bl,title:"Edit",children:i.jsx(Xf,{size:16,color:"#6b7280"})}),i.jsx("button",{onClick:l,style:Bl,title:"Delete",children:i.jsx(At,{size:16,color:"#ef4444"})})]})}const hn={display:"block",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"6px"},pn={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",outline:"none",transition:"border-color 0.2s"},rf={fontSize:"0.7rem",color:"#9ca3af",marginTop:"4px",margin:"4px 0 0 0"},Bl={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px",borderRadius:"4px",border:"none",background:"transparent",cursor:"pointer",transition:"background 0.2s"},LU=[{value:"name",label:"Guest Name"},{value:"phone",label:"Phone Number"},{value:"email",label:"Email"},{value:"plus_one_count",label:"Plus One Count"},{value:"tags",label:"Tags (append)"},{value:"notes",label:"Notes"},{value:"rsvp_status",label:"RSVP Status"},{value:"table_number",label:"Table Number"},{value:"custom",label:"Custom Field..."}];function BU({node:e,onChange:t,allNodes:n=[]}){var f,p;const r=e.data.config,s=n.filter(h=>h.type==="guest_form").flatMap(h=>{var y;const g=h.data.config;return((y=g==null?void 0:g.questions)==null?void 0:y.map(b=>b.variableName).filter(Boolean))||[]}),o=h=>{const g={...r||{action:"update_rsvp"},...h};console.log("UpdateGuestConfig updating:",{nodeId:e.id,oldConfig:r,updates:h,newConfig:g}),t({...e,data:{...e.data,config:g}})},l=()=>{const h=(r==null?void 0:r.variableMappings)||[];o({variableMappings:[...h,{sourceVariable:"",targetField:"name"}]})},u=(h,g)=>{const b=[...(r==null?void 0:r.variableMappings)||[]];b[h]={...b[h],...g},o({variableMappings:b})},d=h=>{const g=(r==null?void 0:r.variableMappings)||[];o({variableMappings:g.filter((y,b)=>b!==h)})};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"Action"}),i.jsxs("select",{value:(r==null?void 0:r.action)||"update_rsvp",onChange:h=>o({action:h.target.value}),style:Md,children:[i.jsx("option",{value:"map_from_variables",children:"Map from Variables (Guest Form)"}),i.jsx("option",{value:"add_tag",children:"Add Tag"}),i.jsx("option",{value:"remove_tag",children:"Remove Tag"}),i.jsx("option",{value:"update_rsvp",children:"Update RSVP Status"}),i.jsx("option",{value:"update_field",children:"Update Custom Field"})]})]}),(r==null?void 0:r.action)==="map_from_variables"&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.length>0&&i.jsx("div",{style:{padding:"12px",background:"#ecfdf5",borderRadius:"8px",border:"1px solid #a7f3d0"},children:i.jsxs("p",{style:{fontSize:"0.75rem",color:"#065f46",margin:0},children:[i.jsx("strong",{children:"Available variables:"})," ",s.map(h=>`{{${h}}}`).join(", ")]})}),(((f=r==null?void 0:r.variableMappings)==null?void 0:f.length)||0)===0?i.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:"No mappings configured. Add mappings to save form data to guest record."}):(p=r==null?void 0:r.variableMappings)==null?void 0:p.map((h,g)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"#fff",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Variable"}),s.length>0?i.jsxs("select",{value:h.sourceVariable,onChange:y=>u(g,{sourceVariable:y.target.value}),style:Md,children:[i.jsx("option",{value:"",children:"Select variable..."}),s.map(y=>i.jsx("option",{value:y,children:`{{${y}}}`},y))]}):i.jsx("input",{type:"text",value:h.sourceVariable,onChange:y=>u(g,{sourceVariable:y.target.value}),placeholder:"variableName",style:Go})]}),i.jsx("div",{style:{padding:"20px 8px 0",color:"#9ca3af",fontSize:"1.2rem"},children:""}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Guest Field"}),i.jsx("select",{value:h.targetField,onChange:y=>u(g,{targetField:y.target.value}),style:Md,children:LU.map(y=>i.jsx("option",{value:y.value,children:y.label},y.value))})]}),h.targetField==="custom"&&i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Field Name"}),i.jsx("input",{type:"text",value:h.customFieldName||"",onChange:y=>u(g,{customFieldName:y.target.value}),placeholder:"customField",style:Go})]}),i.jsx("button",{onClick:()=>d(g),style:{...VU,marginTop:"20px"},title:"Delete mapping",children:i.jsx(At,{size:16,color:"#ef4444"})})]},g)),i.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"2px dashed #ec4899",background:"rgba(236, 72, 153, 0.05)",color:"#ec4899",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:[i.jsx(Vt,{size:18}),"Add Mapping"]})]}),(r==null?void 0:r.action)==="add_tag"&&i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"Tag Name"}),i.jsx("input",{type:"text",value:r.tagName||"",onChange:h=>o({tagName:h.target.value}),placeholder:"e.g., confirmed, vip, family",style:Go})]}),(r==null?void 0:r.action)==="remove_tag"&&i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"Tag Name"}),i.jsx("input",{type:"text",value:r.tagName||"",onChange:h=>o({tagName:h.target.value}),placeholder:"e.g., pending",style:Go})]}),(r==null?void 0:r.action)==="update_rsvp"&&i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"RSVP Status"}),i.jsxs("select",{value:r.rsvpStatus||"",onChange:h=>o({rsvpStatus:h.target.value}),style:Md,children:[i.jsx("option",{value:"",children:"Select status"}),i.jsx("option",{value:"confirmed",children:"Confirmed (Hadir)"}),i.jsx("option",{value:"declined",children:"Declined (Tidak Hadir)"}),i.jsx("option",{value:"maybe",children:"Maybe (Mungkin)"}),i.jsx("option",{value:"pending",children:"Pending"})]})]}),(r==null?void 0:r.action)==="update_field"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"Field Name"}),i.jsx("input",{type:"text",value:r.fieldName||"",onChange:h=>o({fieldName:h.target.value}),placeholder:"e.g., tableNumber, dietaryRestrictions",style:Go})]}),i.jsxs("div",{children:[i.jsx("label",{style:ls,children:"Field Value"}),i.jsx("input",{type:"text",value:r.fieldValue||"",onChange:h=>o({fieldValue:h.target.value}),placeholder:"e.g., 5, vegetarian, {{userReply}}",style:Go}),i.jsxs("p",{style:WU,children:["You can use variables like ",i.jsx("code",{children:"{{userReply}}"})]})]})]}),i.jsx("div",{style:{padding:"12px",background:"#fce7f3",borderRadius:"8px",border:"1px solid #fbcfe8"},children:i.jsxs("p",{style:{fontSize:"0.75rem",color:"#831843",fontWeight:500,margin:0},children:[i.jsx("strong",{children:"Note:"})," Changes will be applied to the guest record in the database"]})})]})}const ls={fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},Go={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff"},Md={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},WU={fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},VU={display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",borderRadius:"8px",border:"none",background:"transparent",cursor:"pointer",transition:"background 0.2s"};function UU({node:e,onChange:t}){const n=e.data.config,r=s=>{console.log(" EndConfig updating:",{nodeId:e.id,oldConfig:n,newReason:s}),t({...e,data:{...e.data,config:{reason:s}}})};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"End Reason"}),i.jsxs("select",{value:(n==null?void 0:n.reason)||"completed",onChange:s=>r(s.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[i.jsx("option",{value:"completed",children:"Flow Completed"}),i.jsx("option",{value:"user_declined",children:"User Declined"}),i.jsx("option",{value:"timeout",children:"Timeout"}),i.jsx("option",{value:"error",children:"Error Occurred"}),i.jsx("option",{value:"custom",children:"Custom Reason"})]})]}),(n==null?void 0:n.reason)==="custom"&&i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Custom Reason"}),i.jsx("textarea",{value:(n==null?void 0:n.customReason)||"",onChange:s=>t({...e,data:{...e.data,config:{reason:"custom",customReason:s.target.value}}}),placeholder:"Describe why the flow ended",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",resize:"vertical"}})]}),i.jsxs("div",{style:{padding:"12px",background:"#f3f4f6",borderRadius:"8px",border:"1px solid #d1d5db"},children:[i.jsx("p",{style:{fontSize:"0.875rem",color:"#374151",fontWeight:500},children:"End Node"}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"This node marks the end of the conversation flow. No further nodes will be executed after this point."})]}),i.jsx("div",{style:{padding:"12px",background:"#dbeafe",borderRadius:"8px",border:"1px solid #bfdbfe"},children:i.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",fontWeight:500},children:[i.jsx("strong",{children:"Best Practice:"})," Always provide at least one end node in your flow to properly terminate the conversation."]})})]})}function HU({node:e,allNodes:t,isLocked:n=!1,onUpdate:r,onDelete:s,onClose:o}){const l=d=>{n||r({...e,data:{...e.data,label:d}})},u={trigger:"Trigger Node",send_template:"Send Template Node",wait_reply:"Wait Reply Node",condition:"Condition Node",delay:"Delay Node",guest_form:"Guest Form Node",update_guest:"Update Guest Node",end:"End Node"};return i.jsxs("div",{style:{width:"320px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderLeft:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Properties"}),n&&i.jsxs("div",{title:"Chatflow is locked (active)",style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 8px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"6px"},children:[i.jsx(br,{size:12,style:{color:"#f59e0b"}}),i.jsx("span",{style:{fontSize:"0.7rem",fontWeight:600,color:"#f59e0b"},children:"Locked"})]})]}),i.jsx("button",{onClick:o,style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Rt,{size:16,style:{color:"#6b7280"}})})]}),n&&i.jsxs("div",{style:{padding:"12px 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderBottom:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(br,{size:14,style:{color:"#f59e0b"}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#92400e"},children:"This chatflow is active. Unlock to edit."})]}),i.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:"Node Type"}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",padding:"10px 12px",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)"},children:u[e.type]||e.type})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:"Label"}),i.jsx("input",{type:"text",value:e.data.label,onChange:d=>l(d.target.value),disabled:n,style:{width:"100%",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:n?"#9ca3af":"#1f2937",padding:"10px 12px",background:n?"rgba(0, 0, 0, 0.03)":"rgba(255, 255, 255, 0.9)",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none",cursor:n?"not-allowed":"text"}})]}),i.jsxs("div",{style:{marginBottom:"1.5rem",opacity:n?.6:1,pointerEvents:n?"none":"auto"},children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"12px"},children:"Configuration"}),e.type==="trigger"&&i.jsx(IU,{node:e,onChange:r}),e.type==="send_template"&&i.jsx(AU,{node:e,onChange:r}),e.type==="wait_reply"&&i.jsx(PU,{node:e,onChange:r}),e.type==="condition"&&i.jsx(MU,{node:e,onChange:r}),e.type==="delay"&&i.jsx(DU,{node:e,onChange:r}),e.type==="guest_form"&&i.jsx(zU,{node:e,onChange:r,allNodes:t}),e.type==="update_guest"&&i.jsx(BU,{node:e,onChange:r,allNodes:t}),e.type==="end"&&i.jsx(UU,{node:e,onChange:r})]})]}),!n&&i.jsx("div",{style:{padding:"1.5rem",borderTop:"1px solid rgba(0, 0, 0, 0.05)"},children:i.jsxs(fe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,style:{width:"100%",padding:"12px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",transition:"all 0.2s ease"},children:[i.jsx(At,{size:16}),"Delete Node"]})})]})}function qU({chatflow:e,onClick:t,onDelete:n}){const[r,s]=S.useState(!1),[o,l]=S.useState(!1),u={draft:{bg:"rgba(100, 116, 139, 0.1)",text:"#64748b"},active:{bg:"rgba(16, 185, 129, 0.1)",text:"#10b981"},paused:{bg:"rgba(245, 158, 11, 0.1)",text:"#f59e0b"},archived:{bg:"rgba(239, 68, 68, 0.1)",text:"#ef4444"}},d=u[e.status]||u.draft;return i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:t,style:{position:"relative",padding:"1.5rem",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"24px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:r?"0 20px 60px rgba(245, 158, 11, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:r?"scale(1.02)":"scale(1)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%)",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(ja,{size:24,style:{color:"#f59e0b"}})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.status==="active"&&i.jsx("div",{title:"Locked - Active chatflow",style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(br,{size:14,style:{color:"#f59e0b"}})}),n&&i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!0)},title:"Delete chatflow",style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:i.jsx(At,{size:14,style:{color:"#ef4444"}})}),o&&i.jsxs("div",{onClick:f=>f.stopPropagation(),style:{position:"absolute",top:"36px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"260px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[i.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",fontWeight:600,color:"#1f2937"},children:['Delete "',e.name,'"?']}),i.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.8rem",color:"#6b7280"},children:"This action cannot be undone."}),i.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[i.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!1)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:"0.8rem",fontWeight:500,cursor:"pointer"},children:"Cancel"}),i.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!1),n(e.id)},style:{padding:"6px 12px",borderRadius:"6px",border:"none",background:"#ef4444",color:"#fff",fontSize:"0.8rem",fontWeight:500,cursor:"pointer"},children:"Delete"})]})]})]}),i.jsx("div",{style:{padding:"4px 12px",background:d.bg,border:`1px solid ${d.text}30`,borderRadius:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:d.text,textTransform:"capitalize"},children:e.status})]})]}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:e.name}),e.description&&i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginBottom:"1rem",lineHeight:"1.5"},children:e.description}),i.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",marginBottom:"2px"},children:"Nodes"}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937"},children:e.nodes.length})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",marginBottom:"2px"},children:"Variables"}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937"},children:e.variables.length})]})]}),i.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af"},children:["Updated ",new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})}function iS(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function h_(...e){return t=>{let n=!1;const r=e.map(s=>{const o=iS(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():iS(e[s],null)}}}}function ct(...e){return S.useCallback(h_(...e),e)}var di=S.forwardRef((e,t)=>{const{children:n,...r}=e,s=S.Children.toArray(n),o=s.find(GU);if(o){const l=o.props.children,u=s.map(d=>d===o?S.Children.count(l)>1?S.Children.only(null):S.isValidElement(l)?l.props.children:null:d);return i.jsx(b0,{...r,ref:t,children:S.isValidElement(l)?S.cloneElement(l,void 0,u):null})}return i.jsx(b0,{...r,ref:t,children:n})});di.displayName="Slot";var b0=S.forwardRef((e,t)=>{const{children:n,...r}=e;if(S.isValidElement(n)){const s=YU(n),o=KU(r,n.props);return n.type!==S.Fragment&&(o.ref=t?h_(t,s):s),S.cloneElement(n,o)}return S.Children.count(n)>1?S.Children.only(null):null});b0.displayName="SlotClone";var p_=({children:e})=>i.jsx(i.Fragment,{children:e});function GU(e){return S.isValidElement(e)&&e.type===p_}function KU(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...u)=>{o(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function YU(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function m_(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=m_(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function g_(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=m_(e))&&(r&&(r+=" "),r+=t);return r}const oS=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,aS=g_,y_=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return aS(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(f=>{const p=n==null?void 0:n[f],h=o==null?void 0:o[f];if(p===null)return null;const g=oS(p)||oS(h);return s[f][g]}),u=n&&Object.entries(n).reduce((f,p)=>{let[h,g]=p;return g===void 0||(f[h]=g),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:h,className:g,...y}=p;return Object.entries(y).every(b=>{let[w,v]=b;return Array.isArray(v)?v.includes({...o,...u}[w]):{...o,...u}[w]===v})?[...f,h,g]:f},[]);return aS(e,l,d,n==null?void 0:n.class,n==null?void 0:n.className)},Zy="-",XU=e=>{const t=QU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{const u=l.split(Zy);return u[0]===""&&u.length!==1&&u.shift(),x_(u,t)||JU(l)},getConflictingClassGroupIds:(l,u)=>{const d=n[l]||[];return u&&r[l]?[...d,...r[l]]:d}}},x_=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?x_(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Zy);return(l=t.validators.find(({validator:u})=>u(o)))==null?void 0:l.classGroupId},lS=/^\[(.+)\]$/,JU=e=>{if(lS.test(e)){const t=lS.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},QU=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)v0(n[s],r,s,t);return r},v0=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:cS(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(ZU(s)){v0(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,l])=>{v0(l,cS(t,o),n,r)})})},cS=(e,t)=>{let n=e;return t.split(Zy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ZU=e=>e.isThemeGetter,eH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,l)=>{n.set(o,l),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set(o,l){n.has(o)?n.set(o,l):s(o,l)}}},w0="!",S0=":",tH=S0.length,nH=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const o=[];let l=0,u=0,d=0,f;for(let b=0;b<s.length;b++){let w=s[b];if(l===0&&u===0){if(w===S0){o.push(s.slice(d,b)),d=b+tH;continue}if(w==="/"){f=b;continue}}w==="["?l++:w==="]"?l--:w==="("?u++:w===")"&&u--}const p=o.length===0?s:s.substring(d),h=rH(p),g=h!==p,y=f&&f>d?f-d:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const s=t+S0,o=r;r=l=>l.startsWith(s)?o(l.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},rH=e=>e.endsWith(w0)?e.substring(0,e.length-1):e.startsWith(w0)?e.substring(1):e,sH=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(l=>{l[0]==="["||t[l]?(s.push(...o.sort(),l),o=[]):o.push(l)}),s.push(...o.sort()),s}},iH=e=>({cache:eH(e.cacheSize),parseClassName:nH(e),sortModifiers:sH(e),...XU(e)}),oH=/\s+/,aH=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=t,l=[],u=e.trim().split(oH);let d="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{isExternal:h,modifiers:g,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:w}=n(p);if(h){d=p+(d.length>0?" "+d:d);continue}let v=!!w,j=r(v?b.substring(0,w):b);if(!j){if(!v){d=p+(d.length>0?" "+d:d);continue}if(j=r(b),!j){d=p+(d.length>0?" "+d:d);continue}v=!1}const T=o(g).join(":"),k=y?T+w0:T,_=k+j;if(l.includes(_))continue;l.push(_);const N=s(j,v);for(let E=0;E<N.length;++E){const R=N[E];l.push(k+R)}d=p+(d.length>0?" "+d:d)}return d};function lH(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=b_(t))&&(r&&(r+=" "),r+=n);return r}const b_=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=b_(e[r]))&&(n&&(n+=" "),n+=t);return n};function cH(e,...t){let n,r,s,o=l;function l(d){const f=t.reduce((p,h)=>h(p),e());return n=iH(f),r=n.cache.get,s=n.cache.set,o=u,u(d)}function u(d){const f=r(d);if(f)return f;const p=aH(d,n);return s(d,p),p}return function(){return o(lH.apply(null,arguments))}}const $t=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},v_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,w_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uH=/^\d+\/\d+$/,dH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ko=e=>uH.test(e),Ve=e=>!!e&&!Number.isNaN(Number(e)),Js=e=>!!e&&Number.isInteger(Number(e)),ag=e=>e.endsWith("%")&&Ve(e.slice(0,-1)),cs=e=>dH.test(e),gH=()=>!0,yH=e=>fH.test(e)&&!hH.test(e),S_=()=>!1,xH=e=>pH.test(e),bH=e=>mH.test(e),vH=e=>!Ne(e)&&!Te(e),wH=e=>Va(e,C_,S_),Ne=e=>v_.test(e),Bi=e=>Va(e,__,yH),lg=e=>Va(e,_H,Ve),uS=e=>Va(e,k_,S_),SH=e=>Va(e,j_,bH),Dd=e=>Va(e,E_,xH),Te=e=>w_.test(e),Wl=e=>Ua(e,__),kH=e=>Ua(e,EH),dS=e=>Ua(e,k_),jH=e=>Ua(e,C_),CH=e=>Ua(e,j_),Fd=e=>Ua(e,E_,!0),Va=(e,t,n)=>{const r=v_.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Ua=(e,t,n=!1)=>{const r=w_.exec(e);return r?r[1]?t(r[1]):n:!1},k_=e=>e==="position"||e==="percentage",j_=e=>e==="image"||e==="url",C_=e=>e==="length"||e==="size"||e==="bg-size",__=e=>e==="length",_H=e=>e==="number",EH=e=>e==="family-name",E_=e=>e==="shadow",NH=()=>{const e=$t("color"),t=$t("font"),n=$t("text"),r=$t("font-weight"),s=$t("tracking"),o=$t("leading"),l=$t("breakpoint"),u=$t("container"),d=$t("spacing"),f=$t("radius"),p=$t("shadow"),h=$t("inset-shadow"),g=$t("text-shadow"),y=$t("drop-shadow"),b=$t("blur"),w=$t("perspective"),v=$t("aspect"),j=$t("ease"),T=$t("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[..._(),Te,Ne],E=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],A=()=>[Te,Ne,d],P=()=>[Ko,"full","auto",...A()],z=()=>[Js,"none","subgrid",Te,Ne],L=()=>["auto",{span:["full",Js,Te,Ne]},Js,Te,Ne],B=()=>[Js,"auto",Te,Ne],K=()=>["auto","min","max","fr",Te,Ne],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...A()],H=()=>[Ko,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],M=()=>[e,Te,Ne],U=()=>[..._(),dS,uS,{position:[Te,Ne]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",jH,wH,{size:[Te,Ne]}],W=()=>[ag,Wl,Bi],X=()=>["","none","full",f,Te,Ne],ne=()=>["",Ve,Wl,Bi],G=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[Ve,ag,dS,uS],q=()=>["","none",b,Te,Ne],ee=()=>["none",Ve,Te,Ne],ie=()=>["none",Ve,Te,Ne],le=()=>[Ve,Te,Ne],ue=()=>[Ko,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cs],breakpoint:[cs],color:[gH],container:[cs],"drop-shadow":[cs],ease:["in","out","in-out"],font:[vH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cs],shadow:[cs],spacing:["px",Ve],text:[cs],"text-shadow":[cs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ko,Ne,Te,v]}],container:["container"],columns:[{columns:[Ve,Ne,Te,u]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Js,"auto",Te,Ne]}],basis:[{basis:[Ko,"full","auto",u,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ve,Ko,"auto","initial","none",Ne]}],grow:[{grow:["",Ve,Te,Ne]}],shrink:[{shrink:["",Ve,Te,Ne]}],order:[{order:[Js,"first","last","none",Te,Ne]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[u,"screen",...H()]}],"min-w":[{"min-w":[u,"screen","none",...H()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...H()]}],h:[{h:["screen",...H()]}],"min-h":[{"min-h":["screen","none",...H()]}],"max-h":[{"max-h":["screen",...H()]}],"font-size":[{text:["base",n,Wl,Bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Te,lg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ag,Ne]}],"font-family":[{font:[kH,Ne,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Te,Ne]}],"line-clamp":[{"line-clamp":[Ve,"none",Te,lg]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",Te,Ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Te,Ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ve,"from-font","auto",Te,Bi]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Ve,"auto",Te,Ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te,Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te,Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Js,Te,Ne],radial:["",Te,Ne],conic:[Js,Te,Ne]},CH,SH]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...G(),"hidden","none"]}],"divide-style":[{divide:[...G(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...G(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ve,Te,Ne]}],"outline-w":[{outline:["",Ve,Wl,Bi]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",p,Fd,Dd]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",h,Fd,Dd]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Ve,Bi]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",g,Fd,Dd]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Ve,Te,Ne]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[Te,Ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Te,Ne]}],filter:[{filter:["","none",Te,Ne]}],blur:[{blur:q()}],brightness:[{brightness:[Ve,Te,Ne]}],contrast:[{contrast:[Ve,Te,Ne]}],"drop-shadow":[{"drop-shadow":["","none",y,Fd,Dd]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Ve,Te,Ne]}],"hue-rotate":[{"hue-rotate":[Ve,Te,Ne]}],invert:[{invert:["",Ve,Te,Ne]}],saturate:[{saturate:[Ve,Te,Ne]}],sepia:[{sepia:["",Ve,Te,Ne]}],"backdrop-filter":[{"backdrop-filter":["","none",Te,Ne]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[Ve,Te,Ne]}],"backdrop-contrast":[{"backdrop-contrast":[Ve,Te,Ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ve,Te,Ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ve,Te,Ne]}],"backdrop-invert":[{"backdrop-invert":["",Ve,Te,Ne]}],"backdrop-opacity":[{"backdrop-opacity":[Ve,Te,Ne]}],"backdrop-saturate":[{"backdrop-saturate":[Ve,Te,Ne]}],"backdrop-sepia":[{"backdrop-sepia":["",Ve,Te,Ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Te,Ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ve,"initial",Te,Ne]}],ease:[{ease:["linear","initial",j,Te,Ne]}],delay:[{delay:[Ve,Te,Ne]}],animate:[{animate:["none",T,Te,Ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Te,Ne]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:le()}],"skew-x":[{"skew-x":le()}],"skew-y":[{"skew-y":le()}],transform:[{transform:[Te,Ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te,Ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te,Ne]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Ve,Wl,Bi,lg]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TH=cH(NH);function nt(...e){return TH(g_(e))}const ex=y_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function gt({className:e,variant:t,size:n,asChild:r=!1,...s}){const o=r?di:"button";return i.jsx(o,{"data-slot":"button",className:nt(ex({variant:t,size:n,className:e})),...s})}function Gc({className:e,type:t,...n}){return i.jsx("input",{type:t,"data-slot":"input",className:nt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var RH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qe=RH.reduce((e,t)=>{const n=S.forwardRef((r,s)=>{const{asChild:o,...l}=r,u=o?di:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function IH(e,t){e&&$a.flushSync(()=>e.dispatchEvent(t))}var AH="Label",N_=S.forwardRef((e,t)=>i.jsx(Qe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));N_.displayName=AH;var PH=N_;function ga({className:e,...t}){return i.jsx(PH,{"data-slot":"label",className:nt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Je(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function MH(e,t){const n=S.createContext(t),r=o=>{const{children:l,...u}=o,d=S.useMemo(()=>u,Object.values(u));return i.jsx(n.Provider,{value:d,children:l})};r.displayName=e+"Provider";function s(o){const l=S.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Ha(e,t=[]){let n=[];function r(o,l){const u=S.createContext(l),d=n.length;n=[...n,l];const f=h=>{var j;const{scope:g,children:y,...b}=h,w=((j=g==null?void 0:g[e])==null?void 0:j[d])||u,v=S.useMemo(()=>b,Object.values(b));return i.jsx(w.Provider,{value:v,children:y})};f.displayName=o+"Provider";function p(h,g){var w;const y=((w=g==null?void 0:g[e])==null?void 0:w[d])||u,b=S.useContext(y);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[f,p]}const s=()=>{const o=n.map(l=>S.createContext(l));return function(u){const d=(u==null?void 0:u[e])||o;return S.useMemo(()=>({[`__scope${e}`]:{...u,[e]:d}}),[u,d])}};return s.scopeName=e,[r,DH(s,...t)]}function DH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const h=d(o)[`__scope${f}`];return{...u,...h}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var yn=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},FH=g6.useId||(()=>{}),OH=0;function ya(e){const[t,n]=S.useState(FH());return yn(()=>{n(r=>r??String(OH++))},[e]),e||(t?`radix-${t}`:"")}function ws(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Af({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=zH({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:r,u=ws(n),d=S.useCallback(f=>{if(o){const h=typeof f=="function"?f(e):f;h!==e&&u(h)}else s(f)},[o,e,s,u]);return[l,d]}function zH({defaultProp:e,onChange:t}){const n=S.useState(e),[r]=n,s=S.useRef(r),o=ws(t);return S.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}function $H(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var LH="DismissableLayer",k0="dismissableLayer.update",BH="dismissableLayer.pointerDownOutside",WH="dismissableLayer.focusOutside",fS,T_=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tx=S.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=e,f=S.useContext(T_),[p,h]=S.useState(null),g=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=S.useState({}),b=ct(t,R=>h(R)),w=Array.from(f.layers),[v]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=w.indexOf(v),T=p?w.indexOf(p):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,_=T>=j,N=HH(R=>{const A=R.target,P=[...f.branches].some(z=>z.contains(A));!_||P||(s==null||s(R),l==null||l(R),R.defaultPrevented||u==null||u())},g),E=qH(R=>{const A=R.target;[...f.branches].some(z=>z.contains(A))||(o==null||o(R),l==null||l(R),R.defaultPrevented||u==null||u())},g);return $H(R=>{T===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},g),S.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(fS=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),hS(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=fS)}},[p,g,n,f]),S.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),hS())},[p,f]),S.useEffect(()=>{const R=()=>y({});return document.addEventListener(k0,R),()=>document.removeEventListener(k0,R)},[]),i.jsx(Qe.div,{...d,ref:b,style:{pointerEvents:k?_?"auto":"none":void 0,...e.style},onFocusCapture:Je(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Je(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Je(e.onPointerDownCapture,N.onPointerDownCapture)})});tx.displayName=LH;var VH="DismissableLayerBranch",UH=S.forwardRef((e,t)=>{const n=S.useContext(T_),r=S.useRef(null),s=ct(t,r);return S.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Qe.div,{...e,ref:s})});UH.displayName=VH;function HH(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let d=function(){R_(BH,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function qH(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&R_(WH,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hS(){const e=new CustomEvent(k0);document.dispatchEvent(e)}function R_(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?IH(s,o):s.dispatchEvent(o)}var cg="focusScope.autoFocusOnMount",ug="focusScope.autoFocusOnUnmount",pS={bubbles:!1,cancelable:!0},GH="FocusScope",nx=S.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=e,[u,d]=S.useState(null),f=ws(s),p=ws(o),h=S.useRef(null),g=ct(t,w=>d(w)),y=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let w=function(k){if(y.paused||!u)return;const _=k.target;u.contains(_)?h.current=_:ei(h.current,{select:!0})},v=function(k){if(y.paused||!u)return;const _=k.relatedTarget;_!==null&&(u.contains(_)||ei(h.current,{select:!0}))},j=function(k){if(document.activeElement===document.body)for(const N of k)N.removedNodes.length>0&&ei(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",v);const T=new MutationObserver(j);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",v),T.disconnect()}}},[r,u,y.paused]),S.useEffect(()=>{if(u){gS.add(y);const w=document.activeElement;if(!u.contains(w)){const j=new CustomEvent(cg,pS);u.addEventListener(cg,f),u.dispatchEvent(j),j.defaultPrevented||(KH(ZH(I_(u)),{select:!0}),document.activeElement===w&&ei(u))}return()=>{u.removeEventListener(cg,f),setTimeout(()=>{const j=new CustomEvent(ug,pS);u.addEventListener(ug,p),u.dispatchEvent(j),j.defaultPrevented||ei(w??document.body,{select:!0}),u.removeEventListener(ug,p),gS.remove(y)},0)}}},[u,f,p,y]);const b=S.useCallback(w=>{if(!n&&!r||y.paused)return;const v=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,j=document.activeElement;if(v&&j){const T=w.currentTarget,[k,_]=YH(T);k&&_?!w.shiftKey&&j===_?(w.preventDefault(),n&&ei(k,{select:!0})):w.shiftKey&&j===k&&(w.preventDefault(),n&&ei(_,{select:!0})):j===T&&w.preventDefault()}},[n,r,y.paused]);return i.jsx(Qe.div,{tabIndex:-1,...l,ref:g,onKeyDown:b})});nx.displayName=GH;function KH(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ei(r,{select:t}),document.activeElement!==n)return}function YH(e){const t=I_(e),n=mS(t,e),r=mS(t.reverse(),e);return[n,r]}function I_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function mS(e,t){for(const n of e)if(!XH(n,{upTo:t}))return n}function XH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function JH(e){return e instanceof HTMLInputElement&&"select"in e}function ei(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&JH(e)&&t&&e.select()}}var gS=QH();function QH(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=yS(e,t),e.unshift(t)},remove(t){var n;e=yS(e,t),(n=e[0])==null||n.resume()}}}function yS(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ZH(e){return e.filter(t=>t.tagName!=="A")}var eq="Portal",rx=S.forwardRef((e,t)=>{var u;const{container:n,...r}=e,[s,o]=S.useState(!1);yn(()=>o(!0),[]);const l=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?Bj.createPortal(i.jsx(Qe.div,{...r,ref:t}),l):null});rx.displayName=eq;function tq(e,t){return S.useReducer((n,r)=>t[n][r]??n,e)}var Kc=e=>{const{present:t,children:n}=e,r=nq(t),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),o=ct(r.ref,rq(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};Kc.displayName="Presence";function nq(e){const[t,n]=S.useState(),r=S.useRef({}),s=S.useRef(e),o=S.useRef("none"),l=e?"mounted":"unmounted",[u,d]=tq(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=Od(r.current);o.current=u==="mounted"?f:"none"},[u]),yn(()=>{const f=r.current,p=s.current;if(p!==e){const g=o.current,y=Od(f);e?d("MOUNT"):y==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(p&&g!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),yn(()=>{if(t){let f;const p=t.ownerDocument.defaultView??window,h=y=>{const w=Od(r.current).includes(y.animationName);if(y.target===t&&w&&(d("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",f=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},g=y=>{y.target===t&&(o.current=Od(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{p.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Od(e){return(e==null?void 0:e.animationName)||"none"}function rq(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var dg=0;function A_(){S.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xS()),document.body.insertAdjacentElement("beforeend",e[1]??xS()),dg++,()=>{dg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),dg--}},[])}function xS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sf="right-scroll-bar-position",of="width-before-scroll-bar",sq="with-scroll-bars-hidden",iq="--removed-body-scroll-bar-size";function fg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oq(e,t){var n=S.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var aq=typeof window<"u"?S.useLayoutEffect:S.useEffect,bS=new WeakMap;function lq(e,t){var n=oq(null,function(r){return e.forEach(function(s){return fg(s,r)})});return aq(function(){var r=bS.get(n);if(r){var s=new Set(r),o=new Set(e),l=n.current;s.forEach(function(u){o.has(u)||fg(u,null)}),o.forEach(function(u){s.has(u)||fg(u,l)})}bS.set(n,e)},[e]),n}function cq(e){return e}function uq(e,t){t===void 0&&(t=cq);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=t(o,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(u){return o(u)},filter:function(){return n}}},assignMedium:function(o){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(o),l=n}var d=function(){var p=l;l=[],p.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(p){l.push(p),f()},filter:function(p){return l=l.filter(p),n}}}};return s}function dq(e){e===void 0&&(e={});var t=uq(null);return t.options=Lr({async:!0,ssr:!1},e),t}var P_=function(e){var t=e.sideCar,n=La(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Lr({},n))};P_.isSideCarExport=!0;function fq(e,t){return e.useMedium(t),P_}var M_=dq(),hg=function(){},yh=S.forwardRef(function(e,t){var n=S.useRef(null),r=S.useState({onScrollCapture:hg,onWheelCapture:hg,onTouchMoveCapture:hg}),s=r[0],o=r[1],l=e.forwardProps,u=e.children,d=e.className,f=e.removeScrollBar,p=e.enabled,h=e.shards,g=e.sideCar,y=e.noRelative,b=e.noIsolation,w=e.inert,v=e.allowPinchZoom,j=e.as,T=j===void 0?"div":j,k=e.gapMode,_=La(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=g,E=lq([n,t]),R=Lr(Lr({},_),s);return S.createElement(S.Fragment,null,p&&S.createElement(N,{sideCar:M_,removeScrollBar:f,shards:h,noRelative:y,noIsolation:b,inert:w,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:k}),l?S.cloneElement(S.Children.only(u),Lr(Lr({},R),{ref:E})):S.createElement(T,Lr({},R,{className:d,ref:E}),u))});yh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yh.classNames={fullWidth:of,zeroRight:sf};var hq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pq(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hq();return t&&e.setAttribute("nonce",t),e}function mq(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gq(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yq=function(){var e=0,t=null;return{add:function(n){e==0&&(t=pq())&&(mq(t,n),gq(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xq=function(){var e=yq();return function(t,n){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},D_=function(){var e=xq(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},bq={left:0,top:0,right:0,gap:0},pg=function(e){return parseInt(e||"",10)||0},vq=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[pg(n),pg(r),pg(s)]},wq=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bq;var t=vq(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Sq=D_(),xa="data-scroll-locked",kq=function(e,t,n,r){var s=e.left,o=e.top,l=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(xa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sf,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(of,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(sf," .").concat(sf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(of," .").concat(of,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xa,`] {
    `).concat(iq,": ").concat(u,`px;
  }
`)},vS=function(){var e=parseInt(document.body.getAttribute(xa)||"0",10);return isFinite(e)?e:0},jq=function(){S.useEffect(function(){return document.body.setAttribute(xa,(vS()+1).toString()),function(){var e=vS()-1;e<=0?document.body.removeAttribute(xa):document.body.setAttribute(xa,e.toString())}},[])},Cq=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;jq();var o=S.useMemo(function(){return wq(s)},[s]);return S.createElement(Sq,{styles:kq(o,!t,s,n?"":"!important")})},j0=!1;if(typeof window<"u")try{var zd=Object.defineProperty({},"passive",{get:function(){return j0=!0,!0}});window.addEventListener("test",zd,zd),window.removeEventListener("test",zd,zd)}catch{j0=!1}var Yo=j0?{passive:!1}:!1,_q=function(e){return e.tagName==="TEXTAREA"},F_=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!_q(e)&&n[t]==="visible")},Eq=function(e){return F_(e,"overflowY")},Nq=function(e){return F_(e,"overflowX")},wS=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=O_(e,r);if(s){var o=z_(e,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Tq=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Rq=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},O_=function(e,t){return e==="v"?Eq(t):Nq(t)},z_=function(e,t){return e==="v"?Tq(t):Rq(t)},Iq=function(e,t){return e==="h"&&t==="rtl"?-1:1},Aq=function(e,t,n,r,s){var o=Iq(e,window.getComputedStyle(t).direction),l=o*r,u=n.target,d=t.contains(u),f=!1,p=l>0,h=0,g=0;do{if(!u)break;var y=z_(e,u),b=y[0],w=y[1],v=y[2],j=w-v-o*b;(b||j)&&O_(e,u)&&(h+=j,g+=b);var T=u.parentNode;u=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(p&&Math.abs(h)<1||!p&&Math.abs(g)<1)&&(f=!0),f},$d=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},SS=function(e){return[e.deltaX,e.deltaY]},kS=function(e){return e&&"current"in e?e.current:e},Pq=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Mq=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Dq=0,Xo=[];function Fq(e){var t=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(Dq++)[0],o=S.useState(D_)[0],l=S.useRef(e);S.useEffect(function(){l.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var w=VM([e.lockRef.current],(e.shards||[]).map(kS),!0).filter(Boolean);return w.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var u=S.useCallback(function(w,v){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var j=$d(w),T=n.current,k="deltaX"in w?w.deltaX:T[0]-j[0],_="deltaY"in w?w.deltaY:T[1]-j[1],N,E=w.target,R=Math.abs(k)>Math.abs(_)?"h":"v";if("touches"in w&&R==="h"&&E.type==="range")return!1;var A=window.getSelection(),P=A&&A.anchorNode,z=P?P===E||P.contains(E):!1;if(z)return!1;var L=wS(R,E);if(!L)return!0;if(L?N=R:(N=R==="v"?"h":"v",L=wS(R,E)),!L)return!1;if(!r.current&&"changedTouches"in w&&(k||_)&&(r.current=N),!N)return!0;var B=r.current||N;return Aq(B,v,w,B==="h"?k:_)},[]),d=S.useCallback(function(w){var v=w;if(!(!Xo.length||Xo[Xo.length-1]!==o)){var j="deltaY"in v?SS(v):$d(v),T=t.current.filter(function(N){return N.name===v.type&&(N.target===v.target||v.target===N.shadowParent)&&Pq(N.delta,j)})[0];if(T&&T.should){v.cancelable&&v.preventDefault();return}if(!T){var k=(l.current.shards||[]).map(kS).filter(Boolean).filter(function(N){return N.contains(v.target)}),_=k.length>0?u(v,k[0]):!l.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),f=S.useCallback(function(w,v,j,T){var k={name:w,delta:v,target:j,should:T,shadowParent:Oq(j)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(_){return _!==k})},1)},[]),p=S.useCallback(function(w){n.current=$d(w),r.current=void 0},[]),h=S.useCallback(function(w){f(w.type,SS(w),w.target,u(w,e.lockRef.current))},[]),g=S.useCallback(function(w){f(w.type,$d(w),w.target,u(w,e.lockRef.current))},[]);S.useEffect(function(){return Xo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",d,Yo),document.addEventListener("touchmove",d,Yo),document.addEventListener("touchstart",p,Yo),function(){Xo=Xo.filter(function(w){return w!==o}),document.removeEventListener("wheel",d,Yo),document.removeEventListener("touchmove",d,Yo),document.removeEventListener("touchstart",p,Yo)}},[]);var y=e.removeScrollBar,b=e.inert;return S.createElement(S.Fragment,null,b?S.createElement(o,{styles:Mq(s)}):null,y?S.createElement(Cq,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Oq(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zq=fq(M_,Fq);var sx=S.forwardRef(function(e,t){return S.createElement(yh,Lr({},e,{ref:t,sideCar:zq}))});sx.classNames=yh.classNames;var $q=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Jo=new WeakMap,Ld=new WeakMap,Bd={},mg=0,$_=function(e){return e&&(e.host||$_(e.parentNode))},Lq=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=$_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Bq=function(e,t,n,r){var s=Lq(t,Array.isArray(e)?e:[e]);Bd[n]||(Bd[n]=new WeakMap);var o=Bd[n],l=[],u=new Set,d=new Set(s),f=function(h){!h||u.has(h)||(u.add(h),f(h.parentNode))};s.forEach(f);var p=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(g){if(u.has(g))p(g);else try{var y=g.getAttribute(r),b=y!==null&&y!=="false",w=(Jo.get(g)||0)+1,v=(o.get(g)||0)+1;Jo.set(g,w),o.set(g,v),l.push(g),w===1&&b&&Ld.set(g,!0),v===1&&g.setAttribute(n,"true"),b||g.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",g,j)}})};return p(t),u.clear(),mg++,function(){l.forEach(function(h){var g=Jo.get(h)-1,y=o.get(h)-1;Jo.set(h,g),o.set(h,y),g||(Ld.has(h)||h.removeAttribute(r),Ld.delete(h)),y||h.removeAttribute(n)}),mg--,mg||(Jo=new WeakMap,Jo=new WeakMap,Ld=new WeakMap,Bd={})}},L_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=$q(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Bq(r,s,n,"aria-hidden")):function(){return null}},ix="Dialog",[B_,W_]=Ha(ix),[Wq,Er]=B_(ix),V_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,u=S.useRef(null),d=S.useRef(null),[f=!1,p]=Af({prop:r,defaultProp:s,onChange:o});return i.jsx(Wq,{scope:t,triggerRef:u,contentRef:d,contentId:ya(),titleId:ya(),descriptionId:ya(),open:f,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(h=>!h),[p]),modal:l,children:n})};V_.displayName=ix;var U_="DialogTrigger",H_=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(U_,n),o=ct(t,s.triggerRef);return i.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":lx(s.open),...r,ref:o,onClick:Je(e.onClick,s.onOpenToggle)})});H_.displayName=U_;var ox="DialogPortal",[Vq,q_]=B_(ox,{forceMount:void 0}),G_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=Er(ox,t);return i.jsx(Vq,{scope:t,forceMount:n,children:S.Children.map(r,l=>i.jsx(Kc,{present:n||o.open,children:i.jsx(rx,{asChild:!0,container:s,children:l})}))})};G_.displayName=ox;var Pf="DialogOverlay",K_=S.forwardRef((e,t)=>{const n=q_(Pf,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Er(Pf,e.__scopeDialog);return o.modal?i.jsx(Kc,{present:r||o.open,children:i.jsx(Uq,{...s,ref:t})}):null});K_.displayName=Pf;var Uq=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(Pf,n);return i.jsx(sx,{as:di,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Qe.div,{"data-state":lx(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),lo="DialogContent",Y_=S.forwardRef((e,t)=>{const n=q_(lo,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Er(lo,e.__scopeDialog);return i.jsx(Kc,{present:r||o.open,children:o.modal?i.jsx(Hq,{...s,ref:t}):i.jsx(qq,{...s,ref:t})})});Y_.displayName=lo;var Hq=S.forwardRef((e,t)=>{const n=Er(lo,e.__scopeDialog),r=S.useRef(null),s=ct(t,n.contentRef,r);return S.useEffect(()=>{const o=r.current;if(o)return L_(o)},[]),i.jsx(X_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Je(e.onFocusOutside,o=>o.preventDefault())})}),qq=S.forwardRef((e,t)=>{const n=Er(lo,e.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return i.jsx(X_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,u;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var d,f;(d=e.onInteractOutside)==null||d.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;((f=n.triggerRef.current)==null?void 0:f.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),X_=S.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,u=Er(lo,n),d=S.useRef(null),f=ct(t,d);return A_(),i.jsxs(i.Fragment,{children:[i.jsx(nx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(tx,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":lx(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Kq,{titleId:u.titleId}),i.jsx(Xq,{contentRef:d,descriptionId:u.descriptionId})]})]})}),ax="DialogTitle",J_=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(ax,n);return i.jsx(Qe.h2,{id:s.titleId,...r,ref:t})});J_.displayName=ax;var Q_="DialogDescription",Z_=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(Q_,n);return i.jsx(Qe.p,{id:s.descriptionId,...r,ref:t})});Z_.displayName=Q_;var eE="DialogClose",tE=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(eE,n);return i.jsx(Qe.button,{type:"button",...r,ref:t,onClick:Je(e.onClick,()=>s.onOpenChange(!1))})});tE.displayName=eE;function lx(e){return e?"open":"closed"}var nE="DialogTitleWarning",[Gq,rE]=MH(nE,{contentName:lo,titleName:ax,docsSlug:"dialog"}),Kq=({titleId:e})=>{const t=rE(nE),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Yq="DialogDescriptionWarning",Xq=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rE(Yq).contentName}}.`;return S.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},sE=V_,Jq=H_,iE=G_,oE=K_,aE=Y_,lE=J_,cE=Z_,cx=tE;function uE({...e}){return i.jsx(sE,{"data-slot":"dialog",...e})}function Qq({...e}){return i.jsx(iE,{"data-slot":"dialog-portal",...e})}function Zq({className:e,...t}){return i.jsx(oE,{"data-slot":"dialog-overlay",className:nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function dE({className:e,children:t,...n}){return i.jsxs(Qq,{"data-slot":"dialog-portal",children:[i.jsx(Zq,{}),i.jsxs(aE,{"data-slot":"dialog-content",className:nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,i.jsxs(cx,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(Rt,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function fE({className:e,...t}){return i.jsx("div",{"data-slot":"dialog-header",className:nt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function eG({className:e,...t}){return i.jsx("div",{"data-slot":"dialog-footer",className:nt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function hE({className:e,...t}){return i.jsx(lE,{"data-slot":"dialog-title",className:nt("text-lg leading-none font-semibold",e),...t})}function tG({className:e,...t}){return i.jsx(cE,{"data-slot":"dialog-description",className:nt("text-muted-foreground text-sm",e),...t})}function jS(e,[t,n]){return Math.min(n,Math.max(t,e))}function nG(e){const t=e+"CollectionProvider",[n,r]=Ha(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:b,children:w}=y,v=xe.useRef(null),j=xe.useRef(new Map).current;return i.jsx(s,{scope:b,itemMap:j,collectionRef:v,children:w})};l.displayName=t;const u=e+"CollectionSlot",d=xe.forwardRef((y,b)=>{const{scope:w,children:v}=y,j=o(u,w),T=ct(b,j.collectionRef);return i.jsx(di,{ref:T,children:v})});d.displayName=u;const f=e+"CollectionItemSlot",p="data-radix-collection-item",h=xe.forwardRef((y,b)=>{const{scope:w,children:v,...j}=y,T=xe.useRef(null),k=ct(b,T),_=o(f,w);return xe.useEffect(()=>(_.itemMap.set(T,{ref:T,...j}),()=>void _.itemMap.delete(T))),i.jsx(di,{[p]:"",ref:k,children:v})});h.displayName=f;function g(y){const b=o(e+"CollectionConsumer",y);return xe.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const j=Array.from(v.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((_,N)=>j.indexOf(_.ref.current)-j.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:d,ItemSlot:h},g,r]}var rG=S.createContext(void 0);function sG(e){const t=S.useContext(rG);return e||t||"ltr"}const iG=["top","right","bottom","left"],fi=Math.min,Fn=Math.max,Mf=Math.round,Wd=Math.floor,Ur=e=>({x:e,y:e}),oG={left:"right",right:"left",bottom:"top",top:"bottom"},aG={start:"end",end:"start"};function C0(e,t,n){return Fn(e,fi(t,n))}function Ss(e,t){return typeof e=="function"?e(t):e}function ks(e){return e.split("-")[0]}function qa(e){return e.split("-")[1]}function ux(e){return e==="x"?"y":"x"}function dx(e){return e==="y"?"height":"width"}const lG=new Set(["top","bottom"]);function Br(e){return lG.has(ks(e))?"y":"x"}function fx(e){return ux(Br(e))}function cG(e,t,n){n===void 0&&(n=!1);const r=qa(e),s=fx(e),o=dx(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=Df(l)),[l,Df(l)]}function uG(e){const t=Df(e);return[_0(e),t,_0(t)]}function _0(e){return e.replace(/start|end/g,t=>aG[t])}const CS=["left","right"],_S=["right","left"],dG=["top","bottom"],fG=["bottom","top"];function hG(e,t,n){switch(e){case"top":case"bottom":return n?t?_S:CS:t?CS:_S;case"left":case"right":return t?dG:fG;default:return[]}}function pG(e,t,n,r){const s=qa(e);let o=hG(ks(e),n==="start",r);return s&&(o=o.map(l=>l+"-"+s),t&&(o=o.concat(o.map(_0)))),o}function Df(e){return e.replace(/left|right|bottom|top/g,t=>oG[t])}function mG(e){return{top:0,right:0,bottom:0,left:0,...e}}function pE(e){return typeof e!="number"?mG(e):{top:e,right:e,bottom:e,left:e}}function Ff(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ES(e,t,n){let{reference:r,floating:s}=e;const o=Br(t),l=fx(t),u=dx(l),d=ks(t),f=o==="y",p=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,g=r[u]/2-s[u]/2;let y;switch(d){case"top":y={x:p,y:r.y-s.height};break;case"bottom":y={x:p,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-s.width,y:h};break;default:y={x:r.x,y:r.y}}switch(qa(t)){case"start":y[l]-=g*(n&&f?-1:1);break;case"end":y[l]+=g*(n&&f?-1:1);break}return y}async function gG(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:l,elements:u,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:g=!1,padding:y=0}=Ss(t,e),b=pE(y),v=u[g?h==="floating"?"reference":"floating":h],j=Ff(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:p,strategy:d})),T=h==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),_=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},N=Ff(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:k,strategy:d}):T);return{top:(j.top-N.top+b.top)/_.y,bottom:(N.bottom-j.bottom+b.bottom)/_.y,left:(j.left-N.left+b.left)/_.x,right:(N.right-j.right+b.right)/_.x}}const yG=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:h}=ES(f,r,d),g=r,y={},b=0;for(let v=0;v<u.length;v++){var w;const{name:j,fn:T}=u[v],{x:k,y:_,data:N,reset:E}=await T({x:p,y:h,initialPlacement:r,placement:g,strategy:s,middlewareData:y,rects:f,platform:{...l,detectOverflow:(w=l.detectOverflow)!=null?w:gG},elements:{reference:e,floating:t}});p=k??p,h=_??h,y={...y,[j]:{...y[j],...N}},E&&b<=50&&(b++,typeof E=="object"&&(E.placement&&(g=E.placement),E.rects&&(f=E.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:s}):E.rects),{x:p,y:h}=ES(f,g,d)),v=-1)}return{x:p,y:h,placement:g,strategy:s,middlewareData:y}},xG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:l,elements:u,middlewareData:d}=t,{element:f,padding:p=0}=Ss(e,t)||{};if(f==null)return{};const h=pE(p),g={x:n,y:r},y=fx(s),b=dx(y),w=await l.getDimensions(f),v=y==="y",j=v?"top":"left",T=v?"bottom":"right",k=v?"clientHeight":"clientWidth",_=o.reference[b]+o.reference[y]-g[y]-o.floating[b],N=g[y]-o.reference[y],E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let R=E?E[k]:0;(!R||!await(l.isElement==null?void 0:l.isElement(E)))&&(R=u.floating[k]||o.floating[b]);const A=_/2-N/2,P=R/2-w[b]/2-1,z=fi(h[j],P),L=fi(h[T],P),B=z,K=R-w[b]-L,V=R/2-w[b]/2+A,J=C0(B,V,K),$=!d.arrow&&qa(s)!=null&&V!==J&&o.reference[b]/2-(V<B?z:L)-w[b]/2<0,H=$?V<B?V-B:V-K:0;return{[y]:g[y]+H,data:{[y]:J,centerOffset:V-J-H,...$&&{alignmentOffset:H}},reset:$}}}),bG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:f}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...v}=Ss(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const j=ks(s),T=Br(u),k=ks(u)===u,_=await(d.isRTL==null?void 0:d.isRTL(f.floating)),N=g||(k||!w?[Df(u)]:uG(u)),E=b!=="none";!g&&E&&N.push(...pG(u,w,b,_));const R=[u,...N],A=await d.detectOverflow(t,v),P=[];let z=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&P.push(A[j]),h){const V=cG(s,l,_);P.push(A[V[0]],A[V[1]])}if(z=[...z,{placement:s,overflows:P}],!P.every(V=>V<=0)){var L,B;const V=(((L=o.flip)==null?void 0:L.index)||0)+1,J=R[V];if(J&&(!(h==="alignment"?T!==Br(J):!1)||z.every(M=>Br(M.placement)===T?M.overflows[0]>0:!0)))return{data:{index:V,overflows:z},reset:{placement:J}};let $=(B=z.filter(H=>H.overflows[0]<=0).sort((H,M)=>H.overflows[1]-M.overflows[1])[0])==null?void 0:B.placement;if(!$)switch(y){case"bestFit":{var K;const H=(K=z.filter(M=>{if(E){const U=Br(M.placement);return U===T||U==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(U=>U>0).reduce((U,F)=>U+F,0)]).sort((M,U)=>M[1]-U[1])[0])==null?void 0:K[0];H&&($=H);break}case"initialPlacement":$=u;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function NS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function TS(e){return iG.some(t=>e[t]>=0)}const vG=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:s="referenceHidden",...o}=Ss(e,t);switch(s){case"referenceHidden":{const l=await r.detectOverflow(t,{...o,elementContext:"reference"}),u=NS(l,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:TS(u)}}}case"escaped":{const l=await r.detectOverflow(t,{...o,altBoundary:!0}),u=NS(l,n.floating);return{data:{escapedOffsets:u,escaped:TS(u)}}}default:return{}}}}},mE=new Set(["left","top"]);async function wG(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ks(n),u=qa(n),d=Br(n)==="y",f=mE.has(l)?-1:1,p=o&&d?-1:1,h=Ss(t,e);let{mainAxis:g,crossAxis:y,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return u&&typeof b=="number"&&(y=u==="end"?b*-1:b),d?{x:y*p,y:g*f}:{x:g*f,y:y*p}}const SG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:l,middlewareData:u}=t,d=await wG(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},kG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s,platform:o}=t,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:j=>{let{x:T,y:k}=j;return{x:T,y:k}}},...f}=Ss(e,t),p={x:n,y:r},h=await o.detectOverflow(t,f),g=Br(ks(s)),y=ux(g);let b=p[y],w=p[g];if(l){const j=y==="y"?"top":"left",T=y==="y"?"bottom":"right",k=b+h[j],_=b-h[T];b=C0(k,b,_)}if(u){const j=g==="y"?"top":"left",T=g==="y"?"bottom":"right",k=w+h[j],_=w-h[T];w=C0(k,w,_)}const v=d.fn({...t,[y]:b,[g]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[y]:l,[g]:u}}}}}},jG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:l}=t,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=Ss(e,t),p={x:n,y:r},h=Br(s),g=ux(h);let y=p[g],b=p[h];const w=Ss(u,t),v=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const k=g==="y"?"height":"width",_=o.reference[g]-o.floating[k]+v.mainAxis,N=o.reference[g]+o.reference[k]-v.mainAxis;y<_?y=_:y>N&&(y=N)}if(f){var j,T;const k=g==="y"?"width":"height",_=mE.has(ks(s)),N=o.reference[h]-o.floating[k]+(_&&((j=l.offset)==null?void 0:j[h])||0)+(_?0:v.crossAxis),E=o.reference[h]+o.reference[k]+(_?0:((T=l.offset)==null?void 0:T[h])||0)-(_?v.crossAxis:0);b<N?b=N:b>E&&(b=E)}return{[g]:y,[h]:b}}}},CG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:l,elements:u}=t,{apply:d=()=>{},...f}=Ss(e,t),p=await l.detectOverflow(t,f),h=ks(s),g=qa(s),y=Br(s)==="y",{width:b,height:w}=o.floating;let v,j;h==="top"||h==="bottom"?(v=h,j=g===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=h,v=g==="end"?"top":"bottom");const T=w-p.top-p.bottom,k=b-p.left-p.right,_=fi(w-p[v],T),N=fi(b-p[j],k),E=!t.middlewareData.shift;let R=_,A=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=T),E&&!g){const z=Fn(p.left,0),L=Fn(p.right,0),B=Fn(p.top,0),K=Fn(p.bottom,0);y?A=b-2*(z!==0||L!==0?z+L:Fn(p.left,p.right)):R=w-2*(B!==0||K!==0?B+K:Fn(p.top,p.bottom))}await d({...t,availableWidth:A,availableHeight:R});const P=await l.getDimensions(u.floating);return b!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function xh(){return typeof window<"u"}function Ga(e){return gE(e)?(e.nodeName||"").toLowerCase():"#document"}function Ln(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xr(e){var t;return(t=(gE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gE(e){return xh()?e instanceof Node||e instanceof Ln(e).Node:!1}function kr(e){return xh()?e instanceof Element||e instanceof Ln(e).Element:!1}function Gr(e){return xh()?e instanceof HTMLElement||e instanceof Ln(e).HTMLElement:!1}function RS(e){return!xh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ln(e).ShadowRoot}const _G=new Set(["inline","contents"]);function Yc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=jr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!_G.has(s)}const EG=new Set(["table","td","th"]);function NG(e){return EG.has(Ga(e))}const TG=[":popover-open",":modal"];function bh(e){return TG.some(t=>{try{return e.matches(t)}catch{return!1}})}const RG=["transform","translate","scale","rotate","perspective"],IG=["transform","translate","scale","rotate","perspective","filter"],AG=["paint","layout","strict","content"];function hx(e){const t=px(),n=kr(e)?jr(e):e;return RG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||IG.some(r=>(n.willChange||"").includes(r))||AG.some(r=>(n.contain||"").includes(r))}function PG(e){let t=hi(e);for(;Gr(t)&&!Aa(t);){if(hx(t))return t;if(bh(t))return null;t=hi(t)}return null}function px(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MG=new Set(["html","body","#document"]);function Aa(e){return MG.has(Ga(e))}function jr(e){return Ln(e).getComputedStyle(e)}function vh(e){return kr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hi(e){if(Ga(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RS(e)&&e.host||Xr(e);return RS(t)?t.host:t}function yE(e){const t=hi(e);return Aa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gr(t)&&Yc(t)?t:yE(t)}function Rc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=yE(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),l=Ln(s);if(o){const u=E0(l);return t.concat(l,l.visualViewport||[],Yc(s)?s:[],u&&n?Rc(u):[])}return t.concat(s,Rc(s,[],n))}function E0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xE(e){const t=jr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Gr(e),o=s?e.offsetWidth:n,l=s?e.offsetHeight:r,u=Mf(n)!==o||Mf(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function mx(e){return kr(e)?e:e.contextElement}function ba(e){const t=mx(e);if(!Gr(t))return Ur(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=xE(t);let l=(o?Mf(n.width):n.width)/r,u=(o?Mf(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const DG=Ur(0);function bE(e){const t=Ln(e);return!px()||!t.visualViewport?DG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function FG(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ln(e)?!1:t}function co(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=mx(e);let l=Ur(1);t&&(r?kr(r)&&(l=ba(r)):l=ba(e));const u=FG(o,n,r)?bE(o):Ur(0);let d=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,p=s.width/l.x,h=s.height/l.y;if(o){const g=Ln(o),y=r&&kr(r)?Ln(r):r;let b=g,w=E0(b);for(;w&&r&&y!==b;){const v=ba(w),j=w.getBoundingClientRect(),T=jr(w),k=j.left+(w.clientLeft+parseFloat(T.paddingLeft))*v.x,_=j.top+(w.clientTop+parseFloat(T.paddingTop))*v.y;d*=v.x,f*=v.y,p*=v.x,h*=v.y,d+=k,f+=_,b=Ln(w),w=E0(b)}}return Ff({width:p,height:h,x:d,y:f})}function wh(e,t){const n=vh(e).scrollLeft;return t?t.left+n:co(Xr(e)).left+n}function vE(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-wh(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function OG(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",l=Xr(r),u=t?bh(t.floating):!1;if(r===l||u&&o)return n;let d={scrollLeft:0,scrollTop:0},f=Ur(1);const p=Ur(0),h=Gr(r);if((h||!h&&!o)&&((Ga(r)!=="body"||Yc(l))&&(d=vh(r)),Gr(r))){const y=co(r);f=ba(r),p.x=y.x+r.clientLeft,p.y=y.y+r.clientTop}const g=l&&!h&&!o?vE(l,d):Ur(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+p.x+g.x,y:n.y*f.y-d.scrollTop*f.y+p.y+g.y}}function zG(e){return Array.from(e.getClientRects())}function $G(e){const t=Xr(e),n=vh(e),r=e.ownerDocument.body,s=Fn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Fn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+wh(e);const u=-n.scrollTop;return jr(r).direction==="rtl"&&(l+=Fn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:u}}const IS=25;function LG(e,t){const n=Ln(e),r=Xr(e),s=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;const p=px();(!p||p&&t==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const f=wh(r);if(f<=0){const p=r.ownerDocument,h=p.body,g=getComputedStyle(h),y=p.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(r.clientWidth-h.clientWidth-y);b<=IS&&(o-=b)}else f<=IS&&(o+=f);return{width:o,height:l,x:u,y:d}}const BG=new Set(["absolute","fixed"]);function WG(e,t){const n=co(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Gr(e)?ba(e):Ur(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,d=s*o.x,f=r*o.y;return{width:l,height:u,x:d,y:f}}function AS(e,t,n){let r;if(t==="viewport")r=LG(e,n);else if(t==="document")r=$G(Xr(e));else if(kr(t))r=WG(t,n);else{const s=bE(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ff(r)}function wE(e,t){const n=hi(e);return n===t||!kr(n)||Aa(n)?!1:jr(n).position==="fixed"||wE(n,t)}function VG(e,t){const n=t.get(e);if(n)return n;let r=Rc(e,[],!1).filter(u=>kr(u)&&Ga(u)!=="body"),s=null;const o=jr(e).position==="fixed";let l=o?hi(e):e;for(;kr(l)&&!Aa(l);){const u=jr(l),d=hx(l);!d&&u.position==="fixed"&&(s=null),(o?!d&&!s:!d&&u.position==="static"&&!!s&&BG.has(s.position)||Yc(l)&&!d&&wE(e,l))?r=r.filter(p=>p!==l):s=u,l=hi(l)}return t.set(e,r),r}function UG(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const l=[...n==="clippingAncestors"?bh(t)?[]:VG(t,this._c):[].concat(n),r],u=l[0],d=l.reduce((f,p)=>{const h=AS(t,p,s);return f.top=Fn(h.top,f.top),f.right=fi(h.right,f.right),f.bottom=fi(h.bottom,f.bottom),f.left=Fn(h.left,f.left),f},AS(t,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function HG(e){const{width:t,height:n}=xE(e);return{width:t,height:n}}function qG(e,t,n){const r=Gr(t),s=Xr(t),o=n==="fixed",l=co(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const d=Ur(0);function f(){d.x=wh(s)}if(r||!r&&!o)if((Ga(t)!=="body"||Yc(s))&&(u=vh(t)),r){const y=co(t,!0,o,t);d.x=y.x+t.clientLeft,d.y=y.y+t.clientTop}else s&&f();o&&!r&&s&&f();const p=s&&!r&&!o?vE(s,u):Ur(0),h=l.left+u.scrollLeft-d.x-p.x,g=l.top+u.scrollTop-d.y-p.y;return{x:h,y:g,width:l.width,height:l.height}}function gg(e){return jr(e).position==="static"}function PS(e,t){if(!Gr(e)||jr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Xr(e)===n&&(n=n.ownerDocument.body),n}function SE(e,t){const n=Ln(e);if(bh(e))return n;if(!Gr(e)){let s=hi(e);for(;s&&!Aa(s);){if(kr(s)&&!gg(s))return s;s=hi(s)}return n}let r=PS(e,t);for(;r&&NG(r)&&gg(r);)r=PS(r,t);return r&&Aa(r)&&gg(r)&&!hx(r)?n:r||PG(e)||n}const GG=async function(e){const t=this.getOffsetParent||SE,n=this.getDimensions,r=await n(e.floating);return{reference:qG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function KG(e){return jr(e).direction==="rtl"}const YG={convertOffsetParentRelativeRectToViewportRelativeRect:OG,getDocumentElement:Xr,getClippingRect:UG,getOffsetParent:SE,getElementRects:GG,getClientRects:zG,getDimensions:HG,getScale:ba,isElement:kr,isRTL:KG};function kE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function XG(e,t){let n=null,r;const s=Xr(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const f=e.getBoundingClientRect(),{left:p,top:h,width:g,height:y}=f;if(u||t(),!g||!y)return;const b=Wd(h),w=Wd(s.clientWidth-(p+g)),v=Wd(s.clientHeight-(h+y)),j=Wd(p),k={rootMargin:-b+"px "+-w+"px "+-v+"px "+-j+"px",threshold:Fn(0,fi(1,d))||1};let _=!0;function N(E){const R=E[0].intersectionRatio;if(R!==d){if(!_)return l();R?l(!1,R):r=setTimeout(()=>{l(!1,1e-7)},1e3)}R===1&&!kE(f,e.getBoundingClientRect())&&l(),_=!1}try{n=new IntersectionObserver(N,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,k)}n.observe(e)}return l(!0),o}function JG(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=mx(e),p=s||o?[...f?Rc(f):[],...Rc(t)]:[];p.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),o&&j.addEventListener("resize",n)});const h=f&&u?XG(f,n):null;let g=-1,y=null;l&&(y=new ResizeObserver(j=>{let[T]=j;T&&T.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=y)==null||k.observe(t)})),n()}),f&&!d&&y.observe(f),y.observe(t));let b,w=d?co(e):null;d&&v();function v(){const j=co(e);w&&!kE(w,j)&&n(),w=j,b=requestAnimationFrame(v)}return n(),()=>{var j;p.forEach(T=>{s&&T.removeEventListener("scroll",n),o&&T.removeEventListener("resize",n)}),h==null||h(),(j=y)==null||j.disconnect(),y=null,d&&cancelAnimationFrame(b)}}const QG=SG,ZG=kG,eK=bG,tK=CG,nK=vG,MS=xG,rK=jG,sK=(e,t,n)=>{const r=new Map,s={platform:YG,...n},o={...s.platform,_c:r};return yG(e,t,{...s,platform:o})};var iK=typeof document<"u",oK=function(){},af=iK?S.useLayoutEffect:oK;function Of(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Of(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Of(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function jE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function DS(e,t){const n=jE(e);return Math.round(t*n)/n}function yg(e){const t=S.useRef(e);return af(()=>{t.current=e}),t}function aK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=e,[p,h]=S.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,y]=S.useState(r);Of(g,r)||y(r);const[b,w]=S.useState(null),[v,j]=S.useState(null),T=S.useCallback(M=>{M!==E.current&&(E.current=M,w(M))},[]),k=S.useCallback(M=>{M!==R.current&&(R.current=M,j(M))},[]),_=o||b,N=l||v,E=S.useRef(null),R=S.useRef(null),A=S.useRef(p),P=d!=null,z=yg(d),L=yg(s),B=yg(f),K=S.useCallback(()=>{if(!E.current||!R.current)return;const M={placement:t,strategy:n,middleware:g};L.current&&(M.platform=L.current),sK(E.current,R.current,M).then(U=>{const F={...U,isPositioned:B.current!==!1};V.current&&!Of(A.current,F)&&(A.current=F,$a.flushSync(()=>{h(F)}))})},[g,t,n,L,B]);af(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[f]);const V=S.useRef(!1);af(()=>(V.current=!0,()=>{V.current=!1}),[]),af(()=>{if(_&&(E.current=_),N&&(R.current=N),_&&N){if(z.current)return z.current(_,N,K);K()}},[_,N,K,z,P]);const J=S.useMemo(()=>({reference:E,floating:R,setReference:T,setFloating:k}),[T,k]),$=S.useMemo(()=>({reference:_,floating:N}),[_,N]),H=S.useMemo(()=>{const M={position:n,left:0,top:0};if(!$.floating)return M;const U=DS($.floating,p.x),F=DS($.floating,p.y);return u?{...M,transform:"translate("+U+"px, "+F+"px)",...jE($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:F}},[n,u,$.floating,p.x,p.y]);return S.useMemo(()=>({...p,update:K,refs:J,elements:$,floatingStyles:H}),[p,K,J,$,H])}const lK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?MS({element:r.current,padding:s}).fn(n):{}:r?MS({element:r,padding:s}).fn(n):{}}}},cK=(e,t)=>({...QG(e),options:[e,t]}),uK=(e,t)=>({...ZG(e),options:[e,t]}),dK=(e,t)=>({...rK(e),options:[e,t]}),fK=(e,t)=>({...eK(e),options:[e,t]}),hK=(e,t)=>({...tK(e),options:[e,t]}),pK=(e,t)=>({...nK(e),options:[e,t]}),mK=(e,t)=>({...lK(e),options:[e,t]});var gK="Arrow",CE=S.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(Qe.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});CE.displayName=gK;var yK=CE;function _E(e){const[t,n]=S.useState(void 0);return yn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,u=f.blockSize}else l=e.offsetWidth,u=e.offsetHeight;n({width:l,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var gx="Popper",[EE,NE]=Ha(gx),[xK,TE]=EE(gx),RE=e=>{const{__scopePopper:t,children:n}=e,[r,s]=S.useState(null);return i.jsx(xK,{scope:t,anchor:r,onAnchorChange:s,children:n})};RE.displayName=gx;var IE="PopperAnchor",AE=S.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=TE(IE,n),l=S.useRef(null),u=ct(t,l);return S.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:i.jsx(Qe.div,{...s,ref:u})});AE.displayName=IE;var yx="PopperContent",[bK,vK]=EE(yx),PE=S.forwardRef((e,t)=>{var se,q,ee,ie,le,ue;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:b,...w}=e,v=TE(yx,n),[j,T]=S.useState(null),k=ct(t,Z=>T(Z)),[_,N]=S.useState(null),E=_E(_),R=(E==null?void 0:E.width)??0,A=(E==null?void 0:E.height)??0,P=r+(o!=="center"?"-"+o:""),z=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},L=Array.isArray(f)?f:[f],B=L.length>0,K={padding:z,boundary:L.filter(SK),altBoundary:B},{refs:V,floatingStyles:J,placement:$,isPositioned:H,middlewareData:M}=aK({strategy:"fixed",placement:P,whileElementsMounted:(...Z)=>JG(...Z,{animationFrame:y==="always"}),elements:{reference:v.anchor},middleware:[cK({mainAxis:s+A,alignmentAxis:l}),d&&uK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dK():void 0,...K}),d&&fK({...K}),hK({...K,apply:({elements:Z,rects:de,availableWidth:he,availableHeight:pe})=>{const{width:_e,height:Be}=de.reference,je=Z.floating.style;je.setProperty("--radix-popper-available-width",`${he}px`),je.setProperty("--radix-popper-available-height",`${pe}px`),je.setProperty("--radix-popper-anchor-width",`${_e}px`),je.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),_&&mK({element:_,padding:u}),kK({arrowWidth:R,arrowHeight:A}),g&&pK({strategy:"referenceHidden",...K})]}),[U,F]=FE($),D=ws(b);yn(()=>{H&&(D==null||D())},[H,D]);const W=(se=M.arrow)==null?void 0:se.x,X=(q=M.arrow)==null?void 0:q.y,ne=((ee=M.arrow)==null?void 0:ee.centerOffset)!==0,[G,Q]=S.useState();return yn(()=>{j&&Q(window.getComputedStyle(j).zIndex)},[j]),i.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:H?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(ie=M.transformOrigin)==null?void 0:ie.x,(le=M.transformOrigin)==null?void 0:le.y].join(" "),...((ue=M.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(bK,{scope:n,placedSide:U,onArrowChange:N,arrowX:W,arrowY:X,shouldHideArrow:ne,children:i.jsx(Qe.div,{"data-side":U,"data-align":F,...w,ref:k,style:{...w.style,animation:H?void 0:"none"}})})})});PE.displayName=yx;var ME="PopperArrow",wK={top:"bottom",right:"left",bottom:"top",left:"right"},DE=S.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=vK(ME,r),l=wK[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(yK,{...s,ref:n,style:{...s.style,display:"block"}})})});DE.displayName=ME;function SK(e){return e!==null}var kK=e=>({name:"transformOrigin",options:e,fn(t){var v,j,T;const{placement:n,rects:r,middlewareData:s}=t,l=((v=s.arrow)==null?void 0:v.centerOffset)!==0,u=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[f,p]=FE(n),h={start:"0%",center:"50%",end:"100%"}[p],g=(((j=s.arrow)==null?void 0:j.x)??0)+u/2,y=(((T=s.arrow)==null?void 0:T.y)??0)+d/2;let b="",w="";return f==="bottom"?(b=l?h:`${g}px`,w=`${-d}px`):f==="top"?(b=l?h:`${g}px`,w=`${r.floating.height+d}px`):f==="right"?(b=`${-d}px`,w=l?h:`${y}px`):f==="left"&&(b=`${r.floating.width+d}px`,w=l?h:`${y}px`),{data:{x:b,y:w}}}});function FE(e){const[t,n="center"]=e.split("-");return[t,n]}var jK=RE,CK=AE,_K=PE,EK=DE;function OE(e){const t=S.useRef({value:e,previous:e});return S.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var NK="VisuallyHidden",zE=S.forwardRef((e,t)=>i.jsx(Qe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));zE.displayName=NK;var TK=[" ","Enter","ArrowUp","ArrowDown"],RK=[" ","Enter"],Xc="Select",[Sh,kh,IK]=nG(Xc),[Ka]=Ha(Xc,[IK,NE]),jh=NE(),[AK,yi]=Ka(Xc),[PK,MK]=Ka(Xc),$E=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:l,defaultValue:u,onValueChange:d,dir:f,name:p,autoComplete:h,disabled:g,required:y,form:b}=e,w=jh(t),[v,j]=S.useState(null),[T,k]=S.useState(null),[_,N]=S.useState(!1),E=sG(f),[R=!1,A]=Af({prop:r,defaultProp:s,onChange:o}),[P,z]=Af({prop:l,defaultProp:u,onChange:d}),L=S.useRef(null),B=v?b||!!v.closest("form"):!0,[K,V]=S.useState(new Set),J=Array.from(K).map($=>$.props.value).join(";");return i.jsx(jK,{...w,children:i.jsxs(AK,{required:y,scope:t,trigger:v,onTriggerChange:j,valueNode:T,onValueNodeChange:k,valueNodeHasChildren:_,onValueNodeHasChildrenChange:N,contentId:ya(),value:P,onValueChange:z,open:R,onOpenChange:A,dir:E,triggerPointerDownPosRef:L,disabled:g,children:[i.jsx(Sh.Provider,{scope:t,children:i.jsx(PK,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback($=>{V(H=>new Set(H).add($))},[]),onNativeOptionRemove:S.useCallback($=>{V(H=>{const M=new Set(H);return M.delete($),M})},[]),children:n})}),B?i.jsxs(lN,{"aria-hidden":!0,required:y,tabIndex:-1,name:p,autoComplete:h,value:P,onChange:$=>z($.target.value),disabled:g,form:b,children:[P===void 0?i.jsx("option",{value:""}):null,Array.from(K)]},J):null]})})};$E.displayName=Xc;var LE="SelectTrigger",BE=S.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=jh(n),l=yi(LE,n),u=l.disabled||r,d=ct(t,l.onTriggerChange),f=kh(n),p=S.useRef("touch"),[h,g,y]=cN(w=>{const v=f().filter(k=>!k.disabled),j=v.find(k=>k.value===l.value),T=uN(v,w,j);T!==void 0&&l.onValueChange(T.value)}),b=w=>{u||(l.onOpenChange(!0),y()),w&&(l.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(CK,{asChild:!0,...o,children:i.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":aN(l.value)?"":void 0,...s,ref:d,onClick:Je(s.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&b(w)}),onPointerDown:Je(s.onPointerDown,w=>{p.current=w.pointerType;const v=w.target;v.hasPointerCapture(w.pointerId)&&v.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(b(w),w.preventDefault())}),onKeyDown:Je(s.onKeyDown,w=>{const v=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&g(w.key),!(v&&w.key===" ")&&TK.includes(w.key)&&(b(),w.preventDefault())})})})});BE.displayName=LE;var WE="SelectValue",VE=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:l="",...u}=e,d=yi(WE,n),{onValueNodeHasChildrenChange:f}=d,p=o!==void 0,h=ct(t,d.onValueNodeChange);return yn(()=>{f(p)},[f,p]),i.jsx(Qe.span,{...u,ref:h,style:{pointerEvents:"none"},children:aN(d.value)?i.jsx(i.Fragment,{children:l}):o})});VE.displayName=WE;var DK="SelectIcon",UE=S.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(Qe.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});UE.displayName=DK;var FK="SelectPortal",HE=e=>i.jsx(rx,{asChild:!0,...e});HE.displayName=FK;var uo="SelectContent",qE=S.forwardRef((e,t)=>{const n=yi(uo,e.__scopeSelect),[r,s]=S.useState();if(yn(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?$a.createPortal(i.jsx(GE,{scope:e.__scopeSelect,children:i.jsx(Sh.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(KE,{...e,ref:t})});qE.displayName=uo;var hr=10,[GE,xi]=Ka(uo),OK="SelectContentImpl",KE=S.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:d,align:f,alignOffset:p,arrowPadding:h,collisionBoundary:g,collisionPadding:y,sticky:b,hideWhenDetached:w,avoidCollisions:v,...j}=e,T=yi(uo,n),[k,_]=S.useState(null),[N,E]=S.useState(null),R=ct(t,se=>_(se)),[A,P]=S.useState(null),[z,L]=S.useState(null),B=kh(n),[K,V]=S.useState(!1),J=S.useRef(!1);S.useEffect(()=>{if(k)return L_(k)},[k]),A_();const $=S.useCallback(se=>{const[q,...ee]=B().map(ue=>ue.ref.current),[ie]=ee.slice(-1),le=document.activeElement;for(const ue of se)if(ue===le||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===q&&N&&(N.scrollTop=0),ue===ie&&N&&(N.scrollTop=N.scrollHeight),ue==null||ue.focus(),document.activeElement!==le))return},[B,N]),H=S.useCallback(()=>$([A,k]),[$,A,k]);S.useEffect(()=>{K&&H()},[K,H]);const{onOpenChange:M,triggerPointerDownPosRef:U}=T;S.useEffect(()=>{if(k){let se={x:0,y:0};const q=ie=>{var le,ue;se={x:Math.abs(Math.round(ie.pageX)-(((le=U.current)==null?void 0:le.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((ue=U.current)==null?void 0:ue.y)??0))}},ee=ie=>{se.x<=10&&se.y<=10?ie.preventDefault():k.contains(ie.target)||M(!1),document.removeEventListener("pointermove",q),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",ee,{capture:!0})}}},[k,M,U]),S.useEffect(()=>{const se=()=>M(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[M]);const[F,D]=cN(se=>{const q=B().filter(le=>!le.disabled),ee=q.find(le=>le.ref.current===document.activeElement),ie=uN(q,se,ee);ie&&setTimeout(()=>ie.ref.current.focus())}),W=S.useCallback((se,q,ee)=>{const ie=!J.current&&!ee;(T.value!==void 0&&T.value===q||ie)&&(P(se),ie&&(J.current=!0))},[T.value]),X=S.useCallback(()=>k==null?void 0:k.focus(),[k]),ne=S.useCallback((se,q,ee)=>{const ie=!J.current&&!ee;(T.value!==void 0&&T.value===q||ie)&&L(se)},[T.value]),G=r==="popper"?N0:YE,Q=G===N0?{side:u,sideOffset:d,align:f,alignOffset:p,arrowPadding:h,collisionBoundary:g,collisionPadding:y,sticky:b,hideWhenDetached:w,avoidCollisions:v}:{};return i.jsx(GE,{scope:n,content:k,viewport:N,onViewportChange:E,itemRefCallback:W,selectedItem:A,onItemLeave:X,itemTextRefCallback:ne,focusSelectedItem:H,selectedItemText:z,position:r,isPositioned:K,searchRef:F,children:i.jsx(sx,{as:di,allowPinchZoom:!0,children:i.jsx(nx,{asChild:!0,trapped:T.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Je(s,se=>{var q;(q=T.trigger)==null||q.focus({preventScroll:!0}),se.preventDefault()}),children:i.jsx(tx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:i.jsx(G,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:se=>se.preventDefault(),...j,...Q,onPlaced:()=>V(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Je(j.onKeyDown,se=>{const q=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!q&&se.key.length===1&&D(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ie=B().filter(le=>!le.disabled).map(le=>le.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const le=se.target,ue=ie.indexOf(le);ie=ie.slice(ue+1)}setTimeout(()=>$(ie)),se.preventDefault()}})})})})})})});KE.displayName=OK;var zK="SelectItemAlignedPosition",YE=S.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=yi(uo,n),l=xi(uo,n),[u,d]=S.useState(null),[f,p]=S.useState(null),h=ct(t,R=>p(R)),g=kh(n),y=S.useRef(!1),b=S.useRef(!0),{viewport:w,selectedItem:v,selectedItemText:j,focusSelectedItem:T}=l,k=S.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&f&&w&&v&&j){const R=o.trigger.getBoundingClientRect(),A=f.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),z=j.getBoundingClientRect();if(o.dir!=="rtl"){const le=z.left-A.left,ue=P.left-le,Z=R.left-ue,de=R.width+Z,he=Math.max(de,A.width),pe=window.innerWidth-hr,_e=jS(ue,[hr,Math.max(hr,pe-he)]);u.style.minWidth=de+"px",u.style.left=_e+"px"}else{const le=A.right-z.right,ue=window.innerWidth-P.right-le,Z=window.innerWidth-R.right-ue,de=R.width+Z,he=Math.max(de,A.width),pe=window.innerWidth-hr,_e=jS(ue,[hr,Math.max(hr,pe-he)]);u.style.minWidth=de+"px",u.style.right=_e+"px"}const L=g(),B=window.innerHeight-hr*2,K=w.scrollHeight,V=window.getComputedStyle(f),J=parseInt(V.borderTopWidth,10),$=parseInt(V.paddingTop,10),H=parseInt(V.borderBottomWidth,10),M=parseInt(V.paddingBottom,10),U=J+$+K+M+H,F=Math.min(v.offsetHeight*5,U),D=window.getComputedStyle(w),W=parseInt(D.paddingTop,10),X=parseInt(D.paddingBottom,10),ne=R.top+R.height/2-hr,G=B-ne,Q=v.offsetHeight/2,se=v.offsetTop+Q,q=J+$+se,ee=U-q;if(q<=ne){const le=L.length>0&&v===L[L.length-1].ref.current;u.style.bottom="0px";const ue=f.clientHeight-w.offsetTop-w.offsetHeight,Z=Math.max(G,Q+(le?X:0)+ue+H),de=q+Z;u.style.height=de+"px"}else{const le=L.length>0&&v===L[0].ref.current;u.style.top="0px";const Z=Math.max(ne,J+w.offsetTop+(le?W:0)+Q)+ee;u.style.height=Z+"px",w.scrollTop=q-ne+w.offsetTop}u.style.margin=`${hr}px 0`,u.style.minHeight=F+"px",u.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[g,o.trigger,o.valueNode,u,f,w,v,j,o.dir,r]);yn(()=>k(),[k]);const[_,N]=S.useState();yn(()=>{f&&N(window.getComputedStyle(f).zIndex)},[f]);const E=S.useCallback(R=>{R&&b.current===!0&&(k(),T==null||T(),b.current=!1)},[k,T]);return i.jsx(LK,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:y,onScrollButtonChange:E,children:i.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(Qe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});YE.displayName=zK;var $K="SelectPopperPosition",N0=S.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=hr,...o}=e,l=jh(n);return i.jsx(_K,{...l,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});N0.displayName=$K;var[LK,xx]=Ka(uo,{}),T0="SelectViewport",XE=S.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=xi(T0,n),l=xx(T0,n),u=ct(t,o.onViewportChange),d=S.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Sh.Slot,{scope:n,children:i.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Je(s.onScroll,f=>{const p=f.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=l;if(g!=null&&g.current&&h){const y=Math.abs(d.current-p.scrollTop);if(y>0){const b=window.innerHeight-hr*2,w=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),j=Math.max(w,v);if(j<b){const T=j+y,k=Math.min(b,T),_=T-k;h.style.height=k+"px",h.style.bottom==="0px"&&(p.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});XE.displayName=T0;var JE="SelectGroup",[BK,WK]=Ka(JE),VK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=ya();return i.jsx(BK,{scope:n,id:s,children:i.jsx(Qe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});VK.displayName=JE;var QE="SelectLabel",UK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=WK(QE,n);return i.jsx(Qe.div,{id:s.id,...r,ref:t})});UK.displayName=QE;var zf="SelectItem",[HK,ZE]=Ka(zf),eN=S.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...l}=e,u=yi(zf,n),d=xi(zf,n),f=u.value===r,[p,h]=S.useState(o??""),[g,y]=S.useState(!1),b=ct(t,T=>{var k;return(k=d.itemRefCallback)==null?void 0:k.call(d,T,r,s)}),w=ya(),v=S.useRef("touch"),j=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(HK,{scope:n,value:r,disabled:s,textId:w,isSelected:f,onItemTextChange:S.useCallback(T=>{h(k=>k||((T==null?void 0:T.textContent)??"").trim())},[]),children:i.jsx(Sh.ItemSlot,{scope:n,value:r,disabled:s,textValue:p,children:i.jsx(Qe.div,{role:"option","aria-labelledby":w,"data-highlighted":g?"":void 0,"aria-selected":f&&g,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:b,onFocus:Je(l.onFocus,()=>y(!0)),onBlur:Je(l.onBlur,()=>y(!1)),onClick:Je(l.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:Je(l.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:Je(l.onPointerDown,T=>{v.current=T.pointerType}),onPointerMove:Je(l.onPointerMove,T=>{var k;v.current=T.pointerType,s?(k=d.onItemLeave)==null||k.call(d):v.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(l.onPointerLeave,T=>{var k;T.currentTarget===document.activeElement&&((k=d.onItemLeave)==null||k.call(d))}),onKeyDown:Je(l.onKeyDown,T=>{var _;((_=d.searchRef)==null?void 0:_.current)!==""&&T.key===" "||(RK.includes(T.key)&&j(),T.key===" "&&T.preventDefault())})})})})});eN.displayName=zf;var Yl="SelectItemText",tN=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,l=yi(Yl,n),u=xi(Yl,n),d=ZE(Yl,n),f=MK(Yl,n),[p,h]=S.useState(null),g=ct(t,j=>h(j),d.onItemTextChange,j=>{var T;return(T=u.itemTextRefCallback)==null?void 0:T.call(u,j,d.value,d.disabled)}),y=p==null?void 0:p.textContent,b=S.useMemo(()=>i.jsx("option",{value:d.value,disabled:d.disabled,children:y},d.value),[d.disabled,d.value,y]),{onNativeOptionAdd:w,onNativeOptionRemove:v}=f;return yn(()=>(w(b),()=>v(b)),[w,v,b]),i.jsxs(i.Fragment,{children:[i.jsx(Qe.span,{id:d.textId,...o,ref:g}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?$a.createPortal(o.children,l.valueNode):null]})});tN.displayName=Yl;var nN="SelectItemIndicator",rN=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return ZE(nN,n).isSelected?i.jsx(Qe.span,{"aria-hidden":!0,...r,ref:t}):null});rN.displayName=nN;var R0="SelectScrollUpButton",sN=S.forwardRef((e,t)=>{const n=xi(R0,e.__scopeSelect),r=xx(R0,e.__scopeSelect),[s,o]=S.useState(!1),l=ct(t,r.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=d.scrollTop>0;o(f)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?i.jsx(oN,{...e,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});sN.displayName=R0;var I0="SelectScrollDownButton",iN=S.forwardRef((e,t)=>{const n=xi(I0,e.__scopeSelect),r=xx(I0,e.__scopeSelect),[s,o]=S.useState(!1),l=ct(t,r.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;o(p)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?i.jsx(oN,{...e,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});iN.displayName=I0;var oN=S.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=xi("SelectScrollButton",n),l=S.useRef(null),u=kh(n),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),yn(()=>{var p;const f=u().find(h=>h.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[u]),i.jsx(Qe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Je(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Je(s.onPointerMove,()=>{var f;(f=o.onItemLeave)==null||f.call(o),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Je(s.onPointerLeave,()=>{d()})})}),qK="SelectSeparator",GK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Qe.div,{"aria-hidden":!0,...r,ref:t})});GK.displayName=qK;var A0="SelectArrow",KK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=jh(n),o=yi(A0,n),l=xi(A0,n);return o.open&&l.position==="popper"?i.jsx(EK,{...s,...r,ref:t}):null});KK.displayName=A0;function aN(e){return e===""||e===void 0}var lN=S.forwardRef((e,t)=>{const{value:n,...r}=e,s=S.useRef(null),o=ct(t,s),l=OE(n);return S.useEffect(()=>{const u=s.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&p){const h=new Event("change",{bubbles:!0});p.call(u,n),u.dispatchEvent(h)}},[l,n]),i.jsx(zE,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});lN.displayName="BubbleSelect";function cN(e){const t=ws(e),n=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const u=n.current+l;t(u),(function d(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[t]),o=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function uN(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let l=YK(e,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==n));const d=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function YK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var XK=$E,JK=BE,QK=VE,ZK=UE,eY=HE,tY=qE,nY=XE,rY=eN,sY=tN,iY=rN,oY=sN,aY=iN;function $f({...e}){return i.jsx(XK,{"data-slot":"select",...e})}function Lf({...e}){return i.jsx(QK,{"data-slot":"select-value",...e})}function Bf({className:e,size:t="default",children:n,...r}){return i.jsxs(JK,{"data-slot":"select-trigger","data-size":t,className:nt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,i.jsx(ZK,{asChild:!0,children:i.jsx(fo,{className:"size-4 opacity-50"})})]})}function Wf({className:e,children:t,position:n="popper",...r}){return i.jsx(eY,{children:i.jsxs(tY,{"data-slot":"select-content",className:nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(lY,{}),i.jsx(nY,{className:nt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),i.jsx(cY,{})]})})}function yr({className:e,children:t,...n}){return i.jsxs(rY,{"data-slot":"select-item",className:nt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(iY,{children:i.jsx(to,{className:"size-4"})})}),i.jsx(sY,{children:t})]})}function lY({className:e,...t}){return i.jsx(oY,{"data-slot":"select-scroll-up-button",className:nt("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Sy,{className:"size-4"})})}function cY({className:e,...t}){return i.jsx(aY,{"data-slot":"select-scroll-down-button",className:nt("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(fo,{className:"size-4"})})}function uY({open:e,onClose:t,onSuccess:n}){var P;const{browseChatflows:r,cloneChatflow:s,fetchChatflows:o}=sh(),{selectedProject:l,projects:u}=Yt(),[d,f]=S.useState(!1),[p,h]=S.useState(!1),[g,y]=S.useState({}),[b,w]=S.useState(""),[v,j]=S.useState(""),[T,k]=S.useState("");S.useEffect(()=>{e&&(_(),w(""),j(""),k(""))},[e]),S.useEffect(()=>{var z;if(v&&b){const L=(z=g[b])==null?void 0:z.find(B=>B.id===v);L&&k(`${L.name} (Copy)`)}},[v,b,g]);const _=async()=>{try{h(!0);const z=await r();y(z)}catch(z){console.error("Failed to browse chatflows:",z),we.error("Failed to load chatflows")}finally{h(!1)}},N=async()=>{if(!(l!=null&&l.id)){we.error("Please select a target project first");return}if(!v){we.error("Please select a chatflow to clone");return}if(!T.trim()){we.error("Please enter a name for the cloned chatflow");return}try{f(!0);const z=await s(v,T.trim(),l.id,b);we.success("Chatflow cloned successfully"),await o({projectId:l.id}),n&&n(z),t()}catch(z){console.error("Failed to clone chatflow:",z),we.error(z.message||"Failed to clone chatflow")}finally{f(!1)}},E=z=>{const L=u.find(B=>B.id===z);return(L==null?void 0:L.name)||z},R=b?g[b]||[]:[],A=Object.keys(g).filter(z=>g[z].length>0);return i.jsx(uE,{open:e,onOpenChange:z=>!z&&t(),children:i.jsxs(dE,{className:"sm:max-w-[500px]",children:[i.jsxs(fE,{children:[i.jsxs(hE,{className:"flex items-center gap-2",children:[i.jsx(Sa,{size:20}),"Clone Chatflow from Another Project"]}),i.jsxs(tG,{children:["Clone an existing chatflow from any project to the current project (",l==null?void 0:l.name,")."]})]}),p?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(Wt,{className:"animate-spin mr-2",size:24}),i.jsx("span",{className:"text-sm text-gray-500",children:"Loading chatflows..."})]}):A.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(ja,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No chatflows found in any project."}),i.jsx("p",{className:"text-sm",children:"Create a chatflow first before cloning."})]}):i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ga,{htmlFor:"sourceProject",className:"flex items-center gap-2",children:[i.jsx(kP,{size:16}),"Source Project"]}),i.jsxs($f,{value:b,onValueChange:z=>{w(z),j("")},children:[i.jsx(Bf,{children:i.jsx(Lf,{placeholder:"Select source project..."})}),i.jsx(Wf,{children:A.map(z=>i.jsxs(yr,{value:z,children:[E(z)," (",g[z].length," chatflows)"]},z))})]})]}),b&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ga,{htmlFor:"chatflow",className:"flex items-center gap-2",children:[i.jsx(ja,{size:16}),"Chatflow to Clone"]}),i.jsxs($f,{value:v,onValueChange:j,children:[i.jsx(Bf,{children:i.jsx(Lf,{placeholder:"Select chatflow..."})}),i.jsx(Wf,{children:R.map(z=>i.jsx(yr,{value:z.id,children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:z.name}),i.jsxs("span",{className:"text-xs text-gray-400",children:[z.nodesCount," nodes - ",z.status]})]})},z.id))})]})]}),v&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ga,{htmlFor:"newName",children:"New Chatflow Name"}),i.jsx(Gc,{id:"newName",value:T,onChange:z=>k(z.target.value),placeholder:"Enter name for the cloned chatflow..."})]}),v&&i.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm",children:[i.jsx("p",{className:"font-medium text-amber-800",children:"Clone Details:"}),i.jsxs("ul",{className:"mt-1 text-amber-700 space-y-1",children:[i.jsxs("li",{children:["From: ",E(b)]}),i.jsxs("li",{children:["To: ",l==null?void 0:l.name]}),i.jsxs("li",{children:["Chatflow: ",(P=R.find(z=>z.id===v))==null?void 0:P.name]})]})]})]}),i.jsxs(eG,{children:[i.jsx(gt,{variant:"outline",onClick:t,disabled:d,children:"Cancel"}),i.jsx(gt,{onClick:N,disabled:d||!v||!T.trim(),className:"bg-amber-500 hover:bg-amber-600",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Wt,{className:"animate-spin mr-2",size:16}),"Cloning..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Sa,{size:16,className:"mr-2"}),"Clone Chatflow"]})})]})]})})}function dY(){const e=Pt(),{chatflows:t,createChatflow:n,deleteChatflow:r,loading:s}=sh(),{selectedProject:o}=Yt(),[l,u]=S.useState(""),[d,f]=S.useState(!1),[p,h]=S.useState(!1),g=async()=>{if(!o){we.error("Please select a project first");return}f(!0);try{const w=await n({name:`Untitled Flow ${t.length+1}`,description:"New chatflow",projectId:o.id});we.success("Chatflow created successfully"),e(`/kabar-in/chatflow/${w.id}`)}catch{we.error("Failed to create chatflow")}finally{f(!1)}},y=async w=>{if(!(o!=null&&o.id)){we.error("Please select a project first");return}try{await r(w,o.id),we.success("Chatflow deleted successfully")}catch{we.error("Failed to delete chatflow")}},b=t.filter(w=>w.name.toLowerCase().includes(l.toLowerCase()));return i.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)",padding:"2rem"},children:[i.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#1f2937",marginBottom:"0.5rem"},children:"Chatflow Studio"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Design automated conversation flows with visual drag-and-drop builder"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[i.jsxs("div",{style:{flex:1,position:"relative"},children:[i.jsx(bs,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),i.jsx("input",{type:"text",placeholder:"Search chatflows...",value:l,onChange:w=>u(w.target.value),style:{width:"100%",padding:"12px 16px 12px 48px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"12px",outline:"none"}})]}),i.jsxs(fe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(!0),style:{padding:"12px 24px",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#f59e0b"},children:[i.jsx(Sa,{size:18}),"Clone from Project"]}),i.jsxs(fe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:d,style:{padding:"12px 24px",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",cursor:d?"not-allowed":"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",opacity:d?.6:1},children:[i.jsx(Vt,{size:18}),"Create Chatflow"]})]}),s?i.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Loading chatflows..."})}):b.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",background:"rgba(255, 255, 255, 0.5)",borderRadius:"24px",border:"2px dashed rgba(245, 158, 11, 0.2)"},children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:l?"No chatflows found":"No chatflows yet"}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:l?"Try a different search term":"Create your first chatflow to get started"})]}):i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:b.map(w=>i.jsx(qU,{chatflow:w,onClick:()=>e(`/kabar-in/chatflow/${w.id}`),onDelete:y},w.id))})]}),i.jsx(uY,{open:p,onClose:()=>h(!1),onSuccess:()=>{h(!1)}})]})}function fY(e,t){const n=[],r=[];if(e.length===0)return n.push("Flow must have at least one node"),{valid:!1,errors:n,warnings:r};const s=e.filter(h=>h.type==="trigger");s.length===0?n.push("Flow must have a trigger node"):s.length>1&&n.push("Flow can only have one trigger node");const o=e.filter(h=>h.type==="end");o.length===0&&n.push("Flow must have at least one end node");const l=new Set;t.forEach(h=>{l.add(h.source),l.add(h.target)});const u=e.filter(h=>!l.has(h.id)&&h.type!=="trigger"&&e.length>1);return u.length>0&&n.push(`${u.length} disconnected node(s): ${u.map(h=>h.data.label).join(", ")}`),s.length===1&&e.length>1&&(t.some(g=>g.source===s[0].id)||n.push("Trigger node must connect to another node")),o.forEach(h=>{!t.some(y=>y.target===h.id)&&e.length>1&&n.push(`End node "${h.data.label}" is not connected`)}),e.filter(h=>h.type==="condition").forEach(h=>{const g=t.filter(y=>y.source===h.id);g.length===0?n.push(`Condition "${h.data.label}" has no outputs`):g.length===1?r.push(`Condition "${h.data.label}" should have 2 outputs (true/false paths)`):g.length>2&&n.push(`Condition "${h.data.label}" has too many outputs (max 2)`)}),e.filter(h=>h.type==="send_template").forEach(h=>{var g;(g=h.data.config)!=null&&g.templateId||n.push(`Send Template "${h.data.label}" has no template selected`)}),hY(e,t)&&n.push("Flow contains circular dependency (infinite loop)"),e.forEach(h=>{var g,y;if(h.type==="trigger"){const b=h.data.config;(b==null?void 0:b.type)==="keyword"&&!b.keyword&&n.push(`Trigger "${h.data.label}" needs a keyword`)}if(h.type==="wait_reply"){const b=h.data.config;b!=null&&b.timeout&&b.timeout<0&&n.push(`Wait Reply "${h.data.label}" has invalid timeout value`)}if(h.type==="condition"){const b=h.data.config;b!=null&&b.variable||n.push(`Condition "${h.data.label}" needs a variable to check`),b!=null&&b.value||n.push(`Condition "${h.data.label}" needs a value to compare`)}if(h.type==="delay"){const b=h.data.config;(!(b!=null&&b.duration)||b.duration<=0)&&n.push(`Delay "${h.data.label}" needs a valid duration`)}if(h.type==="guest_form"){const b=h.data.config;!(b!=null&&b.questions)||b.questions.length===0?n.push(`Guest Form "${h.data.label}" needs at least one question`):b.questions.forEach((w,v)=>{w.variableName||n.push(`Guest Form "${h.data.label}" question ${v+1} needs a variable name`),w.question||n.push(`Guest Form "${h.data.label}" question ${v+1} needs question text`),w.type==="choice"&&(!w.options||w.options.length===0)&&n.push(`Guest Form "${h.data.label}" question ${v+1} (choice type) needs options`)}),b!=null&&b.enableConfirmation&&(b.confirmationMessage||r.push(`Guest Form "${h.data.label}" has confirmation enabled but no message`),(!b.confirmYesKeywords||b.confirmYesKeywords.length===0)&&r.push(`Guest Form "${h.data.label}" has no "Yes" keywords configured`),(!b.confirmNoKeywords||b.confirmNoKeywords.length===0)&&r.push(`Guest Form "${h.data.label}" has no "No" keywords configured`)),((g=b==null?void 0:b.onMaxRetry)==null?void 0:g.action)==="jump_to_node"&&!b.onMaxRetry.jumpToNodeId&&n.push(`Guest Form "${h.data.label}" has jump action but no target node selected`),(y=b==null?void 0:b.onMaxRetry)!=null&&y.jumpToNodeId&&(e.some(v=>v.id===b.onMaxRetry.jumpToNodeId)||n.push(`Guest Form "${h.data.label}" references a non-existent jump target node`))}if(h.type==="update_guest"){const b=h.data.config;(b==null?void 0:b.action)==="add_tag"&&!b.tagName&&n.push(`Update Guest "${h.data.label}" needs a tag name`),(b==null?void 0:b.action)==="remove_tag"&&!b.tagName&&n.push(`Update Guest "${h.data.label}" needs a tag name`),(b==null?void 0:b.action)==="update_rsvp"&&!b.rsvpStatus&&n.push(`Update Guest "${h.data.label}" needs an RSVP status`),(b==null?void 0:b.action)==="update_field"&&!b.fieldName&&n.push(`Update Guest "${h.data.label}" needs a field name`),(b==null?void 0:b.action)==="map_from_variables"&&(!b.variableMappings||b.variableMappings.length===0?n.push(`Update Guest "${h.data.label}" needs at least one variable mapping`):b.variableMappings.forEach((w,v)=>{w.sourceVariable||n.push(`Update Guest "${h.data.label}" mapping ${v+1} needs a source variable`),w.targetField||n.push(`Update Guest "${h.data.label}" mapping ${v+1} needs a target field`)}))}}),{valid:n.length===0,errors:n,warnings:r}}function hY(e,t){const n=new Set,r=new Set;function s(l){n.add(l),r.add(l);const u=t.filter(d=>d.source===l);for(const d of u)if(n.has(d.target)){if(r.has(d.target))return!0}else if(s(d.target))return!0;return r.delete(l),!1}const o=e.find(l=>l.type==="trigger");return o?s(o.id):!1}function FS(){const{id:e}=my(),t=Pt(),{chatflows:n,getChatflowById:r,updateChatflow:s,deleteChatflow:o}=sh(),{selectedProject:l}=Yt(),[u,d]=S.useState(!1),[f,p]=S.useState(null),[h,g]=S.useState([]),[y,b]=S.useState([]),[w,v]=S.useState(!1),[j,T]=S.useState(null),[k,_]=S.useState(!1),[N,E]=S.useState(!0),[R,A]=S.useState({valid:!0,errors:[],warnings:[]});S.useRef(null);const P=S.useRef(!0),z=M=>{const U=new Set;return M.forEach(F=>{var D;F.type==="set_variable"&&((D=F.data.config)!=null&&D.variableName)&&U.add(F.data.config.variableName)}),Array.from(U)},L=S.useCallback(async()=>{if(!e){console.error(" No chatflow ID");return}if(!(l!=null&&l.id)){console.error(" No project selected"),alert("Please select a project first");return}console.log(" ========== SAVE CHATFLOW START =========="),console.log(" Nodes count:",h.length),console.log(" Edges count:",y.length),console.log(" Project ID:",l.id),h.forEach((M,U)=>{console.log(`Node ${U+1}:`,{id:M.id,type:M.type,label:M.data.label,hasConfig:!!M.data.config,config:M.data.config})});try{v(!0);const M=z(h);console.log(" Extracted variables:",M);const U={nodes:h,edges:y,variables:M};console.log(" Sending payload to backend:",JSON.stringify(U,null,2));const F=await s(e,U,l.id);console.log(" Backend response:",F),_(!1),T(new Date),console.log(" Chatflow saved successfully"),console.log(" ========== SAVE CHATFLOW END ==========")}catch(M){console.error(" Save error:",M),alert("Failed to save chatflow")}finally{v(!1)}},[e,h,y,s,l==null?void 0:l.id]),B=S.useCallback(async M=>{if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}try{await s(e,{name:M},l.id),console.log("Chatflow name updated successfully")}catch(U){console.error("Update name error:",U),alert("Failed to update chatflow name")}},[e,s,l==null?void 0:l.id]),K=S.useCallback(async()=>{if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}try{await o(e,l.id),console.log("Chatflow deleted successfully"),t("/kabar-in/chatflow")}catch(M){console.error("Delete error:",M),alert("Failed to delete chatflow")}},[e,o,t,l==null?void 0:l.id]),V=S.useCallback(async()=>{var F;if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}const U=((F=n.find(D=>D.id===e))==null?void 0:F.status)==="active"?"draft":"active";try{await s(e,{status:U},l.id),console.log(`Chatflow status changed to ${U}`)}catch(D){console.error("Toggle lock error:",D),alert("Failed to change chatflow status")}},[e,n,s,l==null?void 0:l.id]);if(S.useEffect(()=>{P.current||(h.length>0||y.length>0)&&_(!0)},[h,y]),S.useEffect(()=>{const M=fY(h,y);A(M)},[h,y]),S.useEffect(()=>{(async()=>{var U;if(!e){E(!1),P.current=!1;return}if(!(l!=null&&l.id)){console.log("Waiting for project selection...");return}try{E(!0),P.current=!0;const F=await r(e,l.id);console.log(" ========== LOAD CHATFLOW =========="),console.log(" Loaded chatflow:",F),console.log(" Nodes from backend:",F==null?void 0:F.nodes),console.log(" Nodes count:",(U=F==null?void 0:F.nodes)==null?void 0:U.length),F!=null&&F.nodes&&F.nodes.forEach((D,W)=>{var X,ne,G;console.log(`Loaded Node ${W+1}:`,{id:D.id,type:D.type,label:(X=D.data)==null?void 0:X.label,hasConfig:!!((ne=D.data)!=null&&ne.config),config:(G=D.data)==null?void 0:G.config})}),F&&(console.log(" Setting nodes state with:",F.nodes),g(F.nodes||[]),b(F.edges||[]),_(!1),T(new Date(F.updatedAt)),console.log(" Nodes state set successfully")),console.log(" ========== LOAD CHATFLOW END ==========")}catch(F){console.error("Load error:",F),alert("Failed to load chatflow")}finally{E(!1),setTimeout(()=>{P.current=!1},100)}})()},[e,l==null?void 0:l.id]),!e)return i.jsx(dY,{});if(N)return i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)"},children:i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(245, 158, 11, 0.2)",borderTopColor:"#f59e0b",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:"Loading chatflow..."})]})});const $=n.find(M=>M.id===e),H=($==null?void 0:$.status)==="active";return i.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)"},children:[i.jsx(NU,{chatflowId:e,chatflowName:($==null?void 0:$.name)||"Untitled Flow",onBack:()=>t("/kabar-in/chatflow"),onSave:L,onUpdateName:B,onDelete:K,onToggleLock:V,isSaving:w,hasUnsavedChanges:k,lastSaved:j,validation:R,isLocked:H,currentChatflow:$?{...$,nodes:h,edges:y}:void 0}),i.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[!u&&!H&&i.jsx(RU,{onCollapse:()=>d(!0)}),i.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:i.jsx(PV,{nodes:h,edges:y,onNodesChange:H?()=>{}:g,onEdgesChange:H?()=>{}:b,onNodeSelect:p,isLocked:H})}),f&&i.jsx(HU,{node:f,allNodes:h,isLocked:H,onUpdate:M=>{H||(console.log(" ChatflowStudio.onUpdate called:",{nodeId:M.id,nodeType:M.type,config:M.data.config,fullNode:M}),g(U=>{const F=U.map(D=>D.id===M.id?M:D);return console.log(" Nodes state updated. Total nodes:",F.length),console.log(" Updated node in array:",F.find(D=>D.id===M.id)),F}),p(M))},onDelete:()=>{g(M=>M.filter(U=>U.id!==f.id)),p(null)},onClose:()=>p(null)})]})]})}async function Vl(e){const t=await e.text();try{return JSON.parse(t)}catch{throw console.error("Failed to parse JSON:",t),new Error("Invalid JSON response from server")}}const dN=S.createContext(void 0);function pY({children:e}){const{user:t,accessToken:n}=Kt(),[r,s]=S.useState([]),[o,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${$n}.supabase.co/functions/v1/make-server-deeab278`,p=async E=>{if(!t||!n){s([]);return}try{l(!0),d(null);const R=new URLSearchParams;R.append("projectId",E);const A=await fetch(`${f}/campaigns?${R.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}}),P=await Vl(A);if(!A.ok)throw new Error(P.error||"Failed to fetch campaigns");s(P.campaigns||[])}catch(R){console.error("Error fetching campaigns:",R),d(R.message||"Failed to fetch campaigns"),s([])}finally{l(!1)}},h=async E=>{if(!t||!n)return null;try{const R=await fetch(`${f}/campaigns/${E}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}}),A=await Vl(R);if(!R.ok)throw new Error(A.error||"Failed to fetch campaign");return A.campaign}catch(R){return console.error("Error fetching campaign:",R),d(R.message||"Failed to fetch campaign"),null}},N={campaigns:r,loading:o,error:u,fetchCampaigns:p,getCampaignById:h,createCampaign:async(E,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({...E,projectId:R})}),P=await Vl(A);if(!A.ok)throw new Error(P.error||"Failed to create campaign");const z=P.campaign;return s(L=>[z,...L]),z}catch(A){throw console.error("Error creating campaign:",A),d(A.message||"Failed to create campaign"),A}},updateCampaign:async(E,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns/${E}`,{method:"PUT",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(R)}),P=await Vl(A);if(!A.ok)throw new Error(P.error||"Failed to update campaign");const z=P.campaign;return s(L=>L.map(B=>B.id===E?z:B)),z}catch(A){throw console.error("Error updating campaign:",A),d(A.message||"Failed to update campaign"),A}},deleteCampaign:async E=>{if(!t||!n||t.role!=="admin")throw new Error("Only admins can delete campaigns");try{d(null);const R=await fetch(`${f}/campaigns/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const A=await R.json();throw new Error(A.error||"Failed to delete campaign")}s(A=>A.filter(P=>P.id!==E))}catch(R){throw console.error("Error deleting campaign:",R),d(R.message||"Failed to delete campaign"),R}},startCampaign:async E=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${E}/start`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to start campaign")}const A=await h(E);A&&s(P=>P.map(z=>z.id===E?A:z))}catch(R){throw console.error("Error starting campaign:",R),d(R.message||"Failed to start campaign"),R}},pauseCampaign:async E=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${E}/pause`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to pause campaign")}const A=await h(E);A&&s(P=>P.map(z=>z.id===E?A:z))}catch(R){throw console.error("Error pausing campaign:",R),d(R.message||"Failed to pause campaign"),R}},resumeCampaign:async E=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${E}/resume`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to resume campaign")}const A=await h(E);A&&s(P=>P.map(z=>z.id===E?A:z))}catch(R){throw console.error("Error resuming campaign:",R),d(R.message||"Failed to resume campaign"),R}},cancelCampaign:async E=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${E}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to cancel campaign")}const A=await h(E);A&&s(P=>P.map(z=>z.id===E?A:z))}catch(R){throw console.error("Error cancelling campaign:",R),d(R.message||"Failed to cancel campaign"),R}},previewGuestFilter:async(E,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns/preview-guests`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:E,guestFilter:R})}),P=await Vl(A);if(!A.ok)throw new Error(P.error||"Failed to preview guests");return P.guests||[]}catch(A){return console.error("Error previewing guests:",A),d(A.message||"Failed to preview guests"),[]}},getCampaignStats:async E=>{const R=await h(E);return(R==null?void 0:R.stats)||null}};return i.jsx(dN.Provider,{value:N,children:e})}function bx(){const e=S.useContext(dN);if(e===void 0)throw new Error("useCampaigns must be used within a CampaignProvider");return e}function mY({className:e,...t}){return i.jsx("textarea",{"data-slot":"textarea",className:nt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var vx="Checkbox",[gY]=Ha(vx),[yY,xY]=gY(vx),fN=S.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:l,disabled:u,value:d="on",onCheckedChange:f,form:p,...h}=e,[g,y]=S.useState(null),b=ct(t,_=>y(_)),w=S.useRef(!1),v=g?p||!!g.closest("form"):!0,[j=!1,T]=Af({prop:s,defaultProp:o,onChange:f}),k=S.useRef(j);return S.useEffect(()=>{const _=g==null?void 0:g.form;if(_){const N=()=>T(k.current);return _.addEventListener("reset",N),()=>_.removeEventListener("reset",N)}},[g,T]),i.jsxs(yY,{scope:n,state:j,disabled:u,children:[i.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":oi(j)?"mixed":j,"aria-required":l,"data-state":mN(j),"data-disabled":u?"":void 0,disabled:u,value:d,...h,ref:b,onKeyDown:Je(e.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Je(e.onClick,_=>{T(N=>oi(N)?!0:!N),v&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),v&&i.jsx(bY,{control:g,bubbles:!w.current,name:r,value:d,checked:j,required:l,disabled:u,form:p,style:{transform:"translateX(-100%)"},defaultChecked:oi(o)?!1:o})]})});fN.displayName=vx;var hN="CheckboxIndicator",pN=S.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=xY(hN,n);return i.jsx(Kc,{present:r||oi(o.state)||o.state===!0,children:i.jsx(Qe.span,{"data-state":mN(o.state),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});pN.displayName=hN;var bY=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...o}=e,l=S.useRef(null),u=OE(n),d=_E(t);S.useEffect(()=>{const p=l.current,h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&y){const b=new Event("click",{bubbles:r});p.indeterminate=oi(n),y.call(p,oi(n)?!1:n),p.dispatchEvent(b)}},[u,n,r]);const f=S.useRef(oi(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??f.current,...o,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function oi(e){return e==="indeterminate"}function mN(e){return oi(e)?"indeterminate":e?"checked":"unchecked"}var vY=fN,wY=pN;function Ch({className:e,...t}){return i.jsx(vY,{"data-slot":"checkbox",className:nt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(wY,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:i.jsx(to,{className:"size-3.5"})})})}function SY({guests:e,selectedIds:t,onSelectionChange:n,loading:r=!1}){const[s,o]=S.useState(""),l=S.useMemo(()=>{if(!s.trim())return e;const h=s.toLowerCase();return e.filter(g=>{var y;return g.name.toLowerCase().includes(h)||g.phone.includes(h)||((y=g.email)==null?void 0:y.toLowerCase().includes(h))})},[e,s]),u=l.length>0&&l.every(h=>t.includes(h.id)),d=l.some(h=>t.includes(h.id))&&!u,f=h=>{if(h){const g=new Set(t);l.forEach(y=>g.add(y.id)),n(Array.from(g))}else{const g=new Set(l.map(y=>y.id));n(t.filter(y=>!g.has(y)))}},p=(h,g)=>{n(g?[...t,h]:t.filter(y=>y!==h))};return r?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Wt,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[i.jsx(cn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guests found"}),i.jsx("p",{className:"text-gray-600",children:"Add guests to your project first before creating a campaign."})]}):i.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(Gc,{type:"text",placeholder:"Search guests...",value:s,onChange:h=>o(h.target.value),className:"pl-10"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(Ty,{className:"h-4 w-4"}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium text-gray-900",children:t.length})," ","of"," ",i.jsx("span",{className:"font-medium text-gray-900",children:e.length})," ","selected"]})]})]})}),i.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left w-12",children:i.jsx(Ch,{checked:u,onCheckedChange:f,"aria-label":u?"Deselect all guests":"Select all guests",className:d?"data-[state=checked]:bg-blue-600":""})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:l.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500",children:"No guests match your search"})}):l.map(h=>i.jsx(kY,{guest:h,selected:t.includes(h.id),onSelect:g=>p(h.id,g)},h.id))})]})}),i.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-200 flex items-center gap-2",children:[i.jsxs(gt,{variant:"outline",size:"sm",onClick:()=>n(e.map(h=>h.id)),children:["Select All (",e.length,")"]}),i.jsx(gt,{variant:"outline",size:"sm",onClick:()=>n([]),children:"Deselect All"})]})]})}function kY({guest:e,selected:t,onSelect:n}){return i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${t?"bg-blue-50":""}`,onClick:()=>n(!t),children:[i.jsx("td",{className:"px-4 py-3",onClick:r=>r.stopPropagation(),children:i.jsx(Ch,{checked:t,onCheckedChange:n,"aria-label":`Select ${e.name}`})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.name}),e.email&&i.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),i.jsx("td",{className:"px-4 py-3 text-gray-700",children:e.phone}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:e.category||"general"})})]})}function jY({open:e,onClose:t,onSuccess:n}){const{selectedProject:r}=Yt(),{createCampaign:s}=bx(),{chatflows:o,fetchChatflows:l}=sh(),{guests:u,fetchGuests:d}=rh(),[f,p]=S.useState(1),[h,g]=S.useState(!1),[y,b]=S.useState(!1),[w,v]=S.useState({name:"",description:"",chatflow_id:""}),[j,T]=S.useState([]),[k,_]=S.useState(!1);S.useEffect(()=>{e&&(r!=null&&r.id)&&(l({projectId:r.id}),N())},[e,r==null?void 0:r.id]),S.useEffect(()=>{e&&u.length>0&&!k&&(T(u.map(P=>P.id)),_(!0))},[e,u.length,k]),S.useEffect(()=>{e?(p(1),v({name:"",description:"",chatflow_id:""}),_(!1)):(T([]),_(!1))},[e]);const N=S.useCallback(async()=>{if(r!=null&&r.id){b(!0);try{await d()}catch(P){console.error("Failed to refresh guests:",P)}finally{b(!1)}}},[r==null?void 0:r.id,d]),E=async()=>{if(!(r!=null&&r.id)){we.error("Please select a project first");return}if(!w.name.trim()){we.error("Campaign name is required");return}if(!w.chatflow_id){we.error("Please select a chatflow");return}if(j.length===0){we.error("Please select at least one guest");return}g(!0);try{const P={name:w.name.trim(),description:w.description.trim()||void 0,chatflow_id:w.chatflow_id,guest_filter:{custom_guest_ids:j}};await s(P,r.id),we.success(`Campaign "${w.name}" created with ${j.length} guests`),n()}catch(P){const z=P instanceof Error?P.message:"Failed to create campaign";we.error(z)}finally{g(!1)}},R=w.name.trim()&&w.chatflow_id,A=j.length>0;return i.jsx(uE,{open:e,onOpenChange:P=>!P&&t(),children:i.jsxs(dE,{className:"max-w-6xl w-[95vw] h-[90vh] max-h-[90vh] overflow-hidden flex flex-col p-0",children:[i.jsx(fE,{className:"px-6 pt-6 pb-4 border-b",children:i.jsxs(hE,{className:"text-2xl font-semibold",children:["Create Campaign - Step ",f," of 2"]})}),i.jsxs("div",{className:"flex items-center gap-4 px-6 py-4 border-b bg-gray-50",children:[i.jsx(OS,{step:1,currentStep:f,label:"Campaign Details"}),i.jsx("div",{className:"flex-1 h-px bg-gray-300"}),i.jsx(OS,{step:2,currentStep:f,label:"Select Guests"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:f===1?i.jsx(CY,{formData:w,setFormData:v,chatflows:o}):i.jsx(_Y,{guests:u,selectedGuestIds:j,setSelectedGuestIds:T,loading:y,onRefresh:N})}),i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-gray-50",children:[i.jsx(gt,{variant:"ghost",onClick:f===1?t:()=>p(1),disabled:h,children:f===1?i.jsxs(i.Fragment,{children:[i.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Cancel"]}):i.jsxs(i.Fragment,{children:[i.jsx(wy,{className:"h-4 w-4 mr-2"}),"Back"]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[f===2&&i.jsxs("span",{className:"text-sm text-gray-600 mr-4",children:[j.length," of ",u.length," guests selected"]}),f===1?i.jsxs(gt,{onClick:()=>p(2),disabled:!R,children:["Next",i.jsx(fa,{className:"h-4 w-4 ml-2"})]}):i.jsx(gt,{onClick:E,disabled:h||!A,children:h?i.jsxs(i.Fragment,{children:[i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})})}function OS({step:e,currentStep:t,label:n}){const r=e===t,s=e<t;return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
          ${r?"bg-blue-600 text-white":s?"bg-green-600 text-white":"bg-gray-100 text-gray-500"}
        `,children:e}),i.jsx("span",{className:`text-sm ${r?"font-medium text-gray-900":"text-gray-500"}`,children:n})]})}function CY({formData:e,setFormData:t,chatflows:n}){return i.jsxs("div",{className:"space-y-6 max-w-lg",children:[i.jsxs("div",{children:[i.jsxs(ga,{htmlFor:"campaign-name",className:"text-base font-medium",children:["Campaign Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Gc,{id:"campaign-name",value:e.name,onChange:r=>t({...e,name:r.target.value}),placeholder:"Enter campaign name",className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ga,{htmlFor:"campaign-description",className:"text-base font-medium",children:"Description"}),i.jsx(mY,{id:"campaign-description",value:e.description,onChange:r=>t({...e,description:r.target.value}),placeholder:"Describe the purpose of this campaign...",rows:3,className:"mt-2"})]}),i.jsxs("div",{children:[i.jsxs(ga,{htmlFor:"campaign-chatflow",className:"text-base font-medium",children:["Select Chatflow ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs($f,{value:e.chatflow_id,onValueChange:r=>t({...e,chatflow_id:r}),children:[i.jsx(Bf,{id:"campaign-chatflow",className:"mt-2",children:i.jsx(Lf,{placeholder:"Choose a chatflow to use"})}),i.jsx(Wf,{children:n.length===0?i.jsx(yr,{value:"_none",disabled:!0,children:"No chatflows available"}):n.map(r=>i.jsx(yr,{value:r.id,children:r.name},r.id))})]}),n.length===0&&i.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"Please create a chatflow first before creating a campaign."})]})]})}function _Y({guests:e,selectedGuestIds:t,setSelectedGuestIds:n,loading:r,onRefresh:s}){return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cn,{className:"h-5 w-5 text-gray-500"}),i.jsx("span",{className:"font-medium",children:"Select Recipients"})]}),i.jsxs(gt,{variant:"outline",size:"sm",onClick:s,disabled:r,children:[i.jsx(e5,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),i.jsx(SY,{guests:e,selectedIds:t,onSelectionChange:n,loading:r})]})}const EY=y_("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gN({className:e,variant:t,asChild:n=!1,...r}){const s=n?di:"span";return i.jsx(s,{"data-slot":"badge",className:nt(EY({variant:t}),e),...r})}function yN({status:e,className:t=""}){const n={draft:{label:"Draft",className:"bg-gray-100 text-gray-800 hover:bg-gray-100"},ready:{label:"Ready",className:"bg-blue-100 text-blue-800 hover:bg-blue-100"},running:{label:"Running",className:"bg-green-100 text-green-800 hover:bg-green-100"},paused:{label:"Paused",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"},completed:{label:"Completed",className:"bg-purple-100 text-purple-800 hover:bg-purple-100"},archived:{label:"Archived",className:"bg-gray-100 text-gray-600 hover:bg-gray-100"}},r=n[e]||n.draft;return i.jsx(gN,{variant:"secondary",className:`${r.className} ${t}`,children:r.label})}var xN="AlertDialog",[NY]=Ha(xN,[W_]),_s=W_(),bN=e=>{const{__scopeAlertDialog:t,...n}=e,r=_s(t);return i.jsx(sE,{...r,...n,modal:!0})};bN.displayName=xN;var TY="AlertDialogTrigger",RY=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=_s(n);return i.jsx(Jq,{...s,...r,ref:t})});RY.displayName=TY;var IY="AlertDialogPortal",vN=e=>{const{__scopeAlertDialog:t,...n}=e,r=_s(t);return i.jsx(iE,{...r,...n})};vN.displayName=IY;var AY="AlertDialogOverlay",wN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=_s(n);return i.jsx(oE,{...s,...r,ref:t})});wN.displayName=AY;var va="AlertDialogContent",[PY,MY]=NY(va),SN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=_s(n),l=S.useRef(null),u=ct(t,l),d=S.useRef(null);return i.jsx(Gq,{contentName:va,titleName:kN,docsSlug:"alert-dialog",children:i.jsx(PY,{scope:n,cancelRef:d,children:i.jsxs(aE,{role:"alertdialog",...o,...s,ref:u,onOpenAutoFocus:Je(s.onOpenAutoFocus,f=>{var p;f.preventDefault(),(p=d.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[i.jsx(p_,{children:r}),i.jsx(FY,{contentRef:l})]})})})});SN.displayName=va;var kN="AlertDialogTitle",jN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=_s(n);return i.jsx(lE,{...s,...r,ref:t})});jN.displayName=kN;var CN="AlertDialogDescription",_N=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=_s(n);return i.jsx(cE,{...s,...r,ref:t})});_N.displayName=CN;var DY="AlertDialogAction",EN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=_s(n);return i.jsx(cx,{...s,...r,ref:t})});EN.displayName=DY;var NN="AlertDialogCancel",TN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=MY(NN,n),o=_s(n),l=ct(t,s);return i.jsx(cx,{...o,...r,ref:l})});TN.displayName=NN;var FY=({contentRef:e})=>{const t=`\`${va}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${va}\` by passing a \`${CN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${va}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},OY=bN,zY=vN,$Y=wN,LY=SN,BY=EN,WY=TN,VY=jN,UY=_N;function HY({...e}){return i.jsx(OY,{"data-slot":"alert-dialog",...e})}function qY({...e}){return i.jsx(zY,{"data-slot":"alert-dialog-portal",...e})}function GY({className:e,...t}){return i.jsx($Y,{"data-slot":"alert-dialog-overlay",className:nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function KY({className:e,...t}){return i.jsxs(qY,{children:[i.jsx(GY,{}),i.jsx(LY,{"data-slot":"alert-dialog-content",className:nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function YY({className:e,...t}){return i.jsx("div",{"data-slot":"alert-dialog-header",className:nt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function XY({className:e,...t}){return i.jsx("div",{"data-slot":"alert-dialog-footer",className:nt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function JY({className:e,...t}){return i.jsx(VY,{"data-slot":"alert-dialog-title",className:nt("text-lg font-semibold",e),...t})}function QY({className:e,...t}){return i.jsx(UY,{"data-slot":"alert-dialog-description",className:nt("text-muted-foreground text-sm",e),...t})}function ZY({className:e,...t}){return i.jsx(BY,{className:nt(ex(),e),...t})}function eX({className:e,...t}){return i.jsx(WY,{className:nt(ex({variant:"outline"}),e),...t})}function tX(){const e=Pt(),{selectedProject:t}=Yt(),{campaigns:n,loading:r,fetchCampaigns:s,deleteCampaign:o}=bx(),[l,u]=S.useState(!1),[d,f]=S.useState(null),[p,h]=S.useState(!1),[g,y]=S.useState(!1);S.useEffect(()=>{t!=null&&t.id&&s(t.id)},[t==null?void 0:t.id,s]);const b=S.useCallback(async()=>{if(t!=null&&t.id){y(!0);try{await s(t.id),we.success("Campaigns refreshed")}catch{we.error("Failed to refresh campaigns")}finally{y(!1)}}},[t==null?void 0:t.id,s]),w=async()=>{if(d){h(!0);try{await o(d.id),we.success(`Campaign "${d.name}" deleted`),f(null),t!=null&&t.id&&s(t.id)}catch(j){const T=j instanceof Error?j.message:"Failed to delete campaign";we.error(T)}finally{h(!1)}}},v=j=>{e(`/kabar-in/operation/${j.id}`)};return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Operation Center"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage campaigns for ",t.name]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(gt,{variant:"outline",onClick:b,disabled:g,children:[i.jsx(e5,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]}),i.jsxs(gt,{onClick:()=>u(!0),children:[i.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})]}),r&&n.length===0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(j=>i.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse border border-gray-200"},j))}):n.length===0?i.jsx(nX,{onCreateClick:()=>u(!0)}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(j=>i.jsx(rX,{campaign:j,onClick:()=>v(j),onDelete:()=>f(j)},j.id))}),i.jsx(jY,{open:l,onClose:()=>u(!1),onSuccess:()=>{u(!1),t!=null&&t.id&&s(t.id)}}),i.jsx(HY,{open:!!d,onOpenChange:()=>f(null),children:i.jsxs(KY,{children:[i.jsxs(YY,{children:[i.jsx(JY,{children:"Delete Campaign?"}),i.jsxs(QY,{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"? This action cannot be undone.']})]}),i.jsxs(XY,{children:[i.jsx(eX,{disabled:p,children:"Cancel"}),i.jsx(ZY,{onClick:w,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?i.jsxs(i.Fragment,{children:[i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}):i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("p",{className:"text-gray-500",children:"Please select a project first"})})}function nX({onCreateClick:e}){return i.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Vt,{className:"h-8 w-8 text-blue-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No campaigns yet"}),i.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first campaign to start sending messages to your guests"}),i.jsxs(gt,{onClick:e,children:[i.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})}function rX({campaign:e,onClick:t,onDelete:n}){var s,o,l;const r=((o=(s=e.guest_filter)==null?void 0:s.custom_guest_ids)==null?void 0:o.length)||((l=e.stats)==null?void 0:l.total_guests)||0;return i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:t,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),i.jsx(yN,{status:e.status,className:"mt-2"})]}),i.jsx(gt,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-600 hover:text-red-700 hover:bg-red-50",onClick:u=>{u.stopPropagation(),n()},children:i.jsx(At,{className:"h-4 w-4"})})]}),e.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Chatflow:"}),i.jsx("span",{className:"font-medium text-gray-900 truncate ml-2",children:e.chatflow_name||"Not set"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Total Guests:"}),i.jsx("span",{className:"font-medium text-gray-900",children:r})]}),e.stats&&e.status!=="draft"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Completed:"}),i.jsx("span",{className:"font-medium text-green-600",children:e.stats.executions_completed})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Failed:"}),i.jsx("span",{className:"font-medium text-red-600",children:e.stats.executions_failed})]})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 text-xs text-gray-500",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})}async function Wi(e){const t=await e.text();try{return JSON.parse(t)}catch{throw console.error("Failed to parse JSON:",t),new Error("Invalid JSON response from server")}}const RN=S.createContext(void 0);function sX({children:e}){const{user:t,accessToken:n}=Kt(),[r,s]=S.useState([]),[o,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${$n}.supabase.co/functions/v1/make-server-deeab278`,p=async N=>{if(!t||!n){s([]);return}try{l(!0),d(null);const E=await fetch(`${f}/campaigns/${N}/executions`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Wi(E);if(!E.ok)throw new Error(R.error||"Failed to fetch executions");s(R.executions||[])}catch(E){console.error("Error fetching executions:",E),d(E.message||"Failed to fetch executions"),s([])}finally{l(!1)}},h=async N=>{if(!t||!n)return null;try{const E=await fetch(`${f}/executions/${N}`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Wi(E);if(!E.ok)throw new Error(R.error||"Failed to fetch execution");return R.execution}catch(E){return console.error("Error fetching execution:",E),d(E.message||"Failed to fetch execution"),null}},_={executions:r,loading:o,error:u,fetchExecutions:p,getExecutionById:h,getExecutionMessages:async N=>{if(!t||!n)return[];try{const E=await fetch(`${f}/executions/${N}/messages`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Wi(E);if(!E.ok)throw new Error(R.error||"Failed to fetch messages");return R.messages||[]}catch(E){return console.error("Error fetching messages:",E),d(E.message||"Failed to fetch messages"),[]}},retryExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const E=await fetch(`${f}/executions/${N}/retry`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const A=await E.json();throw new Error(A.error||"Failed to retry execution")}const R=await h(N);R&&s(A=>A.map(P=>P.id===N?R:P))}catch(E){throw console.error("Error retrying execution:",E),d(E.message||"Failed to retry execution"),E}},pauseExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const E=await fetch(`${f}/executions/${N}/pause`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const R=await E.json();throw new Error(R.error||"Failed to pause execution")}s(R=>R.map(A=>A.id===N?{...A,status:"paused",paused_at:new Date().toISOString()}:A))}catch(E){throw console.error("Error pausing execution:",E),d(E.message||"Failed to pause execution"),E}},resumeExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const E=await fetch(`${f}/executions/${N}/resume`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const A=await E.json();throw new Error(A.error||"Failed to resume execution")}const R=await h(N);R&&s(A=>A.map(P=>P.id===N?R:P))}catch(E){throw console.error("Error resuming execution:",E),d(E.message||"Failed to resume execution"),E}},bulkRetryExecutions:async(N,E)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/executions/bulk-retry`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:E,campaign_id:N})}),A=await Wi(R);if(!R.ok)throw new Error(A.error||"Failed to bulk retry executions");return await p(N),A.result}catch(R){throw console.error("Error bulk retrying executions:",R),d(R.message||"Failed to bulk retry executions"),R}},bulkPauseExecutions:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const E=await fetch(`${f}/executions/bulk-pause`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:N})}),R=await Wi(E);if(!E.ok)throw new Error(R.error||"Failed to bulk pause executions");const A=new Date().toISOString();return s(P=>P.map(z=>R.result.succeeded.includes(z.id)?{...z,status:"paused",paused_at:A}:z)),R.result}catch(E){throw console.error("Error bulk pausing executions:",E),d(E.message||"Failed to bulk pause executions"),E}},bulkResumeExecutions:async(N,E)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/executions/bulk-resume`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:E,campaign_id:N})}),A=await Wi(R);if(!R.ok)throw new Error(A.error||"Failed to bulk resume executions");return await p(N),A.result}catch(R){throw console.error("Error bulk resuming executions:",R),d(R.message||"Failed to bulk resume executions"),R}},bulkCancelExecutions:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const E=await fetch(`${f}/executions/bulk-cancel`,{method:"POST",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:N})}),R=await Wi(E);if(!E.ok)throw new Error(R.error||"Failed to bulk cancel executions");return s(A=>A.map(P=>R.result.succeeded.includes(P.id)?{...P,status:"cancelled"}:P)),R.result}catch(E){throw console.error("Error bulk cancelling executions:",E),d(E.message||"Failed to bulk cancel executions"),E}}};return i.jsx(RN.Provider,{value:_,children:e})}function wx(){const e=S.useContext(RN);if(e===void 0)throw new Error("useExecutions must be used within an ExecutionProvider");return e}function iX({status:e,className:t=""}){const n={pending:{label:"Pending",className:"bg-gray-100 text-gray-800"},running:{label:"Running",className:"bg-blue-100 text-blue-800"},paused:{label:"Paused",className:"bg-yellow-100 text-yellow-800"},waiting:{label:"Waiting",className:"bg-amber-100 text-amber-800"},completed:{label:"Completed",className:"bg-green-100 text-green-800"},failed:{label:"Failed",className:"bg-red-100 text-red-800"},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-600"}},r=n[e]||n.pending;return i.jsx(gN,{variant:"secondary",className:`${r.className} ${t}`,children:r.label})}function oX({phase:e,className:t=""}){const r={invitation:{label:"Invitation",color:"text-blue-600 bg-blue-50"},reminder:{label:"Reminder",color:"text-amber-600 bg-amber-50"},thank_you:{label:"Thank You",color:"text-green-600 bg-green-50"},follow_up:{label:"Follow Up",color:"text-purple-600 bg-purple-50"}}[e]||{label:e.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),color:"text-gray-600 bg-gray-50"};return i.jsx("span",{className:`
        inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium
        ${r.color} ${t}
      `,children:r.label})}function aX({progress:e,size:t="md",showLabel:n=!0,className:r=""}){const s=Math.min(100,Math.max(0,e)),o={sm:"h-1.5",md:"h-2.5",lg:"h-4"},l=u=>u>=100?"bg-green-500":u>=66?"bg-blue-500":u>=33?"bg-yellow-500":"bg-gray-400";return i.jsxs("div",{className:r,children:[i.jsx("div",{className:`w-full bg-gray-200 rounded-full overflow-hidden ${o[t]}`,children:i.jsx("div",{className:`${o[t]} rounded-full transition-all duration-300 ${l(s)}`,style:{width:`${s}%`}})}),n&&i.jsxs("div",{className:"text-xs text-gray-600 mt-1 text-right",children:[Math.round(s),"%"]})]})}function lX({campaignId:e,selectedIds:t,onComplete:n}){const{bulkRetryExecutions:r,bulkPauseExecutions:s,bulkResumeExecutions:o,bulkCancelExecutions:l}=wx(),[u,d]=S.useState(null),f=async()=>{d("retry");try{const b=await r(e,t);we.success(`Retried ${b.success} execution(s)`),b.failed>0&&we.warning(`${b.failed} execution(s) failed to retry`),n()}catch(b){const w=b instanceof Error?b.message:"Failed to retry executions";we.error(w)}finally{d(null)}},p=async()=>{d("pause");try{const b=await s(t);we.success(`Paused ${b.success} execution(s)`),b.failed>0&&we.warning(`${b.failed} execution(s) failed to pause`),n()}catch(b){const w=b instanceof Error?b.message:"Failed to pause executions";we.error(w)}finally{d(null)}},h=async()=>{d("resume");try{const b=await o(e,t);we.success(`Resumed ${b.success} execution(s)`),b.failed>0&&we.warning(`${b.failed} execution(s) failed to resume`),n()}catch(b){const w=b instanceof Error?b.message:"Failed to resume executions";we.error(w)}finally{d(null)}},g=async()=>{if(confirm(`Are you sure you want to cancel ${t.length} execution(s)?`)){d("cancel");try{const b=await l(t);we.success(`Cancelled ${b.success} execution(s)`),b.failed>0&&we.warning(`${b.failed} execution(s) failed to cancel`),n()}catch(b){const w=b instanceof Error?b.message:"Failed to cancel executions";we.error(w)}finally{d(null)}}},y=u!==null;return i.jsxs("div",{className:"px-4 py-3 bg-blue-50 border-b border-blue-200 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[t.length," execution(s) selected"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(gt,{variant:"outline",size:"sm",onClick:f,disabled:y,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[u==="retry"?i.jsx(Wt,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(Jf,{className:"h-4 w-4 mr-1"}),"Retry"]}),i.jsxs(gt,{variant:"outline",size:"sm",onClick:p,disabled:y,className:"text-yellow-700 border-yellow-300 hover:bg-yellow-100",children:[u==="pause"?i.jsx(Wt,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(Zj,{className:"h-4 w-4 mr-1"}),"Pause"]}),i.jsxs(gt,{variant:"outline",size:"sm",onClick:h,disabled:y,className:"text-green-700 border-green-300 hover:bg-green-100",children:[u==="resume"?i.jsx(Wt,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(hc,{className:"h-4 w-4 mr-1"}),"Resume"]}),i.jsxs(gt,{variant:"outline",size:"sm",onClick:g,disabled:y,className:"text-red-700 border-red-300 hover:bg-red-100",children:[u==="cancel"?i.jsx(Wt,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(Vj,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}function cX({campaignId:e}){const{executions:t,loading:n,fetchExecutions:r}=wx(),[s,o]=S.useState(""),[l,u]=S.useState("all"),[d,f]=S.useState([]),p=S.useMemo(()=>t.filter(v=>{const j=s===""||v.guest_name.toLowerCase().includes(s.toLowerCase())||v.guest_phone.includes(s),T=l==="all"||v.status===l;return j&&T}),[t,s,l]),h=p.length>0&&d.length===p.length,g=d.length>0&&d.length<p.length,y=v=>{f(v?p.map(j=>j.id):[])},b=(v,j)=>{f(j?[...d,v]:d.filter(T=>T!==v))},w=()=>{f([]),r(e)};return n&&t.length===0?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Wt,{className:"h-8 w-8 animate-spin text-blue-600"})}):i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(Gc,{placeholder:"Search by name or phone...",value:s,onChange:v=>o(v.target.value),className:"pl-10"})]}),i.jsxs($f,{value:l,onValueChange:v=>u(v),children:[i.jsx(Bf,{className:"w-full sm:w-[180px]",children:i.jsx(Lf,{placeholder:"Filter by status"})}),i.jsxs(Wf,{children:[i.jsx(yr,{value:"all",children:"All Statuses"}),i.jsx(yr,{value:"pending",children:"Pending"}),i.jsx(yr,{value:"running",children:"Running"}),i.jsx(yr,{value:"paused",children:"Paused"}),i.jsx(yr,{value:"completed",children:"Completed"}),i.jsx(yr,{value:"failed",children:"Failed"}),i.jsx(yr,{value:"cancelled",children:"Cancelled"})]})]})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",p.length," of ",t.length," executions"]})]}),d.length>0&&i.jsx(lX,{campaignId:e,selectedIds:d,onComplete:w}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx(Ch,{checked:h,onCheckedChange:y,"aria-label":"Select all executions",className:g?"data-[state=checked]:bg-blue-600":""})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Guest"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Phase"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Progress"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No executions found"})}):p.map(v=>i.jsx(uX,{execution:v,selected:d.includes(v.id),onSelect:j=>b(v.id,j)},v.id))})]})})]})}function uX({execution:e,selected:t,onSelect:n}){var l,u;const r=((l=e.node_history)==null?void 0:l.filter(d=>d.status==="completed").length)||0,s=((u=e.node_history)==null?void 0:u.length)||1,o=r/s*100;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx(Ch,{checked:t,onCheckedChange:n,"aria-label":`Select execution for ${e.guest_name}`})}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.guest_name}),i.jsx("div",{className:"text-sm text-gray-500",children:e.guest_phone})]})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx(iX,{status:e.status})}),i.jsx("td",{className:"px-4 py-4",children:e.current_phase?i.jsx(oX,{phase:e.current_phase}):i.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"w-32",children:[i.jsx(aX,{progress:o,size:"sm",showLabel:!1}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r,"/",s," nodes"]})]})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx(gt,{variant:"ghost",size:"sm",children:"View Details"})})]})}function dX(){var z,L,B,K,V,J,$;const{campaignId:e}=my(),t=Pt(),{selectedProject:n}=Yt(),{getCampaignById:r,startCampaign:s,pauseCampaign:o,resumeCampaign:l,cancelCampaign:u}=bx(),{executions:d,fetchExecutions:f}=wx(),{guests:p,fetchGuests:h}=rh(),[g,y]=S.useState(null),[b,w]=S.useState(!0),[v,j]=S.useState(!1);S.useEffect(()=>{e&&(T(),f(e)),n!=null&&n.id&&h()},[e,n==null?void 0:n.id]),S.useEffect(()=>{if((g==null?void 0:g.status)==="running"){const H=setInterval(()=>{T(),e&&f(e)},5e3);return()=>clearInterval(H)}},[g==null?void 0:g.status,e]);const T=async()=>{if(e)try{w(!0);const H=await r(e);y(H)}catch(H){console.error("Failed to load campaign:",H),we.error("Failed to load campaign")}finally{w(!1)}},k=S.useMemo(()=>{var M;if(!((M=g==null?void 0:g.guest_filter)!=null&&M.custom_guest_ids))return[];const H=new Set(g.guest_filter.custom_guest_ids);return p.filter(U=>H.has(U.id))},[(z=g==null?void 0:g.guest_filter)==null?void 0:z.custom_guest_ids,p]),_=async()=>{if(e){j(!0);try{await s(e),we.success("Campaign started successfully!"),await T(),f(e)}catch(H){const M=H instanceof Error?H.message:"Failed to start campaign";we.error(M)}finally{j(!1)}}},N=async()=>{if(e){j(!0);try{await o(e),we.success("Campaign paused"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to pause campaign";we.error(M)}finally{j(!1)}}},E=async()=>{if(e){j(!0);try{await l(e),we.success("Campaign resumed"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to resume campaign";we.error(M)}finally{j(!1)}}},R=async()=>{if(e&&confirm("Are you sure you want to cancel this campaign?")){j(!0);try{await u(e),we.success("Campaign cancelled"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to cancel campaign";we.error(M)}finally{j(!1)}}};if(b)return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse mb-4"}),i.jsx("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse mb-8"}),i.jsx("div",{className:"grid grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(H=>i.jsx("div",{className:"h-24 bg-gray-100 rounded-lg animate-pulse"},H))}),i.jsx("div",{className:"h-96 bg-gray-100 rounded-lg animate-pulse"})]});if(!g)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Campaign Not Found"}),i.jsx(gt,{onClick:()=>t("/kabar-in/operation"),className:"mt-4",children:"Back to Campaigns"})]})});const A=((B=(L=g.guest_filter)==null?void 0:L.custom_guest_ids)==null?void 0:B.length)||((K=g.stats)==null?void 0:K.total_guests)||0,P=g.status==="draft";return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(gt,{variant:"ghost",onClick:()=>t("/kabar-in/operation"),className:"mb-4",children:[i.jsx(wy,{className:"h-4 w-4 mr-1"}),"Back to Campaigns"]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:g.name}),i.jsx(yN,{status:g.status})]}),g.description&&i.jsx("p",{className:"text-gray-600",children:g.description}),i.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Chatflow: ",i.jsx("span",{className:"font-medium text-gray-700",children:g.chatflow_name})]})]}),i.jsxs("div",{className:"flex gap-2",children:[g.status==="draft"&&i.jsxs(gt,{onClick:_,disabled:v||A===0,children:[v?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(hc,{className:"h-4 w-4 mr-2"}),"Start Campaign"]}),g.status==="running"&&i.jsxs(gt,{onClick:N,disabled:v,variant:"outline",children:[v?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Zj,{className:"h-4 w-4 mr-2"}),"Pause"]}),g.status==="paused"&&i.jsxs(i.Fragment,{children:[i.jsxs(gt,{onClick:E,disabled:v,children:[v?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(hc,{className:"h-4 w-4 mr-2"}),"Resume"]}),i.jsxs(gt,{onClick:R,disabled:v,variant:"destructive",children:[v?i.jsx(Wt,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Vj,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsx(Vd,{icon:cn,label:"Total Guests",value:A,color:"blue"}),i.jsx(Vd,{icon:gi,label:"Running",value:((V=g.stats)==null?void 0:V.executions_running)||0,color:"yellow"}),i.jsx(Vd,{icon:Hj,label:"Completed",value:((J=g.stats)==null?void 0:J.executions_completed)||0,color:"green"}),i.jsx(Vd,{icon:ro,label:"Failed",value:(($=g.stats)==null?void 0:$.executions_failed)||0,color:"red"})]}),P?i.jsx(fX,{guests:k,totalSelected:A,loading:p.length===0}):i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Guest Executions"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track the progress of each guest through the chatflow"})]}),i.jsx(cX,{campaignId:e})]})]})}function fX({guests:e,totalSelected:t,loading:n}){const[r,s]=S.useState(""),o=S.useMemo(()=>{if(!r.trim())return e;const l=r.toLowerCase();return e.filter(u=>{var d;return u.name.toLowerCase().includes(l)||u.phone.includes(l)||((d=u.email)==null?void 0:d.toLowerCase().includes(l))})},[e,r]);return n?i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Wt,{className:"h-8 w-8 animate-spin text-blue-600"})})}):i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Selected Guests"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"These guests will receive messages when you start the campaign"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full",children:[i.jsx(Ty,{className:"h-4 w-4"}),i.jsxs("span",{className:"font-medium",children:[t," guests selected"]})]})]})}),i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(Gc,{type:"text",placeholder:"Search guests...",value:r,onChange:l=>s(l.target.value),className:"pl-10"})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:r?"No guests match your search":"No guests selected for this campaign"})}):o.map(l=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"font-medium text-gray-900",children:l.name})}),i.jsx("td",{className:"px-6 py-4 text-gray-700",children:l.phone}),i.jsx("td",{className:"px-6 py-4 text-gray-700",children:l.email||"-"}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:l.category||"general"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"Pending"})})]},l.id))})]})}),i.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 text-sm text-gray-600",children:["Showing ",o.length," of ",t," guests"]})]})}function Vd({icon:e,label:t,value:n,color:r}){const s={blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",green:"bg-green-50 text-green-600",red:"bg-red-50 text-red-600"};return i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:t}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n})]}),i.jsx("div",{className:`p-3 rounded-full ${s[r]}`,children:i.jsx(e,{className:"h-6 w-6"})})]})})}function hX(e){const t=[],n=[];if(e.version||t.push({field:"version",message:"Flow version is required",type:"error",path:"version"}),!e.screens||e.screens.length===0)t.push({field:"screens",message:"At least one screen is required",type:"error",path:"screens"});else{e.screens.forEach((u,d)=>{pX(u,e.screens).forEach(p=>{t.push({...p,path:`screens[${d}].${p.path||""}`})})});const r=e.screens.map(u=>u.id),s=r.filter((u,d)=>r.indexOf(u)!==d);s.length>0&&t.push({field:"screens",message:`Duplicate screen IDs found: ${s.join(", ")}`,type:"error",path:"screens"}),e.screens.some(u=>u.terminal)||n.push({field:"screens",message:"Flow should have at least one terminal screen",type:"warning",path:"screens"});const l=gX(e.screens);t.push(...l)}return{valid:t.length===0,errors:t,warnings:n}}function pX(e,t){const n=[];return e.id?/^[A-Z][A-Z0-9_]*$/.test(e.id)||n.push({field:"id",message:"Screen ID should be uppercase with underscores (e.g., WELCOME_SCREEN)",type:"error",path:"id"}):n.push({field:"id",message:"Screen ID is required",type:"error",path:"id"}),e.layout?!e.layout.children||e.layout.children.length===0?n.push({field:"layout.children",message:"Screen must have at least one component",type:"error",path:"layout.children"}):e.layout.children.forEach((r,s)=>{mX(r,e).forEach(l=>{n.push({...l,path:`layout.children[${s}].${l.path||""}`})})}):n.push({field:"layout",message:"Screen layout is required",type:"error",path:"layout"}),e.terminal&&e.success===void 0&&n.push({field:"success",message:"Terminal screens should have success flag set",type:"error",path:"success"}),n}function mX(e,t){const n=[];if(!e.type)return n.push({field:"type",message:"Component type is required",type:"error",path:"type"}),n;switch(e.type){case"TextHeading":case"TextSubheading":case"TextBody":case"TextCaption":(!e.text||e.text.trim()==="")&&n.push({field:"text",message:`${e.type} text cannot be empty`,type:"error",path:"text"});const r={TextHeading:80,TextSubheading:80,TextBody:4096,TextCaption:409};e.text&&e.text.length>r[e.type]&&n.push({field:"text",message:`${e.type} exceeds maximum length of ${r[e.type]} characters`,type:"error",path:"text"});break;case"TextInput":case"TextArea":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),e.label||n.push({field:"label",message:`${e.type} must have a label`,type:"error",path:"label"}),e.name&&t.data&&!t.data[e.name]&&n.push({field:"name",message:`Field "${e.name}" not found in screen data`,type:"error",path:"name"});break;case"RadioButtonsGroup":case"CheckboxGroup":case"Dropdown":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),(!e["data-source"]||e["data-source"].length===0)&&n.push({field:"data-source",message:`${e.type} must have at least one option`,type:"error",path:"data-source"});break;case"Footer":e.label||n.push({field:"label",message:"Footer button must have a label",type:"error",path:"label"}),e["on-click-action"]||n.push({field:"on-click-action",message:"Footer button must have an action",type:"error",path:"on-click-action"});break;case"DatePicker":case"CalendarPicker":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),e.label||n.push({field:"label",message:`${e.type} must have a label`,type:"error",path:"label"});break}return n}function gX(e){const t=[],n=e.map(r=>r.id);return e.forEach((r,s)=>{var o;(o=r.layout)!=null&&o.children&&r.layout.children.forEach((l,u)=>{var d;if(l.type==="Footer"&&l["on-click-action"]){const f=l["on-click-action"];if(f.name==="navigate"){const p=f;(d=p.next)!=null&&d.name&&!n.includes(p.next.name)&&t.push({field:"on-click-action",message:`Navigation target "${p.next.name}" does not exist`,type:"error",path:`screens[${s}].layout.children[${u}].on-click-action`})}}})}),t}function yX(e){const t=JSON.stringify(e.flow_json,null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(t),r=`${e.name.replace(/\s+/g,"_").toLowerCase()}_flow.json`,s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",r),s.click()}async function xX(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{var o;try{const l=JSON.parse((o=s.target)==null?void 0:o.result);t(l)}catch{n(new Error("Invalid JSON file"))}},r.onerror=()=>{n(new Error("Failed to read file"))},r.readAsText(e)})}function bX(e,t){return{id:e,title:e,terminal:!1,data:{},layout:{type:"SingleColumnLayout",children:[]}}}function vX(e,t="SCREEN"){let n=1,r=`${t}_${n}`;for(;e.includes(r);)n++,r=`${t}_${n}`;return r}function wX(e,t){let n=1,r=`${t}_${n}`;for(;e.includes(r);)n++,r=`${t}_${n}`;return r}function SX(e){return{TextHeading:{type:"TextHeading",text:"Heading Text"},TextSubheading:{type:"TextSubheading",text:"Subheading Text"},TextBody:{type:"TextBody",text:"Body text goes here"},TextCaption:{type:"TextCaption",text:"Caption text"},TextInput:{type:"TextInput",name:"field_name",label:"Label",required:!1,"input-type":"text"},TextArea:{type:"TextArea",name:"field_name",label:"Label",required:!1},RadioButtonsGroup:{type:"RadioButtonsGroup",name:"field_name",label:"Select an option","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},CheckboxGroup:{type:"CheckboxGroup",name:"field_name",label:"Select options","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},Dropdown:{type:"Dropdown",name:"field_name",label:"Select from dropdown","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},DatePicker:{type:"DatePicker",name:"field_name",label:"Select a date",required:!1},CalendarPicker:{type:"CalendarPicker",name:"field_name",title:"Select a date",mode:"single",required:!1},Footer:{type:"Footer",label:"Continue","on-click-action":{name:"complete",payload:{}}},OptIn:{type:"OptIn",name:"field_name",label:"I agree to the terms",required:!1},EmbeddedLink:{type:"EmbeddedLink",text:"Click here","on-click-action":{name:"open_url",payload:{url:"https://example.com"}}},Image:{type:"Image",src:"https://via.placeholder.com/300","scale-type":"cover"},ImageCarousel:{type:"ImageCarousel",images:[{src:"https://via.placeholder.com/300","alt-text":"Image 1"},{src:"https://via.placeholder.com/300","alt-text":"Image 2"}]},ChipsSelector:{type:"ChipsSelector",name:"field_name",label:"Select chips","data-source":[{id:"chip1",title:"Chip 1"},{id:"chip2",title:"Chip 2"}],required:!1},NavigationList:{type:"NavigationList","data-source":[{id:"item1",title:"Item 1"},{id:"item2",title:"Item 2"}]},PhotoPicker:{type:"PhotoPicker",name:"field_name",label:"Upload photo","photo-source":"camera_gallery",required:!1},If:{type:"If",condition:"true",then:[]},Switch:{type:"Switch",cases:[{condition:"true",components:[]}]}}[e]}function P0(e){return{TextHeading:"Heading",TextSubheading:"Subheading",TextBody:"Body Text",TextCaption:"Caption",TextInput:"Text Input",TextArea:"Text Area",RadioButtonsGroup:"Radio Buttons",CheckboxGroup:"Checkbox Group",Dropdown:"Dropdown",DatePicker:"Date Picker",CalendarPicker:"Calendar Picker",Footer:"Button",OptIn:"Opt-in Checkbox",EmbeddedLink:"Link",Image:"Image",ImageCarousel:"Image Carousel",ChipsSelector:"Chips Selector",NavigationList:"Navigation List",PhotoPicker:"Photo Picker",If:"Conditional (If)",Switch:"Switch"}[e]||e}function kX(e){return{TextHeading:"Large heading text (max 80 chars)",TextSubheading:"Subheading text (max 80 chars)",TextBody:"Body text with markdown support (max 4096 chars)",TextCaption:"Small caption text (max 409 chars)",TextInput:"Single-line text input field",TextArea:"Multi-line text input field",RadioButtonsGroup:"Single selection from options",CheckboxGroup:"Multiple selection from options",Dropdown:"Dropdown selection",DatePicker:"Date selection",CalendarPicker:"Calendar-based date picker",Footer:"Action button",OptIn:"Checkbox for consent/agreement",EmbeddedLink:"Clickable link",Image:"Display an image",ImageCarousel:"Multiple images in carousel",ChipsSelector:"Chip-based selection",NavigationList:"List with navigation",PhotoPicker:"Upload photos from device",If:"Conditional rendering",Switch:"Multiple conditional branches"}[e]||""}function IN(e){var n,r;const t=[];return(r=(n=e.layout)==null?void 0:n.children)==null||r.forEach(s=>{"name"in s&&s.name&&t.push(s.name)}),t}function xg(e){const t=IN(e),n={};return t.forEach(r=>{e.data&&e.data[r]?n[r]=e.data[r]:n[r]={type:"string",__example__:""}}),{...e,data:n}}function Qo(e){return{id:e.id,project_id:e.projectId,name:e.name,description:e.description,category:e.category,status:e.status,flow_json:e.flowJson,version:e.version,created_at:e.createdAt,updated_at:e.updatedAt,created_by:e.createdBy,published_at:e.publishedAt}}function jX(e){return{id:e.id,name:e.name,description:e.description,category:e.category,thumbnail_url:e.thumbnailUrl,flow_json:e.flowJson,is_public:e.isPublic,created_at:e.createdAt}}const AN=S.createContext(void 0);function CX({children:e}){const{user:t,accessToken:n}=Kt(),{selectedProject:r}=Yt(),[s,o]=S.useState([]),[l,u]=S.useState([]),[d,f]=S.useState(null),[p,h]=S.useState(null),[g,y]=S.useState(null),[b,w]=S.useState(null),[v,j]=S.useState(!1),[T,k]=S.useState(null),[_,N]=S.useState(null),E=S.useRef(null),R=S.useRef(null);R.current=d;const A=`https://${$n}.supabase.co/functions/v1/make-server-deeab278`,P=S.useCallback(()=>({Authorization:`Bearer ${Fe}`,"X-User-Token":n||"","Content-Type":"application/json"}),[n]),z=S.useCallback(async()=>{if(!t||!n||!(r!=null&&r.id)){o([]);return}try{j(!0),k(null);const Z=await fetch(`${A}/wa-flows?projectId=${encodeURIComponent(r.id)}`,{method:"GET",headers:P()});if(!Z.ok){const pe=await Z.json();throw new Error(pe.error||"Failed to fetch flows")}const he=((await Z.json()).flows||[]).map(Qo);o(he)}catch(Z){console.error("Error fetching flows:",Z),k(Z.message||"Failed to fetch flows"),o([])}finally{j(!1)}},[t,n,r,A,P]),L=async Z=>{if(!t||!n||!(r!=null&&r.id))return null;try{const de=await fetch(`${A}/wa-flows/${Z}?projectId=${encodeURIComponent(r.id)}`,{method:"GET",headers:P()});if(!de.ok){const pe=await de.json();throw new Error(pe.error||"Failed to fetch flow")}const he=await de.json();return he.flow?Qo(he.flow):null}catch(de){return console.error("Error fetching flow:",de),null}},B=async(Z,de,he)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const pe=await fetch(`${A}/wa-flows`,{method:"POST",headers:P(),body:JSON.stringify({name:Z,description:he,category:de,projectId:r.id})});if(!pe.ok){const je=await pe.json();throw new Error(je.error||"Failed to create flow")}const _e=await pe.json(),Be=Qo(_e.flow);return o(je=>[Be,...je]),Be}catch(pe){throw console.error("Error creating flow:",pe),pe}},K=async(Z,de)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const he=await fetch(`${A}/wa-flows/from-template`,{method:"POST",headers:P(),body:JSON.stringify({templateId:Z,name:de,projectId:r.id})});if(!he.ok){const Be=await he.json();throw new Error(Be.error||"Failed to create flow from template")}const pe=await he.json(),_e=Qo(pe.flow);return o(Be=>[_e,...Be]),_e}catch(he){throw console.error("Error creating flow from template:",he),he}},V=async(Z,de)=>{var he;if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const pe={};de.name!==void 0&&(pe.name=de.name),de.description!==void 0&&(pe.description=de.description),de.category!==void 0&&(pe.category=de.category),de.status!==void 0&&(pe.status=de.status),de.flow_json!==void 0&&(pe.flowJson=de.flow_json);const _e=await fetch(`${A}/wa-flows/${Z}?projectId=${encodeURIComponent(r.id)}`,{method:"PUT",headers:P(),body:JSON.stringify(pe)});if(!_e.ok){const He=await _e.json();throw new Error(He.error||"Failed to update flow")}const Be=await _e.json(),je=Qo(Be.flow);return o(He=>He.map(dt=>dt.id===Z?je:dt)),((he=R.current)==null?void 0:he.id)===Z&&f(je),je}catch(pe){throw console.error("Error updating flow:",pe),pe}},J=async Z=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const de=await fetch(`${A}/wa-flows/${Z}?projectId=${encodeURIComponent(r.id)}`,{method:"DELETE",headers:P()});if(!de.ok){const he=await de.json();throw new Error(he.error||"Failed to delete flow")}o(he=>he.filter(pe=>pe.id!==Z)),(d==null?void 0:d.id)===Z&&f(null)}catch(de){throw console.error("Error deleting flow:",de),de}},$=async(Z,de)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const he=await fetch(`${A}/wa-flows/${Z}/clone`,{method:"POST",headers:P(),body:JSON.stringify({newName:de,sourceProjectId:r.id,targetProjectId:r.id})});if(!he.ok){const Be=await he.json();throw new Error(Be.error||"Failed to clone flow")}const pe=await he.json(),_e=Qo(pe.flow);return o(Be=>[_e,...Be]),_e}catch(he){throw console.error("Error cloning flow:",he),he}},H=S.useCallback(async()=>{if(!(!t||!n))try{const Z=await fetch(`${A}/wa-flow-templates`,{method:"GET",headers:P()});if(!Z.ok){const pe=await Z.json();throw new Error(pe.error||"Failed to fetch templates")}const he=((await Z.json()).templates||[]).map(jX);u(he)}catch(Z){console.error("Error fetching templates:",Z)}},[t,n,A,P]),M=Z=>{var de,he;f(Z),h(((he=(de=Z==null?void 0:Z.flow_json)==null?void 0:de.screens)==null?void 0:he[0])||null),y(null),w(null),N(null)},U=Z=>{h(Z),y(null),w(null)},F=Z=>{if(!d)return;const de={...d.flow_json,screens:[...d.flow_json.screens,Z]};f({...d,flow_json:de}),ie()},D=(Z,de)=>{if(!d)return;const he=d.flow_json.screens.map(_e=>_e.id===Z?{..._e,...de}:_e),pe={...d.flow_json,screens:he};f({...d,flow_json:pe}),(p==null?void 0:p.id)===Z&&h({...p,...de}),ie()},W=Z=>{if(!d)return;const de=d.flow_json.screens.filter(pe=>pe.id!==Z),he={...d.flow_json,screens:de};f({...d,flow_json:he}),(p==null?void 0:p.id)===Z&&h(de[0]||null),ie()},X=Z=>{if(!d)return;const de={...d.flow_json,screens:Z};f({...d,flow_json:de}),ie()},ne=(Z,de)=>{y(Z),w(de)},G=Z=>{if(!d||!p)return;const de=[...p.layout.children,Z],he={...p,layout:{...p.layout,children:de}},pe=xg(he);D(p.id,pe)},Q=(Z,de)=>{if(!d||!p)return;const he=p.layout.children.map((Be,je)=>je===Z?{...Be,...de}:Be),pe={...p,layout:{...p.layout,children:he}},_e=xg(pe);D(p.id,_e),b===Z&&y({...g,...de})},se=Z=>{if(!d||!p)return;const de=p.layout.children.filter((_e,Be)=>Be!==Z),he={...p,layout:{...p.layout,children:de}},pe=xg(he);D(p.id,pe),b===Z&&(y(null),w(null))},q=Z=>{if(!d||!p)return;const de={...p,layout:{...p.layout,children:Z}};D(p.id,de)},ee=()=>{if(!d)return{valid:!1,errors:[{message:"No flow selected",type:"error"}],warnings:[]};const Z=hX(d.flow_json);return N(Z),Z},ie=()=>{E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{le()},2e3)},le=async()=>{const Z=R.current;if(Z)try{await V(Z.id,{flow_json:Z.flow_json,name:Z.name})}catch(de){console.error("Auto-save failed:",de)}};S.useEffect(()=>{t&&n&&(r!=null&&r.id)?(z(),H()):(o([]),u([]))},[t,n,r,z,H]),S.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]);const ue={flows:s,templates:l,currentFlow:d,selectedScreen:p,selectedComponent:g,selectedComponentIndex:b,loading:v,error:T,validationResult:_,fetchFlows:z,getFlowById:L,createFlow:B,createFlowFromTemplate:K,updateFlow:V,deleteFlow:J,cloneFlow:$,fetchTemplates:H,setCurrentFlow:M,selectScreen:U,addScreen:F,updateScreen:D,deleteScreen:W,reorderScreens:X,selectComponent:ne,addComponent:G,updateComponent:Q,deleteComponent:se,reorderComponents:q,validateCurrentFlow:ee,saveCurrentFlow:le};return i.jsx(AN.Provider,{value:ue,children:e})}function Ya(){const e=S.useContext(AN);if(e===void 0)throw new Error("useWhatsAppFlows must be used within a WhatsAppFlowProvider");return e}function _X(){const e=Pt(),{selectedProject:t}=Yt(),{flows:n,templates:r,loading:s,error:o,createFlow:l,createFlowFromTemplate:u,deleteFlow:d,cloneFlow:f,fetchFlows:p}=Ya(),[h,g]=S.useState(""),[y,b]=S.useState("all"),[w,v]=S.useState(!1),[j,T]=S.useState(!1),[k,_]=S.useState(null);S.useEffect(()=>{p()},[p]);const N=n.filter(B=>{const K=B.name.toLowerCase().includes(h.toLowerCase()),V=y==="all"||B.status===y;return K&&V}),E=async()=>{try{const B=await l("New Flow","OTHER","Description");e(`/kabar-in/whatsapp-flows/${B.id}`)}catch(B){console.error("Failed to create flow:",B)}},R=async(B,K)=>{try{const V=await u(B,`${K} - Copy`);v(!1),e(`/kabar-in/whatsapp-flows/${V.id}`)}catch(V){console.error("Failed to create flow from template:",V)}},A=async B=>{try{const K=await f(B.id,`${B.name} - Copy`);e(`/kabar-in/whatsapp-flows/${K.id}`)}catch(K){console.error("Failed to clone flow:",K)}},P=async()=>{if(k)try{await d(k.id),T(!1),_(null)}catch(B){console.error("Failed to delete flow:",B)}},z=B=>{switch(B){case"published":return"bg-green-100 text-green-800";case"deprecated":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},L=B=>B.replace(/_/g," ");return i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"WhatsApp Flows"}),i.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Vt,{size:20}),"Create Flow"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Search flows...",value:h,onChange:B=>g(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("select",{value:y,onChange:B=>b(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"deprecated",children:"Deprecated"})]})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:s?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-gray-500",children:"Loading flows..."})}):o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-red-500",children:o})}):N.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[i.jsx(jy,{size:48,className:"mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No flows yet"}),i.jsx("p",{className:"text-sm mb-4",children:"Create your first WhatsApp Flow to get started"}),i.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Flow"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(B=>i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-lg transition-shadow cursor-pointer",children:[i.jsxs("div",{onClick:()=>e(`/kabar-in/whatsapp-flows/${B.id}`),className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:B.name}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z(B.status)}`,children:B.status})]}),B.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:B.description}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:L(B.category)}),i.jsxs("span",{className:"text-xs text-gray-500",children:[B.flow_json.screens.length," screen",B.flow_json.screens.length!==1?"s":""]})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Updated ",new Date(B.updated_at).toLocaleDateString()]})]}),i.jsxs("div",{className:"border-t border-gray-200 px-6 py-3 flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:K=>{K.stopPropagation(),e(`/kabar-in/whatsapp-flows/${B.id}`)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:i.jsx(Xf,{size:16})}),i.jsx("button",{onClick:K=>{K.stopPropagation(),A(B)},className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Clone",children:i.jsx(Sa,{size:16})}),i.jsx("button",{onClick:K=>{K.stopPropagation(),_(B),T(!0)},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:i.jsx(At,{size:16})})]})]},B.id))})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Flow"}),i.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsx("div",{className:"p-6 overflow-auto max-h-[calc(80vh-140px)]",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{onClick:E,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-colors",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx(Vt,{size:48,className:"text-gray-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Blank Flow"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Start from scratch"})]})}),r.map(B=>i.jsxs("div",{onClick:()=>R(B.id,B.name),className:"border border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-md cursor-pointer transition-all",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:B.name}),B.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:B.description}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:L(B.category)}),i.jsxs("span",{className:"text-xs text-gray-500",children:[B.flow_json.screens.length," screens"]})]})]},B.id))]})}),i.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:i.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"})})]})}),j&&k&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Delete Flow"})}),i.jsx("div",{className:"p-6",children:i.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("strong",{children:k.name}),"? This action cannot be undone."]})}),i.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{T(!1),_(null)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),i.jsx("button",{onClick:P,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function EX(){const{currentFlow:e,selectedScreen:t,selectScreen:n,addScreen:r,deleteScreen:s,reorderScreens:o}=Ya(),[l,u]=S.useState(null),[d,f]=S.useState(null),p=S.useRef(null);if(!e)return null;const h=e.flow_json.screens,g=()=>{const _=h.map(R=>R.id),N=vX(_,"SCREEN"),E=bX(N);r(E)},y=_=>{if(h.length<=1){alert("Cannot delete the last screen");return}confirm("Delete this screen?")&&s(_)},b=(_,N)=>{p.current=N,u(N),_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",String(N))},w=(_,N)=>{_.preventDefault(),_.dataTransfer.dropEffect="move",p.current!==null&&p.current!==N&&f(N)},v=()=>{f(null)},j=(_,N)=>{_.preventDefault();const E=p.current;if(E===null||E===N){k();return}const R=[...h],[A]=R.splice(E,1);R.splice(N,0,A),o(R),k()},T=()=>{k()},k=()=>{u(null),f(null),p.current=null};return i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"font-semibold text-gray-900",children:"Screens"}),i.jsx("button",{onClick:g,className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Add Screen",children:i.jsx(Vt,{size:20})})]}),i.jsx("div",{className:"space-y-1",children:h.map((_,N)=>i.jsx("div",{draggable:!0,onDragStart:E=>b(E,N),onDragOver:E=>w(E,N),onDragLeave:v,onDrop:E=>j(E,N),onDragEnd:T,onClick:()=>n(_),className:`p-3 rounded-lg border cursor-pointer transition-all ${(t==null?void 0:t.id)===_.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${l===N?"opacity-40":""} ${d===N?"border-t-2 border-t-blue-500":""}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[i.jsx("div",{className:"mt-0.5 cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",onMouseDown:E=>E.stopPropagation(),children:i.jsx(Cy,{size:14})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-sm text-gray-900",children:_.id}),_.title&&i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:_.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[_.terminal&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Terminal"}),N===0&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Start"})]})]})]}),h.length>1&&i.jsx("button",{onClick:E=>{E.stopPropagation(),y(_.id)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:i.jsx(At,{size:14})})]})},_.id))})]})}function NX(){const{selectedScreen:e,selectedComponentIndex:t,selectComponent:n,deleteComponent:r}=Ya();return e?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e.id}),e.title&&i.jsx("p",{className:"text-gray-600",children:e.title})]}),i.jsx("div",{className:"space-y-3",children:e.layout.children.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("p",{className:"mb-4",children:"No components yet"}),i.jsx("p",{className:"text-sm",children:"Add components from the properties panel"})]}):e.layout.children.map((s,o)=>i.jsx("div",{onClick:()=>n(s,o),className:`p-4 rounded-lg border cursor-pointer transition-all ${t===o?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Cy,{size:20,className:"text-gray-400 mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded",children:P0(s.type)})}),i.jsxs("div",{className:"text-sm text-gray-700",children:[s.type.startsWith("Text")&&"text"in s&&i.jsx("div",{className:"line-clamp-2",children:s.text}),"label"in s&&i.jsx("div",{className:"line-clamp-1",children:s.label}),"name"in s&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Field: ",s.name]})]})]}),i.jsx("button",{onClick:l=>{l.stopPropagation(),confirm("Delete this component?")&&r(o)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:i.jsx(At,{size:16})})]})},o))})]})}):i.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:i.jsx("p",{children:"Select a screen to edit"})})}const TX=[{name:"text",label:"Text Components",components:["TextHeading","TextSubheading","TextBody","TextCaption"]},{name:"input",label:"Input Components",components:["TextInput","TextArea","RadioButtonsGroup","CheckboxGroup","Dropdown","DatePicker","CalendarPicker"]},{name:"interactive",label:"Interactive Components",components:["Footer","OptIn","EmbeddedLink","Image","ImageCarousel","ChipsSelector","NavigationList","PhotoPicker"]},{name:"logic",label:"Logic Components",components:["If","Switch"]}];function RX(){const{currentFlow:e,selectedScreen:t,selectedComponent:n,selectedComponentIndex:r,updateScreen:s,updateComponent:o,addComponent:l}=Ya(),[u,d]=S.useState(!1);if(!t)return i.jsx("div",{className:"p-4",children:i.jsx("p",{className:"text-gray-500 text-sm",children:"Select a screen to view properties"})});const f=_=>{let N=SX(_);if("name"in N){const E=IN(t),R=_.toLowerCase().replace(/group|component/gi,""),A=wX(E,R);N={...N,name:A}}l(N),d(!1)},p=(e==null?void 0:e.flow_json.screens.map(_=>_.id))||[],h=()=>{if(n&&"on-click-action"in n)return n["on-click-action"]},g=()=>{if(n&&"on-select-action"in n)return n["on-select-action"]},y=_=>{if(r===null)return;let N;_==="navigate"?N={name:"navigate",next:{type:"screen",name:p.filter(R=>R!==t.id)[0]||""},payload:{}}:_==="complete"?N={name:"complete",payload:{}}:N={name:"data_exchange",payload:{}},o(r,{"on-click-action":N})},b=_=>{if(r===null)return;const N=h();if(!N||N.name!=="navigate")return;const E={...N,next:{type:"screen",name:_}};o(r,{"on-click-action":E})},w=_=>{if(r===null)return;if(_==="none"){const{"on-select-action":E,...R}=n;o(r,{"on-select-action":void 0});return}let N;_==="data_exchange"?N={name:"data_exchange",payload:{}}:N={name:"update_data",payload:{}},o(r,{"on-select-action":N})},v=(_,N,E)=>{if(r===null||!n)return;const R=E==="on-click-action"?h():g();if(!R)return;const A={...R.payload||{},[_]:N},P={...R,payload:A};o(r,{[E]:P})},j=(_,N)=>{if(r===null||!n)return;const E=N==="on-click-action"?h():g();if(!E)return;const R={...E.payload||{}};delete R[_];const A={...E,payload:R};o(r,{[N]:A})},T=(n==null?void 0:n.type)==="Footer",k=n&&(n.type==="RadioButtonsGroup"||n.type==="CheckboxGroup"||n.type==="Dropdown"||n.type==="DatePicker"||n.type==="CalendarPicker");return i.jsxs("div",{className:"p-4",children:[i.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Properties"}),i.jsxs("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-center gap-2 px-4 py-2 mb-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Vt,{size:16}),"Add Component"]}),u&&i.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg max-h-96 overflow-auto",children:TX.map(_=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase mb-2",children:_.label}),i.jsx("div",{className:"space-y-1",children:_.components.map(N=>i.jsxs("button",{onClick:()=>f(N),className:"w-full text-left px-3 py-2 text-sm hover:bg-white rounded transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:P0(N)}),i.jsx("div",{className:"text-xs text-gray-600",children:kX(N)})]},N))})]},_.name))}),!n&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Screen ID"}),i.jsx("input",{type:"text",value:t.id,onChange:_=>s(t.id,{id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:t.title||"",onChange:_=>s(t.id,{title:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"terminal",checked:t.terminal||!1,onChange:_=>s(t.id,{terminal:_.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"terminal",className:"text-sm text-gray-700",children:"Terminal Screen"})]}),t.terminal&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"success",checked:t.success||!1,onChange:_=>s(t.id,{success:_.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"success",className:"text-sm text-gray-700",children:"Success"})]})]}),n&&r!==null&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:P0(n.type)}),n.type.startsWith("Text")&&"text"in n&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text"}),i.jsx("textarea",{value:n.text,onChange:_=>o(r,{text:_.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"label"in n&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),i.jsx("input",{type:"text",value:n.label,onChange:_=>o(r,{label:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"name"in n&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Name"}),i.jsx("input",{type:"text",value:n.name,onChange:_=>o(r,{name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"required"in n&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"required",checked:n.required||!1,onChange:_=>o(r,{required:_.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"required",className:"text-sm text-gray-700",children:"Required"})]}),T&&i.jsx(IX,{action:h(),actionProp:"on-click-action",label:"On Click Action",actionTypes:["navigate","complete","data_exchange"],allScreenIds:p,currentScreenId:t.id,onActionTypeChange:y,onNextScreenChange:b,onPayloadChange:v,onPayloadRemove:j}),k&&i.jsx(AX,{action:g(),onActionChange:w,onPayloadChange:v,onPayloadRemove:j})]})]})}function IX({action:e,actionProp:t,label:n,actionTypes:r,allScreenIds:s,currentScreenId:o,onActionTypeChange:l,onNextScreenChange:u,onPayloadChange:d,onPayloadRemove:f}){const[p,h]=S.useState(""),g=(e==null?void 0:e.name)||"navigate",y=s.filter(b=>b!==o);return i.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[i.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase",children:n}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),i.jsx("select",{value:g,onChange:b=>l(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:r.map(b=>i.jsx("option",{value:b,children:b==="navigate"?"Navigate to Screen":b==="complete"?"Complete Flow":"Data Exchange (Server)"},b))})]}),g==="navigate"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Screen"}),y.length>0?i.jsx("select",{value:e&&"next"in e?e.next.name:"",onChange:b=>u(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:y.map(b=>i.jsx("option",{value:b,children:b},b))}):i.jsx("p",{className:"text-xs text-gray-500",children:"No other screens available. Add more screens first."})]}),i.jsx(PN,{payload:e==null?void 0:e.payload,actionProp:t,newPayloadKey:p,setNewPayloadKey:h,onPayloadChange:d,onPayloadRemove:f})]})}function AX({action:e,onActionChange:t,onPayloadChange:n,onPayloadRemove:r}){const[s,o]=S.useState(""),l=(e==null?void 0:e.name)||"none";return i.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[i.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase",children:"On-Select Action"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),i.jsxs("select",{value:l,onChange:u=>t(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"data_exchange",children:"Data Exchange (Server)"}),i.jsx("option",{value:"update_data",children:"Update Data"})]})]}),e&&i.jsx(PN,{payload:e.payload,actionProp:"on-select-action",newPayloadKey:s,setNewPayloadKey:o,onPayloadChange:n,onPayloadRemove:r})]})}function PN({payload:e,actionProp:t,newPayloadKey:n,setNewPayloadKey:r,onPayloadChange:s,onPayloadRemove:o}){const l=Object.entries(e||{}),u=()=>{const d=n.trim();d&&(s(d,"",t),r(""))};return i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payload"}),i.jsxs("div",{className:"space-y-2",children:[l.map(([d,f])=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-mono text-gray-600 w-24 truncate",title:d,children:d}),i.jsx("input",{type:"text",value:typeof f=="string"?f:JSON.stringify(f),onChange:p=>s(d,p.target.value,t),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),i.jsx("button",{onClick:()=>o(d,t),className:"p-1 text-gray-400 hover:text-red-600",children:i.jsx(At,{size:12})})]},d)),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:n,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),placeholder:"New key...",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),i.jsx("button",{onClick:u,disabled:!n.trim(),className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:"Add"})]})]})]})}function PX({onClose:e}){const{currentFlow:t}=Ya(),[n,r]=S.useState(0),[s,o]=S.useState({});if(!t||t.flow_json.screens.length===0)return null;const l=t.flow_json.screens[n],u=()=>{r(0),o({})},d=(f,p)=>{var h;switch(f.type){case"TextHeading":return i.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:f.text},p);case"TextSubheading":return i.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-2",children:f.text},p);case"TextBody":return i.jsx("div",{className:"text-gray-700 mb-3",children:f.text},p);case"TextCaption":return i.jsx("div",{className:"text-sm text-gray-600 mb-2",children:f.text},p);case"TextInput":return i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f.label,f.required&&i.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),i.jsx("input",{type:f["input-type"]||"text",value:s[f.name]||"",onChange:g=>o({...s,[f.name]:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:f["helper-text"]||""})]},p);case"RadioButtonsGroup":return i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[f.label,f.required&&i.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),i.jsx("div",{className:"space-y-2",children:(h=f["data-source"])==null?void 0:h.map(g=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:f.name,value:g.id,checked:s[f.name]===g.id,onChange:y=>o({...s,[f.name]:y.target.value}),className:"text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-gray-700",children:g.title})]},g.id))})]},p);case"Footer":return i.jsx("button",{onClick:()=>{var y,b;const g=(y=f["on-click-action"])==null?void 0:y.name;if(g==="navigate"){const w=(b=f["on-click-action"].next)==null?void 0:b.name,v=t.flow_json.screens.findIndex(j=>j.id===w);v!==-1&&r(v)}else g==="complete"?alert("Flow completed! Data: "+JSON.stringify(s,null,2)):g==="data_exchange"&&alert(`Data Exchange: Server would process this request.
Payload: `+JSON.stringify({...s,...f["on-click-action"].payload||{}},null,2))},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:f.label},p);default:return i.jsxs("div",{className:"text-sm text-gray-500 italic mb-2",children:[f.type," (preview not available)"]},p)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-100 rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-[#25D366] text-white px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:e,className:"text-white hover:bg-white/20 rounded p-1",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:t.name}),i.jsx("div",{className:"text-xs opacity-90",children:"WhatsApp Flow"})]})]}),i.jsx("div",{className:"text-xs",children:"14:30"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#ECE5DD]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow p-4 max-w-sm",children:[l.layout.children.map((f,p)=>d(f,p)),i.jsx("div",{className:"text-xs text-gray-400 text-right mt-2",children:"14:30"})]})}),i.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between",children:[i.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[i.jsx(Jf,{size:16}),"Restart"]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Screen ",n+1," of ",t.flow_json.screens.length]}),i.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[i.jsx(Rt,{size:16}),"Close"]})]})]})})}function MX(){const{flowId:e}=my(),t=Pt(),{currentFlow:n,loading:r,error:s,validationResult:o,getFlowById:l,setCurrentFlow:u,validateCurrentFlow:d,saveCurrentFlow:f}=Ya(),[p,h]=S.useState(!1),[g,y]=S.useState(null);S.useEffect(()=>{e&&b()},[e]);const b=async()=>{if(!e)return;const k=await l(e);k&&u(k)},w=async()=>{y("saving");try{await f(),y("saved"),setTimeout(()=>y(null),2e3)}catch{y("error"),setTimeout(()=>y(null),3e3)}},v=()=>{const k=d();k.valid?alert("Flow is valid! "):(alert(`Flow has ${k.errors.length} error(s). Check the console for details.`),console.log("Validation errors:",k.errors))},j=()=>{n&&yX(n)},T=async()=>{const k=document.createElement("input");k.type="file",k.accept=".json",k.onchange=async _=>{var E;const N=(E=_.target.files)==null?void 0:E[0];if(N)try{const R=await xX(N);n&&(u({...n,flow_json:R}),alert("Flow JSON imported successfully!"))}catch{alert("Failed to import Flow JSON. Please check the file format.")}},k.click()};return r?i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"text-gray-500",children:"Loading flow..."})}):s||!n?i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"text-red-500",children:s||"Flow not found"})}):i.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>t("/kabar-in/whatsapp-flows"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:i.jsx(mi,{size:20})}),i.jsx("input",{type:"text",value:n.name,onChange:k=>u({...n,name:k.target.value}),className:"text-xl font-bold text-gray-900 border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded text-sm",children:[g==="saving"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),i.jsx("span",{className:"text-gray-600",children:"Saving..."})]}),g==="saved"&&i.jsxs(i.Fragment,{children:[i.jsx(to,{size:16,className:"text-green-600"}),i.jsx("span",{className:"text-green-600",children:"Saved"})]}),g==="error"&&i.jsxs(i.Fragment,{children:[i.jsx(no,{size:16,className:"text-red-600"}),i.jsx("span",{className:"text-red-600",children:"Save failed"})]})]}),o&&!o.valid&&i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-50 rounded text-sm text-red-600",children:[i.jsx(no,{size:16}),i.jsxs("span",{children:[o.errors.length," error(s)"]})]}),i.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(t5,{size:16}),"Save"]}),i.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(to,{size:16}),"Validate"]}),i.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(zc,{size:16}),"Preview"]}),i.jsxs("div",{className:"relative group",children:[i.jsx("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Export/Import"}),i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[i.jsxs("button",{onClick:j,className:"w-full flex items-center gap-2 px-4 py-2 text-left text-gray-700 hover:bg-gray-50",children:[i.jsx(ky,{size:16}),"Export JSON"]}),i.jsxs("button",{onClick:T,className:"w-full flex items-center gap-2 px-4 py-2 text-left text-gray-700 hover:bg-gray-50",children:[i.jsx(Ny,{size:16}),"Import JSON"]})]})]})]})]}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 overflow-auto",children:i.jsx(EX,{})}),i.jsx("div",{className:"flex-1 overflow-auto",children:i.jsx(NX,{})}),i.jsx("div",{className:"w-80 bg-white border-l border-gray-200 overflow-auto",children:i.jsx(RX,{})})]}),p&&i.jsx(PX,{onClose:()=>h(!1)})]})}const bg=[{type:"TextHeading",label:"Heading",icon:ea,category:"text",defaultProps:{text:"Heading text"},editableFields:[{key:"text",label:"Text",type:"text",placeholder:"Enter heading text"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"TextSubheading",label:"Subheading",icon:ea,category:"text",defaultProps:{text:"Subheading text"},editableFields:[{key:"text",label:"Text",type:"text",placeholder:"Enter subheading"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"TextBody",label:"Body Text",icon:ea,category:"text",defaultProps:{text:"Body text content"},editableFields:[{key:"text",label:"Text",type:"text",placeholder:"Enter body text"},{key:"font-weight",label:"Font Weight",type:"select",options:[{label:"Normal",value:"normal"},{label:"Bold",value:"bold"},{label:"Italic",value:"italic"},{label:"Bold Italic",value:"bold_italic"}]},{key:"strikethrough",label:"Strikethrough",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"TextCaption",label:"Caption",icon:ea,category:"text",defaultProps:{text:"Caption text"},editableFields:[{key:"text",label:"Text",type:"text",placeholder:"Enter caption"},{key:"font-weight",label:"Font Weight",type:"select",options:[{label:"Normal",value:"normal"},{label:"Bold",value:"bold"},{label:"Italic",value:"italic"},{label:"Bold Italic",value:"bold_italic"}]},{key:"strikethrough",label:"Strikethrough",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"RichText",label:"Rich Text",icon:ea,category:"text",defaultProps:{text:["# Rich Text","This supports **markdown** formatting."]},editableFields:[{key:"text",label:"Text (markdown, one line per array item)",type:"text",placeholder:"Markdown text"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"TextInput",label:"Text Input",icon:kw,category:"input",defaultProps:{name:"text_input",label:"Text Input",required:!0,"input-type":"text"},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Input label"},{key:"input-type",label:"Input Type",type:"select",options:[{label:"Text",value:"text"},{label:"Number",value:"number"},{label:"Email",value:"email"},{label:"Password",value:"password"},{label:"Passcode",value:"passcode"},{label:"Phone",value:"phone"}]},{key:"required",label:"Required",type:"boolean"},{key:"min-chars",label:"Min Characters",type:"number"},{key:"max-chars",label:"Max Characters",type:"number"},{key:"helper-text",label:"Helper Text",type:"text",placeholder:"Helper text"},{key:"init-value",label:"Initial Value",type:"text",placeholder:"Default value"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"TextArea",label:"Text Area",icon:kw,category:"input",defaultProps:{name:"text_area",label:"Text Area",required:!1},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Input label"},{key:"required",label:"Required",type:"boolean"},{key:"max-length",label:"Max Length",type:"number"},{key:"helper-text",label:"Helper Text",type:"text",placeholder:"Helper text"},{key:"init-value",label:"Initial Value",type:"text",placeholder:"Default value"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"DatePicker",label:"Date Picker",icon:xs,category:"input",defaultProps:{name:"date_picker",label:"Select Date"},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Date label"},{key:"min-date",label:"Min Date (epoch ms)",type:"text"},{key:"max-date",label:"Max Date (epoch ms)",type:"text"},{key:"unavailable-dates",label:"Unavailable Dates",type:"text"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"},{key:"helper-text",label:"Helper Text",type:"text"}]},{type:"RadioButtonsGroup",label:"Radio Buttons",icon:aP,category:"selection",defaultProps:{name:"radio_group",label:"Select one option",required:!0,"data-source":[{id:"option_1",title:"Option 1"},{id:"option_2",title:"Option 2"},{id:"option_3",title:"Option 3"}]},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Group label"},{key:"data-source",label:"Options",type:"options"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"CheckboxGroup",label:"Checkboxes",icon:$P,category:"selection",defaultProps:{name:"checkbox_group",label:"Select options",required:!1,"data-source":[{id:"check_1",title:"Checkbox 1"},{id:"check_2",title:"Checkbox 2"},{id:"check_3",title:"Checkbox 3"}]},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Group label"},{key:"data-source",label:"Options",type:"options"},{key:"required",label:"Required",type:"boolean"},{key:"min-selected-items",label:"Min Selection",type:"number"},{key:"max-selected-items",label:"Max Selection",type:"number"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"Dropdown",label:"Dropdown",icon:vM,category:"selection",defaultProps:{name:"dropdown",label:"Select option","data-source":[{id:"opt_1",title:"Option 1"},{id:"opt_2",title:"Option 2"},{id:"opt_3",title:"Option 3"}]},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Dropdown label"},{key:"data-source",label:"Options",type:"options"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"OptIn",label:"Opt-In",icon:_M,category:"interactive",defaultProps:{name:"opt_in",label:"I agree to the terms and conditions",required:!0},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Opt-in label"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"EmbeddedLink",label:"Embedded Link",icon:OP,category:"interactive",defaultProps:{text:"Click here for more info","on-click-action":{name:"navigate",next:{type:"screen",name:""},payload:{}}},editableFields:[{key:"text",label:"Text",type:"text",placeholder:"Link text"},{key:"on-click-action",label:"Action",type:"action"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"Footer",label:"Footer (CTA Button)",icon:HA,category:"interactive",defaultProps:{label:"Continue","on-click-action":{name:"navigate",next:{type:"screen",name:""},payload:{}}},editableFields:[{key:"label",label:"Button Label",type:"text",placeholder:"Button text"},{key:"on-click-action",label:"Action",type:"action"},{key:"enabled",label:"Enabled",type:"boolean"}]},{type:"Image",label:"Image",icon:qg,category:"media",defaultProps:{src:"",width:200,height:200,"scale-type":"contain","alt-text":"Image"},editableFields:[{key:"src",label:"Source (base64)",type:"text",placeholder:"Base64 encoded image string"},{key:"width",label:"Width",type:"number"},{key:"height",label:"Height",type:"number"},{key:"scale-type",label:"Scale Type",type:"select",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"}]},{key:"aspect-ratio",label:"Aspect Ratio",type:"number"},{key:"alt-text",label:"Alt Text",type:"text",placeholder:"Image description"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"ImageCarousel",label:"Image Carousel",icon:Xj,category:"media",defaultProps:{images:[{src:"","alt-text":"Image 1"},{src:"","alt-text":"Image 2"}],"aspect-ratio":"4:3","scale-type":"contain"},editableFields:[{key:"aspect-ratio",label:"Aspect Ratio",type:"select",options:[{label:"4:3",value:"4:3"},{label:"16:9",value:"16:9"}]},{key:"scale-type",label:"Scale Type",type:"select",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"}]},{key:"visible",label:"Visible",type:"boolean"}]},{type:"CalendarPicker",label:"Calendar Picker",icon:Xd,category:"input",defaultProps:{name:"calendar",label:"Select date",mode:"single",required:!1},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Calendar label"},{key:"title",label:"Title",type:"text",placeholder:"Calendar title"},{key:"description",label:"Description",type:"text",placeholder:"Calendar description"},{key:"mode",label:"Mode",type:"select",options:[{label:"Single Date",value:"single"},{label:"Date Range",value:"range"}]},{key:"min-date",label:"Min Date (YYYY-MM-DD)",type:"text",placeholder:"2024-01-01"},{key:"max-date",label:"Max Date (YYYY-MM-DD)",type:"text",placeholder:"2025-12-31"},{key:"helper-text",label:"Helper Text",type:"text",placeholder:"Helper text"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"},{key:"enabled",label:"Enabled",type:"boolean"}]},{type:"ChipsSelector",label:"Chips Selector",icon:n5,category:"selection",defaultProps:{name:"chips",label:"Select options","data-source":[{id:"chip_1",title:"Option 1"},{id:"chip_2",title:"Option 2"},{id:"chip_3",title:"Option 3"}]},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"Selector label"},{key:"description",label:"Description",type:"text",placeholder:"Description text"},{key:"data-source",label:"Options",type:"options"},{key:"min-selected-items",label:"Min Selection",type:"number"},{key:"max-selected-items",label:"Max Selection",type:"number"},{key:"required",label:"Required",type:"boolean"},{key:"visible",label:"Visible",type:"boolean"}]},{type:"NavigationList",label:"Navigation List",icon:BP,category:"interactive",defaultProps:{name:"nav_list","list-items":[{id:"item_1","main-content":{title:"Item 1",description:"Description for item 1"}},{id:"item_2","main-content":{title:"Item 2",description:"Description for item 2"}},{id:"item_3","main-content":{title:"Item 3",description:"Description for item 3"}}],"on-click-action":{name:"navigate",next:{type:"screen",name:""},payload:{}}},editableFields:[{key:"name",label:"Name",type:"text",placeholder:"field_name"},{key:"label",label:"Label",type:"text",placeholder:"List label"},{key:"description",label:"Description",type:"text",placeholder:"List description"},{key:"list-items",label:"List Items",type:"navlist-items"},{key:"media-size",label:"Media Size",type:"select",options:[{label:"Regular",value:"regular"},{label:"Large",value:"large"}]},{key:"on-click-action",label:"Action",type:"action"},{key:"visible",label:"Visible",type:"boolean"}]}],DX={text:"Text",input:"Input",selection:"Selection",interactive:"Interactive",media:"Media"},Qs={text:"#8b5cf6",input:"#3b82f6",selection:"#10b981",interactive:"#f59e0b",media:"#ec4899"};function us(){return Math.random().toString(36).substring(2,8)}function FX(e,t){var r;const n={type:e.type};for(const[s,o]of Object.entries(e))if(s!=="_id"&&!(o==null||o==="")&&!(typeof o=="boolean"&&s==="visible"&&o===!0)&&!(typeof o=="boolean"&&s==="required"&&o===!1)&&!(typeof o=="boolean"&&s==="strikethrough"&&o===!1)&&!(typeof o=="boolean"&&s==="enabled"&&o===!0)){if((s==="on-click-action"||s==="on-select-action")&&(o==null?void 0:o.name)==="navigate"&&(!((r=o.next)!=null&&r.name)||!t.has(o.next.name))){n[s]={name:"complete",payload:o.payload||{}};continue}n[s]=o}return n}function OX(e){const t=[];return e.forEach(n=>{var s;const r=n["on-click-action"]||n["on-select-action"];(r==null?void 0:r.name)==="navigate"&&((s=r==null?void 0:r.next)!=null&&s.name)&&t.push(r.next.name)}),[...new Set(t)]}function zX(e,t,n){const r={version:t},s=new Set(e.map(l=>l.id));n&&(r.data_api_version="3.0");const o={};return e.forEach(l=>{const u=OX(l.layout.children).filter(d=>s.has(d));o[l.id]=u}),r.routing_model=o,r.screens=e.map(l=>{const u={id:l.id};return l.title&&(u.title=l.title),l.terminal&&(u.terminal=!0),l.terminal&&l.success!==!1&&(u.success=!0),l.data&&Object.keys(l.data).length>0&&(u.data=l.data),u.layout={type:"SingleColumnLayout",children:l.layout.children.map(d=>FX(d,s))},u}),r}function $X({screen:e}){return e?i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{style:{background:"#f0f2f5",padding:"12px 16px",borderBottom:"1px solid #e0e0e0",textAlign:"center",fontWeight:600,fontSize:"14px",color:"#1f2937"},children:e.title||e.id}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#ffffff"},children:e.layout.children.map((t,n)=>i.jsx(VX,{component:t},n))}),i.jsxs("div",{style:{padding:"8px 16px",borderTop:"1px solid #e0e0e0",background:"#f0f2f5",textAlign:"center",fontSize:"11px",color:"#8696a0"},children:["Dikelola oleh bisnis."," ",i.jsx("span",{style:{color:"#00a884"},children:"Pelajari selengkapnya"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:i.jsx("p",{children:"Select a screen to preview"})})}function LX(e){const t=r=>{const s=[];let o=r,l=0;for(;o.length>0;){const u=o.match(/\*\*(.+?)\*\*/),d=o.match(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)")),f=o.match(/~~(.+?)~~/),p=o.match(/\[(.+?)\]\((.+?)\)/),h=[u?{type:"bold",match:u,idx:u.index}:null,d?{type:"italic",match:d,idx:d.index}:null,f?{type:"strike",match:f,idx:f.index}:null,p?{type:"link",match:p,idx:p.index}:null].filter(Boolean).sort((y,b)=>y.idx-b.idx);if(h.length===0){s.push(o);break}const g=h[0];if(g.idx>0&&s.push(o.substring(0,g.idx)),l++,g.type==="bold")s.push(i.jsx("strong",{children:g.match[1]},`b${l}`)),o=o.substring(g.idx+g.match[0].length);else if(g.type==="italic")s.push(i.jsx("em",{children:g.match[1]},`i${l}`)),o=o.substring(g.idx+g.match[0].length);else if(g.type==="strike")s.push(i.jsx("s",{children:g.match[1]},`s${l}`)),o=o.substring(g.idx+g.match[0].length);else if(g.type==="link")s.push(i.jsx("span",{style:{color:"#00a884",textDecoration:"underline"},children:g.match[1]},`l${l}`)),o=o.substring(g.idx+g.match[0].length);else{s.push(o);break}}return s};if(e.startsWith("### "))return i.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"#111827",marginBottom:"4px"},children:t(e.slice(4))});if(e.startsWith("## "))return i.jsx("div",{style:{fontWeight:700,fontSize:"16px",color:"#111827",marginBottom:"4px"},children:t(e.slice(3))});if(e.startsWith("# "))return i.jsx("div",{style:{fontWeight:700,fontSize:"18px",color:"#111827",marginBottom:"6px"},children:t(e.slice(2))});if(e.startsWith("- ")||e.startsWith("* "))return i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"2px"},children:[i.jsx("span",{style:{color:"#6b7280"},children:""}),i.jsx("span",{children:t(e.slice(2))})]});const n=e.match(/^(\d+)\.\s/);return n?i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"2px"},children:[i.jsxs("span",{style:{color:"#6b7280",minWidth:"16px"},children:[n[1],"."]}),i.jsx("span",{children:t(e.slice(n[0].length))})]}):e.startsWith("> ")?i.jsx("div",{style:{borderLeft:"3px solid #d1d5db",paddingLeft:"10px",color:"#6b7280",fontStyle:"italic",marginBottom:"4px"},children:t(e.slice(2))}):e==="---"||e==="***"||e==="___"?i.jsx("hr",{style:{border:"none",borderTop:"1px solid #e5e7eb",margin:"8px 0"}}):e.trim()===""?i.jsx("div",{style:{height:"8px"}}):i.jsx("div",{style:{marginBottom:"2px"},children:t(e)})}function BX({text:e}){const t=Array.isArray(e)?e:(e||"Rich text content").split(`
`);return i.jsx("div",{style:{fontSize:"14px",color:"#374151",lineHeight:"1.5"},children:t.map((n,r)=>i.jsx("div",{children:LX(n)},r))})}function WX(e){return e?e.startsWith("data:")?e:e.startsWith("/9j/")?`data:image/jpeg;base64,${e}`:e.startsWith("iVBOR")?`data:image/png;base64,${e}`:e.startsWith("R0lGOD")?`data:image/gif;base64,${e}`:e.startsWith("UklGR")?`data:image/webp;base64,${e}`:`data:image/png;base64,${e}`:""}function VX({component:e}){const t={marginBottom:"12px"};switch(e.type){case"TextHeading":return i.jsx("div",{style:{...t,fontWeight:700,fontSize:"18px",color:"#111827"},children:e.text||"Heading"});case"TextSubheading":return i.jsx("div",{style:{...t,fontWeight:600,fontSize:"15px",color:"#1f2937"},children:e.text||"Subheading"});case"TextBody":return i.jsx("div",{style:{...t,fontSize:"14px",color:"#374151",fontWeight:e["font-weight"]==="bold"?700:400,fontStyle:e["font-weight"]==="italic"||e["font-weight"]==="bold_italic"?"italic":"normal",textDecoration:e.strikethrough?"line-through":"none"},children:e.text||"Body text"});case"TextCaption":return i.jsx("div",{style:{...t,fontSize:"12px",color:"#6b7280"},children:e.text||"Caption"});case"RichText":return i.jsx("div",{style:t,children:i.jsx(BX,{text:e.text})});case"TextInput":return i.jsxs("div",{style:t,children:[i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px 6px",position:"relative",background:"#fff"},children:[i.jsxs("span",{style:{position:"absolute",top:"4px",left:"12px",fontSize:"11px",color:"#6b7280"},children:[e.label||"Text Input"," ",e.required&&"*"]}),i.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"4px"},children:e["init-value"]||e.label||"Enter text"})]}),e["helper-text"]&&i.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px",paddingLeft:"4px"},children:e["helper-text"]})]});case"TextArea":return i.jsx("div",{style:t,children:i.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px 6px",minHeight:"80px",position:"relative",background:"#fff"},children:i.jsx("span",{style:{position:"absolute",top:"4px",left:"12px",fontSize:"11px",color:"#6b7280"},children:e.label||"Text Area"})})});case"DatePicker":return i.jsx("div",{style:t,children:i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},children:[i.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:e.label||"Select Date"}),i.jsx(xs,{size:16,color:"#6b7280"})]})});case"RadioButtonsGroup":return i.jsxs("div",{style:t,children:[i.jsx("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:e.label||"Select option"}),(e["data-source"]||[]).map((n,r)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",borderBottom:"1px solid #f3f4f6"},children:[i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",border:"2px solid #d1d5db",flexShrink:0}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"14px",color:"#111827",fontWeight:500},children:n.title}),n.description&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:n.description})]})]},r))]});case"CheckboxGroup":return i.jsxs("div",{style:t,children:[i.jsx("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px"},children:e.label||"Select options"}),(e["data-source"]||[]).map((n,r)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",borderBottom:"1px solid #f3f4f6"},children:[i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:"2px solid #d1d5db",flexShrink:0}}),i.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:n.title})]},r))]});case"Dropdown":return i.jsx("div",{style:t,children:i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},children:[i.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:e.label||"Select"}),i.jsx(fo,{size:16,color:"#6b7280"})]})});case"OptIn":return i.jsxs("div",{style:{...t,display:"flex",gap:"10px",alignItems:"flex-start"},children:[i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:"2px solid #d1d5db",marginTop:"2px",flexShrink:0}}),i.jsxs("div",{style:{fontSize:"14px",color:"#374151"},children:[e.label||"Opt-in label"," ",e["on-click-action"]&&i.jsx("span",{style:{color:"#00a884"},children:"Pelajari selengkapnya"})]})]});case"EmbeddedLink":return i.jsx("div",{style:t,children:i.jsx("span",{style:{fontSize:"14px",color:"#00a884",cursor:"pointer"},children:e.text||"Embedded link"})});case"Footer":return i.jsx("div",{style:{marginTop:"auto",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:i.jsx("div",{style:{width:"100%",padding:"14px",background:"#00a884",color:"#fff",borderRadius:"999px",textAlign:"center",fontWeight:600,fontSize:"15px"},children:e.label||"Continue"})});case"Image":{const n=WX(e.src||"");return i.jsx("div",{style:{...t,display:"flex",justifyContent:"center"},children:n?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:n,alt:e["alt-text"]||"Image",style:{maxWidth:e.width||200,maxHeight:e.height||200,objectFit:e["scale-type"]==="cover"?"cover":"contain",borderRadius:"8px"},onError:r=>{r.target.style.display="none";const s=r.target.nextElementSibling;s&&(s.style.display="flex")}}),i.jsx("div",{style:{display:"none",width:e.width||200,height:e.height||200,background:"#fef2f2",borderRadius:"8px",alignItems:"center",justifyContent:"center",color:"#ef4444",border:"2px dashed #fca5a5",textAlign:"center",padding:"8px"},children:i.jsxs("div",{children:[i.jsx(qg,{size:24,style:{marginBottom:"4px"}}),i.jsx("div",{style:{fontSize:"11px"},children:"Invalid base64"})]})})]}):i.jsx("div",{style:{width:e.width||200,height:e.height||200,background:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",border:"2px dashed #d1d5db"},children:i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx(qg,{size:32,style:{marginBottom:"4px"}}),i.jsx("div",{style:{fontSize:"11px"},children:"Paste base64 di Properties"})]})})})}case"ImageCarousel":return i.jsx("div",{style:t,children:i.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",padding:"4px 0"},children:(e.images||[]).map((n,r)=>i.jsx("div",{style:{flexShrink:0,width:"200px",height:e["aspect-ratio"]==="16:9"?"112px":"150px",background:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",border:"1px solid #e5e7eb"},children:n.src?i.jsx("img",{src:n.src.startsWith("data:")?n.src:`data:image/png;base64,${n.src}`,alt:n["alt-text"]||`Slide ${r+1}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}):i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx(Xj,{size:24}),i.jsxs("div",{style:{fontSize:"10px",marginTop:"2px"},children:["Slide ",r+1]})]})},r))})});case"CalendarPicker":return i.jsxs("div",{style:t,children:[e.title&&i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827",marginBottom:"4px"},children:e.title}),e.description&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:e.description}),e.mode==="range"?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Start date"}),i.jsx("div",{style:{fontSize:"14px",color:"#9ca3af"},children:"Select from date"})]}),i.jsx(Xd,{size:16,color:"#6b7280"})]}),i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:"End date"}),i.jsx("div",{style:{fontSize:"14px",color:"#9ca3af"},children:"Select to date"})]}),i.jsx(Xd,{size:16,color:"#6b7280"})]})]}):i.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"14px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},children:[i.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:e.label||"Select date"}),i.jsx(Xd,{size:16,color:"#6b7280"})]}),e["helper-text"]&&i.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px",paddingLeft:"4px"},children:e["helper-text"]})]});case"ChipsSelector":return i.jsxs("div",{style:t,children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827",marginBottom:"4px"},children:e.label||"Select options"}),e.description&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:e.description}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:(e["data-source"]||[]).map((n,r)=>i.jsx("div",{style:{padding:"8px 16px",background:"#f3f4f6",borderRadius:"999px",fontSize:"13px",fontWeight:500,color:"#374151",border:"1px solid #e5e7eb"},children:n.title},r))})]});case"NavigationList":return i.jsxs("div",{style:t,children:[e.label&&i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827",marginBottom:"4px"},children:e.label}),e.description&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:e.description}),i.jsx("div",{style:{display:"flex",flexDirection:"column"},children:(e["list-items"]||[]).map((n,r)=>{var s,o,l;return i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 0",borderBottom:r<(e["list-items"]||[]).length-1?"1px solid #f3f4f6":"none"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827"},children:((s=n["main-content"])==null?void 0:s.title)||`Item ${r+1}`}),((o=n["main-content"])==null?void 0:o.description)&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:n["main-content"].description}),((l=n["main-content"])==null?void 0:l.metadata)&&i.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"2px"},children:n["main-content"].metadata})]}),n.end&&i.jsxs("div",{style:{textAlign:"right",marginLeft:"12px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827"},children:n.end.title}),n.end.description&&i.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:n.end.description})]}),i.jsx(fa,{size:16,color:"#d1d5db",style:{marginLeft:"8px",flexShrink:0}})]},r)})})]});default:return i.jsxs("div",{style:{...t,padding:"8px",background:"#f3f4f6",borderRadius:"6px",fontSize:"12px",color:"#6b7280"},children:["[",e.type,"]"]})}}function UX({options:e,onChange:t}){const n=()=>{const o=e.length+1;t([...e,{id:`option_${o}`,title:`Option ${o}`}])},r=o=>{t(e.filter((l,u)=>u!==o))},s=(o,l,u)=>{const d=[...e];d[o]={...d[o],[l]:u},t(d)};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.map((o,l)=>i.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[i.jsx("input",{value:o.id,onChange:u=>s(l,"id",u.target.value),placeholder:"ID",style:{flex:1,padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",outline:"none",background:"#fff"}}),i.jsx("input",{value:o.title,onChange:u=>s(l,"title",u.target.value),placeholder:"Title",style:{flex:2,padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",outline:"none",background:"#fff"}}),i.jsx("button",{onClick:()=>r(l),style:{padding:"4px",background:"none",border:"none",cursor:"pointer",color:"#ef4444"},children:i.jsx(Rt,{size:14})})]},l)),i.jsx("button",{onClick:n,style:{padding:"6px",background:"rgba(16, 185, 129, 0.1)",border:"1px dashed #10b981",borderRadius:"6px",color:"#10b981",fontSize:"12px",cursor:"pointer",fontWeight:500},children:"+ Add Option"})]})}function HX({items:e,onChange:t}){const n=()=>{const l=e.length+1;t([...e,{id:`item_${l}`,"main-content":{title:`Item ${l}`,description:""}}])},r=l=>{t(e.filter((u,d)=>d!==l))},s=(l,u,d,f)=>{const p=[...e];p[l]={...p[l],"main-content":{...p[l]["main-content"],title:u,description:d||void 0,metadata:f||void 0}},t(p)},o={width:"100%",padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",outline:"none",background:"#fff"};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.map((l,u)=>{var d,f,p;return i.jsxs("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:"#6b7280"},children:["Item ",u+1]}),i.jsx("button",{onClick:()=>r(u),style:{padding:"2px",background:"none",border:"none",cursor:"pointer",color:"#ef4444"},children:i.jsx(Rt,{size:12})})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsx("input",{value:((d=l["main-content"])==null?void 0:d.title)||"",onChange:h=>{var g,y;return s(u,h.target.value,((g=l["main-content"])==null?void 0:g.description)||"",((y=l["main-content"])==null?void 0:y.metadata)||"")},placeholder:"Title",style:o}),i.jsx("input",{value:((f=l["main-content"])==null?void 0:f.description)||"",onChange:h=>{var g,y;return s(u,((g=l["main-content"])==null?void 0:g.title)||"",h.target.value,((y=l["main-content"])==null?void 0:y.metadata)||"")},placeholder:"Description",style:o}),i.jsx("input",{value:((p=l["main-content"])==null?void 0:p.metadata)||"",onChange:h=>{var g,y;return s(u,((g=l["main-content"])==null?void 0:g.title)||"",((y=l["main-content"])==null?void 0:y.description)||"",h.target.value)},placeholder:"Metadata (e.g. price)",style:o})]})]},u)}),i.jsx("button",{onClick:n,style:{padding:"6px",background:"rgba(16, 185, 129, 0.1)",border:"1px dashed #10b981",borderRadius:"6px",color:"#10b981",fontSize:"12px",cursor:"pointer",fontWeight:500},children:"+ Add Item"})]})}const qX={navigate:"Pindah ke screen lain + kirim data form ke screen tujuan",complete:"Selesaikan flow + kirim SEMUA data ke bisnis (WhatsApp webhook)",data_exchange:"Panggil server bisnis untuk ambil data dinamis (misal: cek stok)",update_data:"Update data di screen ini tanpa panggil server",open_url:"Buka URL di browser"};function GX({action:e,onChange:t,screenIds:n,formFields:r}){var w;const s=(e==null?void 0:e.name)||"navigate",o=((w=e==null?void 0:e.next)==null?void 0:w.name)||"",l=(e==null?void 0:e.payload)||{},[u,d]=S.useState(Object.keys(l).length>0),f=()=>{const v={};r.forEach(j=>{v[j.name]=`\${form.${j.name}}`}),t({...e,payload:v}),d(!0)},p=(v,j)=>{const T=Object.entries(l),k={};T.forEach(([_,N])=>{k[_===v?j:_]=N}),t({...e,payload:k})},h=(v,j)=>{t({...e,payload:{...l,[v]:j}})},g=()=>{const v=`field_${Object.keys(l).length+1}`;t({...e,payload:{...l,[v]:""}}),d(!0)},y=v=>{const j={...l};delete j[v],t({...e,payload:j})},b={width:"100%",padding:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none",background:"#fff"};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsxs("select",{value:s,onChange:v=>{const j=v.target.value;t(j==="complete"?{name:"complete",payload:l}:j==="data_exchange"?{name:"data_exchange",payload:l}:j==="update_data"?{name:"update_data",payload:l}:j==="open_url"?{name:"open_url",url:"https://"}:{name:"navigate",next:{type:"screen",name:""},payload:l})},style:b,children:[i.jsx("option",{value:"navigate",children:"Navigate (pindah screen)"}),i.jsx("option",{value:"complete",children:"Complete (selesai + kirim data)"}),i.jsx("option",{value:"data_exchange",children:"Data Exchange (panggil server)"}),i.jsx("option",{value:"update_data",children:"Update Data (update screen)"}),i.jsx("option",{value:"open_url",children:"Open URL"})]}),i.jsx("div",{style:{fontSize:"11px",color:"#6b7280",background:"#f9fafb",padding:"6px 8px",borderRadius:"6px",lineHeight:"1.4"},children:qX[s]}),s==="navigate"&&i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"11px",fontWeight:600,color:"#6b7280",marginBottom:"4px",display:"block"},children:"Target Screen"}),i.jsxs("select",{value:o,onChange:v=>t({...e,next:{type:"screen",name:v.target.value}}),style:{...b,border:`1px solid ${!o||!n.includes(o)?"#fca5a5":"#e5e7eb"}`,background:o?"#fff":"#fef2f2"},children:[i.jsx("option",{value:"",children:"-- Pilih screen tujuan --"}),n.map(v=>i.jsx("option",{value:v,children:v},v))]}),!o&&i.jsxs("div",{style:{fontSize:"11px",color:"#dc2626",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(no,{size:11})," Wajib pilih screen tujuan"]}),o&&!n.includes(o)&&i.jsxs("div",{style:{fontSize:"11px",color:"#dc2626",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(no,{size:11}),' Screen "',o,'" tidak ditemukan']})]}),s==="open_url"&&i.jsx("input",{value:(e==null?void 0:e.url)||"",onChange:v=>t({...e,url:v.target.value}),placeholder:"https://example.com",style:b}),s!=="open_url"&&i.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",fontWeight:600,color:"#6b7280"},children:"Payload (data yang dikirim)"}),i.jsx("button",{onClick:()=>d(!u),style:{fontSize:"11px",color:"#8b5cf6",background:"none",border:"none",cursor:"pointer",fontWeight:500},children:u?"Tutup":`Edit (${Object.keys(l).length})`})]}),u&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[r.length>0&&i.jsxs("button",{onClick:f,style:{padding:"6px 10px",background:"rgba(37, 211, 102, 0.1)",border:"1px solid rgba(37, 211, 102, 0.3)",borderRadius:"6px",fontSize:"11px",fontWeight:600,color:"#25D366",cursor:"pointer",textAlign:"left"},children:["Auto-fill dari ",r.length," field di screen ini"]}),Object.entries(l).map(([v,j],T)=>i.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[i.jsx("input",{value:v,onChange:k=>p(v,k.target.value),placeholder:"key",style:{flex:1,padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",outline:"none",background:"#fff"}}),i.jsx("input",{value:j,onChange:k=>h(v,k.target.value),placeholder:"${form.field_name}",style:{flex:2,padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",outline:"none",background:"#f0fdf4"}}),i.jsx("button",{onClick:()=>y(v),style:{padding:"2px",background:"none",border:"none",cursor:"pointer",color:"#ef4444"},children:i.jsx(Rt,{size:12})})]},T)),i.jsx("button",{onClick:g,style:{padding:"4px 8px",background:"rgba(139, 92, 246, 0.05)",border:"1px dashed rgba(139, 92, 246, 0.3)",borderRadius:"6px",fontSize:"11px",color:"#8b5cf6",cursor:"pointer",fontWeight:500},children:"+ Tambah payload entry"}),Object.keys(l).length===0&&i.jsxs("div",{style:{fontSize:"10px",color:"#9ca3af",background:"#fefce8",padding:"6px 8px",borderRadius:"6px",lineHeight:"1.4"},children:['Payload kosong = tidak ada data yang dikirim! Klik "Auto-fill" atau tambah manual dengan format: ',i.jsx("code",{style:{background:"#f3f4f6",padding:"1px 4px",borderRadius:"3px"},children:"${form.nama_field}"})]})]})]})]})}function KX({component:e,template:t,screenIds:n,formFields:r,onChange:s}){if(!t)return null;const o=(l,u)=>{s({...e,[l]:u})};return i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:t.editableFields.map(l=>{var u;return l.type==="text"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsx("input",{value:e[l.key]||"",onChange:d=>o(l.key,d.target.value),placeholder:l.placeholder,style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none",background:"#fff"}})]},l.key):l.type==="number"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsx("input",{type:"number",value:e[l.key]??"",onChange:d=>o(l.key,d.target.value?Number(d.target.value):void 0),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none",background:"#fff"}})]},l.key):l.type==="boolean"?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("input",{type:"checkbox",checked:e[l.key]??(l.key==="visible"?!0:l.key==="enabled"),onChange:d=>o(l.key,d.target.checked),style:{width:"16px",height:"16px",accentColor:"#8b5cf6"}}),i.jsx("label",{style:{fontSize:"13px",color:"#374151"},children:l.label})]},l.key):l.type==="select"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsxs("select",{value:e[l.key]||"",onChange:d=>o(l.key,d.target.value||void 0),style:{width:"100%",padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",outline:"none",background:"#fff"},children:[i.jsx("option",{value:"",children:"-- None --"}),(u=l.options)==null?void 0:u.map(d=>i.jsx("option",{value:d.value,children:d.label},d.value))]})]},l.key):l.type==="options"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsx(UX,{options:e[l.key]||[],onChange:d=>o(l.key,d)})]},l.key):l.type==="action"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsx(GX,{action:e[l.key],onChange:d=>o(l.key,d),screenIds:n,formFields:r})]},l.key):l.type==="navlist-items"?i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:"#6b7280",marginBottom:"4px",display:"block"},children:l.label}),i.jsx(HX,{items:e[l.key]||[],onChange:d=>o(l.key,d)})]},l.key):null})})}function YX(){const[e,t]=S.useState("7.3"),[n,r]=S.useState(!1),[s,o]=S.useState([{_key:us(),id:"WELCOME_SCREEN",title:"Welcome",terminal:!0,success:!0,layout:{type:"SingleColumnLayout",children:[{type:"TextHeading",text:"Welcome!",_id:us()},{type:"TextBody",text:"Thank you for opening this flow.",_id:us()},{type:"Footer",label:"Get started","on-click-action":{name:"complete",payload:{}},_id:us()}]}}]),[l,u]=S.useState(0),[d,f]=S.useState(null),[p,h]=S.useState(!1),[g,y]=S.useState(!1),[b,w]=S.useState(!1),[v,j]=S.useState(""),[T,k]=S.useState(""),[_,N]=S.useState("preview"),[E,R]=S.useState([]),[A,P]=S.useState({text:!0,input:!0,selection:!0,interactive:!0,media:!0}),z=s[l]||null,L=s.map(q=>q.id),B=S.useMemo(()=>zX(s.map(({_key:q,...ee})=>ee),e,n),[s,e,n]),K=S.useMemo(()=>JSON.stringify(B,null,2),[B]),V=S.useCallback(()=>{const q=s.length+1,ee=`SCREEN_${q}`;o(ie=>{const le=ie.map((ue,Z)=>{const de=ue.terminal,he={...ue,terminal:!1,success:void 0};return de&&Z===ie.length-1&&(he.layout={...ue.layout,children:ue.layout.children.map(pe=>pe.type==="Footer"?{...pe,"on-click-action":{name:"navigate",next:{type:"screen",name:ee},payload:{}}}:pe)}),he});return le.push({_key:us(),id:ee,title:`Screen ${q}`,terminal:!0,success:!0,layout:{type:"SingleColumnLayout",children:[{type:"Footer",label:"Continue","on-click-action":{name:"complete",payload:{}},_id:us()}]}}),le}),u(s.length),f(null)},[s.length]),J=S.useCallback(q=>{if(s.length<=1)return;const ee=s[q].id;o(ie=>{const le=ie.filter((ue,Z)=>Z!==q);return le.length>0&&!le.some(ue=>ue.terminal)&&(le[le.length-1]={...le[le.length-1],terminal:!0,success:!0}),le.map(ue=>({...ue,layout:{...ue.layout,children:ue.layout.children.map(Z=>{var de,he;if(((he=(de=Z["on-click-action"])==null?void 0:de.next)==null?void 0:he.name)===ee){const pe=le.findIndex(Be=>Be.id===ue.id),_e=le[pe+1];return _e?{...Z,"on-click-action":{...Z["on-click-action"],next:{type:"screen",name:_e.id}}}:{...Z,"on-click-action":{name:"complete",payload:{}}}}return Z})}}))}),l>=s.length-1&&u(Math.max(0,s.length-2)),f(null)},[s,l]),$=S.useCallback((q,ee)=>{o(ie=>{const le=ie[q].id,ue=ee.id,Z=ie.map((de,he)=>he===q?{...de,...ee}:de);return ue&&ue!==le?Z.map(de=>({...de,layout:{...de.layout,children:de.layout.children.map(he=>{var pe,_e;return((_e=(pe=he["on-click-action"])==null?void 0:pe.next)==null?void 0:_e.name)===le?{...he,"on-click-action":{...he["on-click-action"],next:{...he["on-click-action"].next,name:ue}}}:he})}})):Z})},[]),H=S.useCallback(q=>{o(ee=>{const ie=ee[l];if(!ie)return ee;if(q.type==="Footer"&&ie.layout.children.some(Z=>Z.type==="Footer"))return R(["Max 1 Footer per screen. Hapus Footer yang ada dulu."]),ee;if(ie.layout.children.some(Z=>Z.type==="RichText")&&q.type!=="Footer"&&q.type!=="RichText")return R(["RichText hanya boleh dipasangkan dengan Footer. Pindahkan RichText ke screen terpisah, atau hapus RichText dulu."]),ee;if(q.type==="RichText"&&ie.layout.children.filter(de=>de.type!=="Footer").length>0)return R(["RichText hanya boleh sendirian (+ Footer) di screen. Hapus komponen lain dulu, atau tambah RichText di screen baru."]),ee;const ue={...JSON.parse(JSON.stringify(q.defaultProps)),type:q.type,_id:us()};if(q.type==="Footer"){const de=ee[l+1];de&&(ue["on-click-action"]={name:"navigate",next:{type:"screen",name:de.id},payload:{}})}return ee.map((Z,de)=>{if(de!==l)return Z;const he=[...Z.layout.children],pe=he.findIndex(_e=>_e.type==="Footer");return pe>=0&&q.type!=="Footer"?he.splice(pe,0,ue):he.push(ue),{...Z,layout:{...Z.layout,children:he}}})}),h(!1)},[l]),M=S.useCallback(q=>{o(ee=>ee.map((ie,le)=>le!==l?ie:{...ie,layout:{...ie.layout,children:ie.layout.children.filter((ue,Z)=>Z!==q)}})),f(null)},[l]),U=S.useCallback((q,ee)=>{o(ie=>ie.map((le,ue)=>ue!==l?le:{...le,layout:{...le.layout,children:le.layout.children.map((Z,de)=>de===q?ee:Z)}}))},[l]),F=S.useCallback((q,ee)=>{o(ie=>ie.map((le,ue)=>{if(ue!==l)return le;const Z=[...le.layout.children],[de]=Z.splice(q,1);return Z.splice(ee,0,de),{...le,layout:{...le.layout,children:Z}}})),f(ee)},[l]),D=S.useCallback(()=>{navigator.clipboard.writeText(K),y(!0),setTimeout(()=>y(!1),2e3)},[K]),W=S.useCallback(()=>{const q=new Blob([K],{type:"application/json"}),ee=URL.createObjectURL(q),ie=document.createElement("a");ie.href=ee,ie.download="whatsapp-flow.json",ie.click(),URL.revokeObjectURL(ee)},[K]),X=S.useCallback(()=>{try{const q=JSON.parse(v);if(!q.version||!q.screens){k("Invalid Flow JSON: missing version or screens");return}t(q.version),r(!!q.routing_model),o(q.screens.map(ee=>{var ie;return{...ee,_key:us(),layout:{...ee.layout,children:(((ie=ee.layout)==null?void 0:ie.children)||[]).map(le=>({...le,_id:us()}))}}})),u(0),f(null),w(!1),j(""),k("")}catch{k("Invalid JSON format")}},[v]),ne=S.useCallback(()=>{const q=[];s.length===0&&q.push("Flow must have at least one screen"),s.some(Z=>Z.terminal)||q.push("Flow must have at least one terminal screen");const ie=s.map(Z=>Z.id),le=new Set(ie);le.size!==ie.length&&q.push("Screen IDs must be unique");const ue=new Set;s.length>0&&ue.add(s[0].id),s.forEach(Z=>{Z.id||q.push("Screen is missing an ID"),Z.id==="SUCCESS"&&q.push('"SUCCESS" is a reserved screen ID'),Z.layout.children.length===0&&q.push(`Screen "${Z.id}" has no components`);const de=Z.layout.children.filter(je=>je.type==="Footer").length;if(de>1&&q.push(`Screen "${Z.id}" has ${de} Footers (max 1 allowed)`),de===0&&q.push(`Screen "${Z.id}" must have a Footer component`),Z.layout.children.some(je=>je.type==="RichText")){const je=Z.layout.children.filter(He=>He.type!=="RichText"&&He.type!=="Footer");je.length>0&&q.push(`Screen "${Z.id}": RichText can only be paired with Footer. Remove ${je.map(He=>He.type).join(", ")} or move RichText to its own screen`)}Z.layout.children.some(je=>je.type==="NavigationList")&&Z.terminal&&q.push(`Screen "${Z.id}": NavigationList cannot be used on a terminal screen`);const _e=Z.layout.children.filter(je=>je.type==="Image").length;_e>3&&q.push(`Screen "${Z.id}" has ${_e} Images (max 3 allowed)`),Z.layout.children.length>50&&q.push(`Screen "${Z.id}" exceeds 50 component limit`);const Be=new Set;Z.layout.children.forEach(je=>{var dt;je.name&&(Be.has(je.name)&&q.push(`Duplicate component name "${je.name}" in screen "${Z.id}"`),Be.add(je.name));const He=je["on-click-action"]||je["on-select-action"];if((He==null?void 0:He.name)==="navigate"){const We=(dt=He.next)==null?void 0:dt.name;We?le.has(We)?ue.add(We):q.push(`Screen "${Z.id}"  ${je.type}: Navigate to unknown screen "${We}"`):q.push(`Screen "${Z.id}"  ${je.type}: Navigate action has no target screen`)}if((He==null?void 0:He.name)==="complete"&&je.type==="Footer"){const We=He.payload;if(!We||Object.keys(We).length===0){const St=Z.layout.children.filter(Tn=>Tn.name&&Tn.type!=="Footer"&&Tn.type!=="NavigationList");St.length>0&&q.push(`Screen "${Z.id}"  Footer: Complete action has empty payload but screen has ${St.length} input field(s). Data won't be collected! Edit Footer  Action  click "Auto-fill"`)}}})}),s.length>1&&s.forEach(Z=>{ue.has(Z.id)||q.push(`Screen "${Z.id}" is not reachable from any other screen via navigate action`)}),R(q)},[s]),G=z&&d!==null?z.layout.children[d]:null,Q=G?bg.find(q=>q.type===G.type):void 0,se=S.useMemo(()=>z?z.layout.children.filter(q=>q.name&&q.type!=="Footer"&&q.type!=="NavigationList").map(q=>({name:q.name,type:q.type})):[],[z]);return i.jsxs("div",{style:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column",background:"#f8fafc",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",background:"#fff",borderBottom:"1px solid #e5e7eb",gap:"12px",flexShrink:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(jy,{size:22,style:{color:"#25D366"}}),i.jsx("h1",{style:{fontSize:"16px",fontWeight:700,color:"#111827"},children:"WA Flow JSON Builder"})]}),i.jsx("div",{style:{height:"24px",width:"1px",background:"#e5e7eb"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"12px",color:"#6b7280",fontWeight:500},children:"Version:"}),i.jsx("select",{value:e,onChange:q=>t(q.target.value),style:{padding:"4px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",background:"#fff",outline:"none"},children:["2.1","3.0","3.1","4.0","5.0","5.1","6.0","6.1","6.2","6.3","7.0","7.1","7.2","7.3"].map(q=>i.jsx("option",{value:q,children:q},q))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("input",{type:"checkbox",checked:n,onChange:q=>r(q.target.checked),style:{accentColor:"#25D366"}}),i.jsx("label",{style:{fontSize:"12px",color:"#6b7280",fontWeight:500},children:"Data Endpoint"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("button",{onClick:ne,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#fff",fontSize:"13px",fontWeight:500,color:"#374151",cursor:"pointer"},children:[i.jsx(no,{size:15}),"Validate"]}),i.jsxs("button",{onClick:()=>w(!0),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#fff",fontSize:"13px",fontWeight:500,color:"#374151",cursor:"pointer"},children:[i.jsx(Ny,{size:15}),"Import"]}),i.jsxs("button",{onClick:W,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#fff",fontSize:"13px",fontWeight:500,color:"#374151",cursor:"pointer"},children:[i.jsx(ky,{size:15}),"Export"]}),i.jsxs("button",{onClick:D,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",border:"none",borderRadius:"8px",background:g?"#10b981":"#25D366",fontSize:"13px",fontWeight:600,color:"#fff",cursor:"pointer",transition:"background 0.2s"},children:[g?i.jsx(to,{size:15}):i.jsx(Sa,{size:15}),g?"Copied!":"Copy JSON"]})]})]}),E.length>0&&i.jsxs("div",{style:{margin:"0 20px",marginTop:"8px",padding:"10px 14px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"4px",flexShrink:0},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#dc2626"},children:[E.length," Validation Error",E.length>1?"s":""]}),i.jsx("button",{onClick:()=>R([]),style:{background:"none",border:"none",cursor:"pointer"},children:i.jsx(Rt,{size:14,color:"#dc2626"})})]}),E.map((q,ee)=>i.jsxs("div",{style:{fontSize:"12px",color:"#b91c1c"},children:["- ",q]},ee))]}),i.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",gap:"0"},children:[i.jsxs("div",{style:{width:"280px",flexShrink:0,background:"#fff",borderRight:"1px solid #e5e7eb",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #e5e7eb"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[i.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#111827"},children:[i.jsx(PP,{size:14,style:{display:"inline",marginRight:"6px",verticalAlign:"middle"}}),"Screens (",s.length,")"]}),i.jsxs("button",{onClick:V,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",background:"rgba(37, 211, 102, 0.1)",border:"1px solid rgba(37, 211, 102, 0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:500,color:"#25D366",cursor:"pointer"},children:[i.jsx(Vt,{size:13})," Add"]})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",maxHeight:"200px",overflowY:"auto"},children:s.map((q,ee)=>i.jsxs("div",{onClick:()=>{u(ee),f(null)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",background:ee===l?"rgba(37, 211, 102, 0.08)":"transparent",border:ee===l?"1px solid rgba(37, 211, 102, 0.3)":"1px solid transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},children:[i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:ee===l?600:500,color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:q.id}),i.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",display:"flex",gap:"4px"},children:[q.terminal&&i.jsx("span",{style:{background:"#dcfce7",color:"#16a34a",padding:"1px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:600},children:"Terminal"}),i.jsxs("span",{children:[q.layout.children.length," items"]})]})]}),s.length>1&&i.jsx("button",{onClick:ie=>{ie.stopPropagation(),J(ee)},style:{padding:"4px",background:"none",border:"none",cursor:"pointer",color:"#ef4444",opacity:.6},children:i.jsx(At,{size:14})})]},q._key))})]}),z&&i.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #e5e7eb"},children:[i.jsxs("div",{style:{fontSize:"12px",fontWeight:600,color:"#6b7280",marginBottom:"8px"},children:[i.jsx(ww,{size:12,style:{display:"inline",marginRight:"4px",verticalAlign:"middle"}}),"Screen Properties"]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[i.jsx("input",{value:z.id,onChange:q=>$(l,{id:q.target.value.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}),placeholder:"SCREEN_ID",style:{width:"100%",padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",fontFamily:"monospace",outline:"none"}}),i.jsx("input",{value:z.title||"",onChange:q=>$(l,{title:q.target.value}),placeholder:"Screen Title",style:{width:"100%",padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"12px",outline:"none"}}),i.jsx("div",{style:{display:"flex",gap:"12px"},children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#374151"},children:[i.jsx("input",{type:"checkbox",checked:z.terminal||!1,onChange:q=>$(l,{terminal:q.target.checked,success:q.target.checked?!0:void 0}),style:{accentColor:"#25D366"}}),"Terminal"]})})]})]}),z&&i.jsxs("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{padding:"12px 12px 8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:"#6b7280"},children:["Components (",z.layout.children.length,")"]}),i.jsxs("button",{onClick:()=>h(!p),style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"6px",fontSize:"12px",fontWeight:500,color:"#8b5cf6",cursor:"pointer"},children:[i.jsx(Vt,{size:13})," Add"]})]}),p&&i.jsx("div",{style:{margin:"0 12px 8px",padding:"8px",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",maxHeight:"300px",overflowY:"auto"},children:Object.entries(DX).map(([q,ee])=>i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:()=>P(ie=>({...ie,[q]:!ie[q]})),style:{display:"flex",alignItems:"center",gap:"6px",width:"100%",padding:"6px 4px",background:"none",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:600,color:Qs[q],textTransform:"uppercase",letterSpacing:"0.5px"},children:[A[q]?i.jsx(fo,{size:12}):i.jsx(fa,{size:12}),ee]}),A[q]&&i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",paddingLeft:"8px"},children:bg.filter(ie=>ie.category===q).map(ie=>{const le=ie.icon;return i.jsxs("button",{onClick:()=>H(ie),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",background:"#fff",border:"1px solid #f3f4f6",borderRadius:"6px",cursor:"pointer",fontSize:"12px",color:"#374151",fontWeight:500,textAlign:"left",width:"100%",transition:"all 0.15s"},onMouseEnter:ue=>{ue.currentTarget.style.borderColor=Qs[q],ue.currentTarget.style.background=`${Qs[q]}08`},onMouseLeave:ue=>{ue.currentTarget.style.borderColor="#f3f4f6",ue.currentTarget.style.background="#fff"},children:[i.jsx(le,{size:14,style:{color:Qs[q],flexShrink:0}}),ie.label]},ie.type)})})]},q))}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0 12px 12px"},children:z.layout.children.map((q,ee)=>{const ie=bg.find(Z=>Z.type===q.type),le=(ie==null?void 0:ie.icon)||ea,ue=(ie==null?void 0:ie.category)||"text";return i.jsxs("div",{onClick:()=>f(ee),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",marginBottom:"4px",background:ee===d?"rgba(139, 92, 246, 0.06)":"#fff",border:ee===d?"1px solid rgba(139, 92, 246, 0.3)":"1px solid #f3f4f6",borderRadius:"8px",cursor:"pointer",transition:"all 0.15s"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",cursor:"grab",color:"#d1d5db"},children:[ee>0&&i.jsx("button",{onClick:Z=>{Z.stopPropagation(),F(ee,ee-1)},style:{background:"none",border:"none",cursor:"pointer",padding:"0",lineHeight:0},children:i.jsx(fa,{size:12,style:{transform:"rotate(-90deg)",color:"#9ca3af"}})}),ee<z.layout.children.length-1&&i.jsx("button",{onClick:Z=>{Z.stopPropagation(),F(ee,ee+1)},style:{background:"none",border:"none",cursor:"pointer",padding:"0",lineHeight:0},children:i.jsx(fa,{size:12,style:{transform:"rotate(90deg)",color:"#9ca3af"}})})]}),i.jsx(le,{size:14,style:{color:Qs[ue],flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"#374151",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:q.type}),i.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:q.name||q.text||q.label||""})]}),i.jsx("button",{onClick:Z=>{Z.stopPropagation(),M(ee)},style:{padding:"2px",background:"none",border:"none",cursor:"pointer",color:"#ef4444",opacity:.5},children:i.jsx(At,{size:13})})]},q._id||ee)})})]})]}),i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("div",{style:{display:"flex",padding:"8px 16px",gap:"4px",background:"#fff",borderBottom:"1px solid #e5e7eb"},children:[i.jsxs("button",{onClick:()=>N("preview"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",border:"none",background:_==="preview"?"#25D366":"transparent",color:_==="preview"?"#fff":"#6b7280",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[i.jsx(gM,{size:15}),"Preview"]}),i.jsxs("button",{onClick:()=>N("json"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"8px",border:"none",background:_==="json"?"#25D366":"transparent",color:_==="json"?"#fff":"#6b7280",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[i.jsx(mP,{size:15}),"JSON Output"]})]}),i.jsx("div",{style:{flex:1,overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"20px"},children:_==="preview"?i.jsx("div",{style:{width:"375px",height:"667px",borderRadius:"40px",background:"#111",padding:"12px",boxShadow:"0 25px 50px rgba(0,0,0,0.25)",flexShrink:0},children:i.jsxs("div",{style:{width:"100%",height:"100%",borderRadius:"30px",background:"#fff",overflow:"hidden",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{height:"44px",background:"#075e54",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(Rt,{size:18,color:"#fff"}),i.jsx("span",{style:{color:"#fff",fontSize:"15px",fontWeight:600},children:(z==null?void 0:z.title)||(z==null?void 0:z.id)||"Flow"})]}),i.jsx("div",{style:{display:"flex",gap:"12px"},children:i.jsx("span",{style:{color:"#fff",fontSize:"18px"},children:""})})]}),i.jsx("div",{style:{flex:1,overflow:"auto"},children:i.jsx($X,{screen:z?{...z}:null})})]})}):i.jsxs("div",{style:{width:"100%",maxWidth:"900px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:"#111827"},children:["Flow JSON Output (",(K.length/1024).toFixed(1)," KB)"]}),i.jsxs("button",{onClick:D,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",border:"none",borderRadius:"8px",background:g?"#10b981":"#25D366",fontSize:"13px",fontWeight:600,color:"#fff",cursor:"pointer"},children:[g?i.jsx(to,{size:15}):i.jsx(Sa,{size:15}),g?"Copied!":"Copy to Clipboard"]})]}),i.jsx("pre",{style:{background:"#1e293b",color:"#e2e8f0",padding:"20px",borderRadius:"12px",fontSize:"13px",lineHeight:"1.6",overflow:"auto",maxHeight:"calc(100vh - 300px)",fontFamily:"'Fira Code', 'Cascadia Code', 'JetBrains Mono', monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:K})]})})]}),i.jsxs("div",{style:{width:"300px",flexShrink:0,background:"#fff",borderLeft:"1px solid #e5e7eb",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsx("div",{style:{padding:"14px 16px",borderBottom:"1px solid #e5e7eb"},children:i.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#111827"},children:[i.jsx(ww,{size:14,style:{display:"inline",marginRight:"6px",verticalAlign:"middle"}}),"Properties"]})}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:G&&Q?i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",padding:"10px",background:`${Qs[Q.category]}08`,border:`1px solid ${Qs[Q.category]}20`,borderRadius:"8px"},children:[i.jsx(Q.icon,{size:18,style:{color:Qs[Q.category]}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#111827"},children:Q.label}),i.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:Q.type})]})]}),i.jsx(KX,{component:G,template:Q,screenIds:L,formFields:se,onChange:q=>{d!==null&&U(d,q)}})]}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#9ca3af",textAlign:"center",padding:"20px"},children:[i.jsx(zc,{size:40,style:{marginBottom:"12px",opacity:.3}}),i.jsx("p",{style:{fontSize:"14px",fontWeight:500,marginBottom:"4px"},children:"No component selected"}),i.jsx("p",{style:{fontSize:"12px"},children:"Click a component in the left panel to edit its properties"})]})})]})]}),b&&i.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>w(!1),children:i.jsxs("div",{onClick:q=>q.stopPropagation(),style:{background:"#fff",borderRadius:"16px",padding:"24px",width:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",gap:"16px",boxShadow:"0 25px 50px rgba(0,0,0,0.25)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#111827"},children:"Import Flow JSON"}),i.jsx("button",{onClick:()=>w(!1),style:{background:"none",border:"none",cursor:"pointer"},children:i.jsx(Rt,{size:20,color:"#6b7280"})})]}),i.jsx("p",{style:{fontSize:"13px",color:"#6b7280"},children:"Paste your WhatsApp Flow JSON below to load it into the builder."}),i.jsx("textarea",{value:v,onChange:q=>{j(q.target.value),k("")},placeholder:'{"version": "7.3", "screens": [...]}',style:{width:"100%",height:"300px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"13px",fontFamily:"monospace",outline:"none",resize:"none"}}),T&&i.jsxs("div",{style:{fontSize:"13px",color:"#dc2626",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(no,{size:14})," ",T]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:()=>w(!1),style:{padding:"10px 20px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#fff",fontSize:"14px",cursor:"pointer",color:"#374151"},children:"Cancel"}),i.jsx("button",{onClick:X,style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:"#25D366",fontSize:"14px",fontWeight:600,cursor:"pointer",color:"#fff"},children:"Import"})]})]})})]})}function XX(){return i.jsx(My,{icon:fc,title:"Message Center",description:"Send, track, and manage all your WhatsApp messages in one centralized platform. Monitor delivery status and engage with your guests in real-time.",color:"#ec4899",features:["Send bulk messages with templates","Real-time delivery tracking","Message scheduling and automation","Conversation history","Quick reply templates","Message queue management","Failed message retry system"]})}function JX(){return i.jsx(My,{icon:Zf,title:"Analytics Dashboard",description:"Get deep insights into your WhatsApp campaigns with comprehensive analytics, visualizations, and performance metrics.",color:"#6366f1",features:["Message delivery and open rates","Campaign performance comparison","Guest engagement metrics","Response rate analytics","Time-based trend analysis","Export reports to PDF/Excel","Real-time statistics dashboard"]})}function QX(){return i.jsx(My,{icon:$c,title:"Settings & Configuration",description:"Configure your WhatsApp Business API, manage project settings, user permissions, and customize your CRM experience.",color:"#64748b",features:["WhatsApp Business API integration","Project-specific settings","User role management","Notification preferences","Webhook configuration","API access tokens","Billing and subscription management"]})}function ZX(){return i.jsx(CO,{children:i.jsxs(Dj,{children:[i.jsx(ot,{index:!0,element:i.jsx(NO,{})}),i.jsx(ot,{path:"templates",element:i.jsx(lz,{})}),i.jsx(ot,{path:"guests",element:i.jsx(mz,{})}),i.jsx(ot,{path:"chatflow",element:i.jsx(FS,{})}),i.jsx(ot,{path:"chatflow/:id",element:i.jsx(FS,{})}),i.jsx(ot,{path:"whatsapp-flows",element:i.jsx(_X,{})}),i.jsx(ot,{path:"whatsapp-flows/:flowId",element:i.jsx(MX,{})}),i.jsx(ot,{path:"wa-json-builder",element:i.jsx(YX,{})}),i.jsx(ot,{path:"operation",element:i.jsx(tX,{})}),i.jsx(ot,{path:"operation/:campaignId",element:i.jsx(dX,{})}),i.jsx(ot,{path:"messages",element:i.jsx(XX,{})}),i.jsx(ot,{path:"analytics",element:i.jsx(JX,{})}),i.jsx(ot,{path:"settings",element:i.jsx(QX,{})}),i.jsx(ot,{path:"*",element:i.jsx(Mj,{to:"/kabar-in",replace:!0})})]})})}function eJ(){const e=Pt();return i.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-4xl",children:[i.jsxs("button",{onClick:()=>e("/dashboard"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Back to Dashboard"]}),i.jsxs("div",{className:"rounded-3xl p-12 backdrop-blur-xl text-center",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[i.jsx(ka,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#1a1a1a"}}),i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2.5rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"1rem"},children:"check.in"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.6,maxWidth:"600px",margin:"0 auto"},children:"Lightning-fast QR-based guest check-in system that makes event entry seamless and efficient."}),i.jsx("div",{className:"mt-8 inline-block px-6 py-3 rounded-full",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Coming Soon"})]})]})})}function tJ(){const e=Pt();return i.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-4xl",children:[i.jsxs("button",{onClick:()=>e("/dashboard"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Back to Dashboard"]}),i.jsxs("div",{className:"rounded-3xl p-12 backdrop-blur-xl text-center",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[i.jsx(vy,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#1a1a1a"}}),i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2.5rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"1rem"},children:"monitor.in"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.6,maxWidth:"600px",margin:"0 auto"},children:"Real-time guest analytics and monitoring dashboard to keep track of your event metrics at a glance."}),i.jsx("div",{className:"mt-8 inline-block px-6 py-3 rounded-full",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Coming Soon"})]})]})})}const nJ=[{role:"admin",icon:i.jsx(Ry,{className:"w-8 h-8"}),title:"Admin",description:"Full access to all features",access:["kabar.in","check.in","monitor.in"],color:"#8b5cf6"},{role:"staff",icon:i.jsx(cn,{className:"w-8 h-8"}),title:"Staff",description:"Access to check-in and monitoring",access:["check.in","monitor.in"],color:"#3b82f6"},{role:"user",icon:i.jsx(ii,{className:"w-8 h-8"}),title:"User",description:"Monitoring access only",access:["monitor.in"],color:"#10b981"}];function rJ(){const e=Pt(),{signUp:t,signIn:n}=Kt(),[r,s]=S.useState(null),[o,l]=S.useState(""),u=async d=>{l(""),s(d);try{const f=Date.now(),p=`demo-${d}@balemoo.com`,h="demo12345",g=`Demo ${d.charAt(0).toUpperCase()+d.slice(1)}`;await t(p,h,g,d),e("/projects")}catch(f){if(f.message.includes("already")||f.message.includes("exist")||f.message.includes("User"))try{const p=`demo-${d}@balemoo.com`;await n(p,"demo12345"),e("/projects")}catch{l(`Demo ${d} account exists but sign in failed. Try manual login.`)}else l(f.message||"Failed to create demo account")}finally{s(null)}};return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:i.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-5xl",children:[i.jsxs("button",{onClick:()=>e("/login"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Back to Login"]}),i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 3vw, 2.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"0.5rem"},children:"Quick Demo Access"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:400,color:"#6b6b6b"},children:"Create a demo account with different role permissions"})]}),o&&i.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-6 p-4 rounded-xl text-center",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:o})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:nJ.map((d,f)=>i.jsxs(fe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2+f*.1,ease:[.25,.1,.25,1]},className:"rounded-3xl p-8 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[i.jsx("div",{className:"mb-4",style:{color:d.color},children:d.icon}),i.jsx("h3",{className:"mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:d.title}),i.jsx("p",{className:"mb-4",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.5},children:d.description}),i.jsx("div",{className:"mb-6 space-y-2",children:d.access.map(p=>i.jsxs("div",{className:"px-3 py-1 rounded-lg text-sm",style:{background:"rgba(0, 0, 0, 0.03)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#2d2d2d"},children:[" ",p]},p))}),i.jsx("button",{onClick:()=>u(d.role),disabled:r!==null,className:"w-full px-6 py-3 rounded-full transition-all duration-700",style:{background:r===d.role?"rgba(0, 0, 0, 0.4)":"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none",cursor:r!==null?"not-allowed":"pointer",transform:"scale(1)"},onMouseEnter:p=>{r===null&&(p.currentTarget.style.transform="scale(1.03)",p.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.15)")},onMouseLeave:p=>{p.currentTarget.style.transform="scale(1)",p.currentTarget.style.boxShadow="none"},children:r===d.role?"Creating...":`Try as ${d.title}`}),i.jsxs("p",{className:"mt-3 text-center",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af"},children:["demo-",d.role,"@balemoo.com"]})]},d.role))}),i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.6},className:"mt-8 text-center",children:i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b6b6b"},children:["All demo accounts use password: ",i.jsx("strong",{children:"demo12345"})]})})]})})}function sJ({onClose:e}){const{user:t}=Kt(),{createProject:n}=Yt(),r=Pt(),[s,o]=S.useState(!1),[l,u]=S.useState(null),[d,f]=S.useState(""),[p,h]=S.useState(""),[g,y]=S.useState(""),[b,w]=S.useState([{id:crypto.randomUUID(),name:"",date:"",time:""}]),v=[{id:1,title:"1 Project + 1 Agenda",description:"Simple event with single agenda",icon:"",data:{name:"Tech Meetup 2026",startDate:"2026-02-15",endDate:"2026-02-15",agendas:[{id:crypto.randomUUID(),name:"Networking Session",date:"2026-02-15",time:"18:00"}]}},{id:2,title:"1 Project + 2 Agendas",description:"Event with multiple sessions",icon:"",data:{name:"Workshop Series",startDate:"2026-03-10",endDate:"2026-03-11",agendas:[{id:crypto.randomUUID(),name:"Morning Workshop",date:"2026-03-10",time:"09:00"},{id:crypto.randomUUID(),name:"Afternoon Session",date:"2026-03-11",time:"14:00"}]}}],j=E=>{const R=v.find(A=>A.id===E);R&&(u(E),f(R.data.name),h(R.data.startDate),y(R.data.endDate),w(R.data.agendas))},T=()=>{w([...b,{id:crypto.randomUUID(),name:"",date:"",time:""}])},k=E=>{b.length>1&&w(b.filter(R=>R.id!==E))},_=(E,R,A)=>{w(b.map(P=>P.id===E?{...P,[R]:A}:P))},N=async E=>{if(E.preventDefault(),!d.trim()){we.error("Please enter a project name");return}if(!p||!g){we.error("Please select start and end dates");return}if(new Date(p)>new Date(g)){we.error("Start date must be before end date");return}const R=b.filter(A=>A.name.trim()&&A.date);if(R.length===0){we.error("Please add at least one agenda with name and date");return}o(!0);try{await n({name:d.trim(),startDate:p,endDate:g,agendas:R.map(A=>({id:A.id,name:A.name.trim(),date:A.date,time:A.time||"00:00"})),assignedUsers:[(t==null?void 0:t.id)||""],createdBy:(t==null?void 0:t.id)||""}),we.success(" Project created successfully!"),o(!1),e()}catch(A){console.error("Error creating project:",A),we.error(A.message||"Failed to create project"),o(!1)}};return i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},onClick:e,children:i.jsxs(fe.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{duration:.3},className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-3xl p-8",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,color:"#1a1a1a"},children:"Create New Project"}),i.jsx("button",{onClick:e,className:"p-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.05)"},onMouseEnter:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:i.jsx(Rt,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:v.map(E=>i.jsxs(fe.button,{type:"button",onClick:()=>j(E.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-6 rounded-2xl text-left transition-all duration-300",style:{background:l===E.id?"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)":"rgba(139, 92, 246, 0.05)",border:l===E.id?"2px solid #8b5cf6":"2px solid rgba(139, 92, 246, 0.1)",color:l===E.id?"#ffffff":"#1a1a1a"},children:[i.jsx("div",{className:"text-3xl mb-3",children:E.icon}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,marginBottom:"0.5rem",color:l===E.id?"#ffffff":"#1a1a1a"},children:E.title}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:l===E.id?"rgba(255,255,255,0.8)":"#6b7280"},children:E.description})]},E.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Project Name *"}),i.jsx("input",{type:"text",value:d,onChange:E=>f(E.target.value),placeholder:"e.g., Wedding Reception 2026",className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:E=>{E.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",E.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:E=>{E.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",E.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Start Date *"}),i.jsxs("div",{className:"relative",children:[i.jsx(xs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"#9ca3af"}}),i.jsx("input",{type:"date",value:p,onChange:E=>h(E.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:E=>{E.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",E.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:E=>{E.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",E.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"End Date *"}),i.jsxs("div",{className:"relative",children:[i.jsx(xs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"#9ca3af"}}),i.jsx("input",{type:"date",value:g,onChange:E=>y(E.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:E=>{E.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",E.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:E=>{E.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",E.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Event Agendas * (minimum 1)"}),i.jsxs("button",{type:"button",onClick:T,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontWeight:600,color:"#8b5cf6"},onMouseEnter:E=>{E.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:E=>{E.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},children:[i.jsx(Vt,{className:"w-4 h-4"}),"Add Agenda"]})]}),i.jsx("div",{className:"space-y-3",children:b.map((E,R)=>i.jsx(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.06)"},children:i.jsxs("div",{className:"flex gap-3 items-start",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:E.name,onChange:A=>_(E.id,"name",A.target.value),placeholder:"Agenda name",className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}}),i.jsx("input",{type:"date",value:E.date,onChange:A=>_(E.id,"date",A.target.value),className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}}),i.jsx("input",{type:"time",value:E.time,onChange:A=>_(E.id,"time",A.target.value),className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}})]}),b.length>1&&i.jsx("button",{type:"button",onClick:()=>k(E.id),className:"p-2 rounded-lg transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},onMouseLeave:A=>{A.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:i.jsx(At,{className:"w-4 h-4"})})]})},E.id))})]}),i.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[i.jsxs("button",{type:"button",onClick:()=>{e(),r("/projects")},className:"flex-1 px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(0, 0, 0, 0.04)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1a1a1a"},onMouseEnter:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Back to Projects"]}),i.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 rounded-xl transition-all duration-300",style:{background:s?"rgba(139, 92, 246, 0.5)":"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)",boxShadow:s?"none":"0 4px 20px rgba(139, 92, 246, 0.3)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff",cursor:s?"not-allowed":"pointer"},children:s?"Creating...":"Create Project"})]})]})]})})}function iJ({project:e,onClose:t}){const{user:n}=Kt(),{updateProject:r}=Yt(),s=Pt(),[o,l]=S.useState(!1),[u,d]=S.useState(e.name),[f,p]=S.useState(e.startDate),[h,g]=S.useState(e.endDate),[y,b]=S.useState(e.agendas),w=()=>{b([...y,{id:crypto.randomUUID(),name:"",date:"",time:""}])},v=k=>{y.length>1&&b(y.filter(_=>_.id!==k))},j=(k,_,N)=>{b(y.map(E=>E.id===k?{...E,[_]:N}:E))},T=async k=>{if(k.preventDefault(),!u.trim()){we.error("Please enter a project name");return}if(!f||!h){we.error("Please select start and end dates");return}if(new Date(f)>new Date(h)){we.error("Start date must be before end date");return}const _=y.filter(N=>N.name.trim()&&N.date);if(_.length===0){we.error("Please add at least one agenda with name and date");return}l(!0);try{await r(e.id,{name:u.trim(),startDate:f,endDate:h,agendas:_.map(N=>({id:N.id,name:N.name.trim(),date:N.date,time:N.time||"00:00"}))}),we.success(" Project updated successfully!"),l(!1),t()}catch(N){console.error("Error updating project:",N),we.error(N.message||"Failed to update project"),l(!1)}};return i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},onClick:t,children:i.jsxs(fe.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{duration:.3},className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-3xl p-8",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},onClick:k=>k.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,color:"#1a1a1a"},children:"Edit Project"}),i.jsx("button",{onClick:t,className:"p-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.05)"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:i.jsx(Rt,{className:"w-6 h-6",style:{color:"#6b6b6b"}})})]}),i.jsxs("form",{onSubmit:T,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:"Project Name"}),i.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Enter project name",className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:[i.jsx(xs,{className:"w-4 h-4 inline mr-2"}),"Start Date"]}),i.jsx("input",{type:"date",value:f,onChange:k=>p(k.target.value),className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:[i.jsx(xs,{className:"w-4 h-4 inline mr-2"}),"End Date"]}),i.jsx("input",{type:"date",value:h,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},children:"Agendas"}),i.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500},onMouseEnter:k=>{k.currentTarget.style.background="rgba(59, 130, 246, 0.2)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[i.jsx(Vt,{className:"w-4 h-4"}),"Add Agenda"]})]}),i.jsx("div",{className:"space-y-4",children:y.map((k,_)=>i.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.05)"},children:[i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[i.jsxs("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b"},children:["Agenda ",_+1]}),y.length>1&&i.jsx("button",{type:"button",onClick:()=>v(k.id),className:"ml-auto p-2 rounded-full transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:i.jsx(At,{className:"w-4 h-4",style:{color:"#ef4444"}})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",value:k.name,onChange:N=>j(k.id,"name",N.target.value),placeholder:"Agenda name",className:"w-full px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("input",{type:"date",value:k.date,onChange:N=>j(k.id,"date",N.target.value),className:"px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}}),i.jsx("input",{type:"time",value:k.time,onChange:N=>j(k.id,"time",N.target.value),className:"px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}})]})]})]},k.id))})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsxs("button",{type:"button",onClick:()=>{t(),s("/projects")},className:"flex-1 px-6 py-3 rounded-full transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(0, 0, 0, 0.05)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#6b6b6b"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Back to Projects"]}),i.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 rounded-full transition-all duration-300",style:{background:o?"rgba(59, 130, 246, 0.5)":"#3b82f6",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#ffffff"},onMouseEnter:k=>{o||(k.currentTarget.style.background="#2563eb")},onMouseLeave:k=>{o||(k.currentTarget.style.background="#3b82f6")},children:o?"Updating...":"Update Project"})]})]})]})})}function Zo(e){const t=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}"),r={"demo-admin@balemoo.com":"admin","demo-staff@balemoo.com":"staff","staff-a@balemoo.com":"staff","staff-b@balemoo.com":"staff","demo-user@balemoo.com":"user","client-a@balemoo.com":"user"}[e];return r&&t[r]?t[r]:`user_${e.split("@")[0].replace(/[.-]/g,"_")}`}const oJ=[{id:Zo("demo-admin@balemoo.com"),email:"demo-admin@balemoo.com",name:"Admin Balemoo",role:"admin"},{id:Zo("demo-staff@balemoo.com"),email:"demo-staff@balemoo.com",name:"Staff Balemoo",role:"staff"},{id:Zo("staff-a@balemoo.com"),email:"staff-a@balemoo.com",name:"Kadek Arya",role:"staff"},{id:Zo("staff-b@balemoo.com"),email:"staff-b@balemoo.com",name:"Made Sari",role:"staff"},{id:Zo("demo-user@balemoo.com"),email:"demo-user@balemoo.com",name:"User Balemoo",role:"user"},{id:Zo("client-a@balemoo.com"),email:"client-a@balemoo.com",name:"Wayan Santika",role:"user"}];function vg(e){return oJ.find(t=>t.id===e)}function aJ({projectName:e,team:t,project:n,onClose:r}){var d,f,p,h;const s=n||{name:e,team:t},o=(d=s.team)!=null&&d.manager?vg(s.team.manager):null,l=((p=(f=s.team)==null?void 0:f.staff)==null?void 0:p.map(g=>vg(g)).filter(Boolean))||[],u=(h=s.team)!=null&&h.client?vg(s.team.client):null;return i.jsx(ci,{children:i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)"}}),i.jsxs(fe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.16,1,.3,1]},className:"relative w-full max-w-md rounded-3xl",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.15)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[i.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cn,{className:"w-6 h-6",style:{color:"#8b5cf6"}}),i.jsxs("div",{children:[i.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"#1a1a1a"},children:"Team Lineage"}),i.jsx("p",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:s.name})]})]}),i.jsx("button",{onClick:r,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:i.jsx(Rt,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})}),i.jsxs("div",{className:"px-6 py-5 space-y-5",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Uj,{className:"w-4 h-4",style:{color:"#8b5cf6"}}),i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Event Manager"})]}),o?i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)"},children:[i.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)"},children:i.jsx(ii,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:o.name}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:o.email})]})]}):i.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No manager assigned"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(cn,{className:"w-4 h-4",style:{color:"#3b82f6"}}),i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Staff"})]}),l.length>0?i.jsx("div",{className:"space-y-2",children:l.map(g=>i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[i.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},children:i.jsx(ii,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:g==null?void 0:g.name}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:g==null?void 0:g.email})]})]},g==null?void 0:g.id))}):i.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No staff assigned"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ii,{className:"w-4 h-4",style:{color:"#10b981"}}),i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Client"})]}),u?i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.1)"},children:[i.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:i.jsx(ii,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:u.name}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:u.email})]})]}):i.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No client assigned"})]})]})]})]})})}function lJ(){const{projects:e,setSelectedProject:t,isProjectAccessible:n,selectedProject:r,loading:s,deleteProject:o}=Yt(),{user:l,signOut:u}=Kt(),d=Pt(),[f,p]=S.useState(""),[h,g]=S.useState(null),[y,b]=S.useState(null),[w,v]=S.useState(!1),[j,T]=S.useState(!1),[k,_]=S.useState(null),[N,E]=S.useState(!1),[R,A]=S.useState(null),[P,z]=S.useState(null);S.useEffect(()=>{!l&&!s&&d("/login")},[l,s,d]);const L=W=>{const X=new Date;X.setHours(0,0,0,0);const ne=new Date(W.startDate);ne.setHours(0,0,0,0);const G=new Date(W.endDate);return G.setHours(0,0,0,0),X>=ne&&X<=G?"Today":X<ne?"Upcoming":"Past"},B=W=>{n(W)?(t(W),d("/dashboard")):(g(W.id),setTimeout(()=>g(null),500))},K=async()=>{await u(),d("/")},V=(W,X)=>{W.stopPropagation(),_(X),T(!0)},J=async(W,X)=>{if(W.stopPropagation(),!!window.confirm("Are you sure you want to delete this project? This action cannot be undone.")){z(X);try{await o(X),we.success("Project deleted successfully")}catch(G){console.error("Error deleting project:",G),we.error(G.message||"Failed to delete project")}finally{z(null)}}},$=e.filter(W=>W.name.toLowerCase().includes(f.toLowerCase())||W.agendas.some(ne=>ne.name.toLowerCase().includes(f.toLowerCase()))),M=(()=>{const W=$.filter(Q=>L(Q)==="Today"),X=$.filter(Q=>L(Q)==="Upcoming").sort((Q,se)=>new Date(Q.startDate).getTime()-new Date(se.startDate).getTime()),ne=$.filter(Q=>L(Q)==="Past").sort((Q,se)=>new Date(se.endDate).getTime()-new Date(Q.endDate).getTime()),G=[];return G.push(...W.slice(0,3)),G.length<3&&G.push(...X.slice(0,3-G.length)),G.length<3&&G.push(...ne.slice(0,3-G.length)),G.slice(0,3)})(),U=$.filter(W=>!M.some(X=>X.id===W.id)).sort((W,X)=>{const ne=L(W),G=L(X);return ne==="Upcoming"&&G==="Past"?-1:ne==="Past"&&G==="Upcoming"?1:ne==="Upcoming"&&G==="Upcoming"?new Date(W.startDate).getTime()-new Date(X.startDate).getTime():ne==="Past"&&G==="Past"?new Date(X.endDate).getTime()-new Date(W.endDate).getTime():0}),F=W=>{switch(W){case"Today":return"#10b981";case"Upcoming":return"#3b82f6";case"Past":return"#9ca3af"}},D=(W,X)=>{const ne=new Date(W),G=new Date(X);return`${ne.toLocaleDateString("id-ID",{day:"numeric",month:"short"})} - ${G.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}`};return s?i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center",children:i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b6b6b"},children:"Loading projects..."})}):i.jsxs("div",{className:"min-h-screen w-full px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[i.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7},className:"max-w-7xl mx-auto mb-12 flex justify-end items-center",children:i.jsxs("div",{className:"flex items-center gap-3",children:[(l==null?void 0:l.role)==="admin"&&i.jsxs(fe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v(!0),className:"flex items-center gap-2 px-6 py-3 rounded-2xl transition-all duration-300",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none"},children:[i.jsx(Vt,{className:"w-5 h-5"}),"Create Project"]}),i.jsx("button",{onClick:K,className:"p-3 rounded-2xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:W=>{W.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:W=>{W.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:i.jsx(Qj,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})}),M.length>0&&i.jsx(fe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"max-w-7xl mx-auto mb-16",children:i.jsx("div",{className:"flex items-end justify-center gap-6",children:[1,0,2].map(W=>{const X=M[W];if(!X)return null;const ne=W,G=L(X),Q=n(X),se=y===X.id,q=h===X.id,ee=W===0;return i.jsxs(fe.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+ne*.15,ease:[.25,.1,.25,1]},onClick:()=>B(X),onMouseEnter:()=>b(X.id),onMouseLeave:()=>b(null),className:"relative rounded-3xl backdrop-blur-xl transition-all duration-700",style:{width:ee?"380px":"320px",padding:ee?"2.5rem":"2rem",background:Q?G==="Today"?"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.05) 100%)":"rgba(255, 255, 255, 0.8)":"rgba(200, 200, 200, 0.3)",border:Q?G==="Today"?"2px solid rgba(16, 185, 129, 0.3)":ee?"2px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(255, 255, 255, 0.5)":"1px solid rgba(150, 150, 150, 0.2)",boxShadow:se&&Q?ee?"0 30px 80px rgba(139, 92, 246, 0.3), 0 0 0 1px rgba(139, 92, 246, 0.2)":G==="Today"?"0 20px 60px rgba(16, 185, 129, 0.25), 0 0 0 1px rgba(16, 185, 129, 0.1)":"0 20px 60px rgba(0, 0, 0, 0.15)":ee&&Q?"0 20px 60px rgba(139, 92, 246, 0.2)":G==="Today"&&Q?"0 12px 40px rgba(16, 185, 129, 0.15)":"0 12px 40px rgba(0, 0, 0, 0.08)",transform:se&&Q?ee?"translateY(-16px) scale(1.03)":"translateY(-12px) scale(1.02)":"translateY(0) scale(1)",cursor:Q?"pointer":"not-allowed",opacity:Q?1:.5,filter:Q?"none":"grayscale(1)",animation:q?"shake 0.5s ease-in-out":"none"},children:[Q&&(ee||G==="Today")&&i.jsx("div",{className:"absolute inset-0 rounded-3xl opacity-0 transition-opacity duration-700",style:{background:ee?"radial-gradient(circle at 50% 0%, rgba(139, 92, 246, 0.2) 0%, transparent 70%)":"radial-gradient(circle at 50% 0%, rgba(16, 185, 129, 0.15) 0%, transparent 70%)",opacity:se?1:0,pointerEvents:"none"}}),!Q&&i.jsx("div",{className:"absolute top-6 right-6",children:i.jsx(br,{className:"w-6 h-6",style:{color:"#9ca3af"}})}),X.isActive===!1&&i.jsxs("div",{className:"absolute top-6 left-6 px-3 py-1.5 rounded-lg flex items-center gap-2",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(8px)"},children:[i.jsx(br,{className:"w-3.5 h-3.5",style:{color:"#ef4444"}}),i.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#ef4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Disabled"})]}),i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{background:`${F(G)}15`,border:`1.5px solid ${F(G)}40`,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:700,color:F(G),textTransform:"uppercase",letterSpacing:"0.08em"},children:[G==="Today"&&i.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{background:F(G)}}),G]}),Q&&i.jsx("button",{onClick:ie=>{ie.stopPropagation(),A(X),E(!0)},className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)"},onMouseEnter:ie=>{ie.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:ie=>{ie.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},title:"View Team",children:i.jsx(cn,{className:"w-5 h-5",style:{color:"#8b5cf6"}})})]}),i.jsx("h3",{className:"mb-4",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.02em",color:Q?"#1a1a1a":"#9ca3af",lineHeight:1.3},children:X.name}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(xs,{className:"w-4 h-4",style:{color:Q?"#6b6b6b":"#9ca3af"}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:Q?"#6b6b6b":"#9ca3af"},children:D(X.startDate,X.endDate)})]}),i.jsx("div",{className:"mb-4",style:{height:"1px",background:Q?"rgba(0, 0, 0, 0.08)":"rgba(0, 0, 0, 0.04)"}}),i.jsxs("div",{children:[i.jsxs("p",{className:"mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:Q?"#6b6b6b":"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em"},children:[X.agendas.length," Agenda",X.agendas.length>1?"s":""]}),i.jsxs("div",{className:"space-y-2",children:[X.agendas.slice(0,2).map(ie=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:Q?"#6b6b6b":"#9ca3af"}}),i.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:Q?"#1a1a1a":"#9ca3af"},children:ie.name})]},ie.id)),X.agendas.length>2&&i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontStyle:"italic",color:Q?"#6b6b6b":"#9ca3af",marginLeft:"12px"},children:["+",X.agendas.length-2," more"]})]})]}),(l==null?void 0:l.role)==="admin"&&Q&&i.jsxs("div",{className:"mt-6 pt-4 flex gap-3",style:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[i.jsxs("button",{onClick:ie=>V(ie,X),className:"flex-1 px-4 py-2.5 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#3b82f6"},onMouseEnter:ie=>{ie.currentTarget.style.background="rgba(59, 130, 246, 0.15)"},onMouseLeave:ie=>{ie.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[i.jsx(Xf,{className:"w-4 h-4"}),"Edit"]}),i.jsxs("button",{onClick:ie=>J(ie,X.id),disabled:P===X.id,className:"flex-1 px-4 py-2.5 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",opacity:P===X.id?.5:1,cursor:P===X.id?"not-allowed":"pointer"},onMouseEnter:ie=>{P!==X.id&&(ie.currentTarget.style.background="rgba(239, 68, 68, 0.15)")},onMouseLeave:ie=>{P!==X.id&&(ie.currentTarget.style.background="rgba(239, 68, 68, 0.1)")},children:[i.jsx(At,{className:"w-4 h-4"}),P===X.id?"Deleting...":"Delete"]})]}),!Q&&se&&i.jsx(fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 px-4 py-2 rounded-xl whitespace-nowrap",style:{background:"rgba(0, 0, 0, 0.9)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontWeight:500,color:"#ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:"You are not assigned to this project"})]},X.id)})})}),U.length>0&&i.jsxs(fe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.5},className:"max-w-7xl mx-auto mb-12",children:[i.jsxs("h2",{className:"mb-6 flex items-center gap-3",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1a1a1a"},children:[i.jsx("div",{style:{width:"4px",height:"24px",background:"#8b5cf6",borderRadius:"2px"}}),"Other Projects"]}),i.jsx("div",{className:"space-y-3",children:U.map((W,X)=>{const ne=L(W),G=n(W);return i.jsx(fe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6+X*.05},onClick:()=>B(W),className:"flex items-center justify-between p-5 rounded-2xl backdrop-blur-xl transition-all duration-300",style:{background:G?"rgba(255, 255, 255, 0.7)":"rgba(200, 200, 200, 0.3)",border:`1px solid ${G?"rgba(0, 0, 0, 0.08)":"rgba(150, 150, 150, 0.15)"}`,cursor:G?"pointer":"not-allowed",opacity:G?1:.5},onMouseEnter:Q=>{G&&(Q.currentTarget.style.background="rgba(255, 255, 255, 0.95)",Q.currentTarget.style.transform="translateX(4px)")},onMouseLeave:Q=>{G&&(Q.currentTarget.style.background="rgba(255, 255, 255, 0.7)",Q.currentTarget.style.transform="translateX(0)")},children:i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[!G&&i.jsx(br,{className:"w-5 h-5",style:{color:"#9ca3af"}}),W.isActive===!1&&i.jsxs("div",{className:"px-2.5 py-1 rounded-lg flex items-center gap-1.5",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[i.jsx(br,{className:"w-3 h-3",style:{color:"#ef4444"}}),i.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:600,color:"#ef4444",textTransform:"uppercase"},children:"Disabled"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:G?"#1a1a1a":"#9ca3af"},children:W.name}),i.jsx("div",{className:"px-3 py-1 rounded-full",style:{background:`${F(ne)}15`,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.6875rem",fontWeight:600,color:F(ne),textTransform:"uppercase"},children:ne})]}),i.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",color:G?"#6b6b6b":"#9ca3af"},children:[D(W.startDate,W.endDate),"  ",W.agendas.length," agenda",W.agendas.length>1?"s":""]})]})]})},W.id)})})]}),i.jsx(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.7},className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"relative",children:[i.jsx(bs,{className:"absolute left-6 top-1/2 transform -translate-y-1/2 w-5 h-5",style:{color:"#9ca3af"}}),i.jsx("input",{type:"text",placeholder:"Search projects by name or agenda...",value:f,onChange:W=>p(W.target.value),className:"w-full pl-16 pr-6 py-5 rounded-2xl backdrop-blur-xl transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},onFocus:W=>{W.currentTarget.style.background="rgba(255, 255, 255, 0.95)",W.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:W=>{W.currentTarget.style.background="rgba(255, 255, 255, 0.7)",W.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}})]})}),$.length===0&&i.jsxs(fe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-7xl mx-auto text-center py-20",children:[i.jsx(xs,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#d1d5db"}}),i.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#9ca3af",marginBottom:"0.5rem"},children:"No projects found"}),i.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#9ca3af"},children:f?"Try adjusting your search query":"Get started by creating your first project"})]}),w&&i.jsx(sJ,{onClose:()=>v(!1)}),j&&k&&i.jsx(iJ,{project:k,onClose:()=>{T(!1),_(null)}}),N&&i.jsx(aJ,{onClose:()=>E(!1),project:R}),i.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
          20%, 40%, 60%, 80% { transform: translateX(3px); }
        }
      `})]})}function cJ({onClose:e}){var W,X,ne;const{user:t,accessToken:n}=Kt(),{selectedProject:r,updateProject:s,updateAgenda:o}=Yt(),[l,u]=S.useState(!1),[d,f]=S.useState(!0),[p,h]=S.useState(!1),[g,y]=S.useState([]),[b,w]=S.useState(!0),[v,j]=S.useState((W=r==null?void 0:r.team)==null?void 0:W.manager),[T,k]=S.useState(((X=r==null?void 0:r.team)==null?void 0:X.staff)||[]),[_,N]=S.useState((ne=r==null?void 0:r.team)==null?void 0:ne.client),[E,R]=S.useState((r==null?void 0:r.isActive)!==!1);if(S.useEffect(()=>{var G,Q,se;r&&(R(r.isActive!==!1),j((G=r.team)==null?void 0:G.manager),k(((Q=r.team)==null?void 0:Q.staff)||[]),N((se=r.team)==null?void 0:se.client))},[r]),S.useEffect(()=>{(async()=>{if(!t||!n||t.role!=="admin"){w(!1);return}try{w(!0);const Q=await fetch(`https://${$n}.supabase.co/functions/v1/make-server-deeab278/users`,{method:"GET",headers:{Authorization:`Bearer ${Fe}`,"X-User-Token":n,"Content-Type":"application/json"}});if(Q.ok){const se=await Q.json();y(se.users||[]),console.log("Loaded users from backend:",se.users);const q=(se.users||[]).map(ee=>ee.id);k(ee=>ee.filter(ie=>q.includes(ie))),v&&!q.includes(v)&&j(void 0),_&&!q.includes(_)&&N(void 0)}}catch(Q){console.error("Error fetching users:",Q)}finally{w(!1)}})()},[t,n]),(t==null?void 0:t.role)!=="admin"||!r)return null;const A=r.features||{qr_scan:!0,analytics:!0},P=g.filter(G=>G.role==="admin"),z=g.filter(G=>G.role==="staff"),L=g.filter(G=>G.role==="user"),B=G=>{const Q=g.find(se=>se.id===G);return Q||console.warn("User not found for ID:",G,"Available users:",g.length),Q},K=async()=>{console.log("=== SAVING TEAM CHANGES ==="),console.log("Project ID:",r.id),console.log("Manager:",v),console.log("Staff:",T),console.log("Client:",_);try{await s(r.id,{team:{manager:v,staff:T,client:_}}),console.log("Team changes saved successfully!"),h(!1),f(!0)}catch(G){console.error("Error saving team changes:",G),alert("Failed to save team changes: "+G.message)}},V=()=>{var G,Q,se;d?f(!1):v!==((G=r.team)==null?void 0:G.manager)||JSON.stringify(T)!==JSON.stringify(((Q=r.team)==null?void 0:Q.staff)||[])||_!==((se=r.team)==null?void 0:se.client)?h(!0):f(!0)},J=async()=>{if(!d)if(E)u(!0);else try{await s(r.id,{isActive:!0}),R(!0),u(!1)}catch(G){console.error("Error enabling project:",G),alert("Failed to enable project: "+G.message)}},$=async()=>{try{await s(r.id,{isActive:!1}),R(!1),u(!1)}catch(G){console.error("Error disabling project:",G),alert("Failed to disable project: "+G.message)}},H=G=>{d||s(r.id,{features:{...A,[G]:!A[G]}})},M=(G,Q)=>{if(d)return;const se=Q!==!1;o(r.id,G,{isActive:!se})},U=G=>{T.includes(G)||k([...T,G])},F=G=>{k(T.filter(Q=>Q!==G))},D=({user:G,onRemove:Q})=>{if(!G)return null;const se=G.role==="admin"?"#8b5cf6":G.role==="staff"?"#3b82f6":"#10b981";return i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:`rgba(${G.role==="admin"?"139, 92, 246":G.role==="staff"?"59, 130, 246":"16, 185, 129"}, 0.05)`,border:`1px solid rgba(${G.role==="admin"?"139, 92, 246":G.role==="staff"?"59, 130, 246":"16, 185, 129"}, 0.1)`},children:[i.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${se} 0%, ${se}dd 100%)`},children:i.jsx(ii,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:G.name}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:G.email})]}),Q&&!d&&i.jsx("button",{onClick:Q,className:"p-2 rounded-lg transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},onMouseLeave:q=>{q.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:i.jsx(At,{className:"w-4 h-4",style:{color:"#ef4444"}})})]})};return i.jsx(ci,{children:i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{p||e()},className:"absolute inset-0",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)"}}),i.jsxs(fe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.16,1,.3,1]},className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.15)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[i.jsxs("div",{className:"sticky top-0 z-10 px-8 py-6 border-b border-gray-100",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)"},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx($c,{className:"w-6 h-6",style:{color:"#8b5cf6"}}),i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1a1a1a"},children:"Project Settings"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:d?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",border:`1px solid ${d?"rgba(239, 68, 68, 0.2)":"rgba(34, 197, 94, 0.2)"}`},children:d?i.jsxs(i.Fragment,{children:[i.jsx(br,{className:"w-4 h-4",style:{color:"#ef4444"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#ef4444"},children:"Locked"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Jj,{className:"w-4 h-4",style:{color:"#22c55e"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#22c55e"},children:"Unlocked"})]})}),i.jsx("button",{onClick:e,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},children:i.jsx(Rt,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})]}),i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginTop:"8px"},children:r.name}),d&&i.jsx("div",{className:"mt-3 p-3 rounded-xl",style:{background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.1)"},children:i.jsxs("p",{style:{fontSize:"0.8125rem",color:"#6b6b6b"},children:[i.jsx(br,{className:"w-3.5 h-3.5 inline mr-1.5",style:{color:"#ef4444"}}),'Settings are locked. Click "Locked" to make changes.']})})]}),i.jsxs("div",{className:"px-8 py-6 space-y-8",style:{opacity:d?.6:1,pointerEvents:d?"none":"auto"},children:[b&&i.jsx("div",{className:"p-4 rounded-xl",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)"},children:i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",textAlign:"center"},children:"Loading users..."})}),i.jsxs("div",{style:{opacity:b?.5:1},children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(cn,{className:"w-5 h-5",style:{color:"#8b5cf6"}}),i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a"},children:"Team"})]}),i.jsxs("div",{className:"mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Uj,{className:"w-4 h-4",style:{color:"#8b5cf6"}}),i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Event Manager"})]}),i.jsxs("select",{value:v||"",onChange:G=>j(G.target.value||void 0),disabled:d,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[i.jsx("option",{value:"",children:"Select Manager"}),P.map(G=>i.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),v&&B(v)&&i.jsx("div",{className:"mt-2",children:i.jsx(D,{user:B(v)})})]}),i.jsxs("div",{className:"mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(cn,{className:"w-4 h-4",style:{color:"#3b82f6"}}),i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Staff"})]}),!d&&i.jsxs("select",{onChange:G=>{G.target.value&&(U(G.target.value),G.target.value="")},className:"w-full px-4 py-3 rounded-xl mb-3 transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[i.jsx("option",{value:"",children:"Add Staff Member"}),z.filter(G=>!T.includes(G.id)).map(G=>i.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),i.jsx("div",{className:"space-y-2",children:T.length>0?T.map(G=>{const Q=B(G);return Q?i.jsx(D,{user:Q,onRemove:()=>F(G)},G):null}):i.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No staff assigned"})})]}),i.jsxs("div",{className:"mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ii,{className:"w-4 h-4",style:{color:"#10b981"}}),i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Client"})]}),i.jsxs("select",{value:_||"",onChange:G=>N(G.target.value||void 0),disabled:d,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[i.jsx("option",{value:"",children:"Select Client"}),L.map(G=>i.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),_&&B(_)&&i.jsx("div",{className:"mt-2",children:i.jsx(D,{user:B(_)})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"16px"},children:"Project Settings"}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Project Active"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:"Enable or disable this project for Staff and Users"})]}),i.jsx("button",{onClick:J,className:"relative w-14 h-7 rounded-full transition-all duration-300",style:{background:E?"#8b5cf6":"#d1d5db"},children:i.jsx(fe.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:E?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),i.jsx(ci,{children:l&&i.jsx(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 rounded-2xl",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(yf,{className:"w-5 h-5 mt-0.5",style:{color:"#ef4444"}}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Disable Project?"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:"This project will become inaccessible to Staff and Users. Are you sure?"}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:$,className:"px-4 py-2 rounded-xl",style:{background:"#ef4444",color:"white",fontSize:"0.875rem",fontWeight:600},children:"Yes, Disable"}),i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-xl",style:{background:"rgba(0, 0, 0, 0.05)",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:600},children:"Cancel"})]})]})]})})}),r.agendas&&r.agendas.length>0&&i.jsxs("div",{children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"16px"},children:"Agenda Settings"}),i.jsx("div",{className:"space-y-3",children:r.agendas.map(G=>{const Q=G.isActive!==!1;return i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:Q?"rgba(59, 130, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${Q?"rgba(59, 130, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`,opacity:Q?1:.6},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:G.name}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:[new Date(G.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),G.time&&`  ${G.time}`]})]}),i.jsx("button",{onClick:()=>M(G.id,G.isActive),className:"relative w-14 h-7 rounded-full",style:{background:Q?"#3b82f6":"#d1d5db"},children:i.jsx(fe.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:Q?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]},G.id)})})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"8px"},children:"Feature Settings"}),i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"16px"},children:"Enable or disable features for this project"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:A.qr_scan?"rgba(59, 130, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${A.qr_scan?"rgba(59, 130, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ka,{className:"w-5 h-5",style:{color:A.qr_scan?"#3b82f6":"#9ca3af"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"QR Code Scan"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:"Enable QR-based guest check-in"})]})]}),i.jsx("button",{onClick:()=>H("qr_scan"),className:"relative w-14 h-7 rounded-full",style:{background:A.qr_scan?"#3b82f6":"#d1d5db"},children:i.jsx(fe.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:A.qr_scan?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:A.analytics?"rgba(139, 92, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${A.analytics?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(vy,{className:"w-5 h-5",style:{color:A.analytics?"#8b5cf6":"#9ca3af"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Analytics Dashboard"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:"Enable guest analytics and monitoring"})]})]}),i.jsx("button",{onClick:()=>H("analytics"),className:"relative w-14 h-7 rounded-full",style:{background:A.analytics?"#8b5cf6":"#d1d5db"},children:i.jsx(fe.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:A.analytics?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]})]})]})]})]}),p&&i.jsxs(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-60 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0",onClick:()=>h(!1),style:{background:"rgba(0, 0, 0, 0.6)"}}),i.jsx(fe.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"relative bg-white rounded-3xl p-6 max-w-md mx-4",style:{boxShadow:"0 24px 64px rgba(0, 0, 0, 0.2)",fontFamily:"'Inter', sans-serif"},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(yf,{className:"w-6 h-6 mt-1",style:{color:"#f59e0b"}}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:700,color:"#1a1a1a",marginBottom:"8px"},children:"Save Changes?"}),i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"20px"},children:"You have unsaved changes to the team configuration. Do you want to save these changes?"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 rounded-xl",style:{background:"#8b5cf6",color:"white",fontSize:"0.875rem",fontWeight:600},children:"Save Changes"}),i.jsx("button",{onClick:()=>{var G,Q,se;j((G=r.team)==null?void 0:G.manager),k(((Q=r.team)==null?void 0:Q.staff)||[]),N((se=r.team)==null?void 0:se.client),h(!1),f(!0)},className:"flex-1 px-4 py-2 rounded-xl",style:{background:"rgba(0, 0, 0, 0.05)",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:600},children:"Discard"})]})]})]})})]})]})})}function uJ(){const{user:e,signOut:t}=Kt(),{selectedProject:n,selectedAgenda:r,setSelectedAgenda:s}=Yt(),o=Pt(),l=Kr(),[u,d]=S.useState(!1),[f,p]=S.useState(!1),h=e&&l.pathname!=="/"&&l.pathname!=="/login"&&l.pathname!=="/demo"&&l.pathname!=="/projects";if(!h)return null;const g=async()=>{await t(),o("/")},y=v=>{s(v),d(!1)},b=l.pathname.startsWith("/kabar-in"),w=n&&n.agendas&&n.agendas.length>1&&!b;return i.jsxs(i.Fragment,{children:[i.jsx(fe.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7},className:"fixed top-0 left-0 right-0 z-50",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"cursor-pointer",onClick:()=>o("/dashboard"),style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1a1a1a"},children:"Balemoo"}),n&&i.jsxs("button",{onClick:()=>o("/projects"),className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(139, 92, 246, 0.15)",v.currentTarget.style.transform="translateX(-2px)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(139, 92, 246, 0.1)",v.currentTarget.style.transform="translateX(0)"},children:[i.jsx(mi,{className:"w-4 h-4"}),"Pilih Project Lain"]})]}),i.jsx("div",{className:"flex items-center gap-3",children:w&&i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(59, 130, 246, 0.15)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[i.jsxs("span",{children:["Agenda: ",(r==null?void 0:r.name)||"Select"]}),i.jsx(fo,{className:"w-4 h-4",style:{color:"#6b6b6b"}})]}),u&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),i.jsx(fe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-full right-0 mt-2 rounded-xl overflow-hidden z-50",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",minWidth:"200px"},children:n==null?void 0:n.agendas.map(v=>i.jsxs("button",{onClick:()=>y(v),className:"w-full px-4 py-3 text-left transition-all duration-200",style:{background:(r==null?void 0:r.id)===v.id?"rgba(59, 130, 246, 0.1)":"transparent",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},onMouseEnter:j=>{(r==null?void 0:r.id)!==v.id&&(j.currentTarget.style.background="rgba(0, 0, 0, 0.03)")},onMouseLeave:j=>{(r==null?void 0:r.id)!==v.id&&(j.currentTarget.style.background="transparent")},children:[i.jsx("div",{style:{fontWeight:500},children:v.name}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:[new Date(v.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),v.time&&`  ${v.time}`]})]},v.id))})]})]})}),i.jsxs("div",{className:"flex items-center gap-4",children:[(e==null?void 0:e.role)==="admin"&&n&&i.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},title:"Project Settings",children:i.jsx($c,{className:"w-4 h-4",style:{color:"#8b5cf6"}})}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:e==null?void 0:e.name}),i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:(e==null?void 0:e.role)==="admin"?"#8b5cf6":(e==null?void 0:e.role)==="staff"?"#3b82f6":"#10b981",textTransform:"uppercase"},children:e==null?void 0:e.role})]}),i.jsx("button",{onClick:g,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:i.jsx(Qj,{className:"w-4 h-4",style:{color:"#6b6b6b"}})})]})]})}),h&&i.jsx("div",{style:{height:"72px"}}),f&&i.jsx(cJ,{onClose:()=>p(!1)})]})}class dJ extends S.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n)}render(){var t;return this.state.hasError?i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-6",children:i.jsxs("div",{className:"max-w-md w-full p-8 rounded-3xl text-center",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1a1a1a",marginBottom:"12px"},children:"Something went wrong"}),i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"24px"},children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred"}),i.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},className:"px-6 py-3 rounded-xl transition-all duration-300",style:{background:"#8b5cf6",color:"white",fontSize:"0.9375rem",fontWeight:600,border:"none",cursor:"pointer"},children:"Go to Home"})]})}):this.props.children}}var fJ=(e,t,n,r,s,o,l,u)=>{let d=document.documentElement,f=["light","dark"];function p(y){(Array.isArray(e)?e:[e]).forEach(b=>{let w=b==="class",v=w&&o?s.map(j=>o[j]||j):s;w?(d.classList.remove(...v),d.classList.add(o&&o[y]?o[y]:y)):d.setAttribute(b,y)}),h(y)}function h(y){u&&f.includes(y)&&(d.style.colorScheme=y)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)p(r);else try{let y=localStorage.getItem(t)||n,b=l&&y==="system"?g():y;p(b)}catch{}},hJ=S.createContext(void 0),pJ={setTheme:e=>{},themes:[]},mJ=()=>{var e;return(e=S.useContext(hJ))!=null?e:pJ};S.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:l,themes:u,nonce:d,scriptProps:f})=>{let p=JSON.stringify([n,t,o,e,u,l,r,s]).slice(1,-1);return S.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${fJ.toString()})(${p})`}})});const gJ=({...e})=>{const{theme:t="system"}=mJ();return i.jsx(iz,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function yJ(){return i.jsxs(i.Fragment,{children:[i.jsx(OA,{}),i.jsx(zA,{}),i.jsx($M,{}),i.jsx(LM,{})]})}function xJ(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center",children:i.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b6b6b"},children:"Loading..."})})}function bJ(){return i.jsx(dJ,{children:i.jsx(EA,{children:i.jsx(bO,{children:i.jsx(wO,{children:i.jsx(_O,{children:i.jsx(EO,{children:i.jsx(yz,{children:i.jsx(CX,{children:i.jsx(pY,{children:i.jsxs(sX,{children:[i.jsx(S.Suspense,{fallback:i.jsx(xJ,{}),children:i.jsxs("div",{className:"size-full",children:[i.jsx(uJ,{}),i.jsxs(Dj,{children:[i.jsx(ot,{path:"/",element:i.jsx(yJ,{})}),i.jsx(ot,{path:"/login",element:i.jsx(vO,{})}),i.jsx(ot,{path:"/demo",element:i.jsx(rJ,{})}),i.jsx(ot,{path:"/projects",element:i.jsx(lJ,{})}),i.jsx(ot,{path:"/dashboard",element:i.jsx(kO,{})}),i.jsx(ot,{path:"/kabar-in/*",element:i.jsx(ZX,{})}),i.jsx(ot,{path:"/check-in",element:i.jsx(eJ,{})}),i.jsx(ot,{path:"/monitor-in",element:i.jsx(tJ,{})}),i.jsx(ot,{path:"*",element:i.jsx(Mj,{to:"/",replace:!0})})]})]})}),i.jsx(gJ,{})]})})})})})})})})})})}S6.createRoot(document.getElementById("root")).render(i.jsx(xe.StrictMode,{children:i.jsx(bJ,{})}));
