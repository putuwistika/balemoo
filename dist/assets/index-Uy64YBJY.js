function tR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cm={exports:{}},Cl={},um={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function nR(){if(Mb)return We;Mb=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=h&&D[h]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(D,W,X){this.props=D,this.context=W,this.refs=b,this.updater=X||x}w.prototype.isReactComponent={},w.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=w.prototype;function T(D,W,X){this.props=D,this.context=W,this.refs=b,this.updater=X||x}var k=T.prototype=new j;k.constructor=T,v(k,w.prototype),k.isPureReactComponent=!0;var E=Array.isArray,N=Object.prototype.hasOwnProperty,_={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(D,W,X){var Z,G={},J=null,ne=null;if(W!=null)for(Z in W.ref!==void 0&&(ne=W.ref),W.key!==void 0&&(J=""+W.key),W)N.call(W,Z)&&!R.hasOwnProperty(Z)&&(G[Z]=W[Z]);var te=arguments.length-2;if(te===1)G.children=X;else if(1<te){for(var se=Array(te),le=0;le<te;le++)se[le]=arguments[le+2];G.children=se}if(D&&D.defaultProps)for(Z in te=D.defaultProps,te)G[Z]===void 0&&(G[Z]=te[Z]);return{$$typeof:e,type:D,key:J,ref:ne,props:G,_owner:_.current}}function P(D,W){return{$$typeof:e,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function $(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function L(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(X){return W[X]})}var B=/\/+/g;function K(D,W){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):W.toString(36)}function V(D,W,X,Z,G){var J=typeof D;(J==="undefined"||J==="boolean")&&(D=null);var ne=!1;if(D===null)ne=!0;else switch(J){case"string":case"number":ne=!0;break;case"object":switch(D.$$typeof){case e:case t:ne=!0}}if(ne)return ne=D,G=G(ne),D=Z===""?"."+K(ne,0):Z,E(G)?(X="",D!=null&&(X=D.replace(B,"$&/")+"/"),V(G,W,X,"",function(le){return le})):G!=null&&($(G)&&(G=P(G,X+(!G.key||ne&&ne.key===G.key?"":(""+G.key).replace(B,"$&/")+"/")+D)),W.push(G)),1;if(ne=0,Z=Z===""?".":Z+":",E(D))for(var te=0;te<D.length;te++){J=D[te];var se=Z+K(J,te);ne+=V(J,W,X,se,G)}else if(se=g(D),typeof se=="function")for(D=se.call(D),te=0;!(J=D.next()).done;)J=J.value,se=Z+K(J,te++),ne+=V(J,W,X,se,G);else if(J==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ne}function Y(D,W,X){if(D==null)return D;var Z=[],G=0;return V(D,Z,"","",function(J){return W.call(X,J,G++)}),Z}function z(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(X){(D._status===0||D._status===-1)&&(D._status=1,D._result=X)},function(X){(D._status===0||D._status===-1)&&(D._status=2,D._result=X)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var H={current:null},M={transition:null},U={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:M,ReactCurrentOwner:_};function F(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:Y,forEach:function(D,W,X){Y(D,function(){W.apply(this,arguments)},X)},count:function(D){var W=0;return Y(D,function(){W++}),W},toArray:function(D){return Y(D,function(W){return W})||[]},only:function(D){if(!$(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},We.Component=w,We.Fragment=n,We.Profiler=s,We.PureComponent=T,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,We.act=F,We.cloneElement=function(D,W,X){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var Z=v({},D.props),G=D.key,J=D.ref,ne=D._owner;if(W!=null){if(W.ref!==void 0&&(J=W.ref,ne=_.current),W.key!==void 0&&(G=""+W.key),D.type&&D.type.defaultProps)var te=D.type.defaultProps;for(se in W)N.call(W,se)&&!R.hasOwnProperty(se)&&(Z[se]=W[se]===void 0&&te!==void 0?te[se]:W[se])}var se=arguments.length-2;if(se===1)Z.children=X;else if(1<se){te=Array(se);for(var le=0;le<se;le++)te[le]=arguments[le+2];Z.children=te}return{$$typeof:e,type:D.type,key:G,ref:J,props:Z,_owner:ne}},We.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},We.createElement=A,We.createFactory=function(D){var W=A.bind(null,D);return W.type=D,W},We.createRef=function(){return{current:null}},We.forwardRef=function(D){return{$$typeof:u,render:D}},We.isValidElement=$,We.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:z}},We.memo=function(D,W){return{$$typeof:f,type:D,compare:W===void 0?null:W}},We.startTransition=function(D){var W=M.transition;M.transition={};try{D()}finally{M.transition=W}},We.unstable_act=F,We.useCallback=function(D,W){return H.current.useCallback(D,W)},We.useContext=function(D){return H.current.useContext(D)},We.useDebugValue=function(){},We.useDeferredValue=function(D){return H.current.useDeferredValue(D)},We.useEffect=function(D,W){return H.current.useEffect(D,W)},We.useId=function(){return H.current.useId()},We.useImperativeHandle=function(D,W,X){return H.current.useImperativeHandle(D,W,X)},We.useInsertionEffect=function(D,W){return H.current.useInsertionEffect(D,W)},We.useLayoutEffect=function(D,W){return H.current.useLayoutEffect(D,W)},We.useMemo=function(D,W){return H.current.useMemo(D,W)},We.useReducer=function(D,W,X){return H.current.useReducer(D,W,X)},We.useRef=function(D){return H.current.useRef(D)},We.useState=function(D){return H.current.useState(D)},We.useSyncExternalStore=function(D,W,X){return H.current.useSyncExternalStore(D,W,X)},We.useTransition=function(){return H.current.useTransition()},We.version="18.3.1",We}var Db;function jc(){return Db||(Db=1,um.exports=nR()),um.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function rR(){if(Fb)return Cl;Fb=1;var e=jc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var m,h={},g=null,x=null;f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(x=d.ref);for(m in d)r.call(d,m)&&!a.hasOwnProperty(m)&&(h[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)h[m]===void 0&&(h[m]=d[m]);return{$$typeof:t,type:u,key:g,ref:x,props:h,_owner:s.current}}return Cl.Fragment=n,Cl.jsx=l,Cl.jsxs=l,Cl}var Ob;function sR(){return Ob||(Ob=1,cm.exports=rR()),cm.exports}var o=sR(),S=jc();const ye=Ff(S),oR=tR({__proto__:null,default:ye},[S]);var Zu={},dm={exports:{}},Cn={},fm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function iR(){return zb||(zb=1,(function(e){function t(M,U){var F=M.length;M.push(U);e:for(;0<F;){var D=F-1>>>1,W=M[D];if(0<s(W,U))M[D]=U,M[F]=W,F=D;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],F=M.pop();if(F!==U){M[0]=F;e:for(var D=0,W=M.length,X=W>>>1;D<X;){var Z=2*(D+1)-1,G=M[Z],J=Z+1,ne=M[J];if(0>s(G,F))J<W&&0>s(ne,G)?(M[D]=ne,M[J]=F,D=J):(M[D]=G,M[Z]=F,D=Z);else if(J<W&&0>s(ne,F))M[D]=ne,M[J]=F,D=J;else break e}}return U}function s(M,U){var F=M.sortIndex-U.sortIndex;return F!==0?F:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,h=null,g=3,x=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(M){for(var U=n(f);U!==null;){if(U.callback===null)r(f);else if(U.startTime<=M)r(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=n(f)}}function E(M){if(b=!1,k(M),!v)if(n(d)!==null)v=!0,z(N);else{var U=n(f);U!==null&&H(E,U.startTime-M)}}function N(M,U){v=!1,b&&(b=!1,j(A),A=-1),x=!0;var F=g;try{for(k(U),h=n(d);h!==null&&(!(h.expirationTime>U)||M&&!L());){var D=h.callback;if(typeof D=="function"){h.callback=null,g=h.priorityLevel;var W=D(h.expirationTime<=U);U=e.unstable_now(),typeof W=="function"?h.callback=W:h===n(d)&&r(d),k(U)}else r(d);h=n(d)}if(h!==null)var X=!0;else{var Z=n(f);Z!==null&&H(E,Z.startTime-U),X=!1}return X}finally{h=null,g=F,x=!1}}var _=!1,R=null,A=-1,P=5,$=-1;function L(){return!(e.unstable_now()-$<P)}function B(){if(R!==null){var M=e.unstable_now();$=M;var U=!0;try{U=R(!0,M)}finally{U?K():(_=!1,R=null)}}else _=!1}var K;if(typeof T=="function")K=function(){T(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Y=V.port2;V.port1.onmessage=B,K=function(){Y.postMessage(null)}}else K=function(){w(B,0)};function z(M){R=M,_||(_=!0,K())}function H(M,U){A=w(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,z(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(M){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var F=g;g=U;try{return M()}finally{g=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=g;g=M;try{return U()}finally{g=F}},e.unstable_scheduleCallback=function(M,U,F){var D=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?D+F:D):F=D,M){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,M={id:m++,callback:U,priorityLevel:M,startTime:F,expirationTime:W,sortIndex:-1},F>D?(M.sortIndex=F,t(f,M),n(d)===null&&M===n(f)&&(b?(j(A),A=-1):b=!0,H(E,F-D))):(M.sortIndex=W,t(d,M),v||x||(v=!0,z(N))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var U=g;return function(){var F=g;g=U;try{return M.apply(this,arguments)}finally{g=F}}}})(hm)),hm}var $b;function aR(){return $b||($b=1,fm.exports=iR()),fm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function lR(){if(Lb)return Cn;Lb=1;var e=jc(),t=aR();function n(i){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+i,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,c){l(i,c),l(i+"Capture",c)}function l(i,c){for(s[i]=c,i=0;i<c.length;i++)r.add(c[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function g(i){return d.call(h,i)?!0:d.call(m,i)?!1:f.test(i)?h[i]=!0:(m[i]=!0,!1)}function x(i,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function v(i,c,p,y){if(c===null||typeof c>"u"||x(i,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(i,c,p,y,C,I,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=C,this.mustUseProperty=p,this.propertyName=i,this.type=c,this.sanitizeURL=I,this.removeEmptyString=O}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){w[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var c=i[0];w[c]=new b(c,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){w[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){w[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){w[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){w[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){w[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){w[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){w[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function T(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var c=i.replace(j,T);w[c]=new b(c,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var c=i.replace(j,T);w[c]=new b(c,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var c=i.replace(j,T);w[c]=new b(c,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){w[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){w[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,c,p,y){var C=w.hasOwnProperty(c)?w[c]:null;(C!==null?C.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(v(c,p,C,y)&&(p=null),y||C===null?g(c)&&(p===null?i.removeAttribute(c):i.setAttribute(c,""+p)):C.mustUseProperty?i[C.propertyName]=p===null?C.type===3?!1:"":p:(c=C.attributeName,y=C.attributeNamespace,p===null?i.removeAttribute(c):(C=C.type,p=C===3||C===4&&p===!0?"":""+p,y?i.setAttributeNS(y,c,p):i.setAttribute(c,p))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),_=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),M=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var F=Object.assign,D;function W(i){if(D===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);D=c&&c[1]||""}return`
`+D+i}var X=!1;function Z(i,c){if(!i||X)return"";X=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ae){var y=ae}Reflect.construct(i,[],c)}else{try{c.call()}catch(ae){y=ae}i.call(c.prototype)}else{try{throw Error()}catch(ae){y=ae}i()}}catch(ae){if(ae&&y&&typeof ae.stack=="string"){for(var C=ae.stack.split(`
`),I=y.stack.split(`
`),O=C.length-1,q=I.length-1;1<=O&&0<=q&&C[O]!==I[q];)q--;for(;1<=O&&0<=q;O--,q--)if(C[O]!==I[q]){if(O!==1||q!==1)do if(O--,q--,0>q||C[O]!==I[q]){var Q=`
`+C[O].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=O&&0<=q);break}}}finally{X=!1,Error.prepareStackTrace=p}return(i=i?i.displayName||i.name:"")?W(i):""}function G(i){switch(i.tag){case 5:return W(i.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return i=Z(i.type,!1),i;case 11:return i=Z(i.type.render,!1),i;case 1:return i=Z(i.type,!0),i;default:return""}}function J(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case _:return"Portal";case P:return"Profiler";case A:return"StrictMode";case K:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case $:return(i._context.displayName||"Context")+".Provider";case B:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Y:return c=i.displayName||null,c!==null?c:J(i.type)||"Memo";case z:c=i._payload,i=i._init;try{return J(i(c))}catch{}}return null}function ne(i){var c=i.type;switch(i.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=c.render,i=i.displayName||i.name||"",c.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(c);case 8:return c===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function se(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function le(i){var c=se(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),y=""+i[c];if(!i.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var C=p.get,I=p.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return C.call(this)},set:function(O){y=""+O,I.call(this,O)}}),Object.defineProperty(i,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function de(i){i._valueTracker||(i._valueTracker=le(i))}function fe(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return i&&(y=se(i)?i.checked?"true":"false":i.value),i=y,i!==p?(c.setValue(i),!0):!1}function ie(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ue(i,c){var p=c.checked;return F({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??i._wrapperState.initialChecked})}function xe(i,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=te(c.value!=null?c.value:p),i._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ge(i,c){c=c.checked,c!=null&&k(i,"checked",c,!1)}function Ae(i,c){ge(i,c);var p=te(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&i.value===""||i.value!=p)&&(i.value=""+p):i.value!==""+p&&(i.value=""+p);else if(y==="submit"||y==="reset"){i.removeAttribute("value");return}c.hasOwnProperty("value")?ze(i,c.type,p):c.hasOwnProperty("defaultValue")&&ze(i,c.type,te(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(i.defaultChecked=!!c.defaultChecked)}function Ve(i,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+i._wrapperState.initialValue,p||c===i.value||(i.value=c),i.defaultValue=c}p=i.name,p!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,p!==""&&(i.name=p)}function ze(i,c,p){(c!=="number"||ie(i.ownerDocument)!==i)&&(p==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+p&&(i.defaultValue=""+p))}var gt=Array.isArray;function jt(i,c,p,y){if(i=i.options,c){c={};for(var C=0;C<p.length;C++)c["$"+p[C]]=!0;for(p=0;p<i.length;p++)C=c.hasOwnProperty("$"+i[p].value),i[p].selected!==C&&(i[p].selected=C),C&&y&&(i[p].defaultSelected=!0)}else{for(p=""+te(p),c=null,C=0;C<i.length;C++){if(i[C].value===p){i[C].selected=!0,y&&(i[C].defaultSelected=!0);return}c!==null||i[C].disabled||(c=i[C])}c!==null&&(c.selected=!0)}}function He(i,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},c,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Lt(i,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(n(92));if(gt(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),p=c}i._wrapperState={initialValue:te(p)}}function Yr(i,c){var p=te(c.value),y=te(c.defaultValue);p!=null&&(p=""+p,p!==i.value&&(i.value=p),c.defaultValue==null&&i.defaultValue!==p&&(i.defaultValue=p)),y!=null&&(i.defaultValue=""+y)}function Wn(i){var c=i.textContent;c===i._wrapperState.initialValue&&c!==""&&c!==null&&(i.value=c)}function wt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(i,c){return i==null||i==="http://www.w3.org/1999/xhtml"?wt(c):i==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Zn,er=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,C){MSApp.execUnsafeLocalFunction(function(){return i(c,p,y,C)})}:i})(function(i,c){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=c;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Zn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;c.firstChild;)i.appendChild(c.firstChild)}});function Ue(i,c){if(c){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===3){p.nodeValue=c;return}}i.textContent=c}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yn=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(i){yn.forEach(function(c){c=c+i.charAt(0).toUpperCase()+i.substring(1),tn[c]=tn[i]})});function tr(i,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||tn.hasOwnProperty(i)&&tn[i]?(""+c).trim():c+"px"}function Jr(i,c){i=i.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,C=tr(p,c[p],y);p==="float"&&(p="cssFloat"),y?i.setProperty(p,C):i[p]=C}}var Cs=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Es(i,c){if(c){if(Cs[i]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function yo(i,c){if(i.indexOf("-")===-1)return typeof c.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function xn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xo=null,_r=null,nr=null;function vo(i){if(i=ul(i)){if(typeof xo!="function")throw Error(n(280));var c=i.stateNode;c&&(c=pu(c),xo(i.stateNode,i.type,c))}}function Le(i){_r?nr?nr.push(i):nr=[i]:_r=i}function ct(){if(_r){var i=_r,c=nr;if(nr=_r=null,vo(i),c)for(i=0;i<c.length;i++)vo(c[i])}}function St(i,c){return i(c)}function Bt(){}var Nr=!1;function yt(i,c,p){if(Nr)return i(c,p);Nr=!0;try{return St(i,c,p)}finally{Nr=!1,(_r!==null||nr!==null)&&(Bt(),ct())}}function Ct(i,c){var p=i.stateNode;if(p===null)return null;var y=pu(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Tr=!1;if(u)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{Tr=!1}function cn(i,c,p,y,C,I,O,q,Q){var ae=Array.prototype.slice.call(arguments,3);try{c.apply(p,ae)}catch(pe){this.onError(pe)}}var Rr=!1,vn=null,bo=!1,Wa=null,bh={onError:function(i){Rr=!0,vn=i}};function wh(i,c,p,y,C,I,O,q,Q){Rr=!1,vn=null,cn.apply(bh,arguments)}function Sh(i,c,p,y,C,I,O,q,Q){if(wh.apply(this,arguments),Rr){if(Rr){var ae=vn;Rr=!1,vn=null}else throw Error(n(198));bo||(bo=!0,Wa=ae)}}function Ir(i){var c=i,p=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(p=c.return),i=c.return;while(i)}return c.tag===3?p:null}function Va(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function Ua(i){if(Ir(i)!==i)throw Error(n(188))}function kh(i){var c=i.alternate;if(!c){if(c=Ir(i),c===null)throw Error(n(188));return c!==i?null:i}for(var p=i,y=c;;){var C=p.return;if(C===null)break;var I=C.alternate;if(I===null){if(y=C.return,y!==null){p=y;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===p)return Ua(C),i;if(I===y)return Ua(C),c;I=I.sibling}throw Error(n(188))}if(p.return!==y.return)p=C,y=I;else{for(var O=!1,q=C.child;q;){if(q===p){O=!0,p=C,y=I;break}if(q===y){O=!0,y=C,p=I;break}q=q.sibling}if(!O){for(q=I.child;q;){if(q===p){O=!0,p=I,y=C;break}if(q===y){O=!0,y=I,p=C;break}q=q.sibling}if(!O)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?i:c}function Uc(i){return i=kh(i),i!==null?Hc(i):null}function Hc(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var c=Hc(i);if(c!==null)return c;i=i.sibling}return null}var Gc=t.unstable_scheduleCallback,qc=t.unstable_cancelCallback,jh=t.unstable_shouldYield,Kc=t.unstable_requestPaint,ut=t.unstable_now,Ch=t.unstable_getCurrentPriorityLevel,Ha=t.unstable_ImmediatePriority,Xc=t.unstable_UserBlockingPriority,li=t.unstable_NormalPriority,Eh=t.unstable_LowPriority,Yc=t.unstable_IdlePriority,wo=null,Vn=null;function _h(i){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(wo,i,void 0,(i.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:Rh,Nh=Math.log,Th=Math.LN2;function Rh(i){return i>>>=0,i===0?32:31-(Nh(i)/Th|0)|0}var ci=64,ui=4194304;function Ar(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function di(i,c){var p=i.pendingLanes;if(p===0)return 0;var y=0,C=i.suspendedLanes,I=i.pingedLanes,O=p&268435455;if(O!==0){var q=O&~C;q!==0?y=Ar(q):(I&=O,I!==0&&(y=Ar(I)))}else O=p&~C,O!==0?y=Ar(O):I!==0&&(y=Ar(I));if(y===0)return 0;if(c!==0&&c!==y&&(c&C)===0&&(C=y&-y,I=c&-c,C>=I||C===16&&(I&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=i.entangledLanes,c!==0)for(i=i.entanglements,c&=y;0<c;)p=31-Tn(c),C=1<<p,y|=i[p],c&=~C;return y}function Jc(i,c){switch(i){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ih(i,c){for(var p=i.suspendedLanes,y=i.pingedLanes,C=i.expirationTimes,I=i.pendingLanes;0<I;){var O=31-Tn(I),q=1<<O,Q=C[O];Q===-1?((q&p)===0||(q&y)!==0)&&(C[O]=Jc(q,c)):Q<=c&&(i.expiredLanes|=q),I&=~q}}function Ga(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function fi(){var i=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),i}function qa(i){for(var c=[],p=0;31>p;p++)c.push(i);return c}function So(i,c,p){i.pendingLanes|=c,c!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,c=31-Tn(c),i[c]=p}function Qc(i,c){var p=i.pendingLanes&~c;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=c,i.mutableReadLanes&=c,i.entangledLanes&=c,c=i.entanglements;var y=i.eventTimes;for(i=i.expirationTimes;0<p;){var C=31-Tn(p),I=1<<C;c[C]=0,y[C]=-1,i[C]=-1,p&=~I}}function Ah(i,c){var p=i.entangledLanes|=c;for(i=i.entanglements;p;){var y=31-Tn(p),C=1<<y;C&c|i[y]&c&&(i[y]|=c),p&=~C}}var Xe=0;function fx(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var hx,Ph,px,mx,gx,Mh=!1,Zc=[],_s=null,Ns=null,Ts=null,Ka=new Map,Xa=new Map,Rs=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yx(i,c){switch(i){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Ka.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(c.pointerId)}}function Ya(i,c,p,y,C,I){return i===null||i.nativeEvent!==I?(i={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:I,targetContainers:[C]},c!==null&&(c=ul(c),c!==null&&Ph(c)),i):(i.eventSystemFlags|=y,c=i.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),i)}function jN(i,c,p,y,C){switch(c){case"focusin":return _s=Ya(_s,i,c,p,y,C),!0;case"dragenter":return Ns=Ya(Ns,i,c,p,y,C),!0;case"mouseover":return Ts=Ya(Ts,i,c,p,y,C),!0;case"pointerover":var I=C.pointerId;return Ka.set(I,Ya(Ka.get(I)||null,i,c,p,y,C)),!0;case"gotpointercapture":return I=C.pointerId,Xa.set(I,Ya(Xa.get(I)||null,i,c,p,y,C)),!0}return!1}function xx(i){var c=ko(i.target);if(c!==null){var p=Ir(c);if(p!==null){if(c=p.tag,c===13){if(c=Va(p),c!==null){i.blockedOn=c,gx(i.priority,function(){px(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){i.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}i.blockedOn=null}function eu(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var p=Fh(i.domEventName,i.eventSystemFlags,c[0],i.nativeEvent);if(p===null){p=i.nativeEvent;var y=new p.constructor(p.type,p);Qr=y,p.target.dispatchEvent(y),Qr=null}else return c=ul(p),c!==null&&Ph(c),i.blockedOn=p,!1;c.shift()}return!0}function vx(i,c,p){eu(i)&&p.delete(c)}function CN(){Mh=!1,_s!==null&&eu(_s)&&(_s=null),Ns!==null&&eu(Ns)&&(Ns=null),Ts!==null&&eu(Ts)&&(Ts=null),Ka.forEach(vx),Xa.forEach(vx)}function Ja(i,c){i.blockedOn===c&&(i.blockedOn=null,Mh||(Mh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CN)))}function Qa(i){function c(C){return Ja(C,i)}if(0<Zc.length){Ja(Zc[0],i);for(var p=1;p<Zc.length;p++){var y=Zc[p];y.blockedOn===i&&(y.blockedOn=null)}}for(_s!==null&&Ja(_s,i),Ns!==null&&Ja(Ns,i),Ts!==null&&Ja(Ts,i),Ka.forEach(c),Xa.forEach(c),p=0;p<Rs.length;p++)y=Rs[p],y.blockedOn===i&&(y.blockedOn=null);for(;0<Rs.length&&(p=Rs[0],p.blockedOn===null);)xx(p),p.blockedOn===null&&Rs.shift()}var hi=E.ReactCurrentBatchConfig,tu=!0;function EN(i,c,p,y){var C=Xe,I=hi.transition;hi.transition=null;try{Xe=1,Dh(i,c,p,y)}finally{Xe=C,hi.transition=I}}function _N(i,c,p,y){var C=Xe,I=hi.transition;hi.transition=null;try{Xe=4,Dh(i,c,p,y)}finally{Xe=C,hi.transition=I}}function Dh(i,c,p,y){if(tu){var C=Fh(i,c,p,y);if(C===null)Zh(i,c,y,nu,p),yx(i,y);else if(jN(C,i,c,p,y))y.stopPropagation();else if(yx(i,y),c&4&&-1<kN.indexOf(i)){for(;C!==null;){var I=ul(C);if(I!==null&&hx(I),I=Fh(i,c,p,y),I===null&&Zh(i,c,y,nu,p),I===C)break;C=I}C!==null&&y.stopPropagation()}else Zh(i,c,y,null,p)}}var nu=null;function Fh(i,c,p,y){if(nu=null,i=xn(y),i=ko(i),i!==null)if(c=Ir(i),c===null)i=null;else if(p=c.tag,p===13){if(i=Va(c),i!==null)return i;i=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null);return nu=i,null}function bx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ch()){case Ha:return 1;case Xc:return 4;case li:case Eh:return 16;case Yc:return 536870912;default:return 16}default:return 16}}var Is=null,Oh=null,ru=null;function wx(){if(ru)return ru;var i,c=Oh,p=c.length,y,C="value"in Is?Is.value:Is.textContent,I=C.length;for(i=0;i<p&&c[i]===C[i];i++);var O=p-i;for(y=1;y<=O&&c[p-y]===C[I-y];y++);return ru=C.slice(i,1<y?1-y:void 0)}function su(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function ou(){return!0}function Sx(){return!1}function Rn(i){function c(p,y,C,I,O){this._reactName=p,this._targetInst=C,this.type=y,this.nativeEvent=I,this.target=O,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(p=i[q],this[q]=p?p(I):I[q]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?ou:Sx,this.isPropagationStopped=Sx,this}return F(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),c}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=Rn(pi),Za=F({},pi,{view:0,detail:0}),NN=Rn(Za),$h,Lh,el,iu=F({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==el&&(el&&i.type==="mousemove"?($h=i.screenX-el.screenX,Lh=i.screenY-el.screenY):Lh=$h=0,el=i),$h)},movementY:function(i){return"movementY"in i?i.movementY:Lh}}),kx=Rn(iu),TN=F({},iu,{dataTransfer:0}),RN=Rn(TN),IN=F({},Za,{relatedTarget:0}),Bh=Rn(IN),AN=F({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),PN=Rn(AN),MN=F({},pi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),DN=Rn(MN),FN=F({},pi,{data:0}),jx=Rn(FN),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LN(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=$N[i])?!!c[i]:!1}function Wh(){return LN}var BN=F({},Za,{key:function(i){if(i.key){var c=ON[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=su(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(i){return i.type==="keypress"?su(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?su(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),WN=Rn(BN),VN=F({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cx=Rn(VN),UN=F({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),HN=Rn(UN),GN=F({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qN=Rn(GN),KN=F({},iu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),XN=Rn(KN),YN=[9,13,27,32],Vh=u&&"CompositionEvent"in window,tl=null;u&&"documentMode"in document&&(tl=document.documentMode);var JN=u&&"TextEvent"in window&&!tl,Ex=u&&(!Vh||tl&&8<tl&&11>=tl),_x=" ",Nx=!1;function Tx(i,c){switch(i){case"keyup":return YN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var mi=!1;function QN(i,c){switch(i){case"compositionend":return Rx(c);case"keypress":return c.which!==32?null:(Nx=!0,_x);case"textInput":return i=c.data,i===_x&&Nx?null:i;default:return null}}function ZN(i,c){if(mi)return i==="compositionend"||!Vh&&Tx(i,c)?(i=wx(),ru=Oh=Is=null,mi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ex&&c.locale!=="ko"?null:c.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ix(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!eT[i.type]:c==="textarea"}function Ax(i,c,p,y){Le(y),c=du(c,"onChange"),0<c.length&&(p=new zh("onChange","change",null,p,y),i.push({event:p,listeners:c}))}var nl=null,rl=null;function tT(i){Yx(i,0)}function au(i){var c=bi(i);if(fe(c))return i}function nT(i,c){if(i==="change")return c}var Px=!1;if(u){var Uh;if(u){var Hh="oninput"in document;if(!Hh){var Mx=document.createElement("div");Mx.setAttribute("oninput","return;"),Hh=typeof Mx.oninput=="function"}Uh=Hh}else Uh=!1;Px=Uh&&(!document.documentMode||9<document.documentMode)}function Dx(){nl&&(nl.detachEvent("onpropertychange",Fx),rl=nl=null)}function Fx(i){if(i.propertyName==="value"&&au(rl)){var c=[];Ax(c,rl,i,xn(i)),yt(tT,c)}}function rT(i,c,p){i==="focusin"?(Dx(),nl=c,rl=p,nl.attachEvent("onpropertychange",Fx)):i==="focusout"&&Dx()}function sT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return au(rl)}function oT(i,c){if(i==="click")return au(c)}function iT(i,c){if(i==="input"||i==="change")return au(c)}function aT(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var rr=typeof Object.is=="function"?Object.is:aT;function sl(i,c){if(rr(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var p=Object.keys(i),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var C=p[y];if(!d.call(c,C)||!rr(i[C],c[C]))return!1}return!0}function Ox(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zx(i,c){var p=Ox(i);i=0;for(var y;p;){if(p.nodeType===3){if(y=i+p.textContent.length,i<=c&&y>=c)return{node:p,offset:c-i};i=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ox(p)}}function $x(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?$x(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Lx(){for(var i=window,c=ie();c instanceof i.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)i=c.contentWindow;else break;c=ie(i.document)}return c}function Gh(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function lT(i){var c=Lx(),p=i.focusedElem,y=i.selectionRange;if(c!==p&&p&&p.ownerDocument&&$x(p.ownerDocument.documentElement,p)){if(y!==null&&Gh(p)){if(c=y.start,i=y.end,i===void 0&&(i=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(i,p.value.length);else if(i=(c=p.ownerDocument||document)&&c.defaultView||window,i.getSelection){i=i.getSelection();var C=p.textContent.length,I=Math.min(y.start,C);y=y.end===void 0?I:Math.min(y.end,C),!i.extend&&I>y&&(C=y,y=I,I=C),C=zx(p,I);var O=zx(p,y);C&&O&&(i.rangeCount!==1||i.anchorNode!==C.node||i.anchorOffset!==C.offset||i.focusNode!==O.node||i.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),i.removeAllRanges(),I>y?(i.addRange(c),i.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),i.addRange(c)))}}for(c=[],i=p;i=i.parentNode;)i.nodeType===1&&c.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)i=c[p],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var cT=u&&"documentMode"in document&&11>=document.documentMode,gi=null,qh=null,ol=null,Kh=!1;function Bx(i,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Kh||gi==null||gi!==ie(y)||(y=gi,"selectionStart"in y&&Gh(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ol&&sl(ol,y)||(ol=y,y=du(qh,"onSelect"),0<y.length&&(c=new zh("onSelect","select",null,c,p),i.push({event:c,listeners:y}),c.target=gi)))}function lu(i,c){var p={};return p[i.toLowerCase()]=c.toLowerCase(),p["Webkit"+i]="webkit"+c,p["Moz"+i]="moz"+c,p}var yi={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},Xh={},Wx={};u&&(Wx=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function cu(i){if(Xh[i])return Xh[i];if(!yi[i])return i;var c=yi[i],p;for(p in c)if(c.hasOwnProperty(p)&&p in Wx)return Xh[i]=c[p];return i}var Vx=cu("animationend"),Ux=cu("animationiteration"),Hx=cu("animationstart"),Gx=cu("transitionend"),qx=new Map,Kx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(i,c){qx.set(i,c),a(c,[i])}for(var Yh=0;Yh<Kx.length;Yh++){var Jh=Kx[Yh],uT=Jh.toLowerCase(),dT=Jh[0].toUpperCase()+Jh.slice(1);As(uT,"on"+dT)}As(Vx,"onAnimationEnd"),As(Ux,"onAnimationIteration"),As(Hx,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Gx,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Xx(i,c,p){var y=i.type||"unknown-event";i.currentTarget=p,Sh(y,c,void 0,i),i.currentTarget=null}function Yx(i,c){c=(c&4)!==0;for(var p=0;p<i.length;p++){var y=i[p],C=y.event;y=y.listeners;e:{var I=void 0;if(c)for(var O=y.length-1;0<=O;O--){var q=y[O],Q=q.instance,ae=q.currentTarget;if(q=q.listener,Q!==I&&C.isPropagationStopped())break e;Xx(C,q,ae),I=Q}else for(O=0;O<y.length;O++){if(q=y[O],Q=q.instance,ae=q.currentTarget,q=q.listener,Q!==I&&C.isPropagationStopped())break e;Xx(C,q,ae),I=Q}}}if(bo)throw i=Wa,bo=!1,Wa=null,i}function nt(i,c){var p=c[op];p===void 0&&(p=c[op]=new Set);var y=i+"__bubble";p.has(y)||(Jx(c,i,2,!1),p.add(y))}function Qh(i,c,p){var y=0;c&&(y|=4),Jx(p,i,y,c)}var uu="_reactListening"+Math.random().toString(36).slice(2);function al(i){if(!i[uu]){i[uu]=!0,r.forEach(function(p){p!=="selectionchange"&&(fT.has(p)||Qh(p,!1,i),Qh(p,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[uu]||(c[uu]=!0,Qh("selectionchange",!1,c))}}function Jx(i,c,p,y){switch(bx(c)){case 1:var C=EN;break;case 4:C=_N;break;default:C=Dh}p=C.bind(null,c,p,i),C=void 0,!Tr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),y?C!==void 0?i.addEventListener(c,p,{capture:!0,passive:C}):i.addEventListener(c,p,!0):C!==void 0?i.addEventListener(c,p,{passive:C}):i.addEventListener(c,p,!1)}function Zh(i,c,p,y,C){var I=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var q=y.stateNode.containerInfo;if(q===C||q.nodeType===8&&q.parentNode===C)break;if(O===4)for(O=y.return;O!==null;){var Q=O.tag;if((Q===3||Q===4)&&(Q=O.stateNode.containerInfo,Q===C||Q.nodeType===8&&Q.parentNode===C))return;O=O.return}for(;q!==null;){if(O=ko(q),O===null)return;if(Q=O.tag,Q===5||Q===6){y=I=O;continue e}q=q.parentNode}}y=y.return}yt(function(){var ae=I,pe=xn(p),me=[];e:{var he=qx.get(i);if(he!==void 0){var we=zh,Ce=i;switch(i){case"keypress":if(su(p)===0)break e;case"keydown":case"keyup":we=WN;break;case"focusin":Ce="focus",we=Bh;break;case"focusout":Ce="blur",we=Bh;break;case"beforeblur":case"afterblur":we=Bh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=RN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=HN;break;case Vx:case Ux:case Hx:we=PN;break;case Gx:we=qN;break;case"scroll":we=NN;break;case"wheel":we=XN;break;case"copy":case"cut":case"paste":we=DN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Cx}var Te=(c&4)!==0,kt=!Te&&i==="scroll",re=Te?he!==null?he+"Capture":null:he;Te=[];for(var ee=ae,oe;ee!==null;){oe=ee;var ve=oe.stateNode;if(oe.tag===5&&ve!==null&&(oe=ve,re!==null&&(ve=Ct(ee,re),ve!=null&&Te.push(ll(ee,ve,oe)))),kt)break;ee=ee.return}0<Te.length&&(he=new we(he,Ce,null,p,pe),me.push({event:he,listeners:Te}))}}if((c&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",we=i==="mouseout"||i==="pointerout",he&&p!==Qr&&(Ce=p.relatedTarget||p.fromElement)&&(ko(Ce)||Ce[Zr]))break e;if((we||he)&&(he=pe.window===pe?pe:(he=pe.ownerDocument)?he.defaultView||he.parentWindow:window,we?(Ce=p.relatedTarget||p.toElement,we=ae,Ce=Ce?ko(Ce):null,Ce!==null&&(kt=Ir(Ce),Ce!==kt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(we=null,Ce=ae),we!==Ce)){if(Te=kx,ve="onMouseLeave",re="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Cx,ve="onPointerLeave",re="onPointerEnter",ee="pointer"),kt=we==null?he:bi(we),oe=Ce==null?he:bi(Ce),he=new Te(ve,ee+"leave",we,p,pe),he.target=kt,he.relatedTarget=oe,ve=null,ko(pe)===ae&&(Te=new Te(re,ee+"enter",Ce,p,pe),Te.target=oe,Te.relatedTarget=kt,ve=Te),kt=ve,we&&Ce)t:{for(Te=we,re=Ce,ee=0,oe=Te;oe;oe=xi(oe))ee++;for(oe=0,ve=re;ve;ve=xi(ve))oe++;for(;0<ee-oe;)Te=xi(Te),ee--;for(;0<oe-ee;)re=xi(re),oe--;for(;ee--;){if(Te===re||re!==null&&Te===re.alternate)break t;Te=xi(Te),re=xi(re)}Te=null}else Te=null;we!==null&&Qx(me,he,we,Te,!1),Ce!==null&&kt!==null&&Qx(me,kt,Ce,Te,!0)}}e:{if(he=ae?bi(ae):window,we=he.nodeName&&he.nodeName.toLowerCase(),we==="select"||we==="input"&&he.type==="file")var Re=nT;else if(Ix(he))if(Px)Re=iT;else{Re=sT;var Pe=rT}else(we=he.nodeName)&&we.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(Re=oT);if(Re&&(Re=Re(i,ae))){Ax(me,Re,p,pe);break e}Pe&&Pe(i,he,ae),i==="focusout"&&(Pe=he._wrapperState)&&Pe.controlled&&he.type==="number"&&ze(he,"number",he.value)}switch(Pe=ae?bi(ae):window,i){case"focusin":(Ix(Pe)||Pe.contentEditable==="true")&&(gi=Pe,qh=ae,ol=null);break;case"focusout":ol=qh=gi=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Bx(me,p,pe);break;case"selectionchange":if(cT)break;case"keydown":case"keyup":Bx(me,p,pe)}var Me;if(Vh)e:{switch(i){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else mi?Tx(i,p)&&($e="onCompositionEnd"):i==="keydown"&&p.keyCode===229&&($e="onCompositionStart");$e&&(Ex&&p.locale!=="ko"&&(mi||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&mi&&(Me=wx()):(Is=pe,Oh="value"in Is?Is.value:Is.textContent,mi=!0)),Pe=du(ae,$e),0<Pe.length&&($e=new jx($e,i,null,p,pe),me.push({event:$e,listeners:Pe}),Me?$e.data=Me:(Me=Rx(p),Me!==null&&($e.data=Me)))),(Me=JN?QN(i,p):ZN(i,p))&&(ae=du(ae,"onBeforeInput"),0<ae.length&&(pe=new jx("onBeforeInput","beforeinput",null,p,pe),me.push({event:pe,listeners:ae}),pe.data=Me))}Yx(me,c)})}function ll(i,c,p){return{instance:i,listener:c,currentTarget:p}}function du(i,c){for(var p=c+"Capture",y=[];i!==null;){var C=i,I=C.stateNode;C.tag===5&&I!==null&&(C=I,I=Ct(i,p),I!=null&&y.unshift(ll(i,I,C)),I=Ct(i,c),I!=null&&y.push(ll(i,I,C))),i=i.return}return y}function xi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Qx(i,c,p,y,C){for(var I=c._reactName,O=[];p!==null&&p!==y;){var q=p,Q=q.alternate,ae=q.stateNode;if(Q!==null&&Q===y)break;q.tag===5&&ae!==null&&(q=ae,C?(Q=Ct(p,I),Q!=null&&O.unshift(ll(p,Q,q))):C||(Q=Ct(p,I),Q!=null&&O.push(ll(p,Q,q)))),p=p.return}O.length!==0&&i.push({event:c,listeners:O})}var hT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function Zx(i){return(typeof i=="string"?i:""+i).replace(hT,`
`).replace(pT,"")}function fu(i,c,p){if(c=Zx(c),Zx(i)!==c&&p)throw Error(n(425))}function hu(){}var ep=null,tp=null;function np(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(i){return ev.resolve(null).then(i).catch(yT)}:rp;function yT(i){setTimeout(function(){throw i})}function sp(i,c){var p=c,y=0;do{var C=p.nextSibling;if(i.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"){if(y===0){i.removeChild(C),Qa(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=C}while(p);Qa(c)}function Ps(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return i}function tv(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var p=i.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return i;c--}else p==="/$"&&c++}i=i.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Pr="__reactFiber$"+vi,cl="__reactProps$"+vi,Zr="__reactContainer$"+vi,op="__reactEvents$"+vi,xT="__reactListeners$"+vi,vT="__reactHandles$"+vi;function ko(i){var c=i[Pr];if(c)return c;for(var p=i.parentNode;p;){if(c=p[Zr]||p[Pr]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(i=tv(i);i!==null;){if(p=i[Pr])return p;i=tv(i)}return c}i=p,p=i.parentNode}return null}function ul(i){return i=i[Pr]||i[Zr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function bi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function pu(i){return i[cl]||null}var ip=[],wi=-1;function Ms(i){return{current:i}}function rt(i){0>wi||(i.current=ip[wi],ip[wi]=null,wi--)}function Qe(i,c){wi++,ip[wi]=i.current,i.current=c}var Ds={},nn=Ms(Ds),bn=Ms(!1),jo=Ds;function Si(i,c){var p=i.type.contextTypes;if(!p)return Ds;var y=i.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var C={},I;for(I in p)C[I]=c[I];return y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=c,i.__reactInternalMemoizedMaskedChildContext=C),C}function wn(i){return i=i.childContextTypes,i!=null}function mu(){rt(bn),rt(nn)}function nv(i,c,p){if(nn.current!==Ds)throw Error(n(168));Qe(nn,c),Qe(bn,p)}function rv(i,c,p){var y=i.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var C in y)if(!(C in c))throw Error(n(108,ne(i)||"Unknown",C));return F({},p,y)}function gu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ds,jo=nn.current,Qe(nn,i),Qe(bn,bn.current),!0}function sv(i,c,p){var y=i.stateNode;if(!y)throw Error(n(169));p?(i=rv(i,c,jo),y.__reactInternalMemoizedMergedChildContext=i,rt(bn),rt(nn),Qe(nn,i)):rt(bn),Qe(bn,p)}var es=null,yu=!1,ap=!1;function ov(i){es===null?es=[i]:es.push(i)}function bT(i){yu=!0,ov(i)}function Fs(){if(!ap&&es!==null){ap=!0;var i=0,c=Xe;try{var p=es;for(Xe=1;i<p.length;i++){var y=p[i];do y=y(!0);while(y!==null)}es=null,yu=!1}catch(C){throw es!==null&&(es=es.slice(i+1)),Gc(Ha,Fs),C}finally{Xe=c,ap=!1}}return null}var ki=[],ji=0,xu=null,vu=0,Un=[],Hn=0,Co=null,ts=1,ns="";function Eo(i,c){ki[ji++]=vu,ki[ji++]=xu,xu=i,vu=c}function iv(i,c,p){Un[Hn++]=ts,Un[Hn++]=ns,Un[Hn++]=Co,Co=i;var y=ts;i=ns;var C=32-Tn(y)-1;y&=~(1<<C),p+=1;var I=32-Tn(c)+C;if(30<I){var O=C-C%5;I=(y&(1<<O)-1).toString(32),y>>=O,C-=O,ts=1<<32-Tn(c)+C|p<<C|y,ns=I+i}else ts=1<<I|p<<C|y,ns=i}function lp(i){i.return!==null&&(Eo(i,1),iv(i,1,0))}function cp(i){for(;i===xu;)xu=ki[--ji],ki[ji]=null,vu=ki[--ji],ki[ji]=null;for(;i===Co;)Co=Un[--Hn],Un[Hn]=null,ns=Un[--Hn],Un[Hn]=null,ts=Un[--Hn],Un[Hn]=null}var In=null,An=null,st=!1,sr=null;function av(i,c){var p=Xn(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=i,c=i.deletions,c===null?(i.deletions=[p],i.flags|=16):c.push(p)}function lv(i,c){switch(i.tag){case 5:var p=i.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(i.stateNode=c,In=i,An=Ps(c.firstChild),!0):!1;case 6:return c=i.pendingProps===""||c.nodeType!==3?null:c,c!==null?(i.stateNode=c,In=i,An=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Co!==null?{id:ts,overflow:ns}:null,i.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Xn(18,null,null,0),p.stateNode=c,p.return=i,i.child=p,In=i,An=null,!0):!1;default:return!1}}function up(i){return(i.mode&1)!==0&&(i.flags&128)===0}function dp(i){if(st){var c=An;if(c){var p=c;if(!lv(i,c)){if(up(i))throw Error(n(418));c=Ps(p.nextSibling);var y=In;c&&lv(i,c)?av(y,p):(i.flags=i.flags&-4097|2,st=!1,In=i)}}else{if(up(i))throw Error(n(418));i.flags=i.flags&-4097|2,st=!1,In=i}}}function cv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;In=i}function bu(i){if(i!==In)return!1;if(!st)return cv(i),st=!0,!1;var c;if((c=i.tag!==3)&&!(c=i.tag!==5)&&(c=i.type,c=c!=="head"&&c!=="body"&&!np(i.type,i.memoizedProps)),c&&(c=An)){if(up(i))throw uv(),Error(n(418));for(;c;)av(i,c),c=Ps(c.nextSibling)}if(cv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8){var p=i.data;if(p==="/$"){if(c===0){An=Ps(i.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}i=i.nextSibling}An=null}}else An=In?Ps(i.stateNode.nextSibling):null;return!0}function uv(){for(var i=An;i;)i=Ps(i.nextSibling)}function Ci(){An=In=null,st=!1}function fp(i){sr===null?sr=[i]:sr.push(i)}var wT=E.ReactCurrentBatchConfig;function dl(i,c,p){if(i=p.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var y=p.stateNode}if(!y)throw Error(n(147,i));var C=y,I=""+i;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===I?c.ref:(c=function(O){var q=C.refs;O===null?delete q[I]:q[I]=O},c._stringRef=I,c)}if(typeof i!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,i))}return i}function wu(i,c){throw i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i))}function dv(i){var c=i._init;return c(i._payload)}function fv(i){function c(re,ee){if(i){var oe=re.deletions;oe===null?(re.deletions=[ee],re.flags|=16):oe.push(ee)}}function p(re,ee){if(!i)return null;for(;ee!==null;)c(re,ee),ee=ee.sibling;return null}function y(re,ee){for(re=new Map;ee!==null;)ee.key!==null?re.set(ee.key,ee):re.set(ee.index,ee),ee=ee.sibling;return re}function C(re,ee){return re=Us(re,ee),re.index=0,re.sibling=null,re}function I(re,ee,oe){return re.index=oe,i?(oe=re.alternate,oe!==null?(oe=oe.index,oe<ee?(re.flags|=2,ee):oe):(re.flags|=2,ee)):(re.flags|=1048576,ee)}function O(re){return i&&re.alternate===null&&(re.flags|=2),re}function q(re,ee,oe,ve){return ee===null||ee.tag!==6?(ee=rm(oe,re.mode,ve),ee.return=re,ee):(ee=C(ee,oe),ee.return=re,ee)}function Q(re,ee,oe,ve){var Re=oe.type;return Re===R?pe(re,ee,oe.props.children,ve,oe.key):ee!==null&&(ee.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===z&&dv(Re)===ee.type)?(ve=C(ee,oe.props),ve.ref=dl(re,ee,oe),ve.return=re,ve):(ve=Hu(oe.type,oe.key,oe.props,null,re.mode,ve),ve.ref=dl(re,ee,oe),ve.return=re,ve)}function ae(re,ee,oe,ve){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=sm(oe,re.mode,ve),ee.return=re,ee):(ee=C(ee,oe.children||[]),ee.return=re,ee)}function pe(re,ee,oe,ve,Re){return ee===null||ee.tag!==7?(ee=Mo(oe,re.mode,ve,Re),ee.return=re,ee):(ee=C(ee,oe),ee.return=re,ee)}function me(re,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=rm(""+ee,re.mode,oe),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return oe=Hu(ee.type,ee.key,ee.props,null,re.mode,oe),oe.ref=dl(re,null,ee),oe.return=re,oe;case _:return ee=sm(ee,re.mode,oe),ee.return=re,ee;case z:var ve=ee._init;return me(re,ve(ee._payload),oe)}if(gt(ee)||U(ee))return ee=Mo(ee,re.mode,oe,null),ee.return=re,ee;wu(re,ee)}return null}function he(re,ee,oe,ve){var Re=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Re!==null?null:q(re,ee,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return oe.key===Re?Q(re,ee,oe,ve):null;case _:return oe.key===Re?ae(re,ee,oe,ve):null;case z:return Re=oe._init,he(re,ee,Re(oe._payload),ve)}if(gt(oe)||U(oe))return Re!==null?null:pe(re,ee,oe,ve,null);wu(re,oe)}return null}function we(re,ee,oe,ve,Re){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return re=re.get(oe)||null,q(ee,re,""+ve,Re);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:return re=re.get(ve.key===null?oe:ve.key)||null,Q(ee,re,ve,Re);case _:return re=re.get(ve.key===null?oe:ve.key)||null,ae(ee,re,ve,Re);case z:var Pe=ve._init;return we(re,ee,oe,Pe(ve._payload),Re)}if(gt(ve)||U(ve))return re=re.get(oe)||null,pe(ee,re,ve,Re,null);wu(ee,ve)}return null}function Ce(re,ee,oe,ve){for(var Re=null,Pe=null,Me=ee,$e=ee=0,Ut=null;Me!==null&&$e<oe.length;$e++){Me.index>$e?(Ut=Me,Me=null):Ut=Me.sibling;var Ke=he(re,Me,oe[$e],ve);if(Ke===null){Me===null&&(Me=Ut);break}i&&Me&&Ke.alternate===null&&c(re,Me),ee=I(Ke,ee,$e),Pe===null?Re=Ke:Pe.sibling=Ke,Pe=Ke,Me=Ut}if($e===oe.length)return p(re,Me),st&&Eo(re,$e),Re;if(Me===null){for(;$e<oe.length;$e++)Me=me(re,oe[$e],ve),Me!==null&&(ee=I(Me,ee,$e),Pe===null?Re=Me:Pe.sibling=Me,Pe=Me);return st&&Eo(re,$e),Re}for(Me=y(re,Me);$e<oe.length;$e++)Ut=we(Me,re,$e,oe[$e],ve),Ut!==null&&(i&&Ut.alternate!==null&&Me.delete(Ut.key===null?$e:Ut.key),ee=I(Ut,ee,$e),Pe===null?Re=Ut:Pe.sibling=Ut,Pe=Ut);return i&&Me.forEach(function(Hs){return c(re,Hs)}),st&&Eo(re,$e),Re}function Te(re,ee,oe,ve){var Re=U(oe);if(typeof Re!="function")throw Error(n(150));if(oe=Re.call(oe),oe==null)throw Error(n(151));for(var Pe=Re=null,Me=ee,$e=ee=0,Ut=null,Ke=oe.next();Me!==null&&!Ke.done;$e++,Ke=oe.next()){Me.index>$e?(Ut=Me,Me=null):Ut=Me.sibling;var Hs=he(re,Me,Ke.value,ve);if(Hs===null){Me===null&&(Me=Ut);break}i&&Me&&Hs.alternate===null&&c(re,Me),ee=I(Hs,ee,$e),Pe===null?Re=Hs:Pe.sibling=Hs,Pe=Hs,Me=Ut}if(Ke.done)return p(re,Me),st&&Eo(re,$e),Re;if(Me===null){for(;!Ke.done;$e++,Ke=oe.next())Ke=me(re,Ke.value,ve),Ke!==null&&(ee=I(Ke,ee,$e),Pe===null?Re=Ke:Pe.sibling=Ke,Pe=Ke);return st&&Eo(re,$e),Re}for(Me=y(re,Me);!Ke.done;$e++,Ke=oe.next())Ke=we(Me,re,$e,Ke.value,ve),Ke!==null&&(i&&Ke.alternate!==null&&Me.delete(Ke.key===null?$e:Ke.key),ee=I(Ke,ee,$e),Pe===null?Re=Ke:Pe.sibling=Ke,Pe=Ke);return i&&Me.forEach(function(eR){return c(re,eR)}),st&&Eo(re,$e),Re}function kt(re,ee,oe,ve){if(typeof oe=="object"&&oe!==null&&oe.type===R&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:e:{for(var Re=oe.key,Pe=ee;Pe!==null;){if(Pe.key===Re){if(Re=oe.type,Re===R){if(Pe.tag===7){p(re,Pe.sibling),ee=C(Pe,oe.props.children),ee.return=re,re=ee;break e}}else if(Pe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===z&&dv(Re)===Pe.type){p(re,Pe.sibling),ee=C(Pe,oe.props),ee.ref=dl(re,Pe,oe),ee.return=re,re=ee;break e}p(re,Pe);break}else c(re,Pe);Pe=Pe.sibling}oe.type===R?(ee=Mo(oe.props.children,re.mode,ve,oe.key),ee.return=re,re=ee):(ve=Hu(oe.type,oe.key,oe.props,null,re.mode,ve),ve.ref=dl(re,ee,oe),ve.return=re,re=ve)}return O(re);case _:e:{for(Pe=oe.key;ee!==null;){if(ee.key===Pe)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){p(re,ee.sibling),ee=C(ee,oe.children||[]),ee.return=re,re=ee;break e}else{p(re,ee);break}else c(re,ee);ee=ee.sibling}ee=sm(oe,re.mode,ve),ee.return=re,re=ee}return O(re);case z:return Pe=oe._init,kt(re,ee,Pe(oe._payload),ve)}if(gt(oe))return Ce(re,ee,oe,ve);if(U(oe))return Te(re,ee,oe,ve);wu(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(p(re,ee.sibling),ee=C(ee,oe),ee.return=re,re=ee):(p(re,ee),ee=rm(oe,re.mode,ve),ee.return=re,re=ee),O(re)):p(re,ee)}return kt}var Ei=fv(!0),hv=fv(!1),Su=Ms(null),ku=null,_i=null,hp=null;function pp(){hp=_i=ku=null}function mp(i){var c=Su.current;rt(Su),i._currentValue=c}function gp(i,c,p){for(;i!==null;){var y=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),i===p)break;i=i.return}}function Ni(i,c){ku=i,hp=_i=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&c)!==0&&(Sn=!0),i.firstContext=null)}function Gn(i){var c=i._currentValue;if(hp!==i)if(i={context:i,memoizedValue:c,next:null},_i===null){if(ku===null)throw Error(n(308));_i=i,ku.dependencies={lanes:0,firstContext:i}}else _i=_i.next=i;return c}var _o=null;function yp(i){_o===null?_o=[i]:_o.push(i)}function pv(i,c,p,y){var C=c.interleaved;return C===null?(p.next=p,yp(c)):(p.next=C.next,C.next=p),c.interleaved=p,rs(i,y)}function rs(i,c){i.lanes|=c;var p=i.alternate;for(p!==null&&(p.lanes|=c),p=i,i=i.return;i!==null;)i.childLanes|=c,p=i.alternate,p!==null&&(p.childLanes|=c),p=i,i=i.return;return p.tag===3?p.stateNode:null}var Os=!1;function xp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ss(i,c){return{eventTime:i,lane:c,tag:0,payload:null,callback:null,next:null}}function zs(i,c,p){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,(qe&2)!==0){var C=y.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),y.pending=c,rs(i,p)}return C=y.interleaved,C===null?(c.next=c,yp(y)):(c.next=C.next,C.next=c),y.interleaved=c,rs(i,p)}function ju(i,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=i.pendingLanes,p|=y,c.lanes=p,Ah(i,p)}}function gv(i,c){var p=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var C=null,I=null;if(p=p.firstBaseUpdate,p!==null){do{var O={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};I===null?C=I=O:I=I.next=O,p=p.next}while(p!==null);I===null?C=I=c:I=I.next=c}else C=I=c;p={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:y.shared,effects:y.effects},i.updateQueue=p;return}i=p.lastBaseUpdate,i===null?p.firstBaseUpdate=c:i.next=c,p.lastBaseUpdate=c}function Cu(i,c,p,y){var C=i.updateQueue;Os=!1;var I=C.firstBaseUpdate,O=C.lastBaseUpdate,q=C.shared.pending;if(q!==null){C.shared.pending=null;var Q=q,ae=Q.next;Q.next=null,O===null?I=ae:O.next=ae,O=Q;var pe=i.alternate;pe!==null&&(pe=pe.updateQueue,q=pe.lastBaseUpdate,q!==O&&(q===null?pe.firstBaseUpdate=ae:q.next=ae,pe.lastBaseUpdate=Q))}if(I!==null){var me=C.baseState;O=0,pe=ae=Q=null,q=I;do{var he=q.lane,we=q.eventTime;if((y&he)===he){pe!==null&&(pe=pe.next={eventTime:we,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Ce=i,Te=q;switch(he=c,we=p,Te.tag){case 1:if(Ce=Te.payload,typeof Ce=="function"){me=Ce.call(we,me,he);break e}me=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Te.payload,he=typeof Ce=="function"?Ce.call(we,me,he):Ce,he==null)break e;me=F({},me,he);break e;case 2:Os=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,he=C.effects,he===null?C.effects=[q]:he.push(q))}else we={eventTime:we,lane:he,tag:q.tag,payload:q.payload,callback:q.callback,next:null},pe===null?(ae=pe=we,Q=me):pe=pe.next=we,O|=he;if(q=q.next,q===null){if(q=C.shared.pending,q===null)break;he=q,q=he.next,he.next=null,C.lastBaseUpdate=he,C.shared.pending=null}}while(!0);if(pe===null&&(Q=me),C.baseState=Q,C.firstBaseUpdate=ae,C.lastBaseUpdate=pe,c=C.shared.interleaved,c!==null){C=c;do O|=C.lane,C=C.next;while(C!==c)}else I===null&&(C.shared.lanes=0);Ro|=O,i.lanes=O,i.memoizedState=me}}function yv(i,c,p){if(i=c.effects,c.effects=null,i!==null)for(c=0;c<i.length;c++){var y=i[c],C=y.callback;if(C!==null){if(y.callback=null,y=p,typeof C!="function")throw Error(n(191,C));C.call(y)}}}var fl={},Mr=Ms(fl),hl=Ms(fl),pl=Ms(fl);function No(i){if(i===fl)throw Error(n(174));return i}function vp(i,c){switch(Qe(pl,c),Qe(hl,i),Qe(Mr,fl),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:At(null,"");break;default:i=i===8?c.parentNode:c,c=i.namespaceURI||null,i=i.tagName,c=At(c,i)}rt(Mr),Qe(Mr,c)}function Ti(){rt(Mr),rt(hl),rt(pl)}function xv(i){No(pl.current);var c=No(Mr.current),p=At(c,i.type);c!==p&&(Qe(hl,i),Qe(Mr,p))}function bp(i){hl.current===i&&(rt(Mr),rt(hl))}var dt=Ms(0);function Eu(i){for(var c=i;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var wp=[];function Sp(){for(var i=0;i<wp.length;i++)wp[i]._workInProgressVersionPrimary=null;wp.length=0}var _u=E.ReactCurrentDispatcher,kp=E.ReactCurrentBatchConfig,To=0,ft=null,Mt=null,Wt=null,Nu=!1,ml=!1,gl=0,ST=0;function rn(){throw Error(n(321))}function jp(i,c){if(c===null)return!1;for(var p=0;p<c.length&&p<i.length;p++)if(!rr(i[p],c[p]))return!1;return!0}function Cp(i,c,p,y,C,I){if(To=I,ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,_u.current=i===null||i.memoizedState===null?ET:_T,i=p(y,C),ml){I=0;do{if(ml=!1,gl=0,25<=I)throw Error(n(301));I+=1,Wt=Mt=null,c.updateQueue=null,_u.current=NT,i=p(y,C)}while(ml)}if(_u.current=Iu,c=Mt!==null&&Mt.next!==null,To=0,Wt=Mt=ft=null,Nu=!1,c)throw Error(n(300));return i}function Ep(){var i=gl!==0;return gl=0,i}function Dr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?ft.memoizedState=Wt=i:Wt=Wt.next=i,Wt}function qn(){if(Mt===null){var i=ft.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var c=Wt===null?ft.memoizedState:Wt.next;if(c!==null)Wt=c,Mt=i;else{if(i===null)throw Error(n(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Wt===null?ft.memoizedState=Wt=i:Wt=Wt.next=i}return Wt}function yl(i,c){return typeof c=="function"?c(i):c}function _p(i){var c=qn(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var y=Mt,C=y.baseQueue,I=p.pending;if(I!==null){if(C!==null){var O=C.next;C.next=I.next,I.next=O}y.baseQueue=C=I,p.pending=null}if(C!==null){I=C.next,y=y.baseState;var q=O=null,Q=null,ae=I;do{var pe=ae.lane;if((To&pe)===pe)Q!==null&&(Q=Q.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),y=ae.hasEagerState?ae.eagerState:i(y,ae.action);else{var me={lane:pe,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};Q===null?(q=Q=me,O=y):Q=Q.next=me,ft.lanes|=pe,Ro|=pe}ae=ae.next}while(ae!==null&&ae!==I);Q===null?O=y:Q.next=q,rr(y,c.memoizedState)||(Sn=!0),c.memoizedState=y,c.baseState=O,c.baseQueue=Q,p.lastRenderedState=y}if(i=p.interleaved,i!==null){C=i;do I=C.lane,ft.lanes|=I,Ro|=I,C=C.next;while(C!==i)}else C===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Np(i){var c=qn(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var y=p.dispatch,C=p.pending,I=c.memoizedState;if(C!==null){p.pending=null;var O=C=C.next;do I=i(I,O.action),O=O.next;while(O!==C);rr(I,c.memoizedState)||(Sn=!0),c.memoizedState=I,c.baseQueue===null&&(c.baseState=I),p.lastRenderedState=I}return[I,y]}function vv(){}function bv(i,c){var p=ft,y=qn(),C=c(),I=!rr(y.memoizedState,C);if(I&&(y.memoizedState=C,Sn=!0),y=y.queue,Tp(kv.bind(null,p,y,i),[i]),y.getSnapshot!==c||I||Wt!==null&&Wt.memoizedState.tag&1){if(p.flags|=2048,xl(9,Sv.bind(null,p,y,C,c),void 0,null),Vt===null)throw Error(n(349));(To&30)!==0||wv(p,c,C)}return C}function wv(i,c,p){i.flags|=16384,i={getSnapshot:c,value:p},c=ft.updateQueue,c===null?(c={lastEffect:null,stores:null},ft.updateQueue=c,c.stores=[i]):(p=c.stores,p===null?c.stores=[i]:p.push(i))}function Sv(i,c,p,y){c.value=p,c.getSnapshot=y,jv(c)&&Cv(i)}function kv(i,c,p){return p(function(){jv(c)&&Cv(i)})}function jv(i){var c=i.getSnapshot;i=i.value;try{var p=c();return!rr(i,p)}catch{return!0}}function Cv(i){var c=rs(i,1);c!==null&&lr(c,i,1,-1)}function Ev(i){var c=Dr();return typeof i=="function"&&(i=i()),c.memoizedState=c.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:i},c.queue=i,i=i.dispatch=CT.bind(null,ft,i),[c.memoizedState,i]}function xl(i,c,p,y){return i={tag:i,create:c,destroy:p,deps:y,next:null},c=ft.updateQueue,c===null?(c={lastEffect:null,stores:null},ft.updateQueue=c,c.lastEffect=i.next=i):(p=c.lastEffect,p===null?c.lastEffect=i.next=i:(y=p.next,p.next=i,i.next=y,c.lastEffect=i)),i}function _v(){return qn().memoizedState}function Tu(i,c,p,y){var C=Dr();ft.flags|=i,C.memoizedState=xl(1|c,p,void 0,y===void 0?null:y)}function Ru(i,c,p,y){var C=qn();y=y===void 0?null:y;var I=void 0;if(Mt!==null){var O=Mt.memoizedState;if(I=O.destroy,y!==null&&jp(y,O.deps)){C.memoizedState=xl(c,p,I,y);return}}ft.flags|=i,C.memoizedState=xl(1|c,p,I,y)}function Nv(i,c){return Tu(8390656,8,i,c)}function Tp(i,c){return Ru(2048,8,i,c)}function Tv(i,c){return Ru(4,2,i,c)}function Rv(i,c){return Ru(4,4,i,c)}function Iv(i,c){if(typeof c=="function")return i=i(),c(i),function(){c(null)};if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function Av(i,c,p){return p=p!=null?p.concat([i]):null,Ru(4,4,Iv.bind(null,c,i),p)}function Rp(){}function Pv(i,c){var p=qn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&jp(c,y[1])?y[0]:(p.memoizedState=[i,c],i)}function Mv(i,c){var p=qn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&jp(c,y[1])?y[0]:(i=i(),p.memoizedState=[i,c],i)}function Dv(i,c,p){return(To&21)===0?(i.baseState&&(i.baseState=!1,Sn=!0),i.memoizedState=p):(rr(p,c)||(p=fi(),ft.lanes|=p,Ro|=p,i.baseState=!0),c)}function kT(i,c){var p=Xe;Xe=p!==0&&4>p?p:4,i(!0);var y=kp.transition;kp.transition={};try{i(!1),c()}finally{Xe=p,kp.transition=y}}function Fv(){return qn().memoizedState}function jT(i,c,p){var y=Ws(i);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Ov(i))zv(c,p);else if(p=pv(i,c,p,y),p!==null){var C=dn();lr(p,i,y,C),$v(p,c,y)}}function CT(i,c,p){var y=Ws(i),C={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ov(i))zv(c,C);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=c.lastRenderedReducer,I!==null))try{var O=c.lastRenderedState,q=I(O,p);if(C.hasEagerState=!0,C.eagerState=q,rr(q,O)){var Q=c.interleaved;Q===null?(C.next=C,yp(c)):(C.next=Q.next,Q.next=C),c.interleaved=C;return}}catch{}finally{}p=pv(i,c,C,y),p!==null&&(C=dn(),lr(p,i,y,C),$v(p,c,y))}}function Ov(i){var c=i.alternate;return i===ft||c!==null&&c===ft}function zv(i,c){ml=Nu=!0;var p=i.pending;p===null?c.next=c:(c.next=p.next,p.next=c),i.pending=c}function $v(i,c,p){if((p&4194240)!==0){var y=c.lanes;y&=i.pendingLanes,p|=y,c.lanes=p,Ah(i,p)}}var Iu={readContext:Gn,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},ET={readContext:Gn,useCallback:function(i,c){return Dr().memoizedState=[i,c===void 0?null:c],i},useContext:Gn,useEffect:Nv,useImperativeHandle:function(i,c,p){return p=p!=null?p.concat([i]):null,Tu(4194308,4,Iv.bind(null,c,i),p)},useLayoutEffect:function(i,c){return Tu(4194308,4,i,c)},useInsertionEffect:function(i,c){return Tu(4,2,i,c)},useMemo:function(i,c){var p=Dr();return c=c===void 0?null:c,i=i(),p.memoizedState=[i,c],i},useReducer:function(i,c,p){var y=Dr();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:c},y.queue=i,i=i.dispatch=jT.bind(null,ft,i),[y.memoizedState,i]},useRef:function(i){var c=Dr();return i={current:i},c.memoizedState=i},useState:Ev,useDebugValue:Rp,useDeferredValue:function(i){return Dr().memoizedState=i},useTransition:function(){var i=Ev(!1),c=i[0];return i=kT.bind(null,i[1]),Dr().memoizedState=i,[c,i]},useMutableSource:function(){},useSyncExternalStore:function(i,c,p){var y=ft,C=Dr();if(st){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),Vt===null)throw Error(n(349));(To&30)!==0||wv(y,c,p)}C.memoizedState=p;var I={value:p,getSnapshot:c};return C.queue=I,Nv(kv.bind(null,y,I,i),[i]),y.flags|=2048,xl(9,Sv.bind(null,y,I,p,c),void 0,null),p},useId:function(){var i=Dr(),c=Vt.identifierPrefix;if(st){var p=ns,y=ts;p=(y&~(1<<32-Tn(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=gl++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=ST++,c=":"+c+"r"+p.toString(32)+":";return i.memoizedState=c},unstable_isNewReconciler:!1},_T={readContext:Gn,useCallback:Pv,useContext:Gn,useEffect:Tp,useImperativeHandle:Av,useInsertionEffect:Tv,useLayoutEffect:Rv,useMemo:Mv,useReducer:_p,useRef:_v,useState:function(){return _p(yl)},useDebugValue:Rp,useDeferredValue:function(i){var c=qn();return Dv(c,Mt.memoizedState,i)},useTransition:function(){var i=_p(yl)[0],c=qn().memoizedState;return[i,c]},useMutableSource:vv,useSyncExternalStore:bv,useId:Fv,unstable_isNewReconciler:!1},NT={readContext:Gn,useCallback:Pv,useContext:Gn,useEffect:Tp,useImperativeHandle:Av,useInsertionEffect:Tv,useLayoutEffect:Rv,useMemo:Mv,useReducer:Np,useRef:_v,useState:function(){return Np(yl)},useDebugValue:Rp,useDeferredValue:function(i){var c=qn();return Mt===null?c.memoizedState=i:Dv(c,Mt.memoizedState,i)},useTransition:function(){var i=Np(yl)[0],c=qn().memoizedState;return[i,c]},useMutableSource:vv,useSyncExternalStore:bv,useId:Fv,unstable_isNewReconciler:!1};function or(i,c){if(i&&i.defaultProps){c=F({},c),i=i.defaultProps;for(var p in i)c[p]===void 0&&(c[p]=i[p]);return c}return c}function Ip(i,c,p,y){c=i.memoizedState,p=p(y,c),p=p==null?c:F({},c,p),i.memoizedState=p,i.lanes===0&&(i.updateQueue.baseState=p)}var Au={isMounted:function(i){return(i=i._reactInternals)?Ir(i)===i:!1},enqueueSetState:function(i,c,p){i=i._reactInternals;var y=dn(),C=Ws(i),I=ss(y,C);I.payload=c,p!=null&&(I.callback=p),c=zs(i,I,C),c!==null&&(lr(c,i,C,y),ju(c,i,C))},enqueueReplaceState:function(i,c,p){i=i._reactInternals;var y=dn(),C=Ws(i),I=ss(y,C);I.tag=1,I.payload=c,p!=null&&(I.callback=p),c=zs(i,I,C),c!==null&&(lr(c,i,C,y),ju(c,i,C))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var p=dn(),y=Ws(i),C=ss(p,y);C.tag=2,c!=null&&(C.callback=c),c=zs(i,C,y),c!==null&&(lr(c,i,y,p),ju(c,i,y))}};function Lv(i,c,p,y,C,I,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,I,O):c.prototype&&c.prototype.isPureReactComponent?!sl(p,y)||!sl(C,I):!0}function Bv(i,c,p){var y=!1,C=Ds,I=c.contextType;return typeof I=="object"&&I!==null?I=Gn(I):(C=wn(c)?jo:nn.current,y=c.contextTypes,I=(y=y!=null)?Si(i,C):Ds),c=new c(p,I),i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Au,i.stateNode=c,c._reactInternals=i,y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=C,i.__reactInternalMemoizedMaskedChildContext=I),c}function Wv(i,c,p,y){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==i&&Au.enqueueReplaceState(c,c.state,null)}function Ap(i,c,p,y){var C=i.stateNode;C.props=p,C.state=i.memoizedState,C.refs={},xp(i);var I=c.contextType;typeof I=="object"&&I!==null?C.context=Gn(I):(I=wn(c)?jo:nn.current,C.context=Si(i,I)),C.state=i.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Ip(i,c,I,p),C.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&Au.enqueueReplaceState(C,C.state,null),Cu(i,p,C,y),C.state=i.memoizedState),typeof C.componentDidMount=="function"&&(i.flags|=4194308)}function Ri(i,c){try{var p="",y=c;do p+=G(y),y=y.return;while(y);var C=p}catch(I){C=`
Error generating stack: `+I.message+`
`+I.stack}return{value:i,source:c,stack:C,digest:null}}function Pp(i,c,p){return{value:i,source:null,stack:p??null,digest:c??null}}function Mp(i,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var TT=typeof WeakMap=="function"?WeakMap:Map;function Vv(i,c,p){p=ss(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){$u||($u=!0,Xp=y),Mp(i,c)},p}function Uv(i,c,p){p=ss(-1,p),p.tag=3;var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var C=c.value;p.payload=function(){return y(C)},p.callback=function(){Mp(i,c)}}var I=i.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(p.callback=function(){Mp(i,c),typeof y!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),p}function Hv(i,c,p){var y=i.pingCache;if(y===null){y=i.pingCache=new TT;var C=new Set;y.set(c,C)}else C=y.get(c),C===void 0&&(C=new Set,y.set(c,C));C.has(p)||(C.add(p),i=VT.bind(null,i,c,p),c.then(i,i))}function Gv(i){do{var c;if((c=i.tag===13)&&(c=i.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return i;i=i.return}while(i!==null);return null}function qv(i,c,p,y,C){return(i.mode&1)===0?(i===c?i.flags|=65536:(i.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=ss(-1,1),c.tag=2,zs(p,c,1))),p.lanes|=1),i):(i.flags|=65536,i.lanes=C,i)}var RT=E.ReactCurrentOwner,Sn=!1;function un(i,c,p,y){c.child=i===null?hv(c,null,p,y):Ei(c,i.child,p,y)}function Kv(i,c,p,y,C){p=p.render;var I=c.ref;return Ni(c,C),y=Cp(i,c,p,y,I,C),p=Ep(),i!==null&&!Sn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~C,os(i,c,C)):(st&&p&&lp(c),c.flags|=1,un(i,c,y,C),c.child)}function Xv(i,c,p,y,C){if(i===null){var I=p.type;return typeof I=="function"&&!nm(I)&&I.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=I,Yv(i,c,I,y,C)):(i=Hu(p.type,null,y,c,c.mode,C),i.ref=c.ref,i.return=c,c.child=i)}if(I=i.child,(i.lanes&C)===0){var O=I.memoizedProps;if(p=p.compare,p=p!==null?p:sl,p(O,y)&&i.ref===c.ref)return os(i,c,C)}return c.flags|=1,i=Us(I,y),i.ref=c.ref,i.return=c,c.child=i}function Yv(i,c,p,y,C){if(i!==null){var I=i.memoizedProps;if(sl(I,y)&&i.ref===c.ref)if(Sn=!1,c.pendingProps=y=I,(i.lanes&C)!==0)(i.flags&131072)!==0&&(Sn=!0);else return c.lanes=i.lanes,os(i,c,C)}return Dp(i,c,p,y,C)}function Jv(i,c,p){var y=c.pendingProps,C=y.children,I=i!==null?i.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ai,Pn),Pn|=p;else{if((p&1073741824)===0)return i=I!==null?I.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:i,cachePool:null,transitions:null},c.updateQueue=null,Qe(Ai,Pn),Pn|=i,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=I!==null?I.baseLanes:p,Qe(Ai,Pn),Pn|=y}else I!==null?(y=I.baseLanes|p,c.memoizedState=null):y=p,Qe(Ai,Pn),Pn|=y;return un(i,c,C,p),c.child}function Qv(i,c){var p=c.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function Dp(i,c,p,y,C){var I=wn(p)?jo:nn.current;return I=Si(c,I),Ni(c,C),p=Cp(i,c,p,y,I,C),y=Ep(),i!==null&&!Sn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~C,os(i,c,C)):(st&&y&&lp(c),c.flags|=1,un(i,c,p,C),c.child)}function Zv(i,c,p,y,C){if(wn(p)){var I=!0;gu(c)}else I=!1;if(Ni(c,C),c.stateNode===null)Mu(i,c),Bv(c,p,y),Ap(c,p,y,C),y=!0;else if(i===null){var O=c.stateNode,q=c.memoizedProps;O.props=q;var Q=O.context,ae=p.contextType;typeof ae=="object"&&ae!==null?ae=Gn(ae):(ae=wn(p)?jo:nn.current,ae=Si(c,ae));var pe=p.getDerivedStateFromProps,me=typeof pe=="function"||typeof O.getSnapshotBeforeUpdate=="function";me||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==y||Q!==ae)&&Wv(c,O,y,ae),Os=!1;var he=c.memoizedState;O.state=he,Cu(c,y,O,C),Q=c.memoizedState,q!==y||he!==Q||bn.current||Os?(typeof pe=="function"&&(Ip(c,p,pe,y),Q=c.memoizedState),(q=Os||Lv(c,p,q,y,he,Q,ae))?(me||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Q),O.props=y,O.state=Q,O.context=ae,y=q):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{O=c.stateNode,mv(i,c),q=c.memoizedProps,ae=c.type===c.elementType?q:or(c.type,q),O.props=ae,me=c.pendingProps,he=O.context,Q=p.contextType,typeof Q=="object"&&Q!==null?Q=Gn(Q):(Q=wn(p)?jo:nn.current,Q=Si(c,Q));var we=p.getDerivedStateFromProps;(pe=typeof we=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==me||he!==Q)&&Wv(c,O,y,Q),Os=!1,he=c.memoizedState,O.state=he,Cu(c,y,O,C);var Ce=c.memoizedState;q!==me||he!==Ce||bn.current||Os?(typeof we=="function"&&(Ip(c,p,we,y),Ce=c.memoizedState),(ae=Os||Lv(c,p,ae,y,he,Ce,Q)||!1)?(pe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Ce,Q),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Ce,Q)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ce),O.props=y,O.state=Ce,O.context=Q,y=ae):(typeof O.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(c.flags|=1024),y=!1)}return Fp(i,c,p,y,I,C)}function Fp(i,c,p,y,C,I){Qv(i,c);var O=(c.flags&128)!==0;if(!y&&!O)return C&&sv(c,p,!1),os(i,c,I);y=c.stateNode,RT.current=c;var q=O&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,i!==null&&O?(c.child=Ei(c,i.child,null,I),c.child=Ei(c,null,q,I)):un(i,c,q,I),c.memoizedState=y.state,C&&sv(c,p,!0),c.child}function eb(i){var c=i.stateNode;c.pendingContext?nv(i,c.pendingContext,c.pendingContext!==c.context):c.context&&nv(i,c.context,!1),vp(i,c.containerInfo)}function tb(i,c,p,y,C){return Ci(),fp(C),c.flags|=256,un(i,c,p,y),c.child}var Op={dehydrated:null,treeContext:null,retryLane:0};function zp(i){return{baseLanes:i,cachePool:null,transitions:null}}function nb(i,c,p){var y=c.pendingProps,C=dt.current,I=!1,O=(c.flags&128)!==0,q;if((q=O)||(q=i!==null&&i.memoizedState===null?!1:(C&2)!==0),q?(I=!0,c.flags&=-129):(i===null||i.memoizedState!==null)&&(C|=1),Qe(dt,C&1),i===null)return dp(c),i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((c.mode&1)===0?c.lanes=1:i.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=y.children,i=y.fallback,I?(y=c.mode,I=c.child,O={mode:"hidden",children:O},(y&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=O):I=Gu(O,y,0,null),i=Mo(i,y,p,null),I.return=c,i.return=c,I.sibling=i,c.child=I,c.child.memoizedState=zp(p),c.memoizedState=Op,i):$p(c,O));if(C=i.memoizedState,C!==null&&(q=C.dehydrated,q!==null))return IT(i,c,O,y,q,C,p);if(I){I=y.fallback,O=c.mode,C=i.child,q=C.sibling;var Q={mode:"hidden",children:y.children};return(O&1)===0&&c.child!==C?(y=c.child,y.childLanes=0,y.pendingProps=Q,c.deletions=null):(y=Us(C,Q),y.subtreeFlags=C.subtreeFlags&14680064),q!==null?I=Us(q,I):(I=Mo(I,O,p,null),I.flags|=2),I.return=c,y.return=c,y.sibling=I,c.child=y,y=I,I=c.child,O=i.child.memoizedState,O=O===null?zp(p):{baseLanes:O.baseLanes|p,cachePool:null,transitions:O.transitions},I.memoizedState=O,I.childLanes=i.childLanes&~p,c.memoizedState=Op,y}return I=i.child,i=I.sibling,y=Us(I,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,i!==null&&(p=c.deletions,p===null?(c.deletions=[i],c.flags|=16):p.push(i)),c.child=y,c.memoizedState=null,y}function $p(i,c){return c=Gu({mode:"visible",children:c},i.mode,0,null),c.return=i,i.child=c}function Pu(i,c,p,y){return y!==null&&fp(y),Ei(c,i.child,null,p),i=$p(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function IT(i,c,p,y,C,I,O){if(p)return c.flags&256?(c.flags&=-257,y=Pp(Error(n(422))),Pu(i,c,O,y)):c.memoizedState!==null?(c.child=i.child,c.flags|=128,null):(I=y.fallback,C=c.mode,y=Gu({mode:"visible",children:y.children},C,0,null),I=Mo(I,C,O,null),I.flags|=2,y.return=c,I.return=c,y.sibling=I,c.child=y,(c.mode&1)!==0&&Ei(c,i.child,null,O),c.child.memoizedState=zp(O),c.memoizedState=Op,I);if((c.mode&1)===0)return Pu(i,c,O,null);if(C.data==="$!"){if(y=C.nextSibling&&C.nextSibling.dataset,y)var q=y.dgst;return y=q,I=Error(n(419)),y=Pp(I,y,void 0),Pu(i,c,O,y)}if(q=(O&i.childLanes)!==0,Sn||q){if(y=Vt,y!==null){switch(O&-O){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(y.suspendedLanes|O))!==0?0:C,C!==0&&C!==I.retryLane&&(I.retryLane=C,rs(i,C),lr(y,i,C,-1))}return tm(),y=Pp(Error(n(421))),Pu(i,c,O,y)}return C.data==="$?"?(c.flags|=128,c.child=i.child,c=UT.bind(null,i),C._reactRetry=c,null):(i=I.treeContext,An=Ps(C.nextSibling),In=c,st=!0,sr=null,i!==null&&(Un[Hn++]=ts,Un[Hn++]=ns,Un[Hn++]=Co,ts=i.id,ns=i.overflow,Co=c),c=$p(c,y.children),c.flags|=4096,c)}function rb(i,c,p){i.lanes|=c;var y=i.alternate;y!==null&&(y.lanes|=c),gp(i.return,c,p)}function Lp(i,c,p,y,C){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:C}:(I.isBackwards=c,I.rendering=null,I.renderingStartTime=0,I.last=y,I.tail=p,I.tailMode=C)}function sb(i,c,p){var y=c.pendingProps,C=y.revealOrder,I=y.tail;if(un(i,c,y.children,p),y=dt.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&rb(i,p,c);else if(i.tag===19)rb(i,p,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}y&=1}if(Qe(dt,y),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(p=c.child,C=null;p!==null;)i=p.alternate,i!==null&&Eu(i)===null&&(C=p),p=p.sibling;p=C,p===null?(C=c.child,c.child=null):(C=p.sibling,p.sibling=null),Lp(c,!1,C,p,I);break;case"backwards":for(p=null,C=c.child,c.child=null;C!==null;){if(i=C.alternate,i!==null&&Eu(i)===null){c.child=C;break}i=C.sibling,C.sibling=p,p=C,C=i}Lp(c,!0,p,null,I);break;case"together":Lp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Mu(i,c){(c.mode&1)===0&&i!==null&&(i.alternate=null,c.alternate=null,c.flags|=2)}function os(i,c,p){if(i!==null&&(c.dependencies=i.dependencies),Ro|=c.lanes,(p&c.childLanes)===0)return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,p=Us(i,i.pendingProps),c.child=p,p.return=c;i.sibling!==null;)i=i.sibling,p=p.sibling=Us(i,i.pendingProps),p.return=c;p.sibling=null}return c.child}function AT(i,c,p){switch(c.tag){case 3:eb(c),Ci();break;case 5:xv(c);break;case 1:wn(c.type)&&gu(c);break;case 4:vp(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,C=c.memoizedProps.value;Qe(Su,y._currentValue),y._currentValue=C;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Qe(dt,dt.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?nb(i,c,p):(Qe(dt,dt.current&1),i=os(i,c,p),i!==null?i.sibling:null);Qe(dt,dt.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(i.flags&128)!==0){if(y)return sb(i,c,p);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Qe(dt,dt.current),y)break;return null;case 22:case 23:return c.lanes=0,Jv(i,c,p)}return os(i,c,p)}var ob,Bp,ib,ab;ob=function(i,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Bp=function(){},ib=function(i,c,p,y){var C=i.memoizedProps;if(C!==y){i=c.stateNode,No(Mr.current);var I=null;switch(p){case"input":C=ue(i,C),y=ue(i,y),I=[];break;case"select":C=F({},C,{value:void 0}),y=F({},y,{value:void 0}),I=[];break;case"textarea":C=He(i,C),y=He(i,y),I=[];break;default:typeof C.onClick!="function"&&typeof y.onClick=="function"&&(i.onclick=hu)}Es(p,y);var O;p=null;for(ae in C)if(!y.hasOwnProperty(ae)&&C.hasOwnProperty(ae)&&C[ae]!=null)if(ae==="style"){var q=C[ae];for(O in q)q.hasOwnProperty(O)&&(p||(p={}),p[O]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?I||(I=[]):(I=I||[]).push(ae,null));for(ae in y){var Q=y[ae];if(q=C!=null?C[ae]:void 0,y.hasOwnProperty(ae)&&Q!==q&&(Q!=null||q!=null))if(ae==="style")if(q){for(O in q)!q.hasOwnProperty(O)||Q&&Q.hasOwnProperty(O)||(p||(p={}),p[O]="");for(O in Q)Q.hasOwnProperty(O)&&q[O]!==Q[O]&&(p||(p={}),p[O]=Q[O])}else p||(I||(I=[]),I.push(ae,p)),p=Q;else ae==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,q=q?q.__html:void 0,Q!=null&&q!==Q&&(I=I||[]).push(ae,Q)):ae==="children"?typeof Q!="string"&&typeof Q!="number"||(I=I||[]).push(ae,""+Q):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(ae)?(Q!=null&&ae==="onScroll"&&nt("scroll",i),I||q===Q||(I=[])):(I=I||[]).push(ae,Q))}p&&(I=I||[]).push("style",p);var ae=I;(c.updateQueue=ae)&&(c.flags|=4)}},ab=function(i,c,p,y){p!==y&&(c.flags|=4)};function vl(i,c){if(!st)switch(i.tailMode){case"hidden":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?i.tail=null:p.sibling=null;break;case"collapsed":p=i.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function sn(i){var c=i.alternate!==null&&i.alternate.child===i.child,p=0,y=0;if(c)for(var C=i.child;C!==null;)p|=C.lanes|C.childLanes,y|=C.subtreeFlags&14680064,y|=C.flags&14680064,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)p|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=y,i.childLanes=p,c}function PT(i,c,p){var y=c.pendingProps;switch(cp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(c),null;case 1:return wn(c.type)&&mu(),sn(c),null;case 3:return y=c.stateNode,Ti(),rt(bn),rt(nn),Sp(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(i===null||i.child===null)&&(bu(c)?c.flags|=4:i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,sr!==null&&(Qp(sr),sr=null))),Bp(i,c),sn(c),null;case 5:bp(c);var C=No(pl.current);if(p=c.type,i!==null&&c.stateNode!=null)ib(i,c,p,y,C),i.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(n(166));return sn(c),null}if(i=No(Mr.current),bu(c)){y=c.stateNode,p=c.type;var I=c.memoizedProps;switch(y[Pr]=c,y[cl]=I,i=(c.mode&1)!==0,p){case"dialog":nt("cancel",y),nt("close",y);break;case"iframe":case"object":case"embed":nt("load",y);break;case"video":case"audio":for(C=0;C<il.length;C++)nt(il[C],y);break;case"source":nt("error",y);break;case"img":case"image":case"link":nt("error",y),nt("load",y);break;case"details":nt("toggle",y);break;case"input":xe(y,I),nt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!I.multiple},nt("invalid",y);break;case"textarea":Lt(y,I),nt("invalid",y)}Es(p,I),C=null;for(var O in I)if(I.hasOwnProperty(O)){var q=I[O];O==="children"?typeof q=="string"?y.textContent!==q&&(I.suppressHydrationWarning!==!0&&fu(y.textContent,q,i),C=["children",q]):typeof q=="number"&&y.textContent!==""+q&&(I.suppressHydrationWarning!==!0&&fu(y.textContent,q,i),C=["children",""+q]):s.hasOwnProperty(O)&&q!=null&&O==="onScroll"&&nt("scroll",y)}switch(p){case"input":de(y),Ve(y,I,!0);break;case"textarea":de(y),Wn(y);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(y.onclick=hu)}y=C,c.updateQueue=y,y!==null&&(c.flags|=4)}else{O=C.nodeType===9?C:C.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=wt(p)),i==="http://www.w3.org/1999/xhtml"?p==="script"?(i=O.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof y.is=="string"?i=O.createElement(p,{is:y.is}):(i=O.createElement(p),p==="select"&&(O=i,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):i=O.createElementNS(i,p),i[Pr]=c,i[cl]=y,ob(i,c,!1,!1),c.stateNode=i;e:{switch(O=yo(p,y),p){case"dialog":nt("cancel",i),nt("close",i),C=y;break;case"iframe":case"object":case"embed":nt("load",i),C=y;break;case"video":case"audio":for(C=0;C<il.length;C++)nt(il[C],i);C=y;break;case"source":nt("error",i),C=y;break;case"img":case"image":case"link":nt("error",i),nt("load",i),C=y;break;case"details":nt("toggle",i),C=y;break;case"input":xe(i,y),C=ue(i,y),nt("invalid",i);break;case"option":C=y;break;case"select":i._wrapperState={wasMultiple:!!y.multiple},C=F({},y,{value:void 0}),nt("invalid",i);break;case"textarea":Lt(i,y),C=He(i,y),nt("invalid",i);break;default:C=y}Es(p,C),q=C;for(I in q)if(q.hasOwnProperty(I)){var Q=q[I];I==="style"?Jr(i,Q):I==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&er(i,Q)):I==="children"?typeof Q=="string"?(p!=="textarea"||Q!=="")&&Ue(i,Q):typeof Q=="number"&&Ue(i,""+Q):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?Q!=null&&I==="onScroll"&&nt("scroll",i):Q!=null&&k(i,I,Q,O))}switch(p){case"input":de(i),Ve(i,y,!1);break;case"textarea":de(i),Wn(i);break;case"option":y.value!=null&&i.setAttribute("value",""+te(y.value));break;case"select":i.multiple=!!y.multiple,I=y.value,I!=null?jt(i,!!y.multiple,I,!1):y.defaultValue!=null&&jt(i,!!y.multiple,y.defaultValue,!0);break;default:typeof C.onClick=="function"&&(i.onclick=hu)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return sn(c),null;case 6:if(i&&c.stateNode!=null)ab(i,c,i.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(p=No(pl.current),No(Mr.current),bu(c)){if(y=c.stateNode,p=c.memoizedProps,y[Pr]=c,(I=y.nodeValue!==p)&&(i=In,i!==null))switch(i.tag){case 3:fu(y.nodeValue,p,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&fu(y.nodeValue,p,(i.mode&1)!==0)}I&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Pr]=c,c.stateNode=y}return sn(c),null;case 13:if(rt(dt),y=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(st&&An!==null&&(c.mode&1)!==0&&(c.flags&128)===0)uv(),Ci(),c.flags|=98560,I=!1;else if(I=bu(c),y!==null&&y.dehydrated!==null){if(i===null){if(!I)throw Error(n(318));if(I=c.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[Pr]=c}else Ci(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;sn(c),I=!1}else sr!==null&&(Qp(sr),sr=null),I=!0;if(!I)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(i!==null&&i.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(i===null||(dt.current&1)!==0?Dt===0&&(Dt=3):tm())),c.updateQueue!==null&&(c.flags|=4),sn(c),null);case 4:return Ti(),Bp(i,c),i===null&&al(c.stateNode.containerInfo),sn(c),null;case 10:return mp(c.type._context),sn(c),null;case 17:return wn(c.type)&&mu(),sn(c),null;case 19:if(rt(dt),I=c.memoizedState,I===null)return sn(c),null;if(y=(c.flags&128)!==0,O=I.rendering,O===null)if(y)vl(I,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(O=Eu(i),O!==null){for(c.flags|=128,vl(I,!1),y=O.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)I=p,i=y,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=i,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,i=O.dependencies,I.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),p=p.sibling;return Qe(dt,dt.current&1|2),c.child}i=i.sibling}I.tail!==null&&ut()>Pi&&(c.flags|=128,y=!0,vl(I,!1),c.lanes=4194304)}else{if(!y)if(i=Eu(O),i!==null){if(c.flags|=128,y=!0,p=i.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),vl(I,!0),I.tail===null&&I.tailMode==="hidden"&&!O.alternate&&!st)return sn(c),null}else 2*ut()-I.renderingStartTime>Pi&&p!==1073741824&&(c.flags|=128,y=!0,vl(I,!1),c.lanes=4194304);I.isBackwards?(O.sibling=c.child,c.child=O):(p=I.last,p!==null?p.sibling=O:c.child=O,I.last=O)}return I.tail!==null?(c=I.tail,I.rendering=c,I.tail=c.sibling,I.renderingStartTime=ut(),c.sibling=null,p=dt.current,Qe(dt,y?p&1|2:p&1),c):(sn(c),null);case 22:case 23:return em(),y=c.memoizedState!==null,i!==null&&i.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(Pn&1073741824)!==0&&(sn(c),c.subtreeFlags&6&&(c.flags|=8192)):sn(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function MT(i,c){switch(cp(c),c.tag){case 1:return wn(c.type)&&mu(),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return Ti(),rt(bn),rt(nn),Sp(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 5:return bp(c),null;case 13:if(rt(dt),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Ci()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return rt(dt),null;case 4:return Ti(),null;case 10:return mp(c.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var Du=!1,on=!1,DT=typeof WeakSet=="function"?WeakSet:Set,je=null;function Ii(i,c){var p=i.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){xt(i,c,y)}else p.current=null}function Wp(i,c,p){try{p()}catch(y){xt(i,c,y)}}var lb=!1;function FT(i,c){if(ep=tu,i=Lx(),Gh(i)){if("selectionStart"in i)var p={start:i.selectionStart,end:i.selectionEnd};else e:{p=(p=i.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var C=y.anchorOffset,I=y.focusNode;y=y.focusOffset;try{p.nodeType,I.nodeType}catch{p=null;break e}var O=0,q=-1,Q=-1,ae=0,pe=0,me=i,he=null;t:for(;;){for(var we;me!==p||C!==0&&me.nodeType!==3||(q=O+C),me!==I||y!==0&&me.nodeType!==3||(Q=O+y),me.nodeType===3&&(O+=me.nodeValue.length),(we=me.firstChild)!==null;)he=me,me=we;for(;;){if(me===i)break t;if(he===p&&++ae===C&&(q=O),he===I&&++pe===y&&(Q=O),(we=me.nextSibling)!==null)break;me=he,he=me.parentNode}me=we}p=q===-1||Q===-1?null:{start:q,end:Q}}else p=null}p=p||{start:0,end:0}}else p=null;for(tp={focusedElem:i,selectionRange:p},tu=!1,je=c;je!==null;)if(c=je,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,je=i;else for(;je!==null;){c=je;try{var Ce=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Te=Ce.memoizedProps,kt=Ce.memoizedState,re=c.stateNode,ee=re.getSnapshotBeforeUpdate(c.elementType===c.type?Te:or(c.type,Te),kt);re.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var oe=c.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ve){xt(c,c.return,ve)}if(i=c.sibling,i!==null){i.return=c.return,je=i;break}je=c.return}return Ce=lb,lb=!1,Ce}function bl(i,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&i)===i){var I=C.destroy;C.destroy=void 0,I!==void 0&&Wp(c,p,I)}C=C.next}while(C!==y)}}function Fu(i,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&i)===i){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function Vp(i){var c=i.ref;if(c!==null){var p=i.stateNode;switch(i.tag){case 5:i=p;break;default:i=p}typeof c=="function"?c(i):c.current=i}}function cb(i){var c=i.alternate;c!==null&&(i.alternate=null,cb(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&(delete c[Pr],delete c[cl],delete c[op],delete c[xT],delete c[vT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function ub(i){return i.tag===5||i.tag===3||i.tag===4}function db(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ub(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Up(i,c,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(i,c):p.insertBefore(i,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(i,p)):(c=p,c.appendChild(i)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=hu));else if(y!==4&&(i=i.child,i!==null))for(Up(i,c,p),i=i.sibling;i!==null;)Up(i,c,p),i=i.sibling}function Hp(i,c,p){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?p.insertBefore(i,c):p.appendChild(i);else if(y!==4&&(i=i.child,i!==null))for(Hp(i,c,p),i=i.sibling;i!==null;)Hp(i,c,p),i=i.sibling}var Kt=null,ir=!1;function $s(i,c,p){for(p=p.child;p!==null;)fb(i,c,p),p=p.sibling}function fb(i,c,p){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(wo,p)}catch{}switch(p.tag){case 5:on||Ii(p,c);case 6:var y=Kt,C=ir;Kt=null,$s(i,c,p),Kt=y,ir=C,Kt!==null&&(ir?(i=Kt,p=p.stateNode,i.nodeType===8?i.parentNode.removeChild(p):i.removeChild(p)):Kt.removeChild(p.stateNode));break;case 18:Kt!==null&&(ir?(i=Kt,p=p.stateNode,i.nodeType===8?sp(i.parentNode,p):i.nodeType===1&&sp(i,p),Qa(i)):sp(Kt,p.stateNode));break;case 4:y=Kt,C=ir,Kt=p.stateNode.containerInfo,ir=!0,$s(i,c,p),Kt=y,ir=C;break;case 0:case 11:case 14:case 15:if(!on&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){C=y=y.next;do{var I=C,O=I.destroy;I=I.tag,O!==void 0&&((I&2)!==0||(I&4)!==0)&&Wp(p,c,O),C=C.next}while(C!==y)}$s(i,c,p);break;case 1:if(!on&&(Ii(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(q){xt(p,c,q)}$s(i,c,p);break;case 21:$s(i,c,p);break;case 22:p.mode&1?(on=(y=on)||p.memoizedState!==null,$s(i,c,p),on=y):$s(i,c,p);break;default:$s(i,c,p)}}function hb(i){var c=i.updateQueue;if(c!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new DT),c.forEach(function(y){var C=HT.bind(null,i,y);p.has(y)||(p.add(y),y.then(C,C))})}}function ar(i,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var C=p[y];try{var I=i,O=c,q=O;e:for(;q!==null;){switch(q.tag){case 5:Kt=q.stateNode,ir=!1;break e;case 3:Kt=q.stateNode.containerInfo,ir=!0;break e;case 4:Kt=q.stateNode.containerInfo,ir=!0;break e}q=q.return}if(Kt===null)throw Error(n(160));fb(I,O,C),Kt=null,ir=!1;var Q=C.alternate;Q!==null&&(Q.return=null),C.return=null}catch(ae){xt(C,c,ae)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)pb(c,i),c=c.sibling}function pb(i,c){var p=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ar(c,i),Fr(i),y&4){try{bl(3,i,i.return),Fu(3,i)}catch(Te){xt(i,i.return,Te)}try{bl(5,i,i.return)}catch(Te){xt(i,i.return,Te)}}break;case 1:ar(c,i),Fr(i),y&512&&p!==null&&Ii(p,p.return);break;case 5:if(ar(c,i),Fr(i),y&512&&p!==null&&Ii(p,p.return),i.flags&32){var C=i.stateNode;try{Ue(C,"")}catch(Te){xt(i,i.return,Te)}}if(y&4&&(C=i.stateNode,C!=null)){var I=i.memoizedProps,O=p!==null?p.memoizedProps:I,q=i.type,Q=i.updateQueue;if(i.updateQueue=null,Q!==null)try{q==="input"&&I.type==="radio"&&I.name!=null&&ge(C,I),yo(q,O);var ae=yo(q,I);for(O=0;O<Q.length;O+=2){var pe=Q[O],me=Q[O+1];pe==="style"?Jr(C,me):pe==="dangerouslySetInnerHTML"?er(C,me):pe==="children"?Ue(C,me):k(C,pe,me,ae)}switch(q){case"input":Ae(C,I);break;case"textarea":Yr(C,I);break;case"select":var he=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!I.multiple;var we=I.value;we!=null?jt(C,!!I.multiple,we,!1):he!==!!I.multiple&&(I.defaultValue!=null?jt(C,!!I.multiple,I.defaultValue,!0):jt(C,!!I.multiple,I.multiple?[]:"",!1))}C[cl]=I}catch(Te){xt(i,i.return,Te)}}break;case 6:if(ar(c,i),Fr(i),y&4){if(i.stateNode===null)throw Error(n(162));C=i.stateNode,I=i.memoizedProps;try{C.nodeValue=I}catch(Te){xt(i,i.return,Te)}}break;case 3:if(ar(c,i),Fr(i),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Qa(c.containerInfo)}catch(Te){xt(i,i.return,Te)}break;case 4:ar(c,i),Fr(i);break;case 13:ar(c,i),Fr(i),C=i.child,C.flags&8192&&(I=C.memoizedState!==null,C.stateNode.isHidden=I,!I||C.alternate!==null&&C.alternate.memoizedState!==null||(Kp=ut())),y&4&&hb(i);break;case 22:if(pe=p!==null&&p.memoizedState!==null,i.mode&1?(on=(ae=on)||pe,ar(c,i),on=ae):ar(c,i),Fr(i),y&8192){if(ae=i.memoizedState!==null,(i.stateNode.isHidden=ae)&&!pe&&(i.mode&1)!==0)for(je=i,pe=i.child;pe!==null;){for(me=je=pe;je!==null;){switch(he=je,we=he.child,he.tag){case 0:case 11:case 14:case 15:bl(4,he,he.return);break;case 1:Ii(he,he.return);var Ce=he.stateNode;if(typeof Ce.componentWillUnmount=="function"){y=he,p=he.return;try{c=y,Ce.props=c.memoizedProps,Ce.state=c.memoizedState,Ce.componentWillUnmount()}catch(Te){xt(y,p,Te)}}break;case 5:Ii(he,he.return);break;case 22:if(he.memoizedState!==null){yb(me);continue}}we!==null?(we.return=he,je=we):yb(me)}pe=pe.sibling}e:for(pe=null,me=i;;){if(me.tag===5){if(pe===null){pe=me;try{C=me.stateNode,ae?(I=C.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(q=me.stateNode,Q=me.memoizedProps.style,O=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,q.style.display=tr("display",O))}catch(Te){xt(i,i.return,Te)}}}else if(me.tag===6){if(pe===null)try{me.stateNode.nodeValue=ae?"":me.memoizedProps}catch(Te){xt(i,i.return,Te)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===i)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===i)break e;for(;me.sibling===null;){if(me.return===null||me.return===i)break e;pe===me&&(pe=null),me=me.return}pe===me&&(pe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:ar(c,i),Fr(i),y&4&&hb(i);break;case 21:break;default:ar(c,i),Fr(i)}}function Fr(i){var c=i.flags;if(c&2){try{e:{for(var p=i.return;p!==null;){if(ub(p)){var y=p;break e}p=p.return}throw Error(n(160))}switch(y.tag){case 5:var C=y.stateNode;y.flags&32&&(Ue(C,""),y.flags&=-33);var I=db(i);Hp(i,I,C);break;case 3:case 4:var O=y.stateNode.containerInfo,q=db(i);Up(i,q,O);break;default:throw Error(n(161))}}catch(Q){xt(i,i.return,Q)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function OT(i,c,p){je=i,mb(i)}function mb(i,c,p){for(var y=(i.mode&1)!==0;je!==null;){var C=je,I=C.child;if(C.tag===22&&y){var O=C.memoizedState!==null||Du;if(!O){var q=C.alternate,Q=q!==null&&q.memoizedState!==null||on;q=Du;var ae=on;if(Du=O,(on=Q)&&!ae)for(je=C;je!==null;)O=je,Q=O.child,O.tag===22&&O.memoizedState!==null?xb(C):Q!==null?(Q.return=O,je=Q):xb(C);for(;I!==null;)je=I,mb(I),I=I.sibling;je=C,Du=q,on=ae}gb(i)}else(C.subtreeFlags&8772)!==0&&I!==null?(I.return=C,je=I):gb(i)}}function gb(i){for(;je!==null;){var c=je;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:on||Fu(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!on)if(p===null)y.componentDidMount();else{var C=c.elementType===c.type?p.memoizedProps:or(c.type,p.memoizedProps);y.componentDidUpdate(C,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var I=c.updateQueue;I!==null&&yv(c,I,y);break;case 3:var O=c.updateQueue;if(O!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}yv(c,O,p)}break;case 5:var q=c.stateNode;if(p===null&&c.flags&4){p=q;var Q=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&p.focus();break;case"img":Q.src&&(p.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ae=c.alternate;if(ae!==null){var pe=ae.memoizedState;if(pe!==null){var me=pe.dehydrated;me!==null&&Qa(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}on||c.flags&512&&Vp(c)}catch(he){xt(c,c.return,he)}}if(c===i){je=null;break}if(p=c.sibling,p!==null){p.return=c.return,je=p;break}je=c.return}}function yb(i){for(;je!==null;){var c=je;if(c===i){je=null;break}var p=c.sibling;if(p!==null){p.return=c.return,je=p;break}je=c.return}}function xb(i){for(;je!==null;){var c=je;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{Fu(4,c)}catch(Q){xt(c,p,Q)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var C=c.return;try{y.componentDidMount()}catch(Q){xt(c,C,Q)}}var I=c.return;try{Vp(c)}catch(Q){xt(c,I,Q)}break;case 5:var O=c.return;try{Vp(c)}catch(Q){xt(c,O,Q)}}}catch(Q){xt(c,c.return,Q)}if(c===i){je=null;break}var q=c.sibling;if(q!==null){q.return=c.return,je=q;break}je=c.return}}var zT=Math.ceil,Ou=E.ReactCurrentDispatcher,Gp=E.ReactCurrentOwner,Kn=E.ReactCurrentBatchConfig,qe=0,Vt=null,Et=null,Xt=0,Pn=0,Ai=Ms(0),Dt=0,wl=null,Ro=0,zu=0,qp=0,Sl=null,kn=null,Kp=0,Pi=1/0,is=null,$u=!1,Xp=null,Ls=null,Lu=!1,Bs=null,Bu=0,kl=0,Yp=null,Wu=-1,Vu=0;function dn(){return(qe&6)!==0?ut():Wu!==-1?Wu:Wu=ut()}function Ws(i){return(i.mode&1)===0?1:(qe&2)!==0&&Xt!==0?Xt&-Xt:wT.transition!==null?(Vu===0&&(Vu=fi()),Vu):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:bx(i.type)),i)}function lr(i,c,p,y){if(50<kl)throw kl=0,Yp=null,Error(n(185));So(i,p,y),((qe&2)===0||i!==Vt)&&(i===Vt&&((qe&2)===0&&(zu|=p),Dt===4&&Vs(i,Xt)),jn(i,y),p===1&&qe===0&&(c.mode&1)===0&&(Pi=ut()+500,yu&&Fs()))}function jn(i,c){var p=i.callbackNode;Ih(i,c);var y=di(i,i===Vt?Xt:0);if(y===0)p!==null&&qc(p),i.callbackNode=null,i.callbackPriority=0;else if(c=y&-y,i.callbackPriority!==c){if(p!=null&&qc(p),c===1)i.tag===0?bT(bb.bind(null,i)):ov(bb.bind(null,i)),gT(function(){(qe&6)===0&&Fs()}),p=null;else{switch(fx(y)){case 1:p=Ha;break;case 4:p=Xc;break;case 16:p=li;break;case 536870912:p=Yc;break;default:p=li}p=Nb(p,vb.bind(null,i))}i.callbackPriority=c,i.callbackNode=p}}function vb(i,c){if(Wu=-1,Vu=0,(qe&6)!==0)throw Error(n(327));var p=i.callbackNode;if(Mi()&&i.callbackNode!==p)return null;var y=di(i,i===Vt?Xt:0);if(y===0)return null;if((y&30)!==0||(y&i.expiredLanes)!==0||c)c=Uu(i,y);else{c=y;var C=qe;qe|=2;var I=Sb();(Vt!==i||Xt!==c)&&(is=null,Pi=ut()+500,Ao(i,c));do try{BT();break}catch(q){wb(i,q)}while(!0);pp(),Ou.current=I,qe=C,Et!==null?c=0:(Vt=null,Xt=0,c=Dt)}if(c!==0){if(c===2&&(C=Ga(i),C!==0&&(y=C,c=Jp(i,C))),c===1)throw p=wl,Ao(i,0),Vs(i,y),jn(i,ut()),p;if(c===6)Vs(i,y);else{if(C=i.current.alternate,(y&30)===0&&!$T(C)&&(c=Uu(i,y),c===2&&(I=Ga(i),I!==0&&(y=I,c=Jp(i,I))),c===1))throw p=wl,Ao(i,0),Vs(i,y),jn(i,ut()),p;switch(i.finishedWork=C,i.finishedLanes=y,c){case 0:case 1:throw Error(n(345));case 2:Po(i,kn,is);break;case 3:if(Vs(i,y),(y&130023424)===y&&(c=Kp+500-ut(),10<c)){if(di(i,0)!==0)break;if(C=i.suspendedLanes,(C&y)!==y){dn(),i.pingedLanes|=i.suspendedLanes&C;break}i.timeoutHandle=rp(Po.bind(null,i,kn,is),c);break}Po(i,kn,is);break;case 4:if(Vs(i,y),(y&4194240)===y)break;for(c=i.eventTimes,C=-1;0<y;){var O=31-Tn(y);I=1<<O,O=c[O],O>C&&(C=O),y&=~I}if(y=C,y=ut()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*zT(y/1960))-y,10<y){i.timeoutHandle=rp(Po.bind(null,i,kn,is),y);break}Po(i,kn,is);break;case 5:Po(i,kn,is);break;default:throw Error(n(329))}}}return jn(i,ut()),i.callbackNode===p?vb.bind(null,i):null}function Jp(i,c){var p=Sl;return i.current.memoizedState.isDehydrated&&(Ao(i,c).flags|=256),i=Uu(i,c),i!==2&&(c=kn,kn=p,c!==null&&Qp(c)),i}function Qp(i){kn===null?kn=i:kn.push.apply(kn,i)}function $T(i){for(var c=i;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var C=p[y],I=C.getSnapshot;C=C.value;try{if(!rr(I(),C))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Vs(i,c){for(c&=~qp,c&=~zu,i.suspendedLanes|=c,i.pingedLanes&=~c,i=i.expirationTimes;0<c;){var p=31-Tn(c),y=1<<p;i[p]=-1,c&=~y}}function bb(i){if((qe&6)!==0)throw Error(n(327));Mi();var c=di(i,0);if((c&1)===0)return jn(i,ut()),null;var p=Uu(i,c);if(i.tag!==0&&p===2){var y=Ga(i);y!==0&&(c=y,p=Jp(i,y))}if(p===1)throw p=wl,Ao(i,0),Vs(i,c),jn(i,ut()),p;if(p===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=c,Po(i,kn,is),jn(i,ut()),null}function Zp(i,c){var p=qe;qe|=1;try{return i(c)}finally{qe=p,qe===0&&(Pi=ut()+500,yu&&Fs())}}function Io(i){Bs!==null&&Bs.tag===0&&(qe&6)===0&&Mi();var c=qe;qe|=1;var p=Kn.transition,y=Xe;try{if(Kn.transition=null,Xe=1,i)return i()}finally{Xe=y,Kn.transition=p,qe=c,(qe&6)===0&&Fs()}}function em(){Pn=Ai.current,rt(Ai)}function Ao(i,c){i.finishedWork=null,i.finishedLanes=0;var p=i.timeoutHandle;if(p!==-1&&(i.timeoutHandle=-1,mT(p)),Et!==null)for(p=Et.return;p!==null;){var y=p;switch(cp(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&mu();break;case 3:Ti(),rt(bn),rt(nn),Sp();break;case 5:bp(y);break;case 4:Ti();break;case 13:rt(dt);break;case 19:rt(dt);break;case 10:mp(y.type._context);break;case 22:case 23:em()}p=p.return}if(Vt=i,Et=i=Us(i.current,null),Xt=Pn=c,Dt=0,wl=null,qp=zu=Ro=0,kn=Sl=null,_o!==null){for(c=0;c<_o.length;c++)if(p=_o[c],y=p.interleaved,y!==null){p.interleaved=null;var C=y.next,I=p.pending;if(I!==null){var O=I.next;I.next=C,y.next=O}p.pending=y}_o=null}return i}function wb(i,c){do{var p=Et;try{if(pp(),_u.current=Iu,Nu){for(var y=ft.memoizedState;y!==null;){var C=y.queue;C!==null&&(C.pending=null),y=y.next}Nu=!1}if(To=0,Wt=Mt=ft=null,ml=!1,gl=0,Gp.current=null,p===null||p.return===null){Dt=1,wl=c,Et=null;break}e:{var I=i,O=p.return,q=p,Q=c;if(c=Xt,q.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ae=Q,pe=q,me=pe.tag;if((pe.mode&1)===0&&(me===0||me===11||me===15)){var he=pe.alternate;he?(pe.updateQueue=he.updateQueue,pe.memoizedState=he.memoizedState,pe.lanes=he.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var we=Gv(O);if(we!==null){we.flags&=-257,qv(we,O,q,I,c),we.mode&1&&Hv(I,ae,c),c=we,Q=ae;var Ce=c.updateQueue;if(Ce===null){var Te=new Set;Te.add(Q),c.updateQueue=Te}else Ce.add(Q);break e}else{if((c&1)===0){Hv(I,ae,c),tm();break e}Q=Error(n(426))}}else if(st&&q.mode&1){var kt=Gv(O);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),qv(kt,O,q,I,c),fp(Ri(Q,q));break e}}I=Q=Ri(Q,q),Dt!==4&&(Dt=2),Sl===null?Sl=[I]:Sl.push(I),I=O;do{switch(I.tag){case 3:I.flags|=65536,c&=-c,I.lanes|=c;var re=Vv(I,Q,c);gv(I,re);break e;case 1:q=Q;var ee=I.type,oe=I.stateNode;if((I.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Ls===null||!Ls.has(oe)))){I.flags|=65536,c&=-c,I.lanes|=c;var ve=Uv(I,q,c);gv(I,ve);break e}}I=I.return}while(I!==null)}jb(p)}catch(Re){c=Re,Et===p&&p!==null&&(Et=p=p.return);continue}break}while(!0)}function Sb(){var i=Ou.current;return Ou.current=Iu,i===null?Iu:i}function tm(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Vt===null||(Ro&268435455)===0&&(zu&268435455)===0||Vs(Vt,Xt)}function Uu(i,c){var p=qe;qe|=2;var y=Sb();(Vt!==i||Xt!==c)&&(is=null,Ao(i,c));do try{LT();break}catch(C){wb(i,C)}while(!0);if(pp(),qe=p,Ou.current=y,Et!==null)throw Error(n(261));return Vt=null,Xt=0,Dt}function LT(){for(;Et!==null;)kb(Et)}function BT(){for(;Et!==null&&!jh();)kb(Et)}function kb(i){var c=_b(i.alternate,i,Pn);i.memoizedProps=i.pendingProps,c===null?jb(i):Et=c,Gp.current=null}function jb(i){var c=i;do{var p=c.alternate;if(i=c.return,(c.flags&32768)===0){if(p=PT(p,c,Pn),p!==null){Et=p;return}}else{if(p=MT(p,c),p!==null){p.flags&=32767,Et=p;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Dt=6,Et=null;return}}if(c=c.sibling,c!==null){Et=c;return}Et=c=i}while(c!==null);Dt===0&&(Dt=5)}function Po(i,c,p){var y=Xe,C=Kn.transition;try{Kn.transition=null,Xe=1,WT(i,c,p,y)}finally{Kn.transition=C,Xe=y}return null}function WT(i,c,p,y){do Mi();while(Bs!==null);if((qe&6)!==0)throw Error(n(327));p=i.finishedWork;var C=i.finishedLanes;if(p===null)return null;if(i.finishedWork=null,i.finishedLanes=0,p===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var I=p.lanes|p.childLanes;if(Qc(i,I),i===Vt&&(Et=Vt=null,Xt=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Lu||(Lu=!0,Nb(li,function(){return Mi(),null})),I=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||I){I=Kn.transition,Kn.transition=null;var O=Xe;Xe=1;var q=qe;qe|=4,Gp.current=null,FT(i,p),pb(p,i),lT(tp),tu=!!ep,tp=ep=null,i.current=p,OT(p),Kc(),qe=q,Xe=O,Kn.transition=I}else i.current=p;if(Lu&&(Lu=!1,Bs=i,Bu=C),I=i.pendingLanes,I===0&&(Ls=null),_h(p.stateNode),jn(i,ut()),c!==null)for(y=i.onRecoverableError,p=0;p<c.length;p++)C=c[p],y(C.value,{componentStack:C.stack,digest:C.digest});if($u)throw $u=!1,i=Xp,Xp=null,i;return(Bu&1)!==0&&i.tag!==0&&Mi(),I=i.pendingLanes,(I&1)!==0?i===Yp?kl++:(kl=0,Yp=i):kl=0,Fs(),null}function Mi(){if(Bs!==null){var i=fx(Bu),c=Kn.transition,p=Xe;try{if(Kn.transition=null,Xe=16>i?16:i,Bs===null)var y=!1;else{if(i=Bs,Bs=null,Bu=0,(qe&6)!==0)throw Error(n(331));var C=qe;for(qe|=4,je=i.current;je!==null;){var I=je,O=I.child;if((je.flags&16)!==0){var q=I.deletions;if(q!==null){for(var Q=0;Q<q.length;Q++){var ae=q[Q];for(je=ae;je!==null;){var pe=je;switch(pe.tag){case 0:case 11:case 15:bl(8,pe,I)}var me=pe.child;if(me!==null)me.return=pe,je=me;else for(;je!==null;){pe=je;var he=pe.sibling,we=pe.return;if(cb(pe),pe===ae){je=null;break}if(he!==null){he.return=we,je=he;break}je=we}}}var Ce=I.alternate;if(Ce!==null){var Te=Ce.child;if(Te!==null){Ce.child=null;do{var kt=Te.sibling;Te.sibling=null,Te=kt}while(Te!==null)}}je=I}}if((I.subtreeFlags&2064)!==0&&O!==null)O.return=I,je=O;else e:for(;je!==null;){if(I=je,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:bl(9,I,I.return)}var re=I.sibling;if(re!==null){re.return=I.return,je=re;break e}je=I.return}}var ee=i.current;for(je=ee;je!==null;){O=je;var oe=O.child;if((O.subtreeFlags&2064)!==0&&oe!==null)oe.return=O,je=oe;else e:for(O=ee;je!==null;){if(q=je,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Fu(9,q)}}catch(Re){xt(q,q.return,Re)}if(q===O){je=null;break e}var ve=q.sibling;if(ve!==null){ve.return=q.return,je=ve;break e}je=q.return}}if(qe=C,Fs(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(wo,i)}catch{}y=!0}return y}finally{Xe=p,Kn.transition=c}}return!1}function Cb(i,c,p){c=Ri(p,c),c=Vv(i,c,1),i=zs(i,c,1),c=dn(),i!==null&&(So(i,1,c),jn(i,c))}function xt(i,c,p){if(i.tag===3)Cb(i,i,p);else for(;c!==null;){if(c.tag===3){Cb(c,i,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y))){i=Ri(p,i),i=Uv(c,i,1),c=zs(c,i,1),i=dn(),c!==null&&(So(c,1,i),jn(c,i));break}}c=c.return}}function VT(i,c,p){var y=i.pingCache;y!==null&&y.delete(c),c=dn(),i.pingedLanes|=i.suspendedLanes&p,Vt===i&&(Xt&p)===p&&(Dt===4||Dt===3&&(Xt&130023424)===Xt&&500>ut()-Kp?Ao(i,0):qp|=p),jn(i,c)}function Eb(i,c){c===0&&((i.mode&1)===0?c=1:(c=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var p=dn();i=rs(i,c),i!==null&&(So(i,c,p),jn(i,p))}function UT(i){var c=i.memoizedState,p=0;c!==null&&(p=c.retryLane),Eb(i,p)}function HT(i,c){var p=0;switch(i.tag){case 13:var y=i.stateNode,C=i.memoizedState;C!==null&&(p=C.retryLane);break;case 19:y=i.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(c),Eb(i,p)}var _b;_b=function(i,c,p){if(i!==null)if(i.memoizedProps!==c.pendingProps||bn.current)Sn=!0;else{if((i.lanes&p)===0&&(c.flags&128)===0)return Sn=!1,AT(i,c,p);Sn=(i.flags&131072)!==0}else Sn=!1,st&&(c.flags&1048576)!==0&&iv(c,vu,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Mu(i,c),i=c.pendingProps;var C=Si(c,nn.current);Ni(c,p),C=Cp(null,c,y,i,C,p);var I=Ep();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,wn(y)?(I=!0,gu(c)):I=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,xp(c),C.updater=Au,c.stateNode=C,C._reactInternals=c,Ap(c,y,i,p),c=Fp(null,c,y,!0,I,p)):(c.tag=0,st&&I&&lp(c),un(null,c,C,p),c=c.child),c;case 16:y=c.elementType;e:{switch(Mu(i,c),i=c.pendingProps,C=y._init,y=C(y._payload),c.type=y,C=c.tag=qT(y),i=or(y,i),C){case 0:c=Dp(null,c,y,i,p);break e;case 1:c=Zv(null,c,y,i,p);break e;case 11:c=Kv(null,c,y,i,p);break e;case 14:c=Xv(null,c,y,or(y.type,i),p);break e}throw Error(n(306,y,""))}return c;case 0:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:or(y,C),Dp(i,c,y,C,p);case 1:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:or(y,C),Zv(i,c,y,C,p);case 3:e:{if(eb(c),i===null)throw Error(n(387));y=c.pendingProps,I=c.memoizedState,C=I.element,mv(i,c),Cu(c,y,null,p);var O=c.memoizedState;if(y=O.element,I.isDehydrated)if(I={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=I,c.memoizedState=I,c.flags&256){C=Ri(Error(n(423)),c),c=tb(i,c,y,p,C);break e}else if(y!==C){C=Ri(Error(n(424)),c),c=tb(i,c,y,p,C);break e}else for(An=Ps(c.stateNode.containerInfo.firstChild),In=c,st=!0,sr=null,p=hv(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ci(),y===C){c=os(i,c,p);break e}un(i,c,y,p)}c=c.child}return c;case 5:return xv(c),i===null&&dp(c),y=c.type,C=c.pendingProps,I=i!==null?i.memoizedProps:null,O=C.children,np(y,C)?O=null:I!==null&&np(y,I)&&(c.flags|=32),Qv(i,c),un(i,c,O,p),c.child;case 6:return i===null&&dp(c),null;case 13:return nb(i,c,p);case 4:return vp(c,c.stateNode.containerInfo),y=c.pendingProps,i===null?c.child=Ei(c,null,y,p):un(i,c,y,p),c.child;case 11:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:or(y,C),Kv(i,c,y,C,p);case 7:return un(i,c,c.pendingProps,p),c.child;case 8:return un(i,c,c.pendingProps.children,p),c.child;case 12:return un(i,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,C=c.pendingProps,I=c.memoizedProps,O=C.value,Qe(Su,y._currentValue),y._currentValue=O,I!==null)if(rr(I.value,O)){if(I.children===C.children&&!bn.current){c=os(i,c,p);break e}}else for(I=c.child,I!==null&&(I.return=c);I!==null;){var q=I.dependencies;if(q!==null){O=I.child;for(var Q=q.firstContext;Q!==null;){if(Q.context===y){if(I.tag===1){Q=ss(-1,p&-p),Q.tag=2;var ae=I.updateQueue;if(ae!==null){ae=ae.shared;var pe=ae.pending;pe===null?Q.next=Q:(Q.next=pe.next,pe.next=Q),ae.pending=Q}}I.lanes|=p,Q=I.alternate,Q!==null&&(Q.lanes|=p),gp(I.return,p,c),q.lanes|=p;break}Q=Q.next}}else if(I.tag===10)O=I.type===c.type?null:I.child;else if(I.tag===18){if(O=I.return,O===null)throw Error(n(341));O.lanes|=p,q=O.alternate,q!==null&&(q.lanes|=p),gp(O,p,c),O=I.sibling}else O=I.child;if(O!==null)O.return=I;else for(O=I;O!==null;){if(O===c){O=null;break}if(I=O.sibling,I!==null){I.return=O.return,O=I;break}O=O.return}I=O}un(i,c,C.children,p),c=c.child}return c;case 9:return C=c.type,y=c.pendingProps.children,Ni(c,p),C=Gn(C),y=y(C),c.flags|=1,un(i,c,y,p),c.child;case 14:return y=c.type,C=or(y,c.pendingProps),C=or(y.type,C),Xv(i,c,y,C,p);case 15:return Yv(i,c,c.type,c.pendingProps,p);case 17:return y=c.type,C=c.pendingProps,C=c.elementType===y?C:or(y,C),Mu(i,c),c.tag=1,wn(y)?(i=!0,gu(c)):i=!1,Ni(c,p),Bv(c,y,C),Ap(c,y,C,p),Fp(null,c,y,!0,i,p);case 19:return sb(i,c,p);case 22:return Jv(i,c,p)}throw Error(n(156,c.tag))};function Nb(i,c){return Gc(i,c)}function GT(i,c,p,y){this.tag=i,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(i,c,p,y){return new GT(i,c,p,y)}function nm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qT(i){if(typeof i=="function")return nm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===Y)return 14}return 2}function Us(i,c){var p=i.alternate;return p===null?(p=Xn(i.tag,c,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p.alternate=i,i.alternate=p):(p.pendingProps=c,p.type=i.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=i.flags&14680064,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue,c=i.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p}function Hu(i,c,p,y,C,I){var O=2;if(y=i,typeof i=="function")nm(i)&&(O=1);else if(typeof i=="string")O=5;else e:switch(i){case R:return Mo(p.children,C,I,c);case A:O=8,C|=8;break;case P:return i=Xn(12,p,c,C|2),i.elementType=P,i.lanes=I,i;case K:return i=Xn(13,p,c,C),i.elementType=K,i.lanes=I,i;case V:return i=Xn(19,p,c,C),i.elementType=V,i.lanes=I,i;case H:return Gu(p,C,I,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:O=10;break e;case L:O=9;break e;case B:O=11;break e;case Y:O=14;break e;case z:O=16,y=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return c=Xn(O,p,c,C),c.elementType=i,c.type=y,c.lanes=I,c}function Mo(i,c,p,y){return i=Xn(7,i,y,c),i.lanes=p,i}function Gu(i,c,p,y){return i=Xn(22,i,y,c),i.elementType=H,i.lanes=p,i.stateNode={isHidden:!1},i}function rm(i,c,p){return i=Xn(6,i,null,c),i.lanes=p,i}function sm(i,c,p){return c=Xn(4,i.children!==null?i.children:[],i.key,c),c.lanes=p,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function KT(i,c,p,y,C){this.tag=c,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=y,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function om(i,c,p,y,C,I,O,q,Q){return i=new KT(i,c,p,q,Q),c===1?(c=1,I===!0&&(c|=8)):c=0,I=Xn(3,null,null,c),i.current=I,I.stateNode=i,I.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},xp(I),i}function XT(i,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:y==null?null:""+y,children:i,containerInfo:c,implementation:p}}function Tb(i){if(!i)return Ds;i=i._reactInternals;e:{if(Ir(i)!==i||i.tag!==1)throw Error(n(170));var c=i;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(i.tag===1){var p=i.type;if(wn(p))return rv(i,p,c)}return c}function Rb(i,c,p,y,C,I,O,q,Q){return i=om(p,y,!0,i,C,I,O,q,Q),i.context=Tb(null),p=i.current,y=dn(),C=Ws(p),I=ss(y,C),I.callback=c??null,zs(p,I,C),i.current.lanes=C,So(i,C,y),jn(i,y),i}function qu(i,c,p,y){var C=c.current,I=dn(),O=Ws(C);return p=Tb(p),c.context===null?c.context=p:c.pendingContext=p,c=ss(I,O),c.payload={element:i},y=y===void 0?null:y,y!==null&&(c.callback=y),i=zs(C,c,O),i!==null&&(lr(i,C,O,I),ju(i,C,O)),O}function Ku(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Ib(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var p=i.retryLane;i.retryLane=p!==0&&p<c?p:c}}function im(i,c){Ib(i,c),(i=i.alternate)&&Ib(i,c)}function YT(){return null}var Ab=typeof reportError=="function"?reportError:function(i){console.error(i)};function am(i){this._internalRoot=i}Xu.prototype.render=am.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));qu(i,c,null,null)},Xu.prototype.unmount=am.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;Io(function(){qu(null,i,null,null)}),c[Zr]=null}};function Xu(i){this._internalRoot=i}Xu.prototype.unstable_scheduleHydration=function(i){if(i){var c=mx();i={blockedOn:null,target:i,priority:c};for(var p=0;p<Rs.length&&c!==0&&c<Rs[p].priority;p++);Rs.splice(p,0,i),p===0&&xx(i)}};function lm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Yu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Pb(){}function JT(i,c,p,y,C){if(C){if(typeof y=="function"){var I=y;y=function(){var ae=Ku(O);I.call(ae)}}var O=Rb(c,y,i,0,null,!1,!1,"",Pb);return i._reactRootContainer=O,i[Zr]=O.current,al(i.nodeType===8?i.parentNode:i),Io(),O}for(;C=i.lastChild;)i.removeChild(C);if(typeof y=="function"){var q=y;y=function(){var ae=Ku(Q);q.call(ae)}}var Q=om(i,0,!1,null,null,!1,!1,"",Pb);return i._reactRootContainer=Q,i[Zr]=Q.current,al(i.nodeType===8?i.parentNode:i),Io(function(){qu(c,Q,p,y)}),Q}function Ju(i,c,p,y,C){var I=p._reactRootContainer;if(I){var O=I;if(typeof C=="function"){var q=C;C=function(){var Q=Ku(O);q.call(Q)}}qu(c,O,i,C)}else O=JT(p,c,i,C,y);return Ku(O)}hx=function(i){switch(i.tag){case 3:var c=i.stateNode;if(c.current.memoizedState.isDehydrated){var p=Ar(c.pendingLanes);p!==0&&(Ah(c,p|1),jn(c,ut()),(qe&6)===0&&(Pi=ut()+500,Fs()))}break;case 13:Io(function(){var y=rs(i,1);if(y!==null){var C=dn();lr(y,i,1,C)}}),im(i,1)}},Ph=function(i){if(i.tag===13){var c=rs(i,134217728);if(c!==null){var p=dn();lr(c,i,134217728,p)}im(i,134217728)}},px=function(i){if(i.tag===13){var c=Ws(i),p=rs(i,c);if(p!==null){var y=dn();lr(p,i,c,y)}im(i,c)}},mx=function(){return Xe},gx=function(i,c){var p=Xe;try{return Xe=i,c()}finally{Xe=p}},xo=function(i,c,p){switch(c){case"input":if(Ae(i,p),c=p.name,p.type==="radio"&&c!=null){for(p=i;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==i&&y.form===i.form){var C=pu(y);if(!C)throw Error(n(90));fe(y),Ae(y,C)}}}break;case"textarea":Yr(i,p);break;case"select":c=p.value,c!=null&&jt(i,!!p.multiple,c,!1)}},St=Zp,Bt=Io;var QT={usingClientEntryPoint:!1,Events:[ul,bi,pu,Le,ct,Zp]},jl={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZT={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Uc(i),i===null?null:i.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||YT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{wo=Qu.inject(ZT),Vn=Qu}catch{}}return Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QT,Cn.createPortal=function(i,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(c))throw Error(n(200));return XT(i,c,null,p)},Cn.createRoot=function(i,c){if(!lm(i))throw Error(n(299));var p=!1,y="",C=Ab;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=om(i,1,!1,null,null,p,!1,y,C),i[Zr]=c.current,al(i.nodeType===8?i.parentNode:i),new am(c)},Cn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Uc(c),i=i===null?null:i.stateNode,i},Cn.flushSync=function(i){return Io(i)},Cn.hydrate=function(i,c,p){if(!Yu(c))throw Error(n(200));return Ju(null,i,c,!0,p)},Cn.hydrateRoot=function(i,c,p){if(!lm(i))throw Error(n(405));var y=p!=null&&p.hydratedSources||null,C=!1,I="",O=Ab;if(p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(I=p.identifierPrefix),p.onRecoverableError!==void 0&&(O=p.onRecoverableError)),c=Rb(c,null,i,1,p??null,C,!1,I,O),i[Zr]=c.current,al(i),y)for(i=0;i<y.length;i++)p=y[i],C=p._getVersion,C=C(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,C]:c.mutableSourceEagerHydrationData.push(p,C);return new Xu(c)},Cn.render=function(i,c,p){if(!Yu(c))throw Error(n(200));return Ju(null,i,c,!1,p)},Cn.unmountComponentAtNode=function(i){if(!Yu(i))throw Error(n(40));return i._reactRootContainer?(Io(function(){Ju(null,null,i,!1,function(){i._reactRootContainer=null,i[Zr]=null})}),!0):!1},Cn.unstable_batchedUpdates=Zp,Cn.unstable_renderSubtreeIntoContainer=function(i,c,p,y){if(!Yu(p))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Ju(i,c,p,!1,y)},Cn.version="18.3.1-next-f1338f8080-20240426",Cn}var Bb;function ES(){if(Bb)return dm.exports;Bb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dm.exports=lR(),dm.exports}var Wb;function cR(){if(Wb)return Zu;Wb=1;var e=ES();return Zu.createRoot=e.createRoot,Zu.hydrateRoot=e.hydrateRoot,Zu}var uR=cR();const dR=Ff(uR),_0=S.createContext({});function N0(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const _S=typeof window<"u",NS=_S?S.useLayoutEffect:S.useEffect,Of=S.createContext(null);function T0(e,t){e.indexOf(t)===-1&&e.push(t)}function R0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ur=(e,t,n)=>n>t?t:n<e?e:n;let I0=()=>{};const ms={},TS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function RS(e){return typeof e=="object"&&e!==null}const IS=e=>/^0[^.\s]+$/u.test(e);function A0(e){let t;return()=>(t===void 0&&(t=e()),t)}const Qn=e=>e,fR=(e,t)=>n=>t(e(n)),Cc=(...e)=>e.reduce(fR),Yl=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class P0{constructor(){this.subscriptions=[]}add(t){return T0(this.subscriptions,t),()=>R0(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fs=e=>e*1e3,Jn=e=>e/1e3;function AS(e,t){return t?e*(1e3/t):0}const PS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,hR=1e-7,pR=12;function mR(e,t,n,r,s){let a,l,u=0;do l=t+(n-t)/2,a=PS(l,r,s)-e,a>0?n=l:t=l;while(Math.abs(a)>hR&&++u<pR);return l}function Ec(e,t,n,r){if(e===t&&n===r)return Qn;const s=a=>mR(a,0,1,e,n);return a=>a===0||a===1?a:PS(s(a),t,r)}const MS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,DS=e=>t=>1-e(1-t),FS=Ec(.33,1.53,.69,.99),M0=DS(FS),OS=MS(M0),zS=e=>(e*=2)<1?.5*M0(e):.5*(2-Math.pow(2,-10*(e-1))),D0=e=>1-Math.sin(Math.acos(e)),$S=DS(D0),LS=MS(D0),gR=Ec(.42,0,1,1),yR=Ec(0,0,.58,1),BS=Ec(.42,0,.58,1),xR=e=>Array.isArray(e)&&typeof e[0]!="number",WS=e=>Array.isArray(e)&&typeof e[0]=="number",vR={linear:Qn,easeIn:gR,easeInOut:BS,easeOut:yR,circIn:D0,circInOut:LS,circOut:$S,backIn:M0,backInOut:OS,backOut:FS,anticipate:zS},bR=e=>typeof e=="string",Vb=e=>{if(WS(e)){I0(e.length===4);const[t,n,r,s]=e;return Ec(t,n,r,s)}else if(bR(e))return vR[e];return e},ed=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wR(e,t){let n=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(m){l.has(m)&&(f.schedule(m),e()),m(u)}const f={schedule:(m,h=!1,g=!1)=>{const v=g&&s?n:r;return h&&l.add(m),v.has(m)||v.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(u=m,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(m))}};return f}const SR=40;function VS(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=ed.reduce((k,E)=>(k[E]=wR(a),k),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:m,update:h,preRender:g,render:x,postRender:v}=l,b=()=>{const k=ms.useManualTiming?s.timestamp:performance.now();n=!1,ms.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(k-s.timestamp,SR),1)),s.timestamp=k,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),m.process(s),h.process(s),g.process(s),x.process(s),v.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(b))},w=()=>{n=!0,r=!0,s.isProcessing||e(b)};return{schedule:ed.reduce((k,E)=>{const N=l[E];return k[E]=(_,R=!1,A=!1)=>(n||w(),N.schedule(_,R,A)),k},{}),cancel:k=>{for(let E=0;E<ed.length;E++)l[ed[E]].cancel(k)},state:s,steps:l}}const{schedule:et,cancel:so,state:Qt,steps:pm}=VS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qn,!0);let Od;function kR(){Od=void 0}const pn={now:()=>(Od===void 0&&pn.set(Qt.isProcessing||ms.useManualTiming?Qt.timestamp:performance.now()),Od),set:e=>{Od=e,queueMicrotask(kR)}},US=e=>t=>typeof t=="string"&&t.startsWith(e),HS=US("--"),jR=US("var(--"),F0=e=>jR(e)?CR.test(e.split("/*")[0].trim()):!1,CR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ub(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Ca={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Jl={...Ca,transform:e=>Ur(0,1,e)},td={...Ca,default:1},Wl=e=>Math.round(e*1e5)/1e5,O0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ER(e){return e==null}const _R=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,z0=(e,t)=>n=>!!(typeof n=="string"&&_R.test(n)&&n.startsWith(e)||t&&!ER(n)&&Object.prototype.hasOwnProperty.call(n,t)),GS=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,l,u]=r.match(O0);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},NR=e=>Ur(0,255,e),mm={...Ca,transform:e=>Math.round(NR(e))},Go={test:z0("rgb","red"),parse:GS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+mm.transform(e)+", "+mm.transform(t)+", "+mm.transform(n)+", "+Wl(Jl.transform(r))+")"};function TR(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const pg={test:z0("#"),parse:TR,transform:Go.transform},_c=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ys=_c("deg"),Br=_c("%"),Ne=_c("px"),RR=_c("vh"),IR=_c("vw"),Hb={...Br,parse:e=>Br.parse(e)/100,transform:e=>Br.transform(e*100)},Qi={test:z0("hsl","hue"),parse:GS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Br.transform(Wl(t))+", "+Br.transform(Wl(n))+", "+Wl(Jl.transform(r))+")"},Nt={test:e=>Go.test(e)||pg.test(e)||Qi.test(e),parse:e=>Go.test(e)?Go.parse(e):Qi.test(e)?Qi.parse(e):pg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Go.transform(e):Qi.transform(e),getAnimatableNone:e=>{const t=Nt.parse(e);return t.alpha=0,Nt.transform(t)}},AR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PR(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(O0))==null?void 0:t.length)||0)+(((n=e.match(AR))==null?void 0:n.length)||0)>0}const qS="number",KS="color",MR="var",DR="var(",Gb="${}",FR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ql(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=t.replace(FR,d=>(Nt.test(d)?(r.color.push(a),s.push(KS),n.push(Nt.parse(d))):d.startsWith(DR)?(r.var.push(a),s.push(MR),n.push(d)):(r.number.push(a),s.push(qS),n.push(parseFloat(d))),++a,Gb)).split(Gb);return{values:n,split:u,indexes:r,types:s}}function XS(e){return Ql(e).values}function YS(e){const{split:t,types:n}=Ql(e),r=t.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=t[l],s[l]!==void 0){const u=n[l];u===qS?a+=Wl(s[l]):u===KS?a+=Nt.transform(s[l]):a+=s[l]}return a}}const OR=e=>typeof e=="number"?0:Nt.test(e)?Nt.getAnimatableNone(e):e;function zR(e){const t=XS(e);return YS(e)(t.map(OR))}const oo={test:PR,parse:XS,createTransformer:YS,getAnimatableNone:zR};function gm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $R({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,l=0;if(!t)s=a=l=n;else{const u=n<.5?n*(1+t):n+t-n*t,d=2*n-u;s=gm(d,u,e+1/3),a=gm(d,u,e),l=gm(d,u,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Zd(e,t){return n=>n>0?t:e}const mt=(e,t,n)=>e+(t-e)*n,ym=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},LR=[pg,Go,Qi],BR=e=>LR.find(t=>t.test(e));function qb(e){const t=BR(e);if(!t)return!1;let n=t.parse(e);return t===Qi&&(n=$R(n)),n}const Kb=(e,t)=>{const n=qb(e),r=qb(t);if(!n||!r)return Zd(e,t);const s={...n};return a=>(s.red=ym(n.red,r.red,a),s.green=ym(n.green,r.green,a),s.blue=ym(n.blue,r.blue,a),s.alpha=mt(n.alpha,r.alpha,a),Go.transform(s))},mg=new Set(["none","hidden"]);function WR(e,t){return mg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function VR(e,t){return n=>mt(e,t,n)}function $0(e){return typeof e=="number"?VR:typeof e=="string"?F0(e)?Zd:Nt.test(e)?Kb:GR:Array.isArray(e)?JS:typeof e=="object"?Nt.test(e)?Kb:UR:Zd}function JS(e,t){const n=[...e],r=n.length,s=e.map((a,l)=>$0(a)(a,t[l]));return a=>{for(let l=0;l<r;l++)n[l]=s[l](a);return n}}function UR(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=$0(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function HR(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=e.indexes[a][r[a]],u=e.values[l]??0;n[s]=u,r[a]++}return n}const GR=(e,t)=>{const n=oo.createTransformer(t),r=Ql(e),s=Ql(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?mg.has(e)&&!s.values.length||mg.has(t)&&!r.values.length?WR(e,t):Cc(JS(HR(r,s),s.values),n):Zd(e,t)};function QS(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?mt(e,t,n):$0(e)(e,t)}const qR=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>et.update(t,n),stop:()=>so(t),now:()=>Qt.isProcessing?Qt.timestamp:pn.now()}},ZS=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ef=2e4;function L0(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<ef;)t+=n,r=e.next(t);return t>=ef?1/0:t}function KR(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(L0(r),ef);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:Jn(s)}}const XR=5;function ek(e,t,n){const r=Math.max(t-XR,0);return AS(n-e(r),t-r)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xm=.001;function YR({duration:e=bt.duration,bounce:t=bt.bounce,velocity:n=bt.velocity,mass:r=bt.mass}){let s,a,l=1-t;l=Ur(bt.minDamping,bt.maxDamping,l),e=Ur(bt.minDuration,bt.maxDuration,Jn(e)),l<1?(s=f=>{const m=f*l,h=m*e,g=m-n,x=gg(f,l),v=Math.exp(-h);return xm-g/x*v},a=f=>{const h=f*l*e,g=h*n+n,x=Math.pow(l,2)*Math.pow(f,2)*e,v=Math.exp(-h),b=gg(Math.pow(f,2),l);return(-s(f)+xm>0?-1:1)*((g-x)*v)/b}):(s=f=>{const m=Math.exp(-f*e),h=(f-n)*e+1;return-xm+m*h},a=f=>{const m=Math.exp(-f*e),h=(n-f)*(e*e);return m*h});const u=5/e,d=QR(s,a,u);if(e=fs(e),isNaN(d))return{stiffness:bt.stiffness,damping:bt.damping,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:e}}}const JR=12;function QR(e,t,n){let r=n;for(let s=1;s<JR;s++)r=r-e(r)/t(r);return r}function gg(e,t){return e*Math.sqrt(1-t*t)}const ZR=["duration","bounce"],e6=["stiffness","damping","mass"];function Xb(e,t){return t.some(n=>e[n]!==void 0)}function t6(e){let t={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...e};if(!Xb(e,e6)&&Xb(e,ZR))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Ur(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:bt.mass,stiffness:s,damping:a}}else{const n=YR(e);t={...t,...n,mass:bt.mass},t.isResolvedFromDuration=!0}return t}function tf(e=bt.visualDuration,t=bt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:h,velocity:g,isResolvedFromDuration:x}=t6({...n,velocity:-Jn(n.velocity||0)}),v=g||0,b=f/(2*Math.sqrt(d*m)),w=l-a,j=Jn(Math.sqrt(d/m)),T=Math.abs(w)<5;r||(r=T?bt.restSpeed.granular:bt.restSpeed.default),s||(s=T?bt.restDelta.granular:bt.restDelta.default);let k;if(b<1){const N=gg(j,b);k=_=>{const R=Math.exp(-b*j*_);return l-R*((v+b*j*w)/N*Math.sin(N*_)+w*Math.cos(N*_))}}else if(b===1)k=N=>l-Math.exp(-j*N)*(w+(v+j*w)*N);else{const N=j*Math.sqrt(b*b-1);k=_=>{const R=Math.exp(-b*j*_),A=Math.min(N*_,300);return l-R*((v+b*j*w)*Math.sinh(A)+N*w*Math.cosh(A))/N}}const E={calculatedDuration:x&&h||null,next:N=>{const _=k(N);if(x)u.done=N>=h;else{let R=N===0?v:0;b<1&&(R=N===0?fs(v):ek(k,N,_));const A=Math.abs(R)<=r,P=Math.abs(l-_)<=s;u.done=A&&P}return u.value=u.done?l:_,u},toString:()=>{const N=Math.min(L0(E),ef),_=ZS(R=>E.next(N*R).value,N,30);return N+"ms "+_},toTransition:()=>{}};return E}tf.applyToOptions=e=>{const t=KR(e,100,tf);return e.ease=t.ease,e.duration=fs(t.duration),e.type="keyframes",e};function yg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:m}){const h=e[0],g={done:!1,value:h},x=A=>u!==void 0&&A<u||d!==void 0&&A>d,v=A=>u===void 0?d:d===void 0||Math.abs(u-A)<Math.abs(d-A)?u:d;let b=n*t;const w=h+b,j=l===void 0?w:l(w);j!==w&&(b=j-h);const T=A=>-b*Math.exp(-A/r),k=A=>j+T(A),E=A=>{const P=T(A),$=k(A);g.done=Math.abs(P)<=f,g.value=g.done?j:$};let N,_;const R=A=>{x(g.value)&&(N=A,_=tf({keyframes:[g.value,v(g.value)],velocity:ek(k,A,g.value),damping:s,stiffness:a,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:A=>{let P=!1;return!_&&N===void 0&&(P=!0,E(A),R(A)),N!==void 0&&A>=N?_.next(A-N):(!P&&E(A),g)}}}function n6(e,t,n){const r=[],s=n||ms.mix||QS,a=e.length-1;for(let l=0;l<a;l++){let u=s(e[l],e[l+1]);if(t){const d=Array.isArray(t)?t[l]||Qn:t;u=Cc(d,u)}r.push(u)}return r}function r6(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(I0(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const u=n6(t,r,s),d=u.length,f=m=>{if(l&&m<e[0])return t[0];let h=0;if(d>1)for(;h<e.length-2&&!(m<e[h+1]);h++);const g=Yl(e[h],e[h+1],m);return u[h](g)};return n?m=>f(Ur(e[0],e[a-1],m)):f}function s6(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Yl(0,t,r);e.push(mt(n,1,s))}}function o6(e){const t=[0];return s6(t,e.length-1),t}function i6(e,t){return e.map(n=>n*t)}function a6(e,t){return e.map(()=>t||BS).splice(0,e.length-1)}function Vl({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=xR(r)?r.map(Vb):Vb(r),a={done:!1,value:t[0]},l=i6(n&&n.length===t.length?n:o6(t),e),u=r6(l,t,{ease:Array.isArray(s)?s:a6(t,s)});return{calculatedDuration:e,next:d=>(a.value=u(d),a.done=d>=e,a)}}const l6=e=>e!==null;function B0(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(l6),u=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const c6={decay:yg,inertia:yg,tween:Vl,keyframes:Vl,spring:tf};function tk(e){typeof e.type=="string"&&(e.type=c6[e.type])}class W0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const u6=e=>e/100;class V0 extends W0{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==pn.now()&&this.tick(pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;tk(t);const{type:n=Vl,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:u}=t;const d=n||Vl;d!==Vl&&typeof u[0]!="number"&&(this.mixKeyframes=Cc(u6,QS(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=L0(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:m,repeat:h,repeatType:g,repeatDelay:x,type:v,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let k=this.currentTime,E=r;if(h){const A=Math.min(this.currentTime,s)/u;let P=Math.floor(A),$=A%1;!$&&A>=1&&($=1),$===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(g==="reverse"?($=1-$,x&&($-=x/u)):g==="mirror"&&(E=l)),k=Ur(0,1,$)*u}const N=T?{done:!1,value:m[0]}:E.next(k);a&&(N.value=a(N.value));let{done:_}=N;!T&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&v!==yg&&(N.value=B0(m,this.options,w,this.speed)),b&&b(N.value),R&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return Jn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Jn(t)}get time(){return Jn(this.currentTime)}set time(t){var n;t=fs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(pn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Jn(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:t=qR,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function d6(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const qo=e=>e*180/Math.PI,xg=e=>{const t=qo(Math.atan2(e[1],e[0]));return vg(t)},f6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:xg,rotateZ:xg,skewX:e=>qo(Math.atan(e[1])),skewY:e=>qo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},vg=e=>(e=e%360,e<0&&(e+=360),e),Yb=xg,Jb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Qb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),h6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Jb,scaleY:Qb,scale:e=>(Jb(e)+Qb(e))/2,rotateX:e=>vg(qo(Math.atan2(e[6],e[5]))),rotateY:e=>vg(qo(Math.atan2(-e[2],e[0]))),rotateZ:Yb,rotate:Yb,skewX:e=>qo(Math.atan(e[4])),skewY:e=>qo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function bg(e){return e.includes("scale")?1:0}function wg(e,t){if(!e||e==="none")return bg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=h6,s=n;else{const u=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=f6,s=u}if(!s)return bg(t);const a=r[t],l=s[1].split(",").map(m6);return typeof a=="function"?a(l):l[a]}const p6=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return wg(n,t)};function m6(e){return parseFloat(e.trim())}const Ea=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_a=new Set(Ea),Zb=e=>e===Ca||e===Ne,g6=new Set(["x","y","z"]),y6=Ea.filter(e=>!g6.has(e));function x6(e){const t=[];return y6.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const to={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>wg(t,"x"),y:(e,{transform:t})=>wg(t,"y")};to.translateX=to.x;to.translateY=to.y;const Yo=new Set;let Sg=!1,kg=!1,jg=!1;function nk(){if(kg){const e=Array.from(Yo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=x6(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,l])=>{var u;(u=r.getValue(a))==null||u.set(l)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kg=!1,Sg=!1,Yo.forEach(e=>e.complete(jg)),Yo.clear()}function rk(){Yo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(kg=!0)})}function v6(){jg=!0,rk(),nk(),jg=!1}class U0{constructor(t,n,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Yo.add(this),Sg||(Sg=!0,et.read(rk),et.resolveKeyframes(nk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s==null?void 0:s.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const u=r.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}d6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Yo.delete(this)}cancel(){this.state==="scheduled"&&(Yo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b6=e=>e.startsWith("--");function w6(e,t,n){b6(t)?e.style.setProperty(t,n):e.style[t]=n}const S6=A0(()=>window.ScrollTimeline!==void 0),k6={};function j6(e,t){const n=A0(e);return()=>k6[t]??n()}const sk=j6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ew={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fl([0,.65,.55,1]),circOut:Fl([.55,0,1,.45]),backIn:Fl([.31,.01,.66,-.59]),backOut:Fl([.33,1.53,.69,.99])};function ok(e,t){if(e)return typeof e=="function"?sk()?ZS(e,t):"ease-out":WS(e)?Fl(e):Array.isArray(e)?e.map(n=>ok(n,t)||ew.easeOut):ew[e]}function C6(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const m={[t]:n};d&&(m.offset=d);const h=ok(u,s);Array.isArray(h)&&(m.easing=h);const g={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),e.animate(m,g)}function ik(e){return typeof e=="function"&&"applyToOptions"in e}function E6({type:e,...t}){return ik(e)&&sk()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _6 extends W0{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,I0(typeof t.type!="string");const f=E6(t);this.animation=C6(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=B0(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):w6(n,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const t=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Jn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Jn(t)}get time(){return Jn(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=fs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&S6()?(this.animation.timeline=t,Qn):n(this)}}const ak={anticipate:zS,backInOut:OS,circInOut:LS};function N6(e){return e in ak}function T6(e){typeof e.ease=="string"&&N6(e.ease)&&(e.ease=ak[e.ease])}const vm=10;class R6 extends _6{constructor(t){T6(t),tk(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const u=new V0({...l,autoplay:!1}),d=Math.max(vm,pn.now()-this.startTime),f=Ur(0,vm,d-vm);n.setWithVelocity(u.sample(Math.max(0,d-f)).value,u.sample(d).value,f),u.stop()}}const tw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(oo.test(e)||e==="0")&&!e.startsWith("url("));function I6(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function A6(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],l=tw(s,t),u=tw(a,t);return!l||!u?!1:I6(e)||(n==="spring"||ik(n))&&r}function Cg(e){e.duration=0,e.type="keyframes"}const P6=new Set(["opacity","clipPath","filter","transform"]),M6=A0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function D6(e){var m;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:l}=e;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return M6()&&n&&P6.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const F6=40;class O6 extends W0{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:m,...h}){var v;super(),this.stop=()=>{var b,w;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=pn.now();const g={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:m,...h},x=(m==null?void 0:m.KeyframeResolver)||U0;this.keyframeResolver=new x(u,(b,w,j)=>this.onKeyframesResolved(b,w,g,!j),d,f,m),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,s){var w,j;this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:m}=r;this.resolvedAt=pn.now(),A6(t,a,l,u)||((ms.instantAnimations||!d)&&(m==null||m(B0(t,r,n))),t[0]=t[t.length-1],Cg(r),r.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>F6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},x=!f&&D6(g),v=(j=(w=g.motionValue)==null?void 0:w.owner)==null?void 0:j.current,b=x?new R6({...g,element:v}):new V0(g);b.finished.then(()=>{this.notifyFinished()}).catch(Qn),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),v6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function lk(e,t,n,r=0,s=1){const a=Array.from(e).sort((f,m)=>f.sortNodePosition(m)).indexOf(t),l=e.size,u=(l-1)*r;return typeof n=="function"?n(a,l):s===1?a*r:u-a*r}const z6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $6(e){const t=z6.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function ck(e,t,n=1){const[r,s]=$6(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const l=a.trim();return TS(l)?parseFloat(l):l}return F0(s)?ck(s,t,n+1):s}const L6={type:"spring",stiffness:500,damping:25,restSpeed:10},B6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),W6={type:"keyframes",duration:.8},V6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},U6=(e,{keyframes:t})=>t.length>2?W6:_a.has(e)?e.startsWith("scale")?B6(t[1]):L6:V6,H6=e=>e!==null;function G6(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(H6),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}function H0(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}function q6({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const G0=(e,t,n,r={},s,a)=>l=>{const u=H0(r,e)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-fs(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:g=>{t.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:e,motionValue:t,element:a?void 0:s};q6(u)||Object.assign(m,U6(e,m)),m.duration&&(m.duration=fs(m.duration)),m.repeatDelay&&(m.repeatDelay=fs(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Cg(m),m.delay===0&&(h=!0)),(ms.instantAnimations||ms.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(h=!0,Cg(m),m.delay=0),m.allowFlatten=!u.type&&!u.ease,h&&!a&&t.get()!==void 0){const g=G6(m.keyframes,u);if(g!==void 0){et.update(()=>{m.onUpdate(g),m.onComplete()});return}}return u.isSync?new V0(m):new O6(m)};function nw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function q0(e,t,n,r){if(typeof t=="function"){const[s,a]=nw(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=nw(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function oa(e,t,n){const r=e.getProps();return q0(r,t,n!==void 0?n:r.custom,e)}const uk=new Set(["width","height","top","left","right","bottom",...Ea]),rw=30,K6=e=>!isNaN(parseFloat(e));class X6{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=pn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=pn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=K6(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new P0);const r=this.events[t].add(n);return t==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rw);return AS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pa(e,t){return new X6(e,t)}const Eg=e=>Array.isArray(e);function Y6(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,pa(n))}function J6(e){return Eg(e)?e[e.length-1]||0:e}function Q6(e,t){const n=oa(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const l in a){const u=J6(a[l]);Y6(e,l,u)}}const an=e=>!!(e&&e.getVelocity);function Z6(e){return!!(an(e)&&e.add)}function _g(e,t){const n=e.getValue("willChange");if(Z6(n))return n.add(t);if(!n&&ms.WillChange){const r=new ms.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function K0(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const eI="framerAppearId",dk="data-"+K0(eI);function fk(e){return e.props[dk]}function tI({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function hk(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:l,...u}=t;const d=a==null?void 0:a.reduceMotion;r&&(a=r);const f=[],m=s&&e.animationState&&e.animationState.getState()[s];for(const h in u){const g=e.getValue(h,e.latestValues[h]??null),x=u[h];if(x===void 0||m&&tI(m,h))continue;const v={delay:n,...H0(a||{},h)},b=g.get();if(b!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===b&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const k=fk(e);if(k){const E=window.MotionHandoffAnimation(k,h,et);E!==null&&(v.startTime=E,w=!0)}}_g(e,h);const j=d??e.shouldReduceMotion;g.start(G0(h,g,x,j&&uk.has(h)?{type:!1}:v,e,w));const T=g.animation;T&&f.push(T)}return l&&Promise.all(f).then(()=>{et.update(()=>{l&&Q6(e,l)})}),f}function Ng(e,t,n={}){var d;const r=oa(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(hk(e,r,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:h,staggerDirection:g}=s;return nI(e,t,f,m,h,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[f,m]=u==="beforeChildren"?[a,l]:[l,a];return f().then(()=>m())}else return Promise.all([a(),l(n.delay)])}function nI(e,t,n=0,r=0,s=0,a=1,l){const u=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),u.push(Ng(d,t,{...l,delay:n+(typeof r=="function"?0:r)+lk(e.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function rI(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>Ng(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=Ng(e,t,n);else{const s=typeof t=="function"?oa(e,t,n.custom):t;r=Promise.all(hk(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const sI={test:e=>e==="auto",parse:e=>e},pk=e=>t=>t.test(e),mk=[Ca,Ne,Br,Ys,IR,RR,sI],sw=e=>mk.find(pk(e));function oI(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||IS(e):!0}const iI=new Set(["brightness","contrast","saturate","opacity"]);function aI(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(O0)||[];if(!r)return e;const s=n.replace(r,"");let a=iI.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const lI=/\b([a-z-]*)\(.*?\)/gu,Tg={...oo,getAnimatableNone:e=>{const t=e.match(lI);return t?t.map(aI).join(" "):e}},ow={...Ca,transform:Math.round},cI={rotate:Ys,rotateX:Ys,rotateY:Ys,rotateZ:Ys,scale:td,scaleX:td,scaleY:td,scaleZ:td,skew:Ys,skewX:Ys,skewY:Ys,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Jl,originX:Hb,originY:Hb,originZ:Ne},X0={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,inset:Ne,insetBlock:Ne,insetBlockStart:Ne,insetBlockEnd:Ne,insetInline:Ne,insetInlineStart:Ne,insetInlineEnd:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,paddingBlock:Ne,paddingBlockStart:Ne,paddingBlockEnd:Ne,paddingInline:Ne,paddingInlineStart:Ne,paddingInlineEnd:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,marginBlock:Ne,marginBlockStart:Ne,marginBlockEnd:Ne,marginInline:Ne,marginInlineStart:Ne,marginInlineEnd:Ne,fontSize:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...cI,zIndex:ow,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:ow},uI={...X0,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:Tg,WebkitFilter:Tg},gk=e=>uI[e];function yk(e,t){let n=gk(e);return n!==Tg&&(n=oo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const dI=new Set(["auto","none","0"]);function fI(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!dI.has(a)&&Ql(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=yk(n,s)}class hI extends U0{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let h=t[m];if(typeof h=="string"&&(h=h.trim(),F0(h))){const g=ck(h,n.current);g!==void 0&&(t[m]=g),m===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!uk.has(r)||t.length!==2)return;const[s,a]=t,l=sw(s),u=sw(a),d=Ub(s),f=Ub(a);if(d!==f&&to[r]){this.needsMeasurement=!0;return}if(l!==u)if(Zb(l)&&Zb(u))for(let m=0;m<t.length;m++){const h=t[m];typeof h=="string"&&(t[m]=parseFloat(h))}else to[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||oI(t[s]))&&r.push(s);r.length&&fI(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=to[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=to[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function xk(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(r=>r!=null)}const vk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Rg(e){return RS(e)&&"offsetHeight"in e}const{schedule:Y0}=VS(queueMicrotask,!1),dr={x:!1,y:!1};function bk(){return dr.x||dr.y}function pI(e){return e==="x"||e==="y"?dr[e]?null:(dr[e]=!0,()=>{dr[e]=!1}):dr.x||dr.y?null:(dr.x=dr.y=!0,()=>{dr.x=dr.y=!1})}function wk(e,t){const n=xk(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function iw(e){return!(e.pointerType==="touch"||bk())}function mI(e,t,n={}){const[r,s,a]=wk(e,n),l=u=>{if(!iw(u))return;const{target:d}=u,f=t(d,u);if(typeof f!="function"||!d)return;const m=h=>{iw(h)&&(f(h),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const Sk=(e,t)=>t?e===t?!0:Sk(e,t.parentElement):!1,J0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,gI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yI(e){return gI.has(e.tagName)||e.isContentEditable===!0}const xI=new Set(["INPUT","SELECT","TEXTAREA"]);function vI(e){return xI.has(e.tagName)||e.isContentEditable===!0}const zd=new WeakSet;function aw(e){return t=>{t.key==="Enter"&&e(t)}}function bm(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const bI=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=aw(()=>{if(zd.has(n))return;bm(n,"down");const s=aw(()=>{bm(n,"up")}),a=()=>bm(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function lw(e){return J0(e)&&!bk()}function wI(e,t,n={}){const[r,s,a]=wk(e,n),l=u=>{const d=u.currentTarget;if(!lw(u))return;zd.add(d);const f=t(d,u),m=(x,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),zd.has(d)&&zd.delete(d),lw(x)&&typeof f=="function"&&f(x,{success:v})},h=x=>{m(x,d===window||d===document||n.useGlobalTarget||Sk(d,x.target))},g=x=>{m(x,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",g,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),Rg(u)&&(u.addEventListener("focus",f=>bI(f,s)),!yI(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function kk(e){return RS(e)&&"ownerSVGElement"in e}function SI(e){return kk(e)&&e.tagName==="svg"}const kI=[...mk,Nt,oo],jI=e=>kI.find(pk(e)),cw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zi=()=>({x:cw(),y:cw()}),uw=()=>({min:0,max:0}),zt=()=>({x:uw(),y:uw()}),Ig={current:null},jk={current:!1},CI=typeof window<"u";function EI(){if(jk.current=!0,!!CI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ig.current=e.matches;e.addEventListener("change",t),t()}else Ig.current=!1}const _I=new WeakMap;function zf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Zl(e){return typeof e=="string"||Array.isArray(e)}const Q0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Z0=["initial",...Q0];function $f(e){return zf(e.animate)||Z0.some(t=>Zl(e[t]))}function Ck(e){return!!($f(e)||e.variants)}function NI(e,t,n){for(const r in t){const s=t[r],a=n[r];if(an(s))e.addValue(r,s);else if(an(a))e.addValue(r,pa(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const l=e.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=e.getStaticValue(r);e.addValue(r,pa(l!==void 0?l:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const dw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let nf={};function Ek(e){nf=e}function TI(){return nf}class RI{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:a,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=U0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=pn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,et.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=m,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=a,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=$f(n),this.isVariantNode=Ck(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in g){const v=g[x];f[x]!==void 0&&an(v)&&v.set(f[x])}}mount(t){var n;this.current=t,_I.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(jk.current||EI(),this.shouldReduceMotion=Ig.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),so(this.notifyUpdate),so(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=_a.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in nf){const n=nf[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dw.length;r++){const s=dw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=NI(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=pa(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(TS(r)||IS(r))?r=parseFloat(r):!jI(r)&&oo.test(n)&&(r=yk(t,n)),this.setBaseTarget(t,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=q0(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!an(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new P0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Y0.render(this.render)}}class _k extends RI{constructor(){super(...arguments),this.KeyframeResolver=hI}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;an(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Nk({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function II({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function AI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wm(e){return e===void 0||e===1}function Ag({scale:e,scaleX:t,scaleY:n}){return!wm(e)||!wm(t)||!wm(n)}function Bo(e){return Ag(e)||Tk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Tk(e){return fw(e.x)||fw(e.y)}function fw(e){return e&&e!=="0%"}function rf(e,t,n){const r=e-n,s=t*r;return n+s}function hw(e,t,n,r,s){return s!==void 0&&(e=rf(e,s,r)),rf(e,n,r)+t}function Pg(e,t=0,n=1,r,s){e.min=hw(e.min,t,n,r,s),e.max=hw(e.max,t,n,r,s)}function Rk(e,{x:t,y:n}){Pg(e.x,t.translate,t.scale,t.originPoint),Pg(e.y,n.translate,n.scale,n.originPoint)}const pw=.999999999999,mw=1.0000000000001;function PI(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,l;for(let u=0;u<s;u++){a=n[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ta(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,Rk(e,l)),r&&Bo(a.latestValues)&&ta(e,a.latestValues))}t.x<mw&&t.x>pw&&(t.x=1),t.y<mw&&t.y>pw&&(t.y=1)}function ea(e,t){e.min=e.min+t,e.max=e.max+t}function gw(e,t,n,r,s=.5){const a=mt(e.min,e.max,s);Pg(e,t,n,a,r)}function ta(e,t){gw(e.x,t.x,t.scaleX,t.scale,t.originX),gw(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ik(e,t){return Nk(AI(e.getBoundingClientRect(),t))}function MI(e,t,n){const r=Ik(e,n),{scroll:s}=t;return s&&(ea(r.x,s.offset.x),ea(r.y,s.offset.y)),r}const DI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FI=Ea.length;function OI(e,t,n){let r="",s=!0;for(let a=0;a<FI;a++){const l=Ea[a],u=e[l];if(u===void 0)continue;let d=!0;if(typeof u=="number")d=u===(l.startsWith("scale")?1:0);else{const f=parseFloat(u);d=l.startsWith("scale")?f===1:f===0}if(!d||n){const f=vk(u,X0[l]);if(!d){s=!1;const m=DI[l]||l;r+=`${m}(${f}) `}n&&(t[l]=f)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ey(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let l=!1,u=!1;for(const d in t){const f=t[d];if(_a.has(d)){l=!0;continue}else if(HS(d)){s[d]=f;continue}else{const m=vk(f,X0[d]);d.startsWith("origin")?(u=!0,a[d]=m):r[d]=m}}if(t.transform||(l||n?r.transform=OI(t,e.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${f} ${m}`}}function Ak(e,{style:t,vars:n},r,s){const a=e.style;let l;for(l in t)a[l]=t[l];s==null||s.applyProjectionStyles(a,r);for(l in n)a.setProperty(l,n[l])}function yw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const El={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ne.test(e))e=parseFloat(e);else return e;const n=yw(e,t.target.x),r=yw(e,t.target.y);return`${n}% ${r}%`}},zI={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=oo.parse(e);if(s.length>5)return r;const a=oo.createTransformer(e),l=typeof s[0]!="number"?1:0,u=n.x.scale*t.x,d=n.y.scale*t.y;s[0+l]/=u,s[1+l]/=d;const f=mt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}},Mg={borderRadius:{...El,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:El,borderTopRightRadius:El,borderBottomLeftRadius:El,borderBottomRightRadius:El,boxShadow:zI};function Pk(e,{layout:t,layoutId:n}){return _a.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Mg[e]||e==="opacity")}function ty(e,t,n){var l;const r=e.style,s=t==null?void 0:t.style,a={};if(!r)return a;for(const u in r)(an(r[u])||s&&an(s[u])||Pk(u,e)||((l=n==null?void 0:n.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(a[u]=r[u]);return a}function $I(e){return window.getComputedStyle(e)}class LI extends _k{constructor(){super(...arguments),this.type="html",this.renderInstance=Ak}readValueFromInstance(t,n){var r;if(_a.has(n))return(r=this.projection)!=null&&r.isProjecting?bg(n):p6(t,n);{const s=$I(t),a=(HS(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Ik(t,n)}build(t,n,r){ey(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return ty(t,n,r)}}const BI={offset:"stroke-dashoffset",array:"stroke-dasharray"},WI={offset:"strokeDashoffset",array:"strokeDasharray"};function VI(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?BI:WI;e[a.offset]=`${-r}`,e[a.array]=`${t} ${n}`}const UI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Mk(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},d,f,m){if(ey(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g}=e;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete h.transformBox);for(const x of UI)h[x]!==void 0&&(g[x]=h[x],delete h[x]);t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&VI(h,s,a,l,!1)}const Dk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Fk=e=>typeof e=="string"&&e.toLowerCase()==="svg";function HI(e,t,n,r){Ak(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Dk.has(s)?s:K0(s),t.attrs[s])}function Ok(e,t,n){const r=ty(e,t,n);for(const s in e)if(an(e[s])||an(t[s])){const a=Ea.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}class GI extends _k{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_a.has(n)){const r=gk(n);return r&&r.default||0}return n=Dk.has(n)?n:K0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Ok(t,n,r)}build(t,n,r){Mk(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){HI(t,n,r,s)}mount(t){this.isSVGTag=Fk(t.tagName),super.mount(t)}}const qI=Z0.length;function zk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?zk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<qI;n++){const r=Z0[n],s=e.props[r];(Zl(s)||s===!1)&&(t[r]=s)}return t}function $k(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const KI=[...Q0].reverse(),XI=Q0.length;function YI(e){return t=>Promise.all(t.map(({animation:n,options:r})=>rI(e,n,r)))}function JI(e){let t=YI(e),n=xw(),r=!0;const s=d=>(f,m)=>{var g;const h=oa(e,m,d==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);if(h){const{transition:x,transitionEnd:v,...b}=h;f={...f,...b,...v}}return f};function a(d){t=d(e)}function l(d){const{props:f}=e,m=zk(e.parent)||{},h=[],g=new Set;let x={},v=1/0;for(let w=0;w<XI;w++){const j=KI[w],T=n[j],k=f[j]!==void 0?f[j]:m[j],E=Zl(k),N=j===d?T.isActive:null;N===!1&&(v=w);let _=k===m[j]&&k!==f[j]&&E;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...x},!T.isActive&&N===null||!k&&!T.prevProp||zf(k)||typeof k=="boolean")continue;const R=QI(T.prevProp,k);let A=R||j===d&&T.isActive&&!_&&E||w>v&&E,P=!1;const $=Array.isArray(k)?k:[k];let L=$.reduce(s(j),{});N===!1&&(L={});const{prevResolvedValues:B={}}=T,K={...B,...L},V=H=>{A=!0,g.has(H)&&(P=!0,g.delete(H)),T.needsAnimating[H]=!0;const M=e.getValue(H);M&&(M.liveStyle=!1)};for(const H in K){const M=L[H],U=B[H];if(x.hasOwnProperty(H))continue;let F=!1;Eg(M)&&Eg(U)?F=!$k(M,U):F=M!==U,F?M!=null?V(H):g.add(H):M!==void 0&&g.has(H)?V(H):T.protectedKeys[H]=!0}T.prevProp=k,T.prevResolvedValues=L,T.isActive&&(x={...x,...L}),r&&e.blockInitialAnimation&&(A=!1);const Y=_&&R;A&&(!Y||P)&&h.push(...$.map(H=>{const M={type:j};if(typeof H=="string"&&r&&!Y&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,F=oa(U,H);if(U.enteringChildren&&F){const{delayChildren:D}=F.transition||{};M.delay=lk(U.enteringChildren,e,D)}}return{animation:H,options:M}}))}if(g.size){const w={};if(typeof f.initial!="boolean"){const j=oa(e,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(w.transition=j.transition)}g.forEach(j=>{const T=e.getBaseTarget(j),k=e.getValue(j);k&&(k.liveStyle=!0),w[j]=T??null}),h.push({animation:w})}let b=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(h):Promise.resolve()}function u(d,f){var h;if(n[d].isActive===f)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(g=>{var x;return(x=g.animationState)==null?void 0:x.setActive(d,f)}),n[d].isActive=f;const m=l(d);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xw()}}}function QI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$k(t,e):!1}function Do(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xw(){return{animate:Do(!0),whileInView:Do(),whileHover:Do(),whileTap:Do(),whileDrag:Do(),whileFocus:Do(),exit:Do()}}function vw(e,t){e.min=t.min,e.max=t.max}function cr(e,t){vw(e.x,t.x),vw(e.y,t.y)}function bw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const Lk=1e-4,ZI=1-Lk,eA=1+Lk,Bk=.01,tA=0-Bk,nA=0+Bk;function mn(e){return e.max-e.min}function rA(e,t,n){return Math.abs(e-t)<=n}function ww(e,t,n,r=.5){e.origin=r,e.originPoint=mt(t.min,t.max,e.origin),e.scale=mn(n)/mn(t),e.translate=mt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=ZI&&e.scale<=eA||isNaN(e.scale))&&(e.scale=1),(e.translate>=tA&&e.translate<=nA||isNaN(e.translate))&&(e.translate=0)}function Ul(e,t,n,r){ww(e.x,t.x,n.x,r?r.originX:void 0),ww(e.y,t.y,n.y,r?r.originY:void 0)}function Sw(e,t,n){e.min=n.min+t.min,e.max=e.min+mn(t)}function sA(e,t,n){Sw(e.x,t.x,n.x),Sw(e.y,t.y,n.y)}function kw(e,t,n){e.min=t.min-n.min,e.max=e.min+mn(t)}function sf(e,t,n){kw(e.x,t.x,n.x),kw(e.y,t.y,n.y)}function jw(e,t,n,r,s){return e-=t,e=rf(e,1/n,r),s!==void 0&&(e=rf(e,1/s,r)),e}function oA(e,t=0,n=1,r=.5,s,a=e,l=e){if(Br.test(t)&&(t=parseFloat(t),t=mt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=mt(a.min,a.max,r);e===a&&(u-=t),e.min=jw(e.min,t,n,u,s),e.max=jw(e.max,t,n,u,s)}function Cw(e,t,[n,r,s],a,l){oA(e,t[n],t[r],t[s],t.scale,a,l)}const iA=["x","scaleX","originX"],aA=["y","scaleY","originY"];function Ew(e,t,n,r){Cw(e.x,t,iA,n?n.x:void 0,r?r.x:void 0),Cw(e.y,t,aA,n?n.y:void 0,r?r.y:void 0)}function _w(e){return e.translate===0&&e.scale===1}function Wk(e){return _w(e.x)&&_w(e.y)}function Nw(e,t){return e.min===t.min&&e.max===t.max}function lA(e,t){return Nw(e.x,t.x)&&Nw(e.y,t.y)}function Tw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Vk(e,t){return Tw(e.x,t.x)&&Tw(e.y,t.y)}function Rw(e){return mn(e.x)/mn(e.y)}function Iw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Yn(e){return[e("x"),e("y")]}function cA(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,l=(n==null?void 0:n.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:h,rotateY:g,skewX:x,skewY:v}=n;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),x&&(r+=`skewX(${x}deg) `),v&&(r+=`skewY(${v}deg) `)}const u=e.x.scale*t.x,d=e.y.scale*t.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Uk=["TopLeft","TopRight","BottomLeft","BottomRight"],uA=Uk.length,Aw=e=>typeof e=="string"?parseFloat(e):e,Pw=e=>typeof e=="number"||Ne.test(e);function dA(e,t,n,r,s,a){s?(e.opacity=mt(0,n.opacity??1,fA(r)),e.opacityExit=mt(t.opacity??1,0,hA(r))):a&&(e.opacity=mt(t.opacity??1,n.opacity??1,r));for(let l=0;l<uA;l++){const u=`border${Uk[l]}Radius`;let d=Mw(t,u),f=Mw(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||Pw(d)===Pw(f)?(e[u]=Math.max(mt(Aw(d),Aw(f),r),0),(Br.test(f)||Br.test(d))&&(e[u]+="%")):e[u]=f}(t.rotate||n.rotate)&&(e.rotate=mt(t.rotate||0,n.rotate||0,r))}function Mw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const fA=Hk(0,.5,$S),hA=Hk(.5,.95,Qn);function Hk(e,t,n){return r=>r<e?0:r>t?1:n(Yl(e,t,r))}function pA(e,t,n){const r=an(e)?e:pa(e);return r.start(G0("",r,t,n)),r.animation}function ec(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const mA=(e,t)=>e.depth-t.depth;class gA{constructor(){this.children=[],this.isDirty=!1}add(t){T0(this.children,t),this.isDirty=!0}remove(t){R0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(mA),this.isDirty=!1,this.children.forEach(t)}}function yA(e,t){const n=pn.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(so(r),e(a-t))};return et.setup(r,!0),()=>so(r)}function $d(e){return an(e)?e.get():e}class xA{constructor(){this.members=[]}add(t){T0(this.members,t),t.scheduleRender()}remove(t){if(R0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const s=r.options.layoutDependency,a=t.options.layoutDependency;s!==void 0&&a!==void 0&&s===a||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:u}=t.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ld={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Sm=["","X","Y","Z"],vA=1e3;let bA=0;function km(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Gk(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=fk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Gk(r)}function qk({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=t==null?void 0:t()){this.id=bA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(kA),this.nodes.forEach(_A),this.nodes.forEach(NA),this.nodes.forEach(jA)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new gA)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new P0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=kk(l)&&!SI(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),e){let m,h=0;const g=()=>this.root.updateBlockedByResize=!1;et.read(()=>{h=window.innerWidth}),e(l,()=>{const x=window.innerWidth;x!==h&&(h=x,this.root.updateBlockedByResize=!0,m&&m(),m=yA(g,250),Ld.hasAnimatedSinceResize&&(Ld.hasAnimatedSinceResize=!1,this.nodes.forEach(Ow)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||PA,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=f.getProps(),j=!this.targetLayout||!Vk(this.targetLayout,x),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...H0(v,"layout"),onPlay:b,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,T)}else h||Ow(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),so(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TA),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Gk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Dw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(EA),this.nodes.forEach(wA),this.nodes.forEach(SA)):this.nodes.forEach(Fw),this.clearAllSnapshots();const u=pn.now();Qt.delta=Ur(0,1e3/60,u-Qt.timestamp),Qt.timestamp=u,Qt.isProcessing=!0,pm.update.process(Qt),pm.preRender.process(Qt),pm.render.process(Qt),Qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Y0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CA),this.sharedNodes.forEach(RA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mn(this.snapshot.measuredBox.x)&&!mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!Wk(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||Bo(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),MA(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return zt();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(DA))){const{scroll:m}=this.root;m&&(ea(u.x,m.offset.x),ea(u.y,m.offset.y))}return u}removeElementScroll(l){var d;const u=zt();if(cr(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:h,options:g}=m;m!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&cr(u,l),ea(u.x,h.offset.x),ea(u.y,h.offset.y))}return u}applyTransform(l,u=!1){const d=zt();cr(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ta(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Bo(m.latestValues)&&ta(d,m.latestValues)}return Bo(this.latestValues)&&ta(d,this.latestValues),d}removeTransform(l){const u=zt();cr(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Bo(f.latestValues))continue;Ag(f.latestValues)&&f.updateSnapshot();const m=zt(),h=f.measurePageBox();cr(m,h),Ew(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Bo(this.latestValues)&&Ew(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!this.layout||!(m||h))return;this.resolvedRelativeTargetAt=Qt.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cr(this.target,this.layout.layoutBox),Rk(this.target,this.targetDelta)):cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ag(this.parent.latestValues)||Tk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),sf(this.relativeTargetOrigin,u,d),cr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Qt.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;cr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;PI(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=zt());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bw(this.prevProjectionDelta.x,this.projectionDelta.x),bw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ul(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!Iw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Iw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zi(),this.projectionDelta=Zi(),this.projectionDeltaWithTransform=Zi()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},h=Zi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=zt(),x=d?d.source:void 0,v=this.layout?this.layout.source:void 0,b=x!==v,w=this.getStack(),j=!w||w.members.length<=1,T=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(AA));this.animationProgress=0;let k;this.mixTargetDelta=E=>{const N=E/1e3;zw(h.x,l.x,N),zw(h.y,l.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IA(this.relativeTarget,this.relativeTargetOrigin,g,N),k&&lA(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=zt()),cr(k,this.relativeTarget)),b&&(this.animationValues=m,dA(m,f,this.latestValues,N,T,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(so(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Ld.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pa(0)),this.currentAnimation=pA(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&Kk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||zt();const h=mn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+h;const g=mn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+g}cr(u,d),ta(u,m),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new xA),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&km("z",l,f,this.animationValues);for(let m=0;m<Sm.length;m++)km(`rotate${Sm[m]}`,l,f,this.animationValues),km(`skew${Sm[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=$d(u==null?void 0:u.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=$d(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Bo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=cA(this.projectionDeltaWithTransform,this.treeScale,m);d&&(h=d(m,h)),l.transform=h;const{x:g,y:x}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?l.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in Mg){if(m[v]===void 0)continue;const{correct:b,applyTo:w,isCSSVariable:j}=Mg[v],T=h==="none"?m[v]:b(m[v],f);if(w){const k=w.length;for(let E=0;E<k;E++)l[w[E]]=T}else j?this.options.visualElement.renderState.vars[v]=T:l[v]=T}this.options.layoutId&&(l.pointerEvents=f===this?$d(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(Dw),this.root.sharedNodes.clear()}}}function wA(e){e.updateLayout()}function SA(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,l=t.source!==e.layout.source;a==="size"?Yn(h=>{const g=l?t.measuredBox[h]:t.layoutBox[h],x=mn(g);g.min=r[h].min,g.max=g.min+x}):Kk(a,t.layoutBox,r)&&Yn(h=>{const g=l?t.measuredBox[h]:t.layoutBox[h],x=mn(r[h]);g.max=g.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const u=Zi();Ul(u,r,t.layoutBox);const d=Zi();l?Ul(d,e.applyTransform(s,!0),t.measuredBox):Ul(d,r,t.layoutBox);const f=!Wk(u);let m=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:x}=h;if(g&&x){const v=zt();sf(v,t.layoutBox,g.layoutBox);const b=zt();sf(b,r,x.layoutBox),Vk(v,b)||(m=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function kA(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function jA(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CA(e){e.clearSnapshot()}function Dw(e){e.clearMeasurements()}function Fw(e){e.isLayoutDirty=!1}function EA(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ow(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _A(e){e.resolveTargetDelta()}function NA(e){e.calcProjection()}function TA(e){e.resetSkewAndRotation()}function RA(e){e.removeLeadSnapshot()}function zw(e,t,n){e.translate=mt(t.translate,0,n),e.scale=mt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function $w(e,t,n,r){e.min=mt(t.min,n.min,r),e.max=mt(t.max,n.max,r)}function IA(e,t,n,r){$w(e.x,t.x,n.x,r),$w(e.y,t.y,n.y,r)}function AA(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const PA={duration:.45,ease:[.4,0,.1,1]},Lw=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Bw=Lw("applewebkit/")&&!Lw("chrome/")?Math.round:Qn;function Ww(e){e.min=Bw(e.min),e.max=Bw(e.max)}function MA(e){Ww(e.x),Ww(e.y)}function Kk(e,t,n){return e==="position"||e==="preserve-aspect"&&!rA(Rw(t),Rw(n),.2)}function DA(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const FA=qk({attachResizeListener:(e,t)=>ec(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),jm={current:void 0},Xk=qk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!jm.current){const e=new FA({});e.mount(window),e.setOptions({layoutScroll:!0}),jm.current=e}return jm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ny=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Vw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OA(...e){return t=>{let n=!1;const r=e.map(s=>{const a=Vw(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():Vw(e[s],null)}}}}function zA(...e){return S.useCallback(OA(...e),e)}class $A extends S.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Rg(r)&&r.offsetWidth||0,a=Rg(r)&&r.offsetHeight||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=s-l.width-l.left,l.bottom=a-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function LA({children:e,isPresent:t,anchorX:n,anchorY:r,root:s}){var h;const a=S.useId(),l=S.useRef(null),u=S.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=S.useContext(ny),f=((h=e.props)==null?void 0:h.ref)??(e==null?void 0:e.ref),m=zA(l,f);return S.useInsertionEffect(()=>{const{width:g,height:x,top:v,left:b,right:w,bottom:j}=u.current;if(t||!l.current||!g||!x)return;const T=n==="left"?`left: ${b}`:`right: ${w}`,k=r==="bottom"?`bottom: ${j}`:`top: ${v}`;l.current.dataset.motionPopId=a;const E=document.createElement("style");d&&(E.nonce=d);const N=s??document.head;return N.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${x}px !important;
            ${T}px !important;
            ${k}px !important;
          }
        `),()=>{N.contains(E)&&N.removeChild(E)}},[t]),o.jsx($A,{isPresent:t,childRef:l,sizeRef:u,children:S.cloneElement(e,{ref:m})})}const BA=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,anchorY:d,root:f})=>{const m=N0(WA),h=S.useId();let g=!0,x=S.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:n,custom:s,onExitComplete:v=>{m.set(v,!0);for(const b of m.values())if(!b)return;r&&r()},register:v=>(m.set(v,!1),()=>m.delete(v))}),[n,m,r]);return a&&g&&(x={...x}),S.useMemo(()=>{m.forEach((v,b)=>m.set(b,!1))},[n]),S.useEffect(()=>{!n&&!m.size&&r&&r()},[n]),l==="popLayout"&&(e=o.jsx(LA,{isPresent:n,anchorX:u,anchorY:d,root:f,children:e})),o.jsx(Of.Provider,{value:x,children:e})};function WA(){return new Map}function Yk(e=!0){const t=S.useContext(Of);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=S.useId();S.useEffect(()=>{if(e)return s(a)},[e]);const l=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,l]:[!0]}const nd=e=>e.key||"";function Uw(e){const t=[];return S.Children.forEach(e,n=>{S.isValidElement(n)&&t.push(n)}),t}const io=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",anchorY:d="top",root:f})=>{const[m,h]=Yk(l),g=S.useMemo(()=>Uw(e),[e]),x=l&&!m?[]:g.map(nd),v=S.useRef(!0),b=S.useRef(g),w=N0(()=>new Map),j=S.useRef(new Set),[T,k]=S.useState(g),[E,N]=S.useState(g);NS(()=>{v.current=!1,b.current=g;for(let A=0;A<E.length;A++){const P=nd(E[A]);x.includes(P)?(w.delete(P),j.current.delete(P)):w.get(P)!==!0&&w.set(P,!1)}},[E,x.length,x.join("-")]);const _=[];if(g!==T){let A=[...g];for(let P=0;P<E.length;P++){const $=E[P],L=nd($);x.includes(L)||(A.splice(P,0,$),_.push($))}return a==="wait"&&_.length&&(A=_),N(Uw(A)),k(g),null}const{forceRender:R}=S.useContext(_0);return o.jsx(o.Fragment,{children:E.map(A=>{const P=nd(A),$=l&&!m?!1:g===E||x.includes(P),L=()=>{if(j.current.has(P))return;if(j.current.add(P),w.has(P))w.set(P,!0);else return;let B=!0;w.forEach(K=>{K||(B=!1)}),B&&(R==null||R(),N(b.current),l&&(h==null||h()),r&&r())};return o.jsx(BA,{isPresent:$,initial:!v.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:f,onExitComplete:$?void 0:L,anchorX:u,anchorY:d,children:A},P)})})},Jk=S.createContext({strict:!1}),Hw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Gw=!1;function VA(){if(Gw)return;const e={};for(const t in Hw)e[t]={isEnabled:n=>Hw[t].some(r=>!!n[r])};Ek(e),Gw=!0}function Qk(){return VA(),TI()}function UA(e){const t=Qk();for(const n in e)t[n]={...t[n],...e[n]};Ek(t)}const HA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function of(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||HA.has(e)}let Zk=e=>!of(e);function GA(e){typeof e=="function"&&(Zk=t=>t.startsWith("on")?!of(t):e(t))}try{GA(require("@emotion/is-prop-valid").default)}catch{}function qA(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Zk(s)||n===!0&&of(s)||!t&&!of(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Lf=S.createContext({});function KA(e,t){if($f(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Zl(n)?n:void 0,animate:Zl(r)?r:void 0}}return e.inherit!==!1?t:{}}function XA(e){const{initial:t,animate:n}=KA(e,S.useContext(Lf));return S.useMemo(()=>({initial:t,animate:n}),[qw(t),qw(n)])}function qw(e){return Array.isArray(e)?e.join(" "):e}const ry=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ej(e,t,n){for(const r in t)!an(t[r])&&!Pk(r,n)&&(e[r]=t[r])}function YA({transformTemplate:e},t){return S.useMemo(()=>{const n=ry();return ey(n,t,e),Object.assign({},n.vars,n.style)},[t])}function JA(e,t){const n=e.style||{},r={};return ej(r,n,e),Object.assign(r,YA(e,t)),r}function QA(e,t){const n={},r=JA(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const tj=()=>({...ry(),attrs:{}});function ZA(e,t,n,r){const s=S.useMemo(()=>{const a=tj();return Mk(a,t,Fk(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};ej(a,e.style,e),s.style={...a,...s.style}}return s}const eP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sy(e){return typeof e!="string"||e.includes("-")?!1:!!(eP.indexOf(e)>-1||/[A-Z]/u.test(e))}function tP(e,t,n,{latestValues:r},s,a=!1,l){const d=(l??sy(e)?ZA:QA)(t,r,s,e),f=qA(t,typeof e=="string",a),m=e!==S.Fragment?{...f,...d,ref:n}:{},{children:h}=t,g=S.useMemo(()=>an(h)?h.get():h,[h]);return S.createElement(e,{...m,children:g})}function nP({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:rP(n,r,s,e),renderState:t()}}function rP(e,t,n,r){const s={},a=r(e,{});for(const g in a)s[g]=$d(a[g]);let{initial:l,animate:u}=e;const d=$f(e),f=Ck(e);t&&f&&!d&&e.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const h=m?u:l;if(h&&typeof h!="boolean"&&!zf(h)){const g=Array.isArray(h)?h:[h];for(let x=0;x<g.length;x++){const v=q0(e,g[x]);if(v){const{transitionEnd:b,transition:w,...j}=v;for(const T in j){let k=j[T];if(Array.isArray(k)){const E=m?k.length-1:0;k=k[E]}k!==null&&(s[T]=k)}for(const T in b)s[T]=b[T]}}}return s}const nj=e=>(t,n)=>{const r=S.useContext(Lf),s=S.useContext(Of),a=()=>nP(e,t,r,s);return n?a():N0(a)},sP=nj({scrapeMotionValuesFromProps:ty,createRenderState:ry}),oP=nj({scrapeMotionValuesFromProps:Ok,createRenderState:tj}),iP=Symbol.for("motionComponentSymbol");function aP(e,t,n){const r=S.useRef(n);S.useInsertionEffect(()=>{r.current=n});const s=S.useRef(null);return S.useCallback(a=>{var u;a&&((u=e.onMount)==null||u.call(e,a)),t&&(a?t.mount(a):t.unmount());const l=r.current;if(typeof l=="function")if(a){const d=l(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[t])}const rj=S.createContext({});function Ol(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function lP(e,t,n,r,s,a){var k,E;const{visualElement:l}=S.useContext(Lf),u=S.useContext(Jk),d=S.useContext(Of),f=S.useContext(ny),m=f.reducedMotion,h=f.skipAnimations,g=S.useRef(null),x=S.useRef(!1);r=r||u.renderer,!g.current&&r&&(g.current=r(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,skipAnimations:h,isSVG:a}),x.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const v=g.current,b=S.useContext(rj);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&cP(g.current,n,s,b);const w=S.useRef(!1);S.useInsertionEffect(()=>{v&&w.current&&v.update(n,d)});const j=n[dk],T=S.useRef(!!j&&!((k=window.MotionHandoffIsComplete)!=null&&k.call(window,j))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,j)));return NS(()=>{x.current=!0,v&&(w.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),T.current&&v.animationState&&v.animationState.animateChanges())}),S.useEffect(()=>{v&&(!T.current&&v.animationState&&v.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,j)}),T.current=!1),v.enteringChildren=void 0)}),v}function cP(e,t,n,r){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:sj(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&Ol(u),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:f})}function sj(e){if(e)return e.options.allowProjection!==!1?e.projection:sj(e.parent)}function Cm(e,{forwardMotionProps:t=!1,type:n}={},r,s){r&&UA(r);const a=n?n==="svg":sy(e),l=a?oP:sP;function u(f,m){let h;const g={...S.useContext(ny),...f,layoutId:uP(f)},{isStatic:x}=g,v=XA(f),b=l(f,x);if(!x&&_S){dP();const w=fP(g);h=w.MeasureLayout,v.visualElement=lP(e,b,g,s,w.ProjectionNode,a)}return o.jsxs(Lf.Provider,{value:v,children:[h&&v.visualElement?o.jsx(h,{visualElement:v.visualElement,...g}):null,tP(e,f,aP(b,v.visualElement,m),b,x,t,a)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=S.forwardRef(u);return d[iP]=e,d}function uP({layoutId:e}){const t=S.useContext(_0).id;return t&&e!==void 0?t+"-"+e:e}function dP(e,t){S.useContext(Jk).strict}function fP(e){const t=Qk(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function hP(e,t){if(typeof Proxy>"u")return Cm;const n=new Map,r=(a,l)=>Cm(a,l,e,t),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(n.has(l)||n.set(l,Cm(l,void 0,e,t)),n.get(l))})}const pP=(e,t)=>t.isSVG??sy(e)?new GI(t):new LI(t,{allowProjection:e!==S.Fragment});class mP extends fo{constructor(t){super(t),t.animationState||(t.animationState=JI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();zf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let gP=0;class yP extends fo{constructor(){super(...arguments),this.id=gP++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xP={animation:{Feature:mP},exit:{Feature:yP}};function Nc(e){return{point:{x:e.pageX,y:e.pageY}}}const vP=e=>t=>J0(t)&&e(t,Nc(t));function Hl(e,t,n,r){return ec(e,t,vP(n),r)}const oj=({current:e})=>e?e.ownerDocument.defaultView:null,Kw=(e,t)=>Math.abs(e-t);function bP(e,t){const n=Kw(e.x,t.x),r=Kw(e.y,t.y);return Math.sqrt(n**2+r**2)}const Xw=new Set(["auto","scroll"]);class ij{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_m(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=bP(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:w}=x,{timestamp:j}=Qt;this.history.push({...w,timestamp:j});const{onStart:T,onMove:k}=this.handlers;v||(T&&T(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,x)},this.handlePointerMove=(x,v)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Em(v,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(x,v)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:j}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=_m(x.type==="pointercancel"?this.lastMoveEventInfo:Em(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(x,T),w&&w(x,T)},!J0(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const d=Nc(t),f=Em(d,this.transformPagePoint),{point:m}=f,{timestamp:h}=Qt;this.history=[{...m,timestamp:h}];const{onSessionStart:g}=n;g&&g(t,_m(f,this.history)),this.removeListeners=Cc(Hl(this.contextWindow,"pointermove",this.handlePointerMove),Hl(this.contextWindow,"pointerup",this.handlePointerUp),Hl(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(Xw.has(r.overflowX)||Xw.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,s),et.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),so(this.updatePoint)}}function Em(e,t){return t?{point:t(e.point)}:e}function Yw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _m({point:e},t){return{point:e,delta:Yw(e,aj(t)),offset:Yw(e,wP(t)),velocity:SP(t,.1)}}function wP(e){return e[0]}function aj(e){return e[e.length-1]}function SP(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=aj(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>fs(t)));)n--;if(!r)return{x:0,y:0};const a=Jn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function kP(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?mt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?mt(n,e,r.max):Math.min(e,n)),e}function Jw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function jP(e,{top:t,left:n,bottom:r,right:s}){return{x:Jw(e.x,n,s),y:Jw(e.y,t,r)}}function Qw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function CP(e,t){return{x:Qw(e.x,t.x),y:Qw(e.y,t.y)}}function EP(e,t){let n=.5;const r=mn(e),s=mn(t);return s>r?n=Yl(t.min,t.max-r,e.min):r>s&&(n=Yl(e.min,e.max-s,t.min)),Ur(0,1,n)}function _P(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Dg=.35;function NP(e=Dg){return e===!1?e=0:e===!0&&(e=Dg),{x:Zw(e,"left","right"),y:Zw(e,"top","bottom")}}function Zw(e,t,n){return{min:e1(e,t),max:e1(e,n)}}function e1(e,t){return typeof e=="number"?e:e[t]||0}const TP=new WeakMap;class RP{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=h=>{n?(this.stopAnimation(),this.snapToCursor(Nc(h).point)):this.pauseAnimation()},l=(h,g)=>{this.stopAnimation();const{drag:x,dragPropagation:v,onDragStart:b}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pI(x),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(j=>{let T=this.getAxisMotionValue(j).get()||0;if(Br.test(T)){const{projection:k}=this.visualElement;if(k&&k.layout){const E=k.layout.layoutBox[j];E&&(T=mn(E)*(parseFloat(T)/100))}}this.originPoint[j]=T}),b&&et.update(()=>b(h,g),!1,!0),_g(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:b,onDrag:w}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:j}=g;if(v&&this.currentDirection===null){this.currentDirection=IP(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),w&&et.update(()=>w(h,g),!1,!0)},d=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Yn(h=>{var g;return this.getAnimationState(h)==="paused"&&((g=this.getAxisMotionValue(h).animation)==null?void 0:g.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new ij(t,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:oj(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&et.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!rd(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(l=kP(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;t&&Ol(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=jP(r.layoutBox,t):this.constraints=!1,this.elastic=NP(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_P(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ol(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=MI(r,s.root,this.visualElement.getTransformPagePoint());let l=CP(s.layout.layoutBox,a);if(n){const u=n(II(l));this.hasMutatedConstraints=!!u,u&&(l=Nk(u))}return l}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Yn(m=>{if(!rd(m,n,this.currentDirection))return;let h=d&&d[m]||{};l&&(h={min:0,max:0});const g=s?200:1e6,x=s?40:1e7,v={type:"inertia",velocity:r?t[m]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(m,v)});return Promise.all(f).then(u)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return _g(this.visualElement,t),r.start(G0(t,r,0,n,this.visualElement,!1))}stopAnimation(){Yn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Yn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Yn(n=>{const{drag:r}=this.getProps();if(!rd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n],d=a.get()||0;a.set(t[n]-mt(l,u,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ol(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Yn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=EP({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yn(l=>{if(!rd(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(mt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;TP.set(this.visualElement,this);const t=this.visualElement.current,n=Hl(t,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps(),h=d.target,g=h!==t&&vI(h);f&&m&&!g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ol(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),et.read(r);const l=ec(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Yn(m=>{const h=this.getAxisMotionValue(m);h&&(this.originPoint[m]+=d[m].translate,h.set(h.get()+d[m].translate))}),this.visualElement.render())}));return()=>{l(),n(),a(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=Dg,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function rd(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function IP(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class AP extends fo{constructor(t){super(t),this.removeGroupControls=Qn,this.removeListeners=Qn,this.controls=new RP(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qn}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Nm=e=>(t,n)=>{e&&et.update(()=>e(t,n),!1,!0)};class PP extends fo{constructor(){super(...arguments),this.removePointerDownListener=Qn}onPointerDown(t){this.session=new ij(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Nm(t),onStart:Nm(n),onMove:Nm(r),onEnd:(a,l)=>{delete this.session,s&&et.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Hl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Tm=!1;class MP extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),Tm&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Ld.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,t.layoutDependency!==n&&l.setOptions({...l.options,layoutDependency:n}),Tm=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||et.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Y0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Tm=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lj(e){const[t,n]=Yk(),r=S.useContext(_0);return o.jsx(MP,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(rj),isPresent:t,safeToRemove:n})}const DP={pan:{Feature:PP},drag:{Feature:AP,ProjectionNode:Xk,MeasureLayout:lj}};function t1(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&et.postRender(()=>a(t,Nc(t)))}class FP extends fo{mount(){const{current:t}=this.node;t&&(this.unmount=mI(t,(n,r)=>(t1(this.node,r,"Start"),s=>t1(this.node,s,"End"))))}unmount(){}}class OP extends fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(ec(this.node.current,"focus",()=>this.onFocus()),ec(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n1(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&et.postRender(()=>a(t,Nc(t)))}class zP extends fo{mount(){const{current:t}=this.node;t&&(this.unmount=wI(t,(n,r)=>(n1(this.node,r,"Start"),(s,{success:a})=>n1(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fg=new WeakMap,Rm=new WeakMap,$P=e=>{const t=Fg.get(e.target);t&&t(e)},LP=e=>{e.forEach($P)};function BP({root:e,...t}){const n=e||document;Rm.has(n)||Rm.set(n,{});const r=Rm.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(LP,{root:e,...t})),r[s]}function WP(e,t,n){const r=BP(t);return Fg.set(e,n),r.observe(e),()=>{Fg.delete(e),r.unobserve(e)}}const VP={some:0,all:1};class UP extends fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:VP[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),g=f?m:h;g&&g(d)};return WP(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(HP(t,n))&&this.startObserver()}unmount(){}}function HP({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const GP={inView:{Feature:UP},tap:{Feature:zP},focus:{Feature:OP},hover:{Feature:FP}},qP={layout:{ProjectionNode:Xk,MeasureLayout:lj}},KP={...xP,...GP,...DP,...qP},ce=hP(KP,pP),XP={some:0,all:1};function YP(e,t,{root:n,margin:r,amount:s="some"}={}){const a=xk(e),l=new WeakMap,u=f=>{f.forEach(m=>{const h=l.get(m.target);if(m.isIntersecting!==!!h)if(m.isIntersecting){const g=t(m.target,m);typeof g=="function"?l.set(m.target,g):d.unobserve(m.target)}else typeof h=="function"&&(h(m),l.delete(m.target))})},d=new IntersectionObserver(u,{root:n,rootMargin:r,threshold:typeof s=="number"?s:XP[s]});return a.forEach(f=>d.observe(f)),()=>d.disconnect()}function tc(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[l,u]=S.useState(a);return S.useEffect(()=>{if(!e.current||s&&l)return;const d=()=>(u(!0),s?void 0:()=>u(!1)),f={root:t&&t.current||void 0,margin:n,amount:r};return YP(e.current,d,f)},[t,e,n,s,r]),l}/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r1="popstate";function JP(e={}){function t(r,s){let{pathname:a,search:l,hash:u}=r.location;return Og("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nc(s)}return ZP(t,n,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QP(){return Math.random().toString(36).substring(2,10)}function s1(e,t){return{usr:e.state,key:e.key,idx:t}}function Og(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Na(t):t,state:n,key:t&&t.key||r||QP()}}function nc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Na(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function ZP(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u="POP",d=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function h(){u="POP";let w=m(),j=w==null?null:w-f;f=w,d&&d({action:u,location:b.location,delta:j})}function g(w,j){u="PUSH";let T=Og(b.location,w,j);f=m()+1;let k=s1(T,f),E=b.createHref(T);try{l.pushState(k,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(E)}a&&d&&d({action:u,location:b.location,delta:1})}function x(w,j){u="REPLACE";let T=Og(b.location,w,j);f=m();let k=s1(T,f),E=b.createHref(T);l.replaceState(k,"",E),a&&d&&d({action:u,location:b.location,delta:0})}function v(w){return e3(w)}let b={get action(){return u},get location(){return e(s,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(r1,h),d=w,()=>{s.removeEventListener(r1,h),d=null}},createHref(w){return t(s,w)},createURL:v,encodeLocation(w){let j=v(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:x,go(w){return l.go(w)}};return b}function e3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:nc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function cj(e,t,n="/"){return t3(e,t,n,!1)}function t3(e,t,n,r){let s=typeof t=="string"?Na(t):t,a=gs(s.pathname||"/",n);if(a==null)return null;let l=uj(e);n3(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=h3(a);u=d3(l[d],f,r)}return u}function uj(e,t=[],n=[],r="",s=!1){let a=(l,u,d=s,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&d)return;ot(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let h=hs([r,m.relativePath]),g=n.concat(m);l.children&&l.children.length>0&&(ot(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),uj(l.children,t,g,h,d)),!(l.path==null&&!l.index)&&t.push({path:h,score:c3(h,l.index),routesMeta:g})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let f of dj(l.path))a(l,u,!0,f)}),t}function dj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=dj(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function n3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:u3(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var r3=/^:[\w-]+$/,s3=3,o3=2,i3=1,a3=10,l3=-2,o1=e=>e==="*";function c3(e,t){let n=e.split("/"),r=n.length;return n.some(o1)&&(r+=l3),t&&(r+=o3),n.filter(s=>!o1(s)).reduce((s,a)=>s+(r3.test(a)?s3:a===""?i3:a3),r)}function u3(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function d3(e,t,n=!1){let{routesMeta:r}=e,s={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",h=af({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),g=d.route;if(!h&&f&&n&&!r[r.length-1].route.index&&(h=af({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!h)return null;Object.assign(s,h.params),l.push({params:s,pathname:hs([a,h.pathname]),pathnameBase:y3(hs([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=hs([a,h.pathnameBase]))}return l}function af(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=f3(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:m,isOptional:h},g)=>{if(m==="*"){let v=u[g]||"";l=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=u[g];return h&&!x?f[m]=void 0:f[m]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:e}}function f3(e,t=!1,n=!0){wr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function h3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var p3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function m3(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Na(e):e,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=i1(n.substring(1),"/"):a=i1(n,t)):a=t,{pathname:a,search:x3(r),hash:v3(s)}}function i1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Im(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function oy(e){let t=g3(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function iy(e,t,n,r=!1){let s;typeof e=="string"?s=Na(e):(s={...e},ot(!s.pathname||!s.pathname.includes("?"),Im("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),Im("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),Im("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=n;else{let h=t.length-1;if(!r&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}u=h>=0?t[h]:"/"}let d=m3(s,u),f=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var hs=e=>e.join("/").replace(/\/\/+/g,"/"),y3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,v3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,b3=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function w3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function S3(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hj(e,t){let n=e;if(typeof n!="string"||!p3.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(fj)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),u=gs(l.pathname,t);l.origin===a.origin&&u!=null?n=u+l.search+l.hash:s=!0}catch{wr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pj=["POST","PUT","PATCH","DELETE"];new Set(pj);var k3=["GET",...pj];new Set(k3);var Ta=S.createContext(null);Ta.displayName="DataRouter";var Bf=S.createContext(null);Bf.displayName="DataRouterState";var j3=S.createContext(!1),mj=S.createContext({isTransitioning:!1});mj.displayName="ViewTransition";var C3=S.createContext(new Map);C3.displayName="Fetchers";var E3=S.createContext(null);E3.displayName="Await";var Bn=S.createContext(null);Bn.displayName="Navigation";var Tc=S.createContext(null);Tc.displayName="Location";var jr=S.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var ay=S.createContext(null);ay.displayName="RouteError";var gj="REACT_ROUTER_ERROR",_3="REDIRECT",N3="ROUTE_ERROR_RESPONSE";function T3(e){if(e.startsWith(`${gj}:${_3}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function R3(e){if(e.startsWith(`${gj}:${N3}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new b3(t.status,t.statusText,t.data)}catch{}}function I3(e,{relative:t}={}){ot(Ra(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Bn),{hash:s,pathname:a,search:l}=Rc(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:hs([n,a])),r.createHref({pathname:u,search:l,hash:s})}function Ra(){return S.useContext(Tc)!=null}function qr(){return ot(Ra(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Tc).location}var yj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xj(e){S.useContext(Bn).static||S.useLayoutEffect(e)}function Rt(){let{isDataRoute:e}=S.useContext(jr);return e?U3():A3()}function A3(){ot(Ra(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Ta),{basename:t,navigator:n}=S.useContext(Bn),{matches:r}=S.useContext(jr),{pathname:s}=qr(),a=JSON.stringify(oy(r)),l=S.useRef(!1);return xj(()=>{l.current=!0}),S.useCallback((d,f={})=>{if(wr(l.current,yj),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=iy(d,JSON.parse(a),s,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:hs([t,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[t,n,a,s,e])}S.createContext(null);function ly(){let{matches:e}=S.useContext(jr),t=e[e.length-1];return t?t.params:{}}function Rc(e,{relative:t}={}){let{matches:n}=S.useContext(jr),{pathname:r}=qr(),s=JSON.stringify(oy(n));return S.useMemo(()=>iy(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function P3(e,t){return vj(e,t)}function vj(e,t,n,r,s){var T;ot(Ra(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(Bn),{matches:l}=S.useContext(jr),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",m=u?u.pathnameBase:"/",h=u&&u.route;{let k=h&&h.path||"";wj(f,!h||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=qr(),x;if(t){let k=typeof t=="string"?Na(t):t;ot(m==="/"||((T=k.pathname)==null?void 0:T.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${k.pathname}" was given in the \`location\` prop.`),x=k}else x=g;let v=x.pathname||"/",b=v;if(m!=="/"){let k=m.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=cj(e,{pathname:b});wr(h||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),wr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=z3(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:hs([m,a.encodeLocation?a.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:hs([m,a.encodeLocation?a.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),l,n,r,s);return t&&j?S.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function M3(){let e=V3(),t=w3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,l)}var D3=S.createElement(M3,null),bj=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=R3(e.digest);n&&(e=n)}let t=e!==void 0?S.createElement(jr.Provider,{value:this.props.routeContext},S.createElement(ay.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?S.createElement(F3,{error:e},t):t}};bj.contextType=j3;var Am=new WeakMap;function F3({children:e,error:t}){let{basename:n}=S.useContext(Bn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=T3(t.digest);if(r){let s=Am.get(t);if(s)throw s;let a=hj(r.location,n);if(fj&&!Am.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Am.set(t,l),l}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function O3({routeContext:e,match:t,children:n}){let r=S.useContext(Ta);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(jr.Provider,{value:e},n)}function z3(e,t=[],n=null,r=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let m=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);ot(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(n)for(let m=0;m<a.length;m++){let h=a[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=m),h.route.id){let{loaderData:g,errors:x}=n,v=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!x||x[h.route.id]===void 0);if(h.route.lazy||v){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let f=n&&r?(m,h)=>{var g,x;r(m,{location:n.location,params:((x=(g=n.matches)==null?void 0:g[0])==null?void 0:x.params)??{},unstable_pattern:S3(n.matches),errorInfo:h})}:void 0;return a.reduceRight((m,h,g)=>{let x,v=!1,b=null,w=null;n&&(x=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||D3,u&&(d<0&&g===0?(wj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===g&&(v=!0,w=h.route.hydrateFallbackElement||null)));let j=t.concat(a.slice(0,g+1)),T=()=>{let k;return x?k=b:v?k=w:h.route.Component?k=S.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=m,S.createElement(O3,{match:h,routeContext:{outlet:m,matches:j,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?S.createElement(bj,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:T(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):T()},null)}function cy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $3(e){let t=S.useContext(Ta);return ot(t,cy(e)),t}function L3(e){let t=S.useContext(Bf);return ot(t,cy(e)),t}function B3(e){let t=S.useContext(jr);return ot(t,cy(e)),t}function uy(e){let t=B3(e),n=t.matches[t.matches.length-1];return ot(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function W3(){return uy("useRouteId")}function V3(){var r;let e=S.useContext(ay),t=L3("useRouteError"),n=uy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function U3(){let{router:e}=$3("useNavigate"),t=uy("useNavigate"),n=S.useRef(!1);return xj(()=>{n.current=!0}),S.useCallback(async(s,a={})=>{wr(n.current,yj),n.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var a1={};function wj(e,t,n){!t&&!a1[e]&&(a1[e]=!0,wr(!1,n))}S.memo(H3);function H3({routes:e,future:t,state:n,onError:r}){return vj(e,void 0,n,r,t)}function Sj({to:e,replace:t,state:n,relative:r}){ot(Ra(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(Bn);wr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(jr),{pathname:l}=qr(),u=Rt(),d=iy(e,oy(a),l,r==="path"),f=JSON.stringify(d);return S.useEffect(()=>{u(JSON.parse(f),{replace:t,state:n,relative:r})},[u,f,r,t,n]),null}function ht(e){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G3({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){ot(!Ra(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);typeof n=="string"&&(n=Na(n));let{pathname:f="/",search:m="",hash:h="",state:g=null,key:x="default"}=n,v=S.useMemo(()=>{let b=gs(f,u);return b==null?null:{location:{pathname:b,search:m,hash:h,state:g,key:x},navigationType:r}},[u,f,m,h,g,x,r]);return wr(v!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:S.createElement(Bn.Provider,{value:d},S.createElement(Tc.Provider,{children:t,value:v}))}function kj({children:e,location:t}){return P3(zg(e),t)}function zg(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let a=[...t,s];if(r.type===S.Fragment){n.push.apply(n,zg(r.props.children,a));return}ot(r.type===ht,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=zg(r.props.children,a)),n.push(l)}),n}var Bd="get",Wd="application/x-www-form-urlencoded";function Wf(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function q3(e){return Wf(e)&&e.tagName.toLowerCase()==="button"}function K3(e){return Wf(e)&&e.tagName.toLowerCase()==="form"}function X3(e){return Wf(e)&&e.tagName.toLowerCase()==="input"}function Y3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function J3(e,t){return e.button===0&&(!t||t==="_self")&&!Y3(e)}var sd=null;function Q3(){if(sd===null)try{new FormData(document.createElement("form"),0),sd=!1}catch{sd=!0}return sd}var Z3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pm(e){return e!=null&&!Z3.has(e)?(wr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):e}function eM(e,t){let n,r,s,a,l;if(K3(e)){let u=e.getAttribute("action");r=u?gs(u,t):null,n=e.getAttribute("method")||Bd,s=Pm(e.getAttribute("enctype"))||Wd,a=new FormData(e)}else if(q3(e)||X3(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(r=d?gs(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||Bd,s=Pm(e.getAttribute("formenctype"))||Pm(u.getAttribute("enctype"))||Wd,a=new FormData(u,e),!Q3()){let{name:f,type:m,value:h}=e;if(m==="image"){let g=f?`${f}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else f&&a.append(f,h)}}else{if(Wf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bd,r=null,s=Wd,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tM(e,t,n,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:t&&gs(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function nM(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function sM(e,t,n){let r=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await nM(a,n);return l.links?l.links():[]}return[]}));return lM(r.flat(1).filter(rM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function l1(e,t,n,r,s,a){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>{var m;return n[f].pathname!==d.pathname||((m=n[f].route.path)==null?void 0:m.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?t.filter((d,f)=>{var h;let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function oM(e,t,{includeHydrateFallback:n}={}){return iM(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function iM(e){return[...new Set(e)]}function aM(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function lM(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let a=JSON.stringify(aM(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function jj(){let e=S.useContext(Ta);return dy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function cM(){let e=S.useContext(Bf);return dy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fy=S.createContext(void 0);fy.displayName="FrameworkContext";function Cj(){let e=S.useContext(fy);return dy(e,"You must render this element inside a <HydratedRouter> element"),e}function uM(e,t){let n=S.useContext(fy),[r,s]=S.useState(!1),[a,l]=S.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:h}=t,g=S.useRef(null);S.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=j=>{j.forEach(T=>{l(T.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[e]),S.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let x=()=>{s(!0)},v=()=>{s(!1),l(!1)};return n?e!=="intent"?[a,g,{}]:[a,g,{onFocus:_l(u,x),onBlur:_l(d,v),onMouseEnter:_l(f,x),onMouseLeave:_l(m,v),onTouchStart:_l(h,x)}]:[!1,g,{}]}function _l(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function dM({page:e,...t}){let{router:n}=jj(),r=S.useMemo(()=>cj(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(hM,{page:e,matches:r,...t}):null}function fM(e){let{manifest:t,routeModules:n}=Cj(),[r,s]=S.useState([]);return S.useEffect(()=>{let a=!1;return sM(e,t,n).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,n]),r}function hM({page:e,matches:t,...n}){let r=qr(),{future:s,manifest:a,routeModules:l}=Cj(),{basename:u}=jj(),{loaderData:d,matches:f}=cM(),m=S.useMemo(()=>l1(e,t,f,a,r,"data"),[e,t,f,a,r]),h=S.useMemo(()=>l1(e,t,f,a,r,"assets"),[e,t,f,a,r]),g=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let b=new Set,w=!1;if(t.forEach(T=>{var E;let k=a.routes[T.route.id];!k||!k.hasLoader||(!m.some(N=>N.route.id===T.route.id)&&T.route.id in d&&((E=l[T.route.id])!=null&&E.shouldRevalidate)||k.hasClientLoader?w=!0:b.add(T.route.id))}),b.size===0)return[];let j=tM(e,u,s.unstable_trailingSlashAwareDataRequests,"data");return w&&b.size>0&&j.searchParams.set("_routes",t.filter(T=>b.has(T.route.id)).map(T=>T.route.id).join(",")),[j.pathname+j.search]},[u,s.unstable_trailingSlashAwareDataRequests,d,r,a,m,t,e,l]),x=S.useMemo(()=>oM(h,a),[h,a]),v=fM(h);return S.createElement(S.Fragment,null,g.map(b=>S.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),x.map(b=>S.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),v.map(({key:b,link:w})=>S.createElement("link",{key:b,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function pM(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var mM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mM&&(window.__reactRouterVersion="7.13.0")}catch{}function gM({basename:e,children:t,unstable_useTransitions:n,window:r}){let s=S.useRef();s.current==null&&(s.current=JP({window:r,v5Compat:!0}));let a=s.current,[l,u]=S.useState({action:a.action,location:a.location}),d=S.useCallback(f=>{n===!1?u(f):S.startTransition(()=>u(f))},[n]);return S.useLayoutEffect(()=>a.listen(d),[a,d]),S.createElement(G3,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var Ej=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_j=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g,...x},v){let{basename:b,unstable_useTransitions:w}=S.useContext(Bn),j=typeof f=="string"&&Ej.test(f),T=hj(f,b);f=T.to;let k=I3(f,{relative:s}),[E,N,_]=uM(r,x),R=bM(f,{replace:l,state:u,target:d,preventScrollReset:m,relative:s,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function A($){t&&t($),$.defaultPrevented||R($)}let P=S.createElement("a",{...x,..._,href:T.absoluteURL||k,onClick:T.isExternal||a?t:A,ref:pM(v,N),target:d,"data-discover":!j&&n==="render"?"true":void 0});return E&&!j?S.createElement(S.Fragment,null,P,S.createElement(dM,{page:k})):P});_j.displayName="Link";var yM=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...f},m){let h=Rc(l,{relative:f.relative}),g=qr(),x=S.useContext(Bf),{navigator:v,basename:b}=S.useContext(Bn),w=x!=null&&CM(h)&&u===!0,j=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,T=g.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&b&&(k=gs(k,b)||k);const E=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let N=T===j||!s&&T.startsWith(j)&&T.charAt(E)==="/",_=k!=null&&(k===j||!s&&k.startsWith(j)&&k.charAt(j.length)==="/"),R={isActive:N,isPending:_,isTransitioning:w},A=N?t:void 0,P;typeof r=="function"?P=r(R):P=[r,N?"active":null,_?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let $=typeof a=="function"?a(R):a;return S.createElement(_j,{...f,"aria-current":A,className:P,ref:m,style:$,to:l,viewTransition:u},typeof d=="function"?d(R):d)});yM.displayName="NavLink";var xM=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:a,method:l=Bd,action:u,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g,...x},v)=>{let{unstable_useTransitions:b}=S.useContext(Bn),w=kM(),j=jM(u,{relative:f}),T=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&Ej.test(u),E=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let _=N.nativeEvent.submitter,R=(_==null?void 0:_.getAttribute("formmethod"))||l,A=()=>w(_||N.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:s,state:a,relative:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g});b&&n!==!1?S.startTransition(()=>A()):A()};return S.createElement("form",{ref:v,method:T,action:j,onSubmit:r?d:E,...x,"data-discover":!k&&e==="render"?"true":void 0})});xM.displayName="Form";function vM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nj(e){let t=S.useContext(Ta);return ot(t,vM(e)),t}function bM(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=Rt(),m=qr(),h=Rc(e,{relative:a});return S.useCallback(g=>{if(J3(g,t)){g.preventDefault();let x=n!==void 0?n:nc(m)===nc(h),v=()=>f(e,{replace:x,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u});d?S.startTransition(()=>v()):v()}},[m,f,h,n,r,t,e,s,a,l,u,d])}var wM=0,SM=()=>`__${String(++wM)}__`;function kM(){let{router:e}=Nj("useSubmit"),{basename:t}=S.useContext(Bn),n=W3(),r=e.fetch,s=e.navigate;return S.useCallback(async(a,l={})=>{let{action:u,method:d,encType:f,formData:m,body:h}=eM(a,t);if(l.navigate===!1){let g=l.fetcherKey||SM();await r(g,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:h,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:h,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,t,n])}function jM(e,{relative:t}={}){let{basename:n}=S.useContext(Bn),r=S.useContext(jr);ot(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Rc(e||".",{relative:t})},l=qr();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(h=>h).forEach(h=>u.append("index",h));let m=u.toString();a.search=m?`?${m}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:hs([n,a.pathname])),nc(a)}function CM(e,{relative:t}={}){let n=S.useContext(mj);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Nj("useViewTransitionState"),s=Rc(e,{relative:t});if(!n.isTransitioning)return!1;let a=gs(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=gs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return af(s.pathname,l)!=null||af(s.pathname,a)!=null}var Ia=ES();const Tj=Ff(Ia);function EM(){const[e,t]=S.useState(!1),n=Rt();return S.useEffect(()=>{const r=()=>{t(window.scrollY>20)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),o.jsx(ce.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${e?"bg-white/80 backdrop-blur-xl border-b border-black/5":"bg-transparent"}`,children:o.jsx("nav",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsx("a",{href:"/",className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"balemoo.com"}),o.jsxs("div",{className:"flex items-center gap-8",children:[o.jsx("div",{className:"hidden md:flex items-center gap-8",children:["About","Product","Solution"].map(r=>o.jsx("a",{href:`#${r.toLowerCase()}`,className:"transition-opacity duration-300 hover:opacity-50",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,letterSpacing:"-0.01em",color:"#2d2d2d"},children:r},r))}),o.jsx("button",{onClick:()=>n("/login"),className:"group relative px-6 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,letterSpacing:"-0.01em",color:"#1a1a1a"},onMouseEnter:r=>{r.currentTarget.style.backdropFilter="blur(20px)",r.currentTarget.style.WebkitBackdropFilter="blur(20px)",r.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:r=>{r.currentTarget.style.backdropFilter="blur(10px)",r.currentTarget.style.WebkitBackdropFilter="blur(10px)",r.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:"Log In"})]})]})})})}const lf="/assets/balemoo-logo-37_HSVzk.png";function _M(){const e=Rt();return o.jsxs("section",{className:"min-h-screen w-full relative flex items-center justify-center px-6 py-32 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`
            radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
            radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
            radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
            linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
          `}}),o.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx(ce.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},className:"mb-6 flex justify-center",children:o.jsx("img",{src:lf,alt:"Balemoo",style:{height:"clamp(8rem, 15vw, 14rem)",width:"auto"}})}),o.jsx(ce.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.75,delay:.5,ease:[.25,.1,.25,1]},className:"mb-5",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.5rem, 2.5vw, 2.25rem)",fontWeight:500,letterSpacing:"-0.02em",color:"#2d2d2d",lineHeight:1.3},children:"Smart Smiles for Your Event"}),o.jsx(ce.p,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.7,delay:.8,ease:[.25,.1,.25,1]},className:"max-w-2xl mx-auto",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#6b6b6b",lineHeight:1.6},children:"Technology-powered solutions that create seamless and welcoming event experiences."}),o.jsx(ce.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.7,delay:1,ease:[.25,.1,.25,1]},className:"mt-8",children:o.jsx("button",{onClick:()=>e("/login"),className:"px-8 py-3 rounded-full transition-all duration-700",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#ffffff",border:"none",cursor:"pointer",transform:"scale(1)"},onMouseEnter:t=>{t.currentTarget.style.transform="scale(1.03)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.15)"},onMouseLeave:t=>{t.currentTarget.style.transform="scale(1)",t.currentTarget.style.boxShadow="none"},children:"Get Started"})})]}),o.jsx(ce.div,{initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.9,delay:1.1,ease:[.25,.1,.25,1]},className:"relative max-w-2xl mx-auto",children:o.jsx("img",{src:lf,alt:"Balemoo 3D Product Illustration",className:"w-full h-auto",style:{filter:"drop-shadow(0 20px 40px rgba(0, 0, 0, 0.08))"}})})]})]})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),c1=e=>{const t=TM(e);return t.charAt(0).toUpperCase()+t.slice(1)},Rj=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},d)=>S.createElement("svg",{ref:d,...RM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Rj("lucide",s),...u},[...l.map(([f,m])=>S.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const n=S.forwardRef(({className:r,...s},a)=>S.createElement(IM,{ref:a,iconNode:t,className:Rj(`lucide-${NM(c1(e))}`,`lucide-${e}`,r),...s}));return n.displayName=c1(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],u1=ke("activity",AM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ho=ke("arrow-left",PM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Ij=ke("ban",MM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Aj=ke("briefcase",DM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zo=ke("calendar",FM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hy=ke("chart-column",OM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rc=ke("check",zM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ic=ke("chevron-down",$M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],py=ke("chevron-left",LM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Pj=ke("chevron-right",BM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],my=ke("chevron-up",WM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$g=ke("circle-alert",VM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mj=ke("circle-check-big",UM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ao=ke("circle-check",HM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Dj=ke("circle-help",GM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],KM=ke("circle-user",qM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ei=ke("circle-x",XM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Fj=ke("clipboard-list",YM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],po=ke("clock",JM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cf=ke("copy",QM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Oj=ke("download",ZM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vf=ke("eye",e4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],n4=ke("file-json",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sc=ke("file-text",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],zj=ke("flag",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],i4=ke("folder-open",o4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],l4=ke("gift",a4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],$j=ke("git-branch",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],gy=ke("grip-vertical",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],f4=ke("heart",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],p4=ke("layout-dashboard",h4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$t=ke("loader-circle",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Lj=ke("lock-open",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xr=ke("lock",y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Bj=ke("log-out",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],yy=ke("mail",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],w4=ke("message-circle",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],oc=ke("message-square",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Wj=ke("pause",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Uf=ke("pen",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],E4=ke("phone",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ic=ke("play",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],en=ke("plus",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ma=ke("qr-code",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],I4=ke("radio",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vj=ke("refresh-cw",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Hf=ke("rotate-ccw",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Uj=ke("save",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ys=ke("search",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gf=ke("send",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ac=ke("settings",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],d1=ke("shield-check",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],L4=ke("sliders-horizontal",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],W4=ke("sparkles",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xy=ke("square-pen",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],H4=ke("tag",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Hj=ke("timer",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ht=ke("trash-2",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],qf=ke("trending-up",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uf=ke("triangle-alert",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Gj=ke("upload",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],vy=ke("user-check",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],by=ke("user-cog",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],no=ke("user",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ln=ke("users",e8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],ga=ke("workflow",t8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nn=ke("x",n8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Lg=ke("zap",r8);function s8(){const e=S.useRef(null),t=S.useRef(null),n=tc(e,{once:!0,margin:"-100px"}),r=tc(t,{once:!0,margin:"-100px"});return o.jsxs("div",{className:"relative w-full overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx(ce.div,{className:"absolute inset-0",animate:{background:["radial-gradient(ellipse 100% 80% at 20% 30%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 80% 60%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 50% 80%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)","radial-gradient(ellipse 100% 80% at 80% 40%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 20% 70%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 60% 20%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)","radial-gradient(ellipse 100% 80% at 20% 30%, rgba(255, 200, 180, 0.2) 0%, transparent 50%), radial-gradient(ellipse 80% 60% at 80% 60%, rgba(200, 180, 255, 0.18) 0%, transparent 50%), radial-gradient(ellipse 70% 70% at 50% 80%, rgba(180, 220, 255, 0.15) 0%, transparent 50%), linear-gradient(to bottom, #fafafa 0%, #ffffff 100%)"]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]}),o.jsx("section",{ref:e,className:"py-32 px-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[o.jsxs(ce.div,{initial:{opacity:0,y:40},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,ease:[.25,.1,.25,1]},children:[o.jsx(ce.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,letterSpacing:"0.05em",color:"#8b5cf6",textTransform:"uppercase"},className:"mb-4",children:"About BALEMOO"}),o.jsx(ce.h2,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.15},className:"mb-6",children:"A Digital Bale for Modern Events"}),o.jsxs(ce.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.4,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.7},children:["BALEMOO is a technology platform built to welcome guests the way people should be welcomed  smoothly, respectfully, and with a smile.",o.jsx("br",{}),o.jsx("br",{}),"Inspired by the Balinese tradition of receiving guests in the bale, we translate that philosophy into modern event technology."]})]}),o.jsx(ce.div,{initial:{opacity:0,y:40,scale:.95},animate:n?{opacity:1,y:0,scale:1}:{},transition:{duration:.9,delay:.5,ease:[.25,.1,.25,1]},className:"relative",children:o.jsx(ce.div,{animate:{y:[0,-15,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:o.jsx("img",{src:lf,alt:"BALEMOO Platform Visualization",className:"w-full h-auto",style:{filter:"drop-shadow(0 25px 50px rgba(0, 0, 0, 0.1))"}})})})]})})}),o.jsx("section",{ref:t,className:"py-32 px-6",children:o.jsx("div",{className:"max-w-5xl mx-auto",children:o.jsxs(ce.div,{initial:{opacity:0,y:60,scale:.95},animate:r?{opacity:1,y:0,scale:1}:{},transition:{duration:.9,ease:[.25,.1,.25,1]},className:"relative rounded-3xl p-12 lg:p-16",style:{background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.4)",boxShadow:"0 25px 60px -15px rgba(0, 0, 0, 0.08), 0 10px 25px -10px rgba(0, 0, 0, 0.04)"},children:[o.jsx(ce.h2,{initial:{opacity:0,y:30},animate:r?{opacity:1,y:0}:{},transition:{duration:.8,delay:.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.75rem, 3.5vw, 2.75rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.2},className:"mb-8",children:"The Philosophy Behind BALEMOO"}),o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:.4,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.2vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#3a3a3a",lineHeight:1.8},className:"mb-12",children:[o.jsx("p",{className:"mb-6",children:"In Balinese culture, a bale is more than a structure. It is a space of connection  where guests are welcomed, stories begin, and respect is shown through small details."}),o.jsx("p",{className:"mb-6",children:"BALEMOO brings this philosophy into technology. We believe great events start not at the stage, but at the first interaction. That first smile. That smooth check-in. That feeling of being expected."})]}),o.jsx("div",{className:"space-y-6 mb-12",children:[{icon:f4,text:"Technology that stays human"},{icon:Lg,text:"Speed without pressure"},{icon:KM,text:"Systems that support, not replace, hospitality"}].map((s,a)=>o.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:r?{opacity:1,x:0}:{},transition:{duration:.6,delay:.6+a*.1,ease:[.25,.1,.25,1]},className:"flex items-center gap-4",children:[o.jsx(ce.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,delay:1+a*.2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",style:{background:"rgba(139, 92, 246, 0.1)"},children:o.jsx(s.icon,{className:"w-5 h-5",style:{color:"#8b5cf6"}})}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.0625rem",fontWeight:500,letterSpacing:"-0.01em",color:"#2d2d2d"},children:s.text})]},a))}),o.jsx(ce.p,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1.125rem, 1.5vw, 1.375rem)",fontWeight:500,letterSpacing:"-0.015em",color:"#1a1a1a",lineHeight:1.5},className:"italic",children:"BALEMOO is where technology becomes the host."})]})})})]})}function o8(){const e=S.useRef(null),t=S.useRef(null),n=tc(e,{once:!0,margin:"-100px"}),r=tc(t,{once:!0,margin:"-100px"}),s=[{id:"kabar",title:"kabar.in",tagline:"Smart Invitations, Made Effortless",description:"Send personalized event invitations through WhatsApp Official Business, complete with RSVP and unique QR codes for every guest.",features:[{icon:w4,text:"WhatsApp Official Business integration"},{icon:Gf,text:"Personalized invitations"},{icon:u1,text:"RSVP tracking"},{icon:ma,text:"Auto-generated QR per guest"}],emphasized:!1},{id:"checkin",title:"check.in",tagline:"Check In Less Than 10 Seconds.",description:"A lightning-fast QR-based check-in system designed for high-scale events. From access control to guest identification, check.in turns arrival into a smooth experience.",features:[{icon:ma,text:"QR scan check-in under 10 seconds"},{icon:vy,text:"Optional badge printing & guest identification"},{icon:l4,text:"Gift / angpao / access tagging"},{icon:d1,text:"Custom guest data stored securely per event"}],emphasized:!0},{id:"monitor",title:"monitor.in",tagline:"Real-Time Guest Visibility.",description:"Monitor attendance, arrivals, and guest flow in real time through a simple web dashboard.",features:[{icon:u1,text:"Live attendance updates"},{icon:qf,text:"Guest arrival analytics"},{icon:Oj,text:"Exportable reports"},{icon:d1,text:"Accessible anywhere"}],emphasized:!1}];return o.jsxs("div",{className:"relative w-full overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx(ce.div,{className:"absolute inset-0",animate:{background:["radial-gradient(ellipse 100% 80% at 30% 20%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 70% 60%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 50% 90%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)","radial-gradient(ellipse 100% 80% at 70% 30%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 30% 70%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 60% 10%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)","radial-gradient(ellipse 100% 80% at 30% 20%, rgba(200, 180, 255, 0.22) 0%, transparent 50%), radial-gradient(ellipse 80% 70% at 70% 60%, rgba(180, 220, 255, 0.2) 0%, transparent 50%), radial-gradient(ellipse 70% 60% at 50% 90%, rgba(150, 230, 255, 0.18) 0%, transparent 50%), linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)"]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),o.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}})]}),o.jsx("section",{ref:e,className:"pt-32 pb-16 px-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[o.jsx(ce.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,letterSpacing:"0.05em",color:"#6366f1",textTransform:"uppercase"},className:"mb-4",children:"Our Product"}),o.jsx(ce.h2,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,delay:.1,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.15},className:"mb-6",children:"One Platform. Three Connected Experiences."}),o.jsx(ce.p,{initial:{opacity:0,y:20},animate:n?{opacity:1,y:0}:{},transition:{duration:.7,delay:.3,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(1rem, 1.25vw, 1.125rem)",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.6},className:"max-w-3xl mx-auto mb-12",children:"From invitation to check-in to real-time insights  BALEMOO powers every guest interaction with technology."}),o.jsx(ce.div,{initial:{opacity:0,scaleX:0},animate:n?{opacity:1,scaleX:1}:{},transition:{duration:.8,delay:.5,ease:[.25,.1,.25,1]},className:"h-px max-w-xs mx-auto",style:{background:"linear-gradient(to right, transparent, rgba(99, 102, 241, 0.3), transparent)"}})]})}),o.jsx("section",{className:"py-16 px-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:s.map((a,l)=>o.jsx(i8,{product:a,index:l,illustration:lf},a.id))})})}),o.jsx("section",{ref:t,className:"py-16 px-6",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{},transition:{duration:.8,ease:[.25,.1,.25,1]},className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between gap-4 mb-8",children:[o.jsx(ce.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.2,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:o.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(99, 102, 241, 0.2)",boxShadow:"0 8px 20px -5px rgba(0, 0, 0, 0.06)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"kabar.in"})})}),o.jsxs("div",{className:"flex-1 relative h-0.5 mx-2",children:[o.jsx(ce.div,{className:"absolute inset-0",style:{background:"rgba(99, 102, 241, 0.15)"}}),o.jsx(ce.div,{initial:{scaleX:0,originX:0},animate:r?{scaleX:1}:{},transition:{duration:1.2,delay:.5,ease:[.25,.1,.25,1]},className:"absolute inset-0",style:{background:"linear-gradient(to right, #6366f1, #8b5cf6)"}}),o.jsx(ce.div,{initial:{left:"0%"},animate:r?{left:["0%","100%"]}:{},transition:{duration:2,delay:1.5,repeat:1/0,repeatDelay:1,ease:"easeInOut"},className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 rounded-full",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.6)"}}),o.jsx(ce.div,{initial:{opacity:0,scale:0},animate:r?{opacity:1,scale:1}:{},transition:{duration:.3,delay:1.7,ease:[.25,.1,.25,1]},className:"absolute right-0 top-1/2 -translate-y-1/2",style:{width:0,height:0,borderLeft:"6px solid #8b5cf6",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})]}),o.jsx(ce.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.4,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:o.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(99, 102, 241, 0.15)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1.5px solid rgba(99, 102, 241, 0.4)",boxShadow:"0 10px 30px -8px rgba(99, 102, 241, 0.3)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,letterSpacing:"-0.01em",color:"#6366f1"},children:"check.in"})})}),o.jsxs("div",{className:"flex-1 relative h-0.5 mx-2",children:[o.jsx(ce.div,{className:"absolute inset-0",style:{background:"rgba(99, 102, 241, 0.15)"}}),o.jsx(ce.div,{initial:{scaleX:0,originX:0},animate:r?{scaleX:1}:{},transition:{duration:1.2,delay:.7,ease:[.25,.1,.25,1]},className:"absolute inset-0",style:{background:"linear-gradient(to right, #8b5cf6, #6366f1)"}}),o.jsx(ce.div,{initial:{left:"0%"},animate:r?{left:["0%","100%"]}:{},transition:{duration:2,delay:1.7,repeat:1/0,repeatDelay:1,ease:"easeInOut"},className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 rounded-full",style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",boxShadow:"0 0 8px rgba(139, 92, 246, 0.6)"}}),o.jsx(ce.div,{initial:{opacity:0,scale:0},animate:r?{opacity:1,scale:1}:{},transition:{duration:.3,delay:1.9,ease:[.25,.1,.25,1]},className:"absolute right-0 top-1/2 -translate-y-1/2",style:{width:0,height:0,borderLeft:"6px solid #6366f1",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})]}),o.jsx(ce.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.6,ease:[.25,.1,.25,1]},className:"flex-1 text-center",children:o.jsx("div",{className:"inline-block px-6 py-3 rounded-full",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(99, 102, 241, 0.2)",boxShadow:"0 8px 20px -5px rgba(0, 0, 0, 0.06)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:"monitor.in"})})})]}),o.jsx(ce.p,{initial:{opacity:0,y:10},animate:r?{opacity:1,y:0}:{},transition:{duration:.7,delay:1.2,ease:[.25,.1,.25,1]},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,letterSpacing:"-0.01em",color:"#6b6b6b",textAlign:"center"},children:"A single connected system, built to work seamlessly."})]})})})]})}function i8({product:e,index:t,illustration:n}){const r=S.useRef(null),[s,a]=S.useState(!1),l=tc(r,{once:!0,margin:"-50px"});return o.jsxs(ce.div,{ref:r,initial:{opacity:0,y:60,scale:.95},animate:l?{opacity:1,y:0,scale:1}:{},transition:{duration:.8,delay:t*.15,ease:[.25,.1,.25,1]},whileHover:{y:-8,transition:{duration:.3,ease:[.25,.1,.25,1]}},onHoverStart:()=>a(!0),onHoverEnd:()=>a(!1),className:`relative rounded-3xl p-8 ${e.emphasized?"lg:scale-105 lg:-my-4":""}`,style:{background:e.emphasized?"rgba(255, 255, 255, 0.85)":"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",border:e.emphasized?"1.5px solid rgba(99, 102, 241, 0.3)":"1px solid rgba(255, 255, 255, 0.4)",boxShadow:e.emphasized?"0 30px 70px -20px rgba(99, 102, 241, 0.2), 0 15px 35px -15px rgba(0, 0, 0, 0.08)":"0 25px 60px -15px rgba(0, 0, 0, 0.08), 0 10px 25px -10px rgba(0, 0, 0, 0.04)"},children:[e.emphasized&&o.jsx(ce.div,{className:"absolute inset-0 rounded-3xl -z-10",animate:{opacity:s?.6:.3},transition:{duration:.3},style:{background:"radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.2), transparent 70%)"}}),o.jsxs(ce.div,{className:"mb-6 relative h-48 flex items-center justify-center",animate:{y:[0,-8,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:t*.5},children:[o.jsx("img",{src:n,alt:e.title,className:"h-full w-auto object-contain",style:{filter:"drop-shadow(0 15px 30px rgba(0, 0, 0, 0.1))"}}),e.id==="checkin"&&o.jsx(ce.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",animate:{scale:[1,1.2,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:o.jsx(ma,{className:"w-12 h-12 text-indigo-500 opacity-20"})})]}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:e.emphasized?"1.75rem":"1.5rem",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",lineHeight:1.2},className:"mb-3",children:e.title}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:e.emphasized?"1.125rem":"1rem",fontWeight:500,letterSpacing:"-0.01em",color:e.emphasized?"#6366f1":"#6b6b6b",lineHeight:1.4},className:"mb-4",children:e.tagline}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,letterSpacing:"-0.01em",color:"#4a4a4a",lineHeight:1.6},className:"mb-6",children:e.description}),o.jsx("div",{className:"space-y-3",children:e.features.map((u,d)=>o.jsxs(ce.div,{initial:{opacity:0,x:-10},animate:l?{opacity:1,x:0}:{},transition:{duration:.5,delay:.3+t*.15+d*.05,ease:[.25,.1,.25,1]},className:"flex items-start gap-3",children:[o.jsx(ce.div,{animate:s?{scale:[1,1.15,1]}:{},transition:{duration:.4,delay:d*.05},className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mt-0.5",style:{background:e.emphasized?"rgba(99, 102, 241, 0.12)":"rgba(0, 0, 0, 0.04)"},children:o.jsx(u.icon,{className:"w-4 h-4",style:{color:e.emphasized?"#6366f1":"#6b6b6b"}})}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:400,letterSpacing:"-0.01em",color:"#3a3a3a",lineHeight:1.5},children:u.text})]},d))})]})}var $r=function(){return $r=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$r.apply(this,arguments)};function Aa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function a8(e,t,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(m){try{f(r.next(m))}catch(h){l(h)}}function d(m){try{f(r.throw(m))}catch(h){l(h)}}function f(m){m.done?a(m.value):s(m.value).then(u,d)}f((r=r.apply(e,t||[])).next())})}function l8(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}const c8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class wy extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class u8 extends wy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class f1 extends wy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class h1 extends wy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Bg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Bg||(Bg={}));class d8{constructor(t,{headers:n={},customFetch:r,region:s=Bg.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=c8(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return a8(this,arguments,void 0,function*(n,r={}){var s;let a,l;try{const{headers:u,method:d,body:f,signal:m,timeout:h}=r;let g={},{region:x}=r;x||(x=this.region);const v=new URL(`${this.url}/${n}`);x&&x!=="any"&&(g["x-region"]=x,v.searchParams.set("forceFunctionRegion",x));let b;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",b=f):typeof f=="string"?(g["Content-Type"]="text/plain",b=f):typeof FormData<"u"&&f instanceof FormData?b=f:(g["Content-Type"]="application/json",b=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?b=JSON.stringify(f):b=f;let w=m;h&&(l=new AbortController,a=setTimeout(()=>l.abort(),h),m?(w=l.signal,m.addEventListener("abort",()=>l.abort())):w=l.signal);const j=yield this.fetch(v.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),u),body:b,signal:w}).catch(N=>{throw new u8(N)}),T=j.headers.get("x-relay-error");if(T&&T==="true")throw new f1(j);if(!j.ok)throw new h1(j);let k=((s=j.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield j.json():k==="application/octet-stream"||k==="application/pdf"?E=yield j.blob():k==="text/event-stream"?E=j:k==="multipart/form-data"?E=yield j.formData():E=yield j.text(),{data:E,error:null,response:j}}catch(u){return{data:null,error:u,response:u instanceof h1||u instanceof f1?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var f8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},h8=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,d=null,f=a.status,m=a.statusText;if(a.ok){var h,g;if(n.method!=="HEAD"){var x;const j=await a.text();j===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((x=n.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?u=j:u=JSON.parse(j))}const b=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(g=a.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");b&&w&&w.length>1&&(d=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var v;const b=await a.text();try{l=JSON.parse(b),Array.isArray(l)&&a.status===404&&(u=[],l=null,f=200,m="OK")}catch{a.status===404&&b===""?(f=204,m="No Content"):l={message:b}}if(l&&n.isMaybeSingle&&(!(l==null||(v=l.details)===null||v===void 0)&&v.includes("0 rows"))&&(l=null,f=200,m="OK"),l&&n.shouldThrowOnError)throw new f8(l)}return{error:l,data:u,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(a=>{var l;let u="",d="",f="";const m=a==null?void 0:a.cause;if(m){var h,g,x,v;const j=(h=m==null?void 0:m.message)!==null&&h!==void 0?h:"",T=(g=m==null?void 0:m.code)!==null&&g!==void 0?g:"";u=`${(x=a==null?void 0:a.name)!==null&&x!==void 0?x:"FetchError"}: ${a==null?void 0:a.message}`,u+=`

Caused by: ${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"Error"}: ${j}`,T&&(u+=` (${T})`),m!=null&&m.stack&&(u+=`
${m.stack}`)}else{var b;u=(b=a==null?void 0:a.stack)!==null&&b!==void 0?b:""}const w=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(f="",d="Request was aborted (timeout or manual cancellation)",w>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${w} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((m==null?void 0:m.name)==="HeadersOverflowError"||(m==null?void 0:m.code)==="UND_ERR_HEADERS_OVERFLOW")&&(f="",d="HTTP headers exceeded server limits (typically 16KB)",w>this.urlLengthLimit&&(d+=`. Your request URL is ${w} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:u,hint:d,code:f},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},p8=class extends h8{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const p1=new RegExp("[,()]");var Xi=class extends p8{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&p1.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&p1.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},m8=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join(""),{url:u,headers:d}=this.cloneRequestState();return u.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new Xi({method:s,url:u,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:a,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);a.searchParams.set("columns",d.join(","))}}return new Xi({method:s,url:a,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),r&&d.append("Prefer",`count=${r}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(f.length>0){const m=[...new Set(f)].map(h=>`"${h}"`);u.searchParams.set("columns",m.join(","))}}return new Xi({method:l,url:u,headers:d,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Xi({method:r,url:s,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Xi({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function ac(e){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function g8(e,t){if(ac(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y8(e){var t=g8(e,"string");return ac(t)=="symbol"?t:t+""}function x8(e,t,n){return(t=y8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function od(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(n),!0).forEach(function(r){x8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var v8=class qj{constructor(t,{headers:n={},schema:r,fetch:s,timeout:a,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=l;const u=s??globalThis.fetch;a!==void 0&&a>0?this.fetch=(d,f)=>{const m=new AbortController,h=setTimeout(()=>m.abort(),a),g=f==null?void 0:f.signal;if(g){if(g.aborted)return clearTimeout(h),u(d,f);const x=()=>{clearTimeout(h),m.abort()};return g.addEventListener("abort",x,{once:!0}),u(d,od(od({},f),{},{signal:m.signal})).finally(()=>{clearTimeout(h),g.removeEventListener("abort",x)})}return u(d,od(od({},f),{},{signal:m.signal})).finally(()=>clearTimeout(h))}:this.fetch=u}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new m8(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new qj(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var l;let u;const d=new URL(`${this.url}/rpc/${t}`);let f;const m=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(m)),h=r&&Object.values(n).some(m);h?(u="POST",f=n):r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{d.searchParams.append(x,v)})):(u="POST",f=n);const g=new Headers(this.headers);return h?g.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&g.set("Prefer",`count=${a}`),new Xi({method:u,url:d,headers:g,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class b8{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const w8="2.94.1",S8=`realtime-js/${w8}`,k8="1.0.0",Kj="2.0.0",g1=Kj,Wg=1e4,j8=1e3,C8=100;var Qs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qs||(Qs={}));var Ot;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ot||(Ot={}));var pr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pr||(pr={}));var Vg;(function(e){e.websocket="websocket"})(Vg||(Vg={}));var Uo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Uo||(Uo={}));class E8{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var s,a;const l=t.topic,u=(s=t.ref)!==null&&s!==void 0?s:"",d=(a=t.join_ref)!==null&&a!==void 0?a:"",f=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(m).length===0?"":JSON.stringify(m);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+f.length+h.length,x=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(x),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,d.length),v.setUint8(b++,u.length),v.setUint8(b++,l.length),v.setUint8(b++,f.length),v.setUint8(b++,h.length),v.setUint8(b++,n),Array.from(d,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(u,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(l,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(f,j=>v.setUint8(b++,j.charCodeAt(0))),Array.from(h,j=>v.setUint8(b++,j.charCodeAt(0)));var w=new Uint8Array(x.byteLength+r.byteLength);return w.set(new Uint8Array(x),0),w.set(new Uint8Array(r),x.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,l,u,d]=r;return n({join_ref:s,ref:a,topic:l,event:u,payload:d})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(t.slice(d,d+s));d=d+s;const m=r.decode(t.slice(d,d+a));d=d+a;const h=r.decode(t.slice(d,d+l));d=d+l;const g=t.slice(d,t.byteLength),x=u===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,v={type:this.BROADCAST_EVENT,event:m,payload:x};return l>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}let Xj=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ze;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ze||(Ze={}));const y1=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=_8(l,e,t,s),a),{}):{}},_8=(e,t,n,r)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=n[e];return a&&!r.includes(a)?Yj(a,l):Ug(l)},Yj=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return I8(t,n)}switch(e){case Ze.bool:return N8(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return T8(t);case Ze.json:case Ze.jsonb:return R8(t);case Ze.timestamp:return A8(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Ug(t);default:return Ug(t)}},Ug=e=>e,N8=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T8=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R8=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},I8=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const l=e.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>Yj(t,u))}return e},A8=e=>typeof e=="string"?e.replace(" ","T"):e,Jj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Mm{constructor(t,n,r={},s=Wg){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var x1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(x1||(x1={}));class Gl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=Gl.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gl.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),l=this.transformState(n),u={},d={};return this.map(a,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const h=a[f];if(h){const g=m.map(w=>w.presence_ref),x=h.map(w=>w.presence_ref),v=m.filter(w=>x.indexOf(w.presence_ref)<0),b=h.filter(w=>g.indexOf(w.presence_ref)<0);v.length>0&&(u[f]=v),b.length>0&&(d[f]=b)}else u[f]=m}),this.syncDiff(a,{joins:u,leaves:d},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var f;const m=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),m.length>0){const h=t[u].map(x=>x.presence_ref),g=m.filter(x=>h.indexOf(x.presence_ref)<0);t[u].unshift(...g)}r(u,m,d)}),this.map(l,(u,d)=>{let f=t[u];if(!f)return;const m=d.map(h=>h.presence_ref);f=f.filter(h=>m.indexOf(h.presence_ref)<0),t[u]=f,s(u,f,d),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var v1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(v1||(v1={}));var ql;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ql||(ql={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class na{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Mm(this,pr.join,this.params,this.timeout),this.rejoinTimer=new Xj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Gl(this),this.broadcastEndpointURL=Jj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[ql.PRESENCE]&&this.bindings[ql.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},g={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(us.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(us.CLOSED)),this.updateJoinPayload(Object.assign({config:g},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(us.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,j=[];for(let T=0;T<w;T++){const k=b[T],{filter:{event:E,schema:N,table:_,filter:R}}=k,A=x&&x[T];if(A&&A.event===E&&na.isFilterValueEqual(A.schema,N)&&na.isFilterValueEqual(A.table,_)&&na.isFilterValueEqual(A.filter,R))j.push(Object.assign(Object.assign({},k),{id:A.id}));else{this.unsubscribe(),this.state=Ot.errored,t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(us.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ot.errored,t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ot.joined&&t===ql.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Mm(this,pr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Mm(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>C8){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=pr;if(r&&[u,d,f,m].indexOf(l)>=0&&r!==this._joinRef())return;let g=this._onMessage(l,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var v,b,w;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=x.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(x=>x.callback(g,r)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var v,b,w,j,T,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const E=x.id,N=(v=x.filter)===null||v===void 0?void 0:v.event;return E&&((b=n.ids)===null||b===void 0?void 0:b.includes(E))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(T=(j=x==null?void 0:x.filter)===null||j===void 0?void 0:j.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:b,table:w,commit_timestamp:j,type:T,errors:k}=v;g=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:j,eventType:T,new:{},old:{},errors:k}),this._getPayloadRecords(v))}x.callback(g,r)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&na.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pr.close,{},t)}_onError(t){this._on(pr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=y1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=y1(t.columns,t.old_record)),n}}const Dm=()=>{},id={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},P8=[1e3,2e3,5e3,1e4],M8=1e4,D8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F8{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wg,this.transport=null,this.heartbeatIntervalMs=id.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dm,this.ref=0,this.reconnectTimer=null,this.vsn=g1,this.logger=Dm,this.conn=null,this.sendBuffer=[],this.serializer=new E8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Vg.websocket}`,this.httpEndpoint=Jj(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b8.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qs.connecting:return Uo.Connecting;case Qs.open:return Uo.Open;case Qs.closing:return Uo.Closing;default:return Uo.Closed}}isConnected(){return this.connectionState()===Uo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new na(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(j8,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},id.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:l}=n,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${s} ${u}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Qs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qs.open||this.conn.readyState===Qs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(pr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([D8],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:S8};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(pr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},id.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,l,u,d,f,m,h,g,x;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Wg,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:id.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Dm,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:g1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(v=>P8[v-1]||M8),this.vsn){case k8:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((v,b)=>b(JSON.stringify(v))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:((v,b)=>b(JSON.parse(v)));break;case Kj:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var lc=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function O8(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function z8(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function $8(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:l}){const u=O8(e.baseUrl,r,s),d=await z8(e.auth),f=await t(u,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),m=await f.text(),h=(f.headers.get("content-type")||"").includes("application/json"),g=h&&m?JSON.parse(m):m;if(!f.ok){const x=h?g:void 0,v=x==null?void 0:x.error;throw new lc((v==null?void 0:v.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:x})}return{status:f.status,headers:f.headers,data:g}}}}function ad(e){return e.join("")}var L8=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ad(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ad(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ad(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ad(e.namespace)}`}),!0}catch(t){if(t instanceof lc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof lc&&n.status===409)return;throw n}}};function Di(e){return e.join("")}var B8=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Di(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof lc&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof lc&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},W8=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=$8({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new L8(this.client,t),this.tableOps=new B8(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Kf=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Xf(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ld=class extends Kf{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qj=class extends Kf{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const V8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),U8=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Hg=e=>{if(Array.isArray(e))return e.map(n=>Hg(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Hg(r)}),t},H8=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function G8(e,t){if(cc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q8(e){var t=G8(e,"string");return cc(t)=="symbol"?t:t+""}function K8(e,t,n){return(t=q8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b1(Object(n),!0).forEach(function(r){K8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const w1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},X8=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,a=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";t(new ld(w1(l),a,u,r))}).catch(()=>{if(r==="vectors"){const l=a+"";t(new ld(s.statusText||`HTTP ${a} error`,a,l,r))}else{const l=a+"";t(new ld(s.statusText||`HTTP ${a} error`,a,l,r))}});else{const l=a+"";t(new ld(s.statusText||`HTTP ${a} error`,a,l,r))}}else t(new Qj(w1(e),e,r))},Y8=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?Oe(Oe({},s),n):(U8(r)?(s.headers=Oe({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Oe(Oe({},s),n))};async function Nl(e,t,n,r,s,a,l){return new Promise((u,d)=>{e(n,Y8(t,r,s,a)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;if(l==="vectors"){const m=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!m||!m.includes("application/json"))return{}}return f.json()}).then(f=>u(f)).catch(f=>X8(f,d,r,l))})}function Zj(e="storage"){return{get:async(t,n,r,s)=>Nl(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,a)=>Nl(t,"POST",n,s,a,r,e),put:async(t,n,r,s,a)=>Nl(t,"PUT",n,s,a,r,e),head:async(t,n,r,s)=>Nl(t,"HEAD",n,Oe(Oe({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,a)=>Nl(t,"DELETE",n,s,a,r,e)}}const J8=Zj("storage"),{get:uc,post:hr,put:Gg,head:Q8,remove:Sy}=J8,Fn=Zj("vectors");var Pa=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=V8(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xf(n))return{data:null,error:n};throw n}}},Z8=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xf(t))return{data:null,error:t};throw t}}};let e5;e5=Symbol.toStringTag;var eD=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[e5]="BlobDownloadBuilder",this.promise=null}asStream(){return new Z8(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xf(t))return{data:null,error:t};throw t}}};const tD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nD=class extends Pa{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let a;const l=Oe(Oe({},S1),r);let u=Oe(Oe({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",s.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=Oe(Oe({},u),r.headers));const f=s._removeEmptyFolders(t),m=s._getFinalPath(f),h=await(e=="PUT"?Gg:hr)(s.fetch,`${s.url}/object/${m}`,a,Oe({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:f,id:h.Id,fullPath:h.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),l=s._getFinalPath(a),u=new URL(s.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",t),s.handleOperation(async()=>{let d;const f=Oe({upsert:S1.upsert},r),m=Oe(Oe({},s.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType),{path:a,fullPath:(await Gg(s.fetch,u.toString(),d,{headers:m})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=Oe({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await hr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+a.url),u=l.searchParams.get("token");if(!u)throw new Kf("No token returned by API");return{signedUrl:l.toString(),path:e,token:u}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await hr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await hr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),a=await hr(r.fetch,`${r.url}/object/sign/${s}`,Oe({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await hr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(l=>Oe(Oe({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),l=()=>uc(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new eD(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Hg(await uc(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Q8(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Xf(r)&&r instanceof Qj){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Sy(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=Oe(Oe(Oe({},tD),t),{},{prefix:e||""});return await hr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=Oe({},e);return await hr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const rD="2.94.1",Pc={"X-Client-Info":`storage-js/${rD}`};var sD=class extends Pa{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),l=Oe(Oe({},Pc),t);super(a,l,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await uc(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await uc(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await hr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Gg(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await hr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Sy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},oD=class extends Pa{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Oe(Oe({},Pc),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await hr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await uc(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Sy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!H8(e))throw new Kf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new W8({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const l=s[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},iD=class extends Pa{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Oe(Oe({},Pc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Fn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Fn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},aD=class extends Pa{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Oe(Oe({},Pc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},lD=class extends Pa{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Oe(Oe({},Pc),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Fn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},cD=class extends lD{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new uD(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},uD=class extends iD{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new dD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},dD=class extends aD{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},fD=class extends sD{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new nD(this.url,this.headers,e,this.fetch)}get vectors(){return new cD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oD(this.url+"/iceberg",this.headers,this.fetch)}};const t5="2.94.1",Yi=30*1e3,qg=3,Fm=qg*Yi,hD="http://localhost:9999",pD="supabase.auth.token",mD={"X-Client-Info":`gotrue-js/${t5}`},Kg="X-Supabase-Api-Version",n5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yD=600*1e3;class dc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xD extends dc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function vD(e){return Ie(e)&&e.name==="AuthApiError"}class Ho extends dc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ss extends dc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Mn extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Om(e){return Ie(e)&&e.name==="AuthSessionMissingError"}class Fi extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cd extends Ss{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ud extends Ss{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bD(e){return Ie(e)&&e.name==="AuthImplicitGrantRedirectError"}class k1 extends Ss{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wD extends Ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Xg extends Ss{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function zm(e){return Ie(e)&&e.name==="AuthRetryableFetchError"}class j1 extends Ss{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Yg extends Ss{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),C1=` 	
\r=`.split(""),SD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<C1.length;t+=1)e[C1[t].charCodeAt(0)]=-2;for(let t=0;t<df.length;t+=1)e[df[t].charCodeAt(0)]=t;return e})();function E1(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(df[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(df[r]),t.queuedBits-=6}}function r5(e,t,n){const r=SD[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function _1(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{CD(l,r,n)};for(let l=0;l<e.length;l+=1)r5(e.charCodeAt(l),s,a);return t.join("")}function kD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function jD(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}kD(r,t)}}function CD(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ia(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)r5(e.charCodeAt(s),n,r);return new Uint8Array(t)}function ED(e){const t=[];return jD(e,n=>t.push(n)),new Uint8Array(t)}function Ko(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>E1(s,n,r)),E1(null,n,r),t.join("")}function _D(e){return Math.round(Date.now()/1e3)+e}function ND(){return Symbol("auth-callback")}const Jt=()=>typeof window<"u"&&typeof document<"u",Fo={tested:!1,writable:!1},s5=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fo.tested)return Fo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fo.tested=!0,Fo.writable=!0}catch{Fo.tested=!0,Fo.writable=!1}return Fo.writable};function TD(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const o5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ji=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yt=async(e,t)=>{await e.removeItem(t)};class Yf{constructor(){this.promise=new Yf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Yf.promiseConstructor=Promise;function dd(e){const t=e.split(".");if(t.length!==3)throw new Yg("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!gD.test(t[r]))throw new Yg("JWT not in base64url format");return{header:JSON.parse(_1(t[0])),payload:JSON.parse(_1(t[1])),signature:ia(t[2]),raw:{header:t[0],payload:t[1]}}}async function ID(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AD(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){r(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function PD(e){return("0"+e.toString(16)).substr(-2)}function MD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,PD).join("")}async function DD(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function FD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await DD(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oi(e,t,n=!1){const r=MD();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ji(e,`${t}-code-verifier`,s);const a=await FD(r);return[a,r===a?"plain":"s256"]}const OD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zD(e){const t=e.headers.get(Kg);if(!t||!t.match(OD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $D(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const BD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zi(e){if(!BD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $m(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WD(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function N1(e){return JSON.parse(JSON.stringify(e))}const Wo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VD=[502,503,504];async function T1(e){var t;if(!RD(e))throw new Xg(Wo(e),0);if(VD.includes(e.status))throw new Xg(Wo(e),e.status);let n;try{n=await e.json()}catch(a){throw new Ho(Wo(a),a)}let r;const s=zD(e);if(s&&s.getTime()>=n5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new j1(Wo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Mn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new j1(Wo(n),e.status,n.weak_password.reasons);throw new xD(Wo(n),e.status||500,r)}const UD=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Fe(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Kg]||(a[Kg]=n5["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await HD(e,t,n+u,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function HD(e,t,n,r,s,a){const l=UD(t,r,s,a);let u;try{u=await e(n,Object.assign({},l))}catch(d){throw console.error(d),new Xg(Wo(d),0)}if(u.ok||await T1(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await T1(d)}}function ur(e){var t;let n=null;KD(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=_D(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function R1(e){const t=ur(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function GD(e){return{data:e,error:null}}function qD(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,l=Aa(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function I1(e){return e}function KD(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lm=["global","local","others"];class XD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=o5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Lm[0]){if(Lm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lm.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Aa(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zs})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:I1});if(m.error)throw m.error;const h=await m.json(),g=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);f[`${w}Page`]=b}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(Ie(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){zi(t);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zs})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){zi(t);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){zi(t);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zs})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){zi(t.userId);try{const{data:n,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(t){zi(t.userId),zi(t.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:I1});if(m.error)throw m.error;const h=await m.json(),g=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);f[`${w}Page`]=b}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(Ie(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}function A1(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $i={debug:!!(globalThis&&s5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class i5 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class YD extends i5{}async function JD(e,t,n){$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),$i.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw $i.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new YD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($i.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function QD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function a5(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ZD(e){return parseInt(e,16)}function eF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function tF(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:f,scheme:m,uri:h,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=a5(e.address),v=m?`${m}://${r}`:r,b=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${x}

${b}`;let j=`URI: ${h}
Version: ${g}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(j+=`
Expiration Time: ${s.toISOString()}`),u&&(j+=`
Not Before: ${u.toISOString()}`),d&&(j+=`
Request ID: ${d}`),f){let T=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);T+=`
- ${k}`}j+=T}return`${w}
${j}`}class _t extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class ff extends _t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function nF({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(l5(l)){if(a.rp.id!==l)return new _t({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function rF({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(l5(r)){if(n.rpId!==r)return new _t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class sF{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const oF=new sF;function iF(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Aa(e,["challenge","user","excludeCredentials"]),a=ia(t).buffer,l=Object.assign(Object.assign({},n),{id:ia(n.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:ia(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function aF(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Aa(e,["challenge","allowCredentials"]),s=ia(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ia(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function lF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ko(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ko(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ko(new Uint8Array(s.authenticatorData)),clientDataJSON:Ko(new Uint8Array(s.clientDataJSON)),signature:Ko(new Uint8Array(s.signature)),userHandle:s.userHandle?Ko(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function l5(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function P1(){var e,t;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function uF(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ff("Browser returned unexpected credential type",t)}:{data:null,error:new ff("Empty credential response",t)}}catch(t){return{data:null,error:nF({error:t,options:e})}}}async function dF(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ff("Browser returned unexpected credential type",t)}:{data:null,error:new ff("Empty credential response",t)}}catch(t){return{data:null,error:rF({error:t,options:e})}}}const fF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(t(l)){const u=r[a];t(u)?r[a]=hf(u,l):r[a]=hf(l)}else r[a]=l}return r}function pF(e,t){return hf(fF,e,t||{})}function mF(e,t){return hf(hF,e,t||{})}class gF{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){var l;try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:d};const f=s??oF.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;if(!m.name){const h=r;if(h)m.name=`${m.id}:${h}`;else{const x=(await this.client.getUser()).data.user,v=((l=x==null?void 0:x.user_metadata)===null||l===void 0?void 0:l.name)||(x==null?void 0:x.email)||(x==null?void 0:x.id)||"User";m.name=`${m.id}:${v}`}}m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=pF(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:g}=await uF({publicKey:m,signal:f});return h?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}case"request":{const m=mF(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:g}=await dF(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:f}));return h?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}}}catch(u){return Ie(u)?{data:null,error:u}:{data:null,error:new Ho("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn authentication")};try{if(!P1())return{data:null,error:new Ho("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ho("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn registration")};try{if(!P1())return{data:null,error:new Ho("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var h;return(h=m.data)===null||h===void 0?void 0:h.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ho("Unexpected error in register",l)}}}}QD();const yF={url:hD,storageKey:pD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function M1(e,t,n){return await n()}const Li={};class fc{get jwks(){var t,n;return(n=(t=Li[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Li[this.storageKey]=Object.assign(Object.assign({},Li[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Li[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Li[this.storageKey]=Object.assign(Object.assign({},Li[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},yF),t);if(this.storageKey=a.storageKey,this.instanceID=(n=fc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,fc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Jt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new XD({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=o5(a.fetch),this.lock=a.lock||M1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Jt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=JD:this.lock=M1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new gF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:s5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=A1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=A1(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${t5}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Jt()&&(n=TD(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Jt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),bD(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?this._returnResult({error:n}):this._returnResult({error:new Ho("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ur}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:m,password:h,options:g}=t;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await Oi(this.storage,this.storageKey)),a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:m,password:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:x,code_challenge_method:v},xform:ur})}else if("phone"in t){const{phone:m,password:h,options:g}=t;a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:ur})}else throw new cd("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await Yt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:l,options:u}=t;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:R1})}else if("phone"in t){const{phone:a,password:l,options:u}=t;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:R1})}else throw new cd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Fi;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,l,u,d,f,m,h,g;let x,v;if("message"in t)x=t.message,v=t.signature;else{const{chain:b,wallet:w,statement:j,options:T}=t;let k;if(Jt())if(typeof w=="object")k=w;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")k=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=w}const E=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href),N=await k.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=a5(N[0]);let R=(r=T==null?void 0:T.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const P=await k.request({method:"eth_chainId"});R=ZD(P)}const A={domain:E.host,address:_,statement:j,uri:E.href,version:"1",chainId:R,nonce:(s=T==null?void 0:T.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=T==null?void 0:T.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=T==null?void 0:T.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=T==null?void 0:T.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=T==null?void 0:T.signInWithEthereum)===null||m===void 0?void 0:m.resources};x=tF(A),v=await k.request({method:"personal_sign",params:[eF(x),_]})}try{const{data:b,error:w}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ur});if(w)throw w;if(!b||!b.session||!b.user){const j=new Fi;return this._returnResult({data:{user:null,session:null},error:j})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(Ie(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var n,r,s,a,l,u,d,f,m,h,g,x;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:j,statement:T,options:k}=t;let E;if(Jt())if(typeof j=="object")E=j;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))E=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=j}const N=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const _=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),T?{statement:T}:null));let R;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")R=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)R=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)v=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),b=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((h=(m=k==null?void 0:k.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||h===void 0)&&h.length?["Resources",...k.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const _=await E.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=_}}try{const{data:w,error:j}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ko(b)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ur});if(j)throw j;if(!w||!w.session||!w.user){const T=new Fi;return this._returnResult({data:{user:null,session:null},error:T})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:j})}catch(w){if(Ie(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await Oo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new wD;const{data:a,error:l}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ur});if(await Yt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new Fi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:l}=t,u=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ur}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new Fi;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Oi(this.storage,this.storageKey));const{error:h}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:m}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new cd("You must provide either an email or phone number.")}catch(u){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ur});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(Ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Oi(this.storage,this.storageKey));const f=await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:GD});return!((a=f.data)===null||a===void 0)&&a.url&&Jt()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Mn;const{error:s}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:l}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:l,error:u}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new cd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Fm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Oo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=$m()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=WD(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zs}):await this._useSession(async n=>{var r,s,a;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mn}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Zs})})}catch(n){if(Ie(n))return Om(n)&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Mn;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Oi(this.storage,this.storageKey));const{data:f,error:m}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Zs});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Mn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:l}=dd(t.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Ie(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Mn;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Jt())throw new ud("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ud(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new k1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ud("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new k1("No code detected.");const{data:T,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=t;if(!a||!u||!l||!f)throw new ud("No session defined in URL");const m=Math.round(Date.now()/1e3),h=parseInt(u);let g=m+h;d&&(g=parseInt(d));const x=g-m;x*1e3<=Yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const v=g-h;m-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,m):m-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,m);const{data:b,error:w}=await this._getUser(a);if(w)throw w;const j={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:g,refresh_token:l,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:t.type},error:null})}catch(r){if(Ie(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a&&!Om(a))return this._returnResult({error:a});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(vD(u)&&(u.status===404||u.status===401||u.status===403)||Om(u)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=ND(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Oi(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var l,u,d,f,m;const{data:h,error:g}=a;if(g)throw g;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(f=h.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Jt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ie(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:u,token:d,access_token:f,nonce:m}=t,h=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ur}),{data:g,error:x}=h;return x?this._returnResult({data:{user:null,session:null},error:x}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Fi}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:x}))}catch(s){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)throw l;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await AD(async s=>(s>0&&await ID(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ur})),(s,a)=>{const l=200*Math.pow(2,s);return a&&zm(a)&&Date.now()+l-r<Yi})}catch(r){if(this._debug(n,"error",r),Ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Jt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Oo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Oo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Ji(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:$m()}else if(s&&!s.user&&!s.user){const l=await Oo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Yt(this.storage,this.storageKey+"-user"),await Ji(this.storage,this.storageKey,s)):s.user=$m()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Fm;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Fm}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),zm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Yf;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Mn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Ie(a)){const l={data:null,error:a};return zm(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Yt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ji(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=N1(s);await Ji(this.storage,this.storageKey,a)}else{const s=N1(n);await Ji(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Yt(this.storage,this.storageKey),await Yt(this.storage,this.storageKey+"-code-verifier"),await Yt(this.storage,this.storageKey+"-user"),this.userStorage&&await Yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yi}ms, refresh threshold is ${qg} ticks`),s<=qg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof i5)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Oi(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await Fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:f}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?lF(t.webauthn.credential_response):cF(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await Fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:iF(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aF(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,a;if(t)try{const{payload:x}=dd(t);let v=null;x.aal&&(v=x.aal);let b=v;const{data:{user:w},error:j}=await this.getUser(t);if(j)return this._returnResult({data:null,error:j});((r=(n=w==null?void 0:w.factors)===null||n===void 0?void 0:n.filter(E=>E.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const k=x.amr||[];return{data:{currentLevel:v,nextLevel:b,currentAuthenticationMethods:k},error:null}}catch(x){if(Ie(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=dd(l.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(m="aal2");const g=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Mn});const l=await Fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Mn});const l=await Fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(t){if(Ie(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Mn})})}catch(n){if(Ie(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+yD>s)return r;const{data:a,error:l}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:x,error:v}=await this.getSession();if(v||!x.session)return this._returnResult({data:null,error:v});r=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=dd(r);n!=null&&n.allowExpired||$D(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const m=LD(s.alg),h=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,h,l,ED(`${u}.${d}`)))throw new Yg("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}}fc.nextInstanceID={};const xF=fc,vF="2.94.1";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const bF={"X-Client-Info":`supabase-js-${zl}/${vF}`},wF={headers:bF},SF={schema:"public"},kF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jF={};function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function CF(e,t){if(hc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EF(e){var t=CF(e,"string");return hc(t)=="symbol"?t:t+""}function _F(e,t,n){return(t=EF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D1(Object(n),!0).forEach(function(r){_F(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const NF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),TF=()=>Headers,RF=(e,t,n)=>{const r=NF(n),s=TF();return async(a,l)=>{var u;const d=(u=await t())!==null&&u!==void 0?u:e;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,vt(vt({},l),{},{headers:f}))}};function IF(e){return e.endsWith("/")?e:e+"/"}function AF(e,t){var n,r;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:f,realtime:m,global:h}=t,g={db:vt(vt({},d),s),auth:vt(vt({},f),a),realtime:vt(vt({},m),l),storage:{},global:vt(vt(vt({},h),u),{},{headers:vt(vt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function PF(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IF(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var MF=class extends xF{constructor(e){super(e)}},DF=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=PF(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:SF,realtime:jF,auth:vt(vt({},kF),{},{storageKey:l}),global:wF},d=AF(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=RF(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new v8(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new fD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new d8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:f},m,h){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MF({url:this.authUrl.href,headers:vt(vt({},g),m),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:u,debug:d,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new F8(this.realtimeUrl.href,vt(vt({},e),{},{params:vt(vt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const FF=(e,t,n)=>new DF(e,t,n);function OF(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}OF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zn="uvqbmlnavztzobfaiqao",De="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2cWJtbG5hdnp0em9iZmFpcWFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMTgzMzgsImV4cCI6MjA4Mzg5NDMzOH0.jJKJ3_V9GgKu33o31KAHR5NKDURhrqy6Hvj8CoJB4qc",zo=FF(`https://${zn}.supabase.co`,De),c5=S.createContext(void 0);function zF({children:e}){const[t,n]=S.useState(null),[r,s]=S.useState(null),[a,l]=S.useState(!0);S.useEffect(()=>{u();const{data:{subscription:b}}=zo.auth.onAuthStateChange(async(w,j)=>{console.log("Auth state changed:",w),w==="TOKEN_REFRESHED"||w==="SIGNED_IN"?(console.log("Token refreshed or user signed in, updating token"),j!=null&&j.access_token&&await d(j.access_token)):w==="SIGNED_OUT"&&(console.log("User signed out"),n(null),s(null))});return()=>{b.unsubscribe()}},[]);const u=async()=>{try{const{data:{session:b}}=await zo.auth.getSession();b!=null&&b.access_token&&await d(b.access_token)}catch(b){console.error("Error checking user session:",b)}finally{l(!1)}},d=async b=>{var w,j,T;try{console.log("=== FRONTEND: Fetching user role ==="),console.log("Token length:",b==null?void 0:b.length),console.log("Token preview:",(b==null?void 0:b.substring(0,20))+"...");const{data:{user:k},error:E}=await zo.auth.getUser(b);if(k&&!E){console.log("=== FRONTEND: Got user from Supabase directly ==="),console.log("User ID:",k.id),console.log("User email:",k.email),console.log("User metadata:",k.user_metadata),console.log("Role from metadata:",(w=k.user_metadata)==null?void 0:w.role);const _=((j=k.user_metadata)==null?void 0:j.role)||"user",R=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}");R[_]=k.id,localStorage.setItem("balemoo_demo_user_ids",JSON.stringify(R)),n({id:k.id,email:k.email||"",role:_,name:(T=k.user_metadata)==null?void 0:T.name}),s(b);return}console.log("Falling back to server endpoint...");const N=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/user/role`,{headers:{Authorization:`Bearer ${b}`}});if(console.log("Response status:",N.status),N.ok){const _=await N.json();console.log("=== FRONTEND: User data received from server ==="),console.log("Full response:",_),console.log("Role:",_.role),console.log("Email:",_.email),console.log("Name:",_.name);const R=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}");R[_.role]=_.userId,localStorage.setItem("balemoo_demo_user_ids",JSON.stringify(R)),n({id:_.userId,email:_.email,role:_.role,name:_.name}),s(b)}else{const _=await N.text();console.error("Failed to fetch user role, status:",N.status),console.error("Error response:",_)}}catch(k){console.error("Error fetching user role:",k)}},f=async(b,w)=>{var j;try{const{data:T,error:k}=await zo.auth.signInWithPassword({email:b,password:w});if(k)throw k;(j=T.session)!=null&&j.access_token&&await d(T.session.access_token)}catch(T){throw console.error("Sign in error:",T),new Error(T.message||"Failed to sign in")}},m=f,h=async(b,w,j)=>{var T;try{const{data:k,error:E}=await zo.auth.signUp({email:b,password:w,options:{data:{name:j}}});if(E)throw E;(T=k.session)!=null&&T.access_token&&await d(k.session.access_token)}catch(k){throw console.error("Sign up error:",k),new Error(k.message||"Failed to sign up")}},g=async()=>{try{await zo.auth.signOut(),n(null),s(null)}catch(b){console.error("Sign out error:",b)}},x=g,v=async()=>{var b;try{const{data:w,error:j}=await zo.auth.refreshSession();if(j)throw j;if((b=w.session)!=null&&b.access_token)return await d(w.session.access_token),w.session.access_token}catch(w){throw console.error("Refresh session error:",w),new Error(w.message||"Failed to refresh session")}return null};return o.jsx(c5.Provider,{value:{user:t,accessToken:r,login:f,signIn:m,signUp:h,logout:g,signOut:x,refreshSession:v},children:e})}function Gt(){const e=S.useContext(c5);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function $F(){const[e,t]=S.useState(""),[n,r]=S.useState(""),[s,a]=S.useState(""),[l,u]=S.useState(!1),[d,f]=S.useState(!1),[m,h]=S.useState(!1),[g,x]=S.useState(""),[v,b]=S.useState(""),{signIn:w,signUp:j}=Gt(),T=Rt(),k=async()=>{x(""),b(""),h(!0);try{const N=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/init-demo-users`,{method:"POST",headers:{Authorization:`Bearer ${De}`}}),_=await N.json();if(N.ok){const R=_.results.filter(P=>P.status==="created").length,A=_.results.filter(P=>P.status==="already_exists").length;R>0?b(` ${R} demo account(s) created successfully! You can now sign in or use Quick Demo Access.`):A>0&&b(" Demo accounts already exist! You can sign in with demo credentials or use Quick Demo Access.")}else throw new Error(_.error||"Failed to initialize demo users")}catch(N){x(N.message||"Failed to initialize demo accounts")}finally{h(!1)}},E=async N=>{N.preventDefault(),x(""),b(""),f(!0);try{l?await j(e,n,s):await w(e,n),T("/projects")}catch(_){let R=_.message||"Authentication failed";R.includes("Invalid login credentials")?R="Invalid credentials. Please check your email and password, or create a new account.":R.includes("already been registered")?(R="This email is already registered. Please sign in instead.",setTimeout(()=>{u(!1),x("")},2e3)):R.includes("Email not confirmed")&&(R="Please confirm your email address before signing in."),x(R);const A=document.querySelector("form");A==null||A.classList.add("shake"),setTimeout(()=>A==null?void 0:A.classList.remove("shake"),500)}finally{f(!1)}};return o.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center px-6",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-md",children:o.jsxs("div",{className:"rounded-3xl p-8 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a"},children:"Balemoo"}),o.jsx("p",{className:"mt-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,color:"#6b6b6b"},children:l?"Create your account":"Welcome back"})]}),g&&o.jsx(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 rounded-lg",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:g})}),v&&o.jsx(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 rounded-lg",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#22c55e"},children:v})}),o.jsxs("form",{onSubmit:E,className:"space-y-5",children:[l&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Name"}),o.jsx("input",{id:"name",type:"text",value:s,onChange:N=>a(N.target.value),required:l,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:e,onChange:N=>t(N.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#1a1a1a"},className:"block mb-2",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:n,onChange:N=>r(N.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none"},onFocus:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.3)"},onBlur:N=>{N.target.style.border="1px solid rgba(0, 0, 0, 0.1)"}})]}),o.jsx("button",{type:"submit",disabled:d,className:"w-full px-6 py-3 rounded-full transition-all duration-700",style:{background:d?"rgba(0, 0, 0, 0.4)":"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none",cursor:d?"not-allowed":"pointer",transform:"scale(1)"},onMouseEnter:N=>{d||(N.currentTarget.style.transform="scale(1.03)",N.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.15)")},onMouseLeave:N=>{N.currentTarget.style.transform="scale(1)",N.currentTarget.style.boxShadow="none"},children:d?"Please wait...":l?"Sign Up":"Log In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>{u(!l),x("")},className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6b6b6b",background:"none",border:"none",cursor:"pointer"},children:l?"Already have an account? Log in":"Don't have an account? Sign up"})}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:()=>T("/demo"),className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6",background:"none",border:"none",cursor:"pointer"},children:"Try Quick Demo Access "})}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:k,disabled:m,className:"transition-opacity duration-300 hover:opacity-60",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6",background:"none",border:"none",cursor:m?"not-allowed":"pointer"},children:m?"Initializing...":"Initialize Demo Users"})})]})}),o.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
        .shake {
          animation: shake 0.5s ease-in-out;
        }
      `})]})}const u5=S.createContext(void 0);function LF({children:e}){const{user:t,accessToken:n}=Gt(),[r,s]=S.useState([]),[a,l]=S.useState(null),[u,d]=S.useState(null),[f,m]=S.useState(!0),[h,g]=S.useState(null),x=N=>{l(N),N?localStorage.setItem("balemoo_selected_project_id",N.id):localStorage.removeItem("balemoo_selected_project_id"),N&&N.agendas&&N.agendas.length>0?d(N.agendas[0]):d(null)},v=async()=>{if(!t||!n){m(!1);return}try{m(!0),g(null);const N=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/projects`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!N.ok){const P=await N.json();throw new Error(P.error||"Failed to fetch projects")}const R=(await N.json()).projects||[];s(R);const A=localStorage.getItem("balemoo_selected_project_id");if(A){const P=R.find($=>$.id===A);P&&(l(P),P.agendas&&P.agendas.length>0&&d(P.agendas[0]))}else if(a){const P=R.find($=>$.id===a.id);P&&l(P)}}catch(N){console.error("Error fetching projects:",N),g(N.message||"Failed to fetch projects"),s([])}finally{m(!1)}};S.useEffect(()=>{t&&n?v():(s([]),m(!1))},[t,n]);const b=async N=>{if(!t||!n)throw new Error("User not authenticated");try{const _=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/projects`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(N)});if(!_.ok){const A=await _.json();throw new Error(A.error||"Failed to create project")}const R=await _.json();return await v(),R.project}catch(_){throw console.error("Error creating project:",_),_}},w=async(N,_)=>{if(!t||!n)throw new Error("User not authenticated");try{console.log("=== UPDATE PROJECT REQUEST (Frontend) ==="),console.log("Project ID:",N),console.log("Updates:",JSON.stringify(_,null,2));const R=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/projects/${N}`,{method:"PUT",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log("Response status:",R.status),!R.ok){const P=await R.json();throw console.error("Error response:",P),new Error(P.error||"Failed to update project")}const A=await R.json();console.log("Success response:",A),await v()}catch(R){throw console.error("Error updating project:",R),R}},j=async N=>{if(!t||!n)throw new Error("User not authenticated");try{const _=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/projects/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const R=await _.json();throw new Error(R.error||"Failed to delete project")}await v()}catch(_){throw console.error("Error deleting project:",_),_}},T=async()=>{await v()},k=(N,_,R)=>{const A=r.map(P=>{if(P.id===N){const $=P.agendas.map(L=>L.id===_?{...L,...R}:L);return{...P,agendas:$}}return P});s(A)},E=N=>{var _,R;if(!t)return!1;if(t.role==="admin")return!0;if(N.isActive===!1)return!1;if(N.team){if(t.role==="staff")return((_=N.team.staff)==null?void 0:_.includes(t.id))||!1;if(t.role==="user")return N.team.client===t.id}return((R=N.assignedUsers)==null?void 0:R.includes(t.id))||!1};return o.jsx(u5.Provider,{value:{projects:r,selectedProject:a,setSelectedProject:x,selectedAgenda:u,setSelectedAgenda:d,isProjectAccessible:E,loading:f,error:h,createProject:b,updateProject:w,deleteProject:j,refreshProjects:T,updateAgenda:k},children:e})}function qt(){const e=S.useContext(u5);if(e===void 0)throw new Error("useProject must be used within a ProjectProvider");return e}const BF=[{id:"kabar-in",title:"kabar.in",description:"Guest CRM, personalized QR generation and management",icon:o.jsx(oc,{className:"w-12 h-12"}),route:"/kabar-in",requiredRoles:["admin"]},{id:"check-in",title:"check.in",description:"QR-based fast guest check-in system",icon:o.jsx(ma,{className:"w-12 h-12"}),route:"/check-in",requiredRoles:["admin","staff"]},{id:"monitor-in",title:"monitor.in",description:"Guest analytics and monitoring dashboard",icon:o.jsx(hy,{className:"w-12 h-12"}),route:"/monitor-in",requiredRoles:["admin","staff","user"]}];function WF(){const{user:e,signOut:t}=Gt(),{project:n,setProject:r}=qt(),s=Rt(),[a,l]=S.useState(null),[u,d]=S.useState(null),f=g=>{e&&g.requiredRoles.includes(e.role)?s(g.route):(d(g.id),setTimeout(()=>d(null),500))},m=async()=>{await t(),s("/")},h=g=>e&&g.requiredRoles.includes(e.role);return o.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[o.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-6xl mb-12",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 3vw, 2.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a"},children:["Welcome back, ",(e==null?void 0:e.name)||"User"]}),o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#6b6b6b",marginTop:"0.5rem"},children:["Role: ",o.jsx("span",{style:{color:(e==null?void 0:e.role)==="admin"?"#8b5cf6":(e==null?void 0:e.role)==="staff"?"#3b82f6":"#10b981",fontWeight:600,textTransform:"uppercase"},children:(e==null?void 0:e.role)||"unknown"})," | Email: ",e==null?void 0:e.email]})]}),o.jsx("button",{onClick:m,className:"px-6 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:"Sign Out"})]})}),o.jsx("div",{className:"w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-6",children:BF.map((g,x)=>{const v=h(g),b=a===g.id,w=u===g.id;return o.jsxs(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2+x*.1,ease:[.25,.1,.25,1]},onClick:()=>f(g),onMouseEnter:()=>l(g.id),onMouseLeave:()=>l(null),className:"relative rounded-3xl p-8 backdrop-blur-xl transition-all duration-700",style:{background:v?"rgba(255, 255, 255, 0.7)":"rgba(200, 200, 200, 0.3)",border:`1px solid ${v?"rgba(255, 255, 255, 0.3)":"rgba(150, 150, 150, 0.2)"}`,boxShadow:b&&v?"0 12px 40px rgba(0, 0, 0, 0.15)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:b&&v?"translateY(-8px)":"translateY(0)",cursor:v?"pointer":"not-allowed",opacity:v?1:.5,filter:v?"none":"grayscale(1)",animation:w?"shake 0.5s ease-in-out":"none"},children:[!v&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx(xr,{className:"w-6 h-6",style:{color:"#9ca3af"}})}),o.jsx("div",{className:"mb-6",style:{color:v?"#1a1a1a":"#9ca3af"},children:g.icon}),o.jsx("h3",{className:"mb-3",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.01em",color:v?"#1a1a1a":"#9ca3af"},children:g.title}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,lineHeight:1.6,color:v?"#6b6b6b":"#9ca3af"},children:g.description}),!v&&b&&o.jsx(ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-2 rounded-lg whitespace-nowrap",style:{background:"rgba(0, 0, 0, 0.9)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#ffffff"},children:"You do not have access to this feature"})]},g.id)})}),o.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        .shake-card {
          animation: shake 0.5s ease-in-out;
        }
      `})]})}const VF=[{icon:p4,label:"Dashboard",path:"/kabar-in",color:"#8b5cf6"},{icon:sc,label:"Template Management",path:"/kabar-in/templates",color:"#06b6d4"},{icon:ln,label:"Guest List",path:"/kabar-in/guests",badge:24,color:"#10b981"},{icon:ga,label:"Chatflow Studio",path:"/kabar-in/chatflow",color:"#f59e0b"},{icon:sc,label:"WhatsApp Flows",path:"/kabar-in/whatsapp-flows",color:"#25D366"},{icon:I4,label:"Operation Center",path:"/kabar-in/operation",badge:5,color:"#3b82f6"},{icon:oc,label:"Messages",path:"/kabar-in/messages",badge:3,color:"#ec4899"},{icon:qf,label:"Analytics",path:"/kabar-in/analytics",color:"#6366f1"},{icon:Ac,label:"Settings",path:"/kabar-in/settings",color:"#64748b"}];function UF({children:e}){const t=Rt(),n=qr(),[r,s]=S.useState(!1),[a,l]=S.useState(null),u=d=>d==="/kabar-in"?n.pathname===d:n.pathname.startsWith(d);return o.jsxs("div",{style:{display:"flex",minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",paddingTop:"80px"},children:[o.jsxs(ce.div,{initial:!1,animate:{width:r?"80px":"280px"},transition:{duration:.3,ease:[.4,0,.2,1]},style:{position:"fixed",left:0,top:"80px",bottom:0,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRight:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"4px 0 24px rgba(0, 0, 0, 0.08)",zIndex:100,overflow:"hidden"},children:[o.jsxs("div",{style:{padding:r?"1.5rem 1rem":"1.5rem 1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx(io,{mode:"wait",children:!r&&o.jsxs(ce.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:700,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"kabar.in"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.125rem"},children:"Guest CRM Platform"})]})}),o.jsx("button",{onClick:()=>s(!r),style:{width:"32px",height:"32px",borderRadius:"10px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(139, 92, 246, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},children:r?o.jsx(Pj,{size:18,style:{color:"#8b5cf6"}}):o.jsx(py,{size:18,style:{color:"#8b5cf6"}})})]}),o.jsx("div",{style:{padding:"1rem 0.75rem",overflowY:"auto",height:"calc(100% - 100px)"},children:VF.map((d,f)=>{const m=d.icon,h=u(d.path),g=a===d.path;return o.jsxs(ce.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:f*.05},onClick:()=>t(d.path),onMouseEnter:()=>l(d.path),onMouseLeave:()=>l(null),style:{width:"100%",display:"flex",alignItems:"center",gap:r?"0":"12px",padding:r?"12px":"12px 16px",marginBottom:"6px",background:h?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":g?"rgba(0, 0, 0, 0.03)":"transparent",border:h?"1px solid rgba(139, 92, 246, 0.3)":"1px solid transparent",borderRadius:"14px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",justifyContent:r?"center":"flex-start",transform:g?"translateX(4px)":"translateX(0)"},children:[h&&o.jsx(ce.div,{layoutId:"activeIndicator",style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:"4px",height:"24px",background:"linear-gradient(180deg, #8b5cf6 0%, #6366f1 100%)",borderRadius:"0 4px 4px 0"},transition:{type:"spring",stiffness:300,damping:30}}),o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:h||g?`linear-gradient(135deg, ${d.color}20 0%, ${d.color}10 100%)`:"transparent",border:`1px solid ${d.color}${h?"40":"00"}`,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:o.jsx(m,{size:20,style:{color:h?d.color:"#6b7280"}})}),o.jsx(io,{mode:"wait",children:!r&&o.jsxs(ce.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},style:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,overflow:"hidden"},children:[o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:h?600:500,color:h?"#1f2937":"#6b7280",whiteSpace:"nowrap"},children:d.label}),d.badge&&o.jsx(ce.div,{initial:{scale:0},animate:{scale:1},style:{minWidth:"24px",height:"24px",borderRadius:"12px",background:d.color,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 8px"},children:o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:700,color:"#ffffff"},children:d.badge})})]})}),r&&g&&o.jsxs(ce.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},style:{position:"absolute",left:"100%",marginLeft:"12px",padding:"8px 16px",background:"rgba(0, 0, 0, 0.9)",borderRadius:"8px",whiteSpace:"nowrap",zIndex:1e3,pointerEvents:"none"},children:[o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#ffffff"},children:d.label}),o.jsx("div",{style:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%) rotate(45deg)",width:"8px",height:"8px",background:"rgba(0, 0, 0, 0.9)"}})]})]},d.path)})})]}),o.jsx(ce.div,{initial:!1,animate:{marginLeft:r?"80px":"280px"},transition:{duration:.3,ease:[.4,0,.2,1]},style:{flex:1,minHeight:"calc(100vh - 80px)",width:"100%"},children:e})]})}const d5=S.createContext(void 0);function HF({children:e}){const{user:t,accessToken:n}=Gt(),[r,s]=S.useState([]),[a,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${zn}.supabase.co/functions/v1/make-server-deeab278`,m=async T=>{if(!t||!n||t.role!=="admin"){s([]);return}try{l(!0),d(null);const k=new URLSearchParams;T!=null&&T.status&&k.append("status",T.status),T!=null&&T.projectId&&k.append("projectId",T.projectId);const E=await fetch(`${f}/templates?${k.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const _=await E.json();throw new Error(_.error||"Failed to fetch templates")}const N=await E.json();s(N.templates||[])}catch(k){console.error("Error fetching templates:",k),d(k.message||"Failed to fetch templates"),s([])}finally{l(!1)}},h=async T=>{if(!t||!n||t.role!=="admin")return null;try{const k=await fetch(`${f}/templates/${T}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const N=await k.json();throw new Error(N.error||"Failed to fetch template")}return(await k.json()).template}catch(k){return console.error("Error fetching template:",k),null}},g=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{console.log("Creating template with input:",T);const k=await fetch(`${f}/templates`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(T)});if(!k.ok){const N=await k.json();console.error("Backend validation errors:",N);const _=N.errors?`Validation failed: ${N.errors.join(", ")}`:N.error||"Failed to create template";throw new Error(_)}const E=await k.json();return await m(),E.template}catch(k){throw console.error("Error creating template:",k),k}},x=async(T,k)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const E=await fetch(`${f}/templates/${T}`,{method:"PUT",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!E.ok){const _=await E.json();throw new Error(_.error||"Failed to update template")}const N=await E.json();return await m(),N.template}catch(E){throw console.error("Error updating template:",E),E}},v=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const k=await fetch(`${f}/templates/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const E=await k.json();throw new Error(E.error||"Failed to delete template")}await m()}catch(k){throw console.error("Error deleting template:",k),k}},b=async T=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const k=await fetch(`${f}/templates/${T}/submit`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!k.ok){const N=await k.json();throw new Error(N.error||"Failed to submit template")}const E=await k.json();return j(T),E.template}catch(k){throw console.error("Error submitting template:",k),k}},w=async(T,k)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const E=await fetch(`${f}/templates/${T}/reject`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({reason:k})});if(!E.ok){const _=await E.json();throw new Error(_.error||"Failed to reject template")}const N=await E.json();return await m(),N.template}catch(E){throw console.error("Error rejecting template:",E),E}},j=T=>{const k=setInterval(async()=>{try{const E=await h(T);if(!E){clearInterval(k);return}s(N=>N.map(_=>_.id===T?E:_)),E.status!=="PENDING"&&clearInterval(k)}catch(E){console.error("Error polling template:",E),clearInterval(k)}},1e3);setTimeout(()=>clearInterval(k),1e4)};return S.useEffect(()=>{t&&n&&t.role==="admin"?m():s([])},[t,n]),o.jsx(d5.Provider,{value:{templates:r,loading:a,error:u,fetchTemplates:m,getTemplateById:h,createTemplate:g,updateTemplate:x,deleteTemplate:v,submitTemplate:b,simulateReject:w},children:e})}function Ma(){const e=S.useContext(d5);if(e===void 0)throw new Error("useTemplates must be used within a TemplateProvider");return e}const Gs="https://uvqbmlnavztzobfaiqao.supabase.co/functions/v1/make-server-deeab278",f5=S.createContext(void 0),Jf=()=>{const e=S.useContext(f5);if(!e)throw new Error("useGuests must be used within a GuestProvider");return e},GF=({children:e})=>{const{user:t,accessToken:n}=Gt(),{selectedProject:r}=qt(),[s,a]=S.useState([]),[l,u]=S.useState(!1),[d,f]=S.useState(null),[m,h]=S.useState(null),[g,x]=S.useState({search:"",category:"all",rsvp_status:"all",invitation_type:"all"}),[v,b]=S.useState({field:"created_at",direction:"desc"}),w=async()=>{if(!t||t.role!=="admin"||!r||!n){a([]);return}try{u(!0),f(null);const $=await fetch(`${Gs}/guests?projectId=${r.id}`,{headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!$.ok){const B=await $.json();throw new Error(B.error||"Failed to fetch guests")}const L=await $.json();a(L.guests||[])}catch($){const L=$ instanceof Error?$.message:"Failed to fetch guests";f(L),console.error("Error fetching guests:",$)}finally{u(!1)}},j=async()=>{if(!t||t.role!=="admin"||!r||!n){h(null);return}try{const $=await fetch(`${Gs}/guests/stats?projectId=${r.id}`,{headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!$.ok)throw new Error("Failed to fetch guest statistics");const L=await $.json();h(L.stats)}catch($){console.error("Error fetching guest stats:",$)}},T=async $=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Gs}/guests`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,...$})});if(!L.ok){const V=await L.json();throw new Error(V.error||"Failed to create guest")}const K=(await L.json()).guest;return a(V=>[...V,K]),await j(),K},k=async($,L)=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const B=await fetch(`${Gs}/guests/${$}`,{method:"PUT",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,...L})});if(!B.ok){const Y=await B.json();throw new Error(Y.error||"Failed to update guest")}const V=(await B.json()).guest;return a(Y=>Y.map(z=>z.id===$?V:z)),await j(),V},E=async $=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Gs}/guests/${$}?projectId=${r.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!L.ok){const B=await L.json();throw new Error(B.error||"Failed to delete guest")}a(B=>B.filter(K=>K.id!==$)),await j()},N=async $=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Gs}/guests/bulk`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id,guests:$})});if(!L.ok){const K=await L.json();throw new Error(K.error||"Failed to import guests")}const B=await L.json();return B.success&&B.success.length>0&&(a(K=>[...K,...B.success]),await j()),{success:B.success||[],failed:B.failed||[]}},_=async $=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");const L=await fetch(`${Gs}/guests/${$}/checkin`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:r.id})});if(!L.ok){const V=await L.json();throw new Error(V.error||"Failed to check in guest")}const K=(await L.json()).guest;return a(V=>V.map(Y=>Y.id===$?K:Y)),await j(),K},R=async($=!1)=>{if(!t||t.role!=="admin"||!r||!n)throw new Error("Unauthorized");try{u(!0),f(null);const L=`${Gs}/guests/seed?projectId=${r.id}${$?"&clear=true":""}`,B=await fetch(L,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!B.ok){const Y=await B.json();throw new Error(Y.error||"Failed to seed guests")}const V=(await B.json()).guests||[];return await w(),await j(),V}catch(L){const B=L instanceof Error?L.message:"Failed to seed guests";throw f(B),L}finally{u(!1)}},A=ye.useMemo(()=>{let $=[...s];if(g.search){const L=g.search.toLowerCase();$=$.filter(B=>{var K;return B.name.toLowerCase().includes(L)||B.phone.includes(L)||((K=B.email)==null?void 0:K.toLowerCase().includes(L))||B.tags.some(V=>V.toLowerCase().includes(L))})}return g.category&&g.category!=="all"&&($=$.filter(L=>L.category===g.category)),g.rsvp_status&&g.rsvp_status!=="all"&&($=$.filter(L=>L.rsvp_status===g.rsvp_status)),g.invitation_type&&g.invitation_type!=="all"&&($=$.filter(L=>L.invitation_type===g.invitation_type)),g.tags&&g.tags.length>0&&($=$.filter(L=>g.tags.some(B=>L.tags.includes(B)))),g.has_plus_one!==void 0&&($=$.filter(L=>L.plus_one===g.has_plus_one)),g.checked_in!==void 0&&($=$.filter(L=>g.checked_in?!!L.checked_in_at:!L.checked_in_at)),$.sort((L,B)=>{let K,V;switch(v.field){case"name":K=L.name.toLowerCase(),V=B.name.toLowerCase();break;case"created_at":K=new Date(L.created_at).getTime(),V=new Date(B.created_at).getTime();break;case"rsvp_at":K=L.rsvp_at?new Date(L.rsvp_at).getTime():0,V=B.rsvp_at?new Date(B.rsvp_at).getTime():0;break;case"table_number":K=L.table_number||"",V=B.table_number||"";break;default:return 0}return K<V?v.direction==="asc"?-1:1:K>V?v.direction==="asc"?1:-1:0}),$},[s,g,v]);S.useEffect(()=>{t&&t.role==="admin"&&r&&n?(w(),j()):(a([]),h(null))},[t,r,n]);const P={guests:s,loading:l,error:d,stats:m,fetchGuests:w,fetchGuestStats:j,createGuest:T,updateGuest:k,deleteGuest:E,bulkImportGuests:N,checkInGuest:_,seedSampleGuests:R,filteredGuests:A,setFilters:x,setSortOptions:b,filters:g,sortOptions:v};return o.jsx(f5.Provider,{value:P,children:e})};function fd({icon:e,label:t,value:n,change:r,changeType:s,color:a,delay:l}){return o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,right:0,width:"120px",height:"120px",background:`linear-gradient(135deg, ${a}15 0%, ${a}05 100%)`,borderRadius:"0 0 0 100%"}}),o.jsxs("div",{className:"flex items-start justify-between relative z-10",children:[o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6b7280",marginBottom:"0.5rem"},children:t}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#1f2937",letterSpacing:"-0.02em"},children:n}),r&&o.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[o.jsx(qf,{size:14,style:{color:s==="positive"?"#10b981":s==="negative"?"#ef4444":"#6b7280"}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:s==="positive"?"#10b981":s==="negative"?"#ef4444":"#6b7280"},children:r})]})]}),o.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${a}20 0%, ${a}10 100%)`,border:`1px solid ${a}30`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(e,{size:28,style:{color:a}})})]})]})}function hd({icon:e,title:t,description:n,time:r,color:s}){return o.jsxs("div",{className:"flex items-start gap-3 pb-4 mb-4",style:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:`linear-gradient(135deg, ${s}20 0%, ${s}10 100%)`,border:`1px solid ${s}30`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(e,{size:18,style:{color:s}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"0.25rem"},children:t}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n})]}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",whiteSpace:"nowrap"},children:r})]})}function qF(){const{templates:e}=Ma(),{stats:t}=Jf(),{user:n}=Gt(),r=e.length,s=e.filter(f=>f.status==="APPROVED").length,a=e.filter(f=>f.status==="PENDING").length,l=e.filter(f=>f.status==="DRAFT").length,u=(t==null?void 0:t.total)||0,d=(t==null?void 0:t.confirmed)||0;return o.jsx("div",{style:{padding:"2rem",minHeight:"100%"},children:o.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[o.jsxs(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[o.jsxs("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#ffffff",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:["Welcome back, ",(n==null?void 0:n.name)||"Admin","! "]}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"rgba(255, 255, 255, 0.9)"},children:"Here's what's happening with your WhatsApp CRM today"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[o.jsx(fd,{icon:oc,label:"Total Templates",value:r,change:"+12% from last month",changeType:"positive",color:"#8b5cf6",delay:0}),o.jsx(fd,{icon:ao,label:"Approved",value:s,change:"+8% from last month",changeType:"positive",color:"#10b981",delay:.1}),o.jsx(fd,{icon:po,label:"Pending Review",value:a,change:a>0?"Awaiting META approval":"All clear",changeType:"neutral",color:"#f59e0b",delay:.2}),o.jsx(fd,{icon:ln,label:"Total Guests",value:u,change:d>0?`${d} confirmed`:"No guests yet",changeType:d>0?"positive":"neutral",color:"#06b6d4",delay:.3})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[o.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",marginBottom:"1.5rem"},children:"Recent Activity"}),o.jsx(hd,{icon:ao,title:"Template Approved",description:"'event_invitation' approved by META",time:"2 hours ago",color:"#10b981"}),o.jsx(hd,{icon:Gf,title:"Message Sent",description:"124 WhatsApp messages delivered successfully",time:"5 hours ago",color:"#06b6d4"}),o.jsx(hd,{icon:ln,title:"New Guests Added",description:"42 guests imported from CSV",time:"1 day ago",color:"#8b5cf6"}),o.jsx(hd,{icon:Lg,title:"Chatflow Activated",description:"'Welcome Flow' automation started",time:"2 days ago",color:"#f59e0b"})]}),o.jsxs(ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",marginBottom:"1.5rem"},children:"Quick Actions"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(pd,{icon:oc,label:"Create New Template",description:"Design a WhatsApp message template",color:"#8b5cf6",onClick:()=>window.location.href="/kabar-in/templates"}),o.jsx(pd,{icon:ln,label:"Add Guests",description:"Import or add new guests to your list",color:"#10b981",onClick:()=>window.location.href="/kabar-in/guests"}),o.jsx(pd,{icon:Lg,label:"Build Chatflow",description:"Create automated conversation flows",color:"#f59e0b",onClick:()=>window.location.href="/kabar-in/chatflow"}),o.jsx(pd,{icon:Vf,label:"View Analytics",description:"Check your campaign performance",color:"#06b6d4",onClick:()=>window.location.href="/kabar-in/analytics"})]})]})]}),l>0&&o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-6 rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937",marginBottom:"0.25rem"},children:["You have ",l," draft template",l!==1?"s":""]}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:"Complete and submit them to start using in your campaigns"})]}),o.jsx("button",{onClick:()=>window.location.href="/kabar-in/templates",style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.transform="scale(1.05)"},onMouseLeave:f=>{f.currentTarget.style.transform="scale(1)"},children:"Review Drafts"})]})})]})})}function pd({icon:e,label:t,description:n,color:r,onClick:s}){const[a,l]=ye.useState(!1);return o.jsxs("button",{onClick:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:a?"rgba(0, 0, 0, 0.02)":"transparent",border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:"16px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:a?"translateX(4px)":"translateX(0)",textAlign:"left"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:`linear-gradient(135deg, ${r}20 0%, ${r}10 100%)`,border:`1px solid ${r}30`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx(e,{size:22,style:{color:r}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"0.125rem"},children:t}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n})]})]})}const KF={DRAFT:{bg:"rgba(156, 163, 175, 0.1)",border:"rgba(156, 163, 175, 0.2)",text:"#6b7280",icon:"#9ca3af",label:"Draft",Icon:sc},PENDING:{bg:"rgba(251, 191, 36, 0.1)",border:"rgba(251, 191, 36, 0.2)",text:"#d97706",icon:"#f59e0b",label:"Pending",Icon:po},APPROVED:{bg:"rgba(16, 185, 129, 0.1)",border:"rgba(16, 185, 129, 0.2)",text:"#059669",icon:"#10b981",label:"Approved",Icon:ao},REJECTED:{bg:"rgba(239, 68, 68, 0.1)",border:"rgba(239, 68, 68, 0.2)",text:"#dc2626",icon:"#ef4444",label:"Rejected",Icon:ei}},XF={sm:{padding:"4px 10px",fontSize:"0.75rem",iconSize:14,gap:"4px"},md:{padding:"6px 14px",fontSize:"0.875rem",iconSize:16,gap:"6px"},lg:{padding:"8px 16px",fontSize:"1rem",iconSize:18,gap:"8px"}};function h5({status:e,size:t="md"}){const n=KF[e],r=XF[t],s=n.Icon;return o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:r.gap,padding:r.padding,background:n.bg,border:`1px solid ${n.border}`,borderRadius:"12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:r.fontSize,fontWeight:600,color:n.text,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"all 0.2s ease"},children:[o.jsx(s,{size:r.iconSize,style:{color:n.icon}}),o.jsx("span",{children:n.label})]})}function YF({template:e,onView:t,onEdit:n,onDelete:r}){const[s,a]=S.useState(!1),l=e.status==="DRAFT"||e.status==="REJECTED",u=e.content.body.text.split(`
`).slice(0,2).join(" ").substring(0,120);return o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onClick:()=>t(e),className:"relative rounded-3xl backdrop-blur-xl cursor-pointer",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:s?"0 20px 60px rgba(0, 0, 0, 0.15)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:s?"scale(1.02)":"scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",padding:"1.5rem"},children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("div",{className:"flex items-center justify-center rounded-2xl",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.2)"},children:o.jsx(sc,{size:24,style:{color:"#8b5cf6"}})}),o.jsx(h5,{status:e.status,size:"sm"})]}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem",letterSpacing:"-0.01em"},children:e.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6b7280",padding:"4px 10px",background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.2)",borderRadius:"8px"},children:e.category}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6b7280",padding:"4px 10px",background:"rgba(156, 163, 175, 0.1)",border:"1px solid rgba(156, 163, 175, 0.2)",borderRadius:"8px"},children:e.language})]}),o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",lineHeight:"1.5",marginBottom:"1rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:[u,"..."]}),e.variables.length>0&&o.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#8b5cf6",marginBottom:"1rem"},children:[e.variables.length," variable",e.variables.length!==1?"s":""]}),o.jsxs("div",{className:"flex items-center gap-2 transition-opacity duration-300",style:{opacity:s?1:0,pointerEvents:s?"auto":"none"},children:[o.jsxs("button",{onClick:d=>{d.stopPropagation(),t(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(99, 102, 241, 0.1)",border:"1px solid rgba(99, 102, 241, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6366f1",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(99, 102, 241, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(99, 102, 241, 0.1)"},children:[o.jsx(Vf,{size:16}),"View"]}),l&&n&&o.jsxs("button",{onClick:d=>{d.stopPropagation(),n(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#10b981",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(16, 185, 129, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(16, 185, 129, 0.1)"},children:[o.jsx(xy,{size:16}),"Edit"]}),l&&r&&o.jsxs("button",{onClick:d=>{d.stopPropagation(),r(e)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:[o.jsx(Ht,{size:16}),"Delete"]})]}),o.jsx("div",{style:{position:"absolute",bottom:"1rem",right:"1.5rem",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",opacity:s?0:1,transition:"opacity 0.3s ease"},children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})}function JF({templates:e,onView:t,onEdit:n,onDelete:r}){const[s,a]=S.useState(""),[l,u]=S.useState("ALL"),[d,f]=S.useState("date"),m=S.useMemo(()=>{let g=[...e];if(s){const x=s.toLowerCase();g=g.filter(v=>v.name.toLowerCase().includes(x)||v.body.toLowerCase().includes(x)||v.category.toLowerCase().includes(x))}return l!=="ALL"&&(g=g.filter(x=>x.status===l)),g.sort((x,v)=>d==="date"?new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime():x.name.localeCompare(v.name)),g},[e,s,l,d]),h=S.useMemo(()=>({ALL:e.length,DRAFT:e.filter(g=>g.status==="DRAFT").length,PENDING:e.filter(g=>g.status==="PENDING").length,APPROVED:e.filter(g=>g.status==="APPROVED").length,REJECTED:e.filter(g=>g.status==="REJECTED").length}),[e]);return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-8 rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"1.5rem"},children:[o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(ys,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),o.jsx("input",{type:"text",placeholder:"Search templates...",value:s,onChange:g=>a(g.target.value),style:{width:"100%",padding:"12px 16px 12px 48px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"16px",outline:"none",transition:"all 0.2s ease"},onFocus:g=>{g.currentTarget.style.borderColor="#8b5cf6",g.currentTarget.style.boxShadow="0 0 0 3px rgba(139, 92, 246, 0.1)"},onBlur:g=>{g.currentTarget.style.borderColor="rgba(209, 213, 219, 0.5)",g.currentTarget.style.boxShadow="none"}})]}),o.jsx("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:["ALL","DRAFT","PENDING","APPROVED","REJECTED"].map(g=>o.jsxs("button",{onClick:()=>u(g),style:{padding:"8px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:l===g?"#ffffff":"#6b7280",background:l===g?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":"rgba(156, 163, 175, 0.1)",border:l===g?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(156, 163, 175, 0.2)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:x=>{l!==g&&(x.currentTarget.style.background="rgba(156, 163, 175, 0.2)")},onMouseLeave:x=>{l!==g&&(x.currentTarget.style.background="rgba(156, 163, 175, 0.1)")},children:[g," (",h[g],")"]},g))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(L4,{size:18,style:{color:"#6b7280"}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginRight:"8px"},children:"Sort by:"}),o.jsx("button",{onClick:()=>f("date"),style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:d==="date"?600:500,color:d==="date"?"#8b5cf6":"#6b7280",background:d==="date"?"rgba(139, 92, 246, 0.1)":"transparent",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:"Date"}),o.jsx("button",{onClick:()=>f("name"),style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:d==="name"?600:500,color:d==="name"?"#8b5cf6":"#6b7280",background:d==="name"?"rgba(139, 92, 246, 0.1)":"transparent",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:"Name"})]})]}),o.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginBottom:"1.5rem"},children:[m.length," template",m.length!==1?"s":""," found"]}),m.length>0?o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"1.5rem"},children:m.map(g=>o.jsx(YF,{template:g,onView:t,onEdit:n,onDelete:r},g.id))}):o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"4rem 2rem",textAlign:"center"},children:[o.jsx("div",{className:"flex items-center justify-center rounded-full mb-4",style:{width:"80px",height:"80px",background:"rgba(156, 163, 175, 0.1)",border:"1px solid rgba(156, 163, 175, 0.2)"},children:o.jsx(ys,{size:40,style:{color:"#9ca3af"}})}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"No templates found"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:s?"Try adjusting your search or filters":"Create your first template to get started"})]})]})}function ky({template:e,sampleData:t={}}){var s,a,l,u,d;const n=f=>f?f.replace(/\{\{(\w+)\}\}/g,(m,h)=>t[h]||`[${h}]`):"",r=f=>{const m=[];let h=0,g=0;const x=/(\*[^*]+\*|_[^_]+_|~[^~]+~)/g;let v;const b=n(f);for(;(v=x.exec(b))!==null;){v.index>h&&m.push(o.jsx("span",{children:b.slice(h,v.index)},`text-${g++}`));const w=v[0],j=w.slice(1,-1);w.startsWith("*")?m.push(o.jsx("strong",{style:{fontWeight:700},children:j},`bold-${g++}`)):w.startsWith("_")?m.push(o.jsx("em",{style:{fontStyle:"italic"},children:j},`italic-${g++}`)):w.startsWith("~")&&m.push(o.jsx("span",{style:{textDecoration:"line-through"},children:j},`strike-${g++}`)),h=v.index+w.length}return h<b.length&&m.push(o.jsx("span",{children:b.slice(h)},`text-${g++}`)),o.jsx(o.Fragment,{children:m})};return o.jsxs("div",{style:{maxWidth:"400px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:"#075e54",padding:"12px 16px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#d1d5db",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#6b7280"},children:"B"}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Balemoo"}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"WhatsApp Business"})]})]}),o.jsxs("div",{style:{background:"#ece5dd",backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d9d9d9' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,padding:"20px 16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",minHeight:"300px"},children:[o.jsxs("div",{style:{background:"#dcf8c6",padding:"10px 12px 6px",borderRadius:"8px",maxWidth:"85%",boxShadow:"0 1px 0.5px rgba(0, 0, 0, 0.13)",position:"relative"},children:[((s=e.content)==null?void 0:s.header)&&o.jsxs("div",{style:{marginBottom:"8px"},children:[e.content.header.type==="TEXT"&&o.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",fontWeight:700,color:"#000000",marginBottom:"4px"},children:n(e.content.header.text||"")}),e.content.header.type==="IMAGE"&&o.jsx("div",{style:{width:"100%",height:"120px",background:"#e5e7eb",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"[Image]"}),e.content.header.type==="VIDEO"&&o.jsx("div",{style:{width:"100%",height:"120px",background:"#1f2937",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#ffffff"},children:"[Video]"}),e.content.header.type==="DOCUMENT"&&o.jsx("div",{style:{padding:"8px 12px",background:"#ffffff",borderRadius:"6px",marginBottom:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#374151"},children:" Document"})]}),o.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",color:"#000000",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:r(((l=(a=e.content)==null?void 0:a.body)==null?void 0:l.text)||"")}),((u=e.content)==null?void 0:u.footer)&&o.jsx("div",{style:{fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.8125rem",color:"#667781",marginTop:"8px"},children:n(e.content.footer.text)}),o.jsx("div",{style:{textAlign:"right",marginTop:"4px",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.6875rem",color:"#667781"},children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),((d=e.content)==null?void 0:d.buttons)&&e.content.buttons.length>0&&o.jsx("div",{style:{marginTop:"4px",display:"flex",flexDirection:"column",gap:"4px"},children:e.content.buttons.map((f,m)=>o.jsxs("div",{style:{background:"#ffffff",padding:"10px 12px",borderRadius:"8px",textAlign:"center",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#00a5f4",boxShadow:"0 1px 0.5px rgba(0, 0, 0, 0.13)",cursor:"pointer"},children:[f.type==="QUICK_REPLY"&&` ${f.text}`,f.type==="URL"&&` ${f.text}`,f.type==="PHONE_NUMBER"&&` ${f.text}`]},m))})]})]})}function QF(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const ZF=e=>{switch(e){case"success":return nO;case"info":return sO;case"warning":return rO;case"error":return oO;default:return null}},eO=Array(12).fill(0),tO=({visible:e,className:t})=>ye.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ye.createElement("div",{className:"sonner-spinner"},eO.map((n,r)=>ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),nO=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rO=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sO=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oO=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iO=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aO=()=>{const[e,t]=ye.useState(document.hidden);return ye.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Jg=1;class lO{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,a=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Jg++,l=this.toasts.find(d=>d.id===a),u=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...t,id:a,title:r}),{...d,...t,id:a,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let a=r!==void 0,l;const u=s.then(async f=>{if(l=["resolve",f],ye.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(uO(f)&&!f.ok){a=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,g=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...v})}else if(f instanceof Error){a=!1;const h=typeof n.error=="function"?await n.error(f):n.error,g=typeof n.description=="function"?await n.description(f):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...v})}else if(n.success!==void 0){a=!1;const h=typeof n.success=="function"?await n.success(f):n.success,g=typeof n.description=="function"?await n.description(f):n.description,v=typeof h=="object"&&!ye.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:g,...v})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,h=typeof n.description=="function"?await n.description(f):n.description,x=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:h,...x})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,m)=>u.then(()=>l[0]==="reject"?m(l[1]):f(l[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||Jg++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const En=new lO,cO=(e,t)=>{const n=(t==null?void 0:t.id)||Jg++;return En.addToast({title:e,...t,id:n}),n},uO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",dO=cO,fO=()=>En.toasts,hO=()=>En.getActiveToasts(),be=Object.assign(dO,{success:En.success,info:En.info,warning:En.warning,error:En.error,custom:En.custom,message:En.message,promise:En.promise,dismiss:En.dismiss,loading:En.loading},{getHistory:fO,getToasts:hO});QF("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function md(e){return e.label!==void 0}const pO=3,mO="24px",gO="16px",F1=4e3,yO=356,xO=14,vO=45,bO=200;function Or(...e){return e.filter(Boolean).join(" ")}function wO(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const SO=e=>{var t,n,r,s,a,l,u,d,f;const{invert:m,toast:h,unstyled:g,interacting:x,setHeights:v,visibleToasts:b,heights:w,index:j,toasts:T,expanded:k,removeToast:E,defaultRichColors:N,closeButton:_,style:R,cancelButtonStyle:A,actionButtonStyle:P,className:$="",descriptionClassName:L="",duration:B,position:K,gap:V,expandByDefault:Y,classNames:z,icons:H,closeButtonAriaLabel:M="Close toast"}=e,[U,F]=ye.useState(null),[D,W]=ye.useState(null),[X,Z]=ye.useState(!1),[G,J]=ye.useState(!1),[ne,te]=ye.useState(!1),[se,le]=ye.useState(!1),[de,fe]=ye.useState(!1),[ie,ue]=ye.useState(0),[xe,ge]=ye.useState(0),Ae=ye.useRef(h.duration||B||F1),Ve=ye.useRef(null),ze=ye.useRef(null),gt=j===0,jt=j+1<=b,He=h.type,Lt=h.dismissible!==!1,Yr=h.className||"",Wn=h.descriptionClassName||"",wt=ye.useMemo(()=>w.findIndex(Le=>Le.toastId===h.id)||0,[w,h.id]),At=ye.useMemo(()=>{var Le;return(Le=h.closeButton)!=null?Le:_},[h.closeButton,_]),Zn=ye.useMemo(()=>h.duration||B||F1,[h.duration,B]),er=ye.useRef(0),Ue=ye.useRef(0),tn=ye.useRef(0),yn=ye.useRef(null),[tr,Jr]=K.split("-"),Cs=ye.useMemo(()=>w.reduce((Le,ct,St)=>St>=wt?Le:Le+ct.height,0),[w,wt]),Es=aO(),yo=h.invert||m,Qr=He==="loading";Ue.current=ye.useMemo(()=>wt*V+Cs,[wt,Cs]),ye.useEffect(()=>{Ae.current=Zn},[Zn]),ye.useEffect(()=>{Z(!0)},[]),ye.useEffect(()=>{const Le=ze.current;if(Le){const ct=Le.getBoundingClientRect().height;return ge(ct),v(St=>[{toastId:h.id,height:ct,position:h.position},...St]),()=>v(St=>St.filter(Bt=>Bt.toastId!==h.id))}},[v,h.id]),ye.useLayoutEffect(()=>{if(!X)return;const Le=ze.current,ct=Le.style.height;Le.style.height="auto";const St=Le.getBoundingClientRect().height;Le.style.height=ct,ge(St),v(Bt=>Bt.find(yt=>yt.toastId===h.id)?Bt.map(yt=>yt.toastId===h.id?{...yt,height:St}:yt):[{toastId:h.id,height:St,position:h.position},...Bt])},[X,h.title,h.description,v,h.id]);const xn=ye.useCallback(()=>{J(!0),ue(Ue.current),v(Le=>Le.filter(ct=>ct.toastId!==h.id)),setTimeout(()=>{E(h)},bO)},[h,E,v,Ue]);ye.useEffect(()=>{if(h.promise&&He==="loading"||h.duration===1/0||h.type==="loading")return;let Le;return k||x||Es?(()=>{if(tn.current<er.current){const Bt=new Date().getTime()-er.current;Ae.current=Ae.current-Bt}tn.current=new Date().getTime()})():(()=>{Ae.current!==1/0&&(er.current=new Date().getTime(),Le=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),xn()},Ae.current))})(),()=>clearTimeout(Le)},[k,x,h,He,Es,xn]),ye.useEffect(()=>{h.delete&&xn()},[xn,h.delete]);function xo(){var Le;if(H!=null&&H.loading){var ct;return ye.createElement("div",{className:Or(z==null?void 0:z.loader,h==null||(ct=h.classNames)==null?void 0:ct.loader,"sonner-loader"),"data-visible":He==="loading"},H.loading)}return ye.createElement(tO,{className:Or(z==null?void 0:z.loader,h==null||(Le=h.classNames)==null?void 0:Le.loader),visible:He==="loading"})}const _r=h.icon||(H==null?void 0:H[He])||ZF(He);var nr,vo;return ye.createElement("li",{tabIndex:0,ref:ze,className:Or($,Yr,z==null?void 0:z.toast,h==null||(t=h.classNames)==null?void 0:t.toast,z==null?void 0:z.default,z==null?void 0:z[He],h==null||(n=h.classNames)==null?void 0:n[He]),"data-sonner-toast":"","data-rich-colors":(nr=h.richColors)!=null?nr:N,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":X,"data-promise":!!h.promise,"data-swiped":de,"data-removed":G,"data-visible":jt,"data-y-position":tr,"data-x-position":Jr,"data-index":j,"data-front":gt,"data-swiping":ne,"data-dismissible":Lt,"data-type":He,"data-invert":yo,"data-swipe-out":se,"data-swipe-direction":D,"data-expanded":!!(k||Y&&X),style:{"--index":j,"--toasts-before":j,"--z-index":T.length-j,"--offset":`${G?ie:Ue.current}px`,"--initial-height":Y?"auto":`${xe}px`,...R,...h.style},onDragEnd:()=>{te(!1),F(null),yn.current=null},onPointerDown:Le=>{Qr||!Lt||(Ve.current=new Date,ue(Ue.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(te(!0),yn.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,ct,St;if(se||!Lt)return;yn.current=null;const Bt=Number(((Le=ze.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Nr=Number(((ct=ze.current)==null?void 0:ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yt=new Date().getTime()-((St=Ve.current)==null?void 0:St.getTime()),Ct=U==="x"?Bt:Nr,Tr=Math.abs(Ct)/yt;if(Math.abs(Ct)>=vO||Tr>.11){ue(Ue.current),h.onDismiss==null||h.onDismiss.call(h,h),W(U==="x"?Bt>0?"right":"left":Nr>0?"down":"up"),xn(),le(!0);return}else{var Pt,cn;(Pt=ze.current)==null||Pt.style.setProperty("--swipe-amount-x","0px"),(cn=ze.current)==null||cn.style.setProperty("--swipe-amount-y","0px")}fe(!1),te(!1),F(null)},onPointerMove:Le=>{var ct,St,Bt;if(!yn.current||!Lt||((ct=window.getSelection())==null?void 0:ct.toString().length)>0)return;const yt=Le.clientY-yn.current.y,Ct=Le.clientX-yn.current.x;var Tr;const Pt=(Tr=e.swipeDirections)!=null?Tr:wO(K);!U&&(Math.abs(Ct)>1||Math.abs(yt)>1)&&F(Math.abs(Ct)>Math.abs(yt)?"x":"y");let cn={x:0,y:0};const Rr=vn=>1/(1.5+Math.abs(vn)/20);if(U==="y"){if(Pt.includes("top")||Pt.includes("bottom"))if(Pt.includes("top")&&yt<0||Pt.includes("bottom")&&yt>0)cn.y=yt;else{const vn=yt*Rr(yt);cn.y=Math.abs(vn)<Math.abs(yt)?vn:yt}}else if(U==="x"&&(Pt.includes("left")||Pt.includes("right")))if(Pt.includes("left")&&Ct<0||Pt.includes("right")&&Ct>0)cn.x=Ct;else{const vn=Ct*Rr(Ct);cn.x=Math.abs(vn)<Math.abs(Ct)?vn:Ct}(Math.abs(cn.x)>0||Math.abs(cn.y)>0)&&fe(!0),(St=ze.current)==null||St.style.setProperty("--swipe-amount-x",`${cn.x}px`),(Bt=ze.current)==null||Bt.style.setProperty("--swipe-amount-y",`${cn.y}px`)}},At&&!h.jsx&&He!=="loading"?ye.createElement("button",{"aria-label":M,"data-disabled":Qr,"data-close-button":!0,onClick:Qr||!Lt?()=>{}:()=>{xn(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Or(z==null?void 0:z.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(vo=H==null?void 0:H.close)!=null?vo:iO):null,(He||h.icon||h.promise)&&h.icon!==null&&((H==null?void 0:H[He])!==null||h.icon)?ye.createElement("div",{"data-icon":"",className:Or(z==null?void 0:z.icon,h==null||(s=h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||xo():null,h.type!=="loading"?_r:null):null,ye.createElement("div",{"data-content":"",className:Or(z==null?void 0:z.content,h==null||(a=h.classNames)==null?void 0:a.content)},ye.createElement("div",{"data-title":"",className:Or(z==null?void 0:z.title,h==null||(l=h.classNames)==null?void 0:l.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?ye.createElement("div",{"data-description":"",className:Or(L,Wn,z==null?void 0:z.description,h==null||(u=h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),ye.isValidElement(h.cancel)?h.cancel:h.cancel&&md(h.cancel)?ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:Le=>{md(h.cancel)&&Lt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Le),xn())},className:Or(z==null?void 0:z.cancelButton,h==null||(d=h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,ye.isValidElement(h.action)?h.action:h.action&&md(h.action)?ye.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Le=>{md(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Le),!Le.defaultPrevented&&xn())},className:Or(z==null?void 0:z.actionButton,h==null||(f=h.classNames)==null?void 0:f.actionButton)},h.action.label):null)};function O1(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kO(e,t){const n={};return[e,t].forEach((r,s)=>{const a=s===1,l=a?"--mobile-offset":"--offset",u=a?gO:mO;function d(f){["top","right","bottom","left"].forEach(m=>{n[`${l}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${l}-${f}`]=u:n[`${l}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const jO=ye.forwardRef(function(t,n){const{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:f,mobileOffset:m,theme:h="light",richColors:g,duration:x,style:v,visibleToasts:b=pO,toastOptions:w,dir:j=O1(),gap:T=xO,icons:k,containerAriaLabel:E="Notifications"}=t,[N,_]=ye.useState([]),R=ye.useMemo(()=>Array.from(new Set([s].concat(N.filter(D=>D.position).map(D=>D.position)))),[N,s]),[A,P]=ye.useState([]),[$,L]=ye.useState(!1),[B,K]=ye.useState(!1),[V,Y]=ye.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=ye.useRef(null),H=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=ye.useRef(null),U=ye.useRef(!1),F=ye.useCallback(D=>{_(W=>{var X;return(X=W.find(Z=>Z.id===D.id))!=null&&X.delete||En.dismiss(D.id),W.filter(({id:Z})=>Z!==D.id)})},[]);return ye.useEffect(()=>En.subscribe(D=>{if(D.dismiss){requestAnimationFrame(()=>{_(W=>W.map(X=>X.id===D.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Tj.flushSync(()=>{_(W=>{const X=W.findIndex(Z=>Z.id===D.id);return X!==-1?[...W.slice(0,X),{...W[X],...D},...W.slice(X+1)]:[D,...W]})})})}),[N]),ye.useEffect(()=>{if(h!=="system"){Y(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;const D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:W})=>{Y(W?"dark":"light")})}catch{D.addListener(({matches:X})=>{try{Y(X?"dark":"light")}catch(Z){console.error(Z)}})}},[h]),ye.useEffect(()=>{N.length<=1&&L(!1)},[N]),ye.useEffect(()=>{const D=W=>{var X;if(a.every(J=>W[J]||W.code===J)){var G;L(!0),(G=z.current)==null||G.focus()}W.code==="Escape"&&(document.activeElement===z.current||(X=z.current)!=null&&X.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[a]),ye.useEffect(()=>{if(z.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,U.current=!1)}},[z.current]),ye.createElement("section",{ref:n,"aria-label":`${E} ${H}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((D,W)=>{var X;const[Z,G]=D.split("-");return N.length?ye.createElement("ol",{key:D,dir:j==="auto"?O1():j,tabIndex:-1,ref:z,className:d,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":Z,"data-lifted":$&&N.length>1&&!l,"data-x-position":G,style:{"--front-toast-height":`${((X=A[0])==null?void 0:X.height)||0}px`,"--width":`${yO}px`,"--gap":`${T}px`,...v,...kO(f,m)},onBlur:J=>{U.current&&!J.currentTarget.contains(J.relatedTarget)&&(U.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||U.current||(U.current=!0,M.current=J.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{B||L(!1)},onDragEnd:()=>L(!1),onPointerDown:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},N.filter(J=>!J.position&&W===0||J.position===D).map((J,ne)=>{var te,se;return ye.createElement(SO,{key:J.id,icons:k,index:ne,toast:J,defaultRichColors:g,duration:(te=w==null?void 0:w.duration)!=null?te:x,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:b,closeButton:(se=w==null?void 0:w.closeButton)!=null?se:u,interacting:B,position:D,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:F,toasts:N.filter(le=>le.position==J.position),heights:A.filter(le=>le.position==J.position),setHeights:P,expandByDefault:l,gap:T,expanded:$,swipeDirections:t.swipeDirections})})):null}))});function CO({isOpen:e,onClose:t,editTemplate:n}){const{createTemplate:r,updateTemplate:s,submitTemplate:a}=Ma(),{selectedProject:l}=qt(),[u,d]=S.useState(!1),[f,m]=S.useState(""),[h,g]=S.useState("MARKETING"),[x,v]=S.useState("id"),[b,w]=S.useState("NONE"),[j,T]=S.useState(""),[k,E]=S.useState(""),[N,_]=S.useState(""),[R,A]=S.useState([]);S.useEffect(()=>{var z,H,M,U,F,D,W,X,Z;n?(m(n.name),g(n.category),v(n.language),w(((H=(z=n.content)==null?void 0:z.header)==null?void 0:H.type)||"NONE"),T(((U=(M=n.content)==null?void 0:M.header)==null?void 0:U.text)||""),E(((D=(F=n.content)==null?void 0:F.body)==null?void 0:D.text)||""),_(((X=(W=n.content)==null?void 0:W.footer)==null?void 0:X.text)||""),A(((Z=n.content)==null?void 0:Z.buttons)||[])):(m(""),g("MARKETING"),v("id"),w("NONE"),T(""),E(""),_(""),A([]))},[n,e]);const P=S.useMemo(()=>{const z=/\{\{(\w+)\}\}/g,H=new Set;if(b==="TEXT"&&j){let M;for(;(M=z.exec(j))!==null;)H.add(M[1])}if(k){let M;for(;(M=z.exec(k))!==null;)H.add(M[1])}return Array.from(H)},[b,j,k]),$=S.useMemo(()=>{const z={};return P.forEach(H=>{H.toLowerCase().includes("name")?z[H]="John Doe":H.toLowerCase().includes("date")?z[H]="Feb 5, 2026":H.toLowerCase().includes("time")?z[H]="7:00 PM":H.toLowerCase().includes("event")?z[H]="Annual Gala":H.toLowerCase().includes("venue")?z[H]="Grand Ballroom":z[H]="Sample"}),z},[P]),L=()=>{if(R.length>=3){be.error("Maximum 3 buttons allowed");return}A([...R,{type:"QUICK_REPLY",text:""}])},B=z=>{A(R.filter((H,M)=>M!==z))},K=(z,H,M)=>{const U=[...R];U[z]={...U[z],[H]:M},A(U)},V=()=>{if(!f.trim())return"Template name is required";if(!/^[a-z0-9_]+$/.test(f))return"Template name must be lowercase alphanumeric with underscores only";if(!k.trim())return"Template body is required";if(k.length>1024)return"Template body must be 1024 characters or less";if(P.length>10)return"Maximum 10 variables allowed";if(b==="TEXT"&&!j.trim())return"Header text is required when header type is TEXT";for(const z of R){if(!z.text.trim())return"All buttons must have text";if(z.type==="URL"&&!z.url)return"URL buttons must have a URL";if(z.type==="PHONE_NUMBER"&&!z.phoneNumber)return"Phone number buttons must have a phone number"}return null},Y=async(z=!1)=>{const H=V();if(H){be.error(H);return}if(!l){be.error("No project selected");return}d(!0);try{const M={name:f,category:h,language:x,content:{header:b!=="NONE"?{type:b,text:b==="TEXT"?j:void 0}:void 0,body:{text:k},footer:N.trim()?{text:N.trim()}:void 0,buttons:R.length>0?R:void 0},projectId:l.id};if(console.log("Sending template input:",JSON.stringify(M,null,2)),n)await s(n.id,M),be.success("Template updated successfully");else{const U=await r(M);be.success("Template created successfully"),z&&U&&(await a(U.id),be.info("Template submitted to META for approval"))}t()}catch(M){be.error(M instanceof Error?M.message:"Failed to save template")}finally{d(!1)}};return e?o.jsx(io,{children:o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto"},onClick:t,children:o.jsxs(ce.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:z=>z.stopPropagation(),className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"1400px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937"},children:n?"Edit Template":"Create New Template"}),o.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:z=>{z.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:z=>{z.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:o.jsx(Nn,{size:20,style:{color:"#6b7280"}})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",padding:"2rem",overflow:"auto",flex:1},children:[o.jsxs("div",{style:{overflow:"auto",paddingRight:"1rem"},children:[o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Template Name *"}),o.jsx("input",{type:"text",value:f,onChange:z=>m(z.target.value.toLowerCase()),placeholder:"event_invitation",disabled:!!n,style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:n?"#f3f4f6":"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"Lowercase, alphanumeric, and underscores only"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Category *"}),o.jsxs("select",{value:h,onChange:z=>g(z.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"},children:[o.jsx("option",{value:"MARKETING",children:"Marketing"}),o.jsx("option",{value:"UTILITY",children:"Utility"}),o.jsx("option",{value:"AUTHENTICATION",children:"Authentication"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Language *"}),o.jsxs("select",{value:x,onChange:z=>v(z.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"},children:[o.jsx("option",{value:"id",children:"Indonesian"}),o.jsx("option",{value:"en",children:"English"}),o.jsx("option",{value:"id_en",children:"Indonesian & English"})]})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Header (Optional)"}),o.jsxs("select",{value:b,onChange:z=>w(z.target.value),style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none",marginBottom:"0.5rem"},children:[o.jsx("option",{value:"NONE",children:"No Header"}),o.jsx("option",{value:"TEXT",children:"Text"}),o.jsx("option",{value:"IMAGE",children:"Image"}),o.jsx("option",{value:"VIDEO",children:"Video"}),o.jsx("option",{value:"DOCUMENT",children:"Document"})]}),b==="TEXT"&&o.jsx("input",{type:"text",value:j,onChange:z=>T(z.target.value),placeholder:"Enter header text (supports {{variables}})",style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Body *"}),o.jsx("textarea",{value:k,onChange:z=>E(z.target.value),placeholder:"Hello {{name}}, you're invited to {{event}}!",rows:6,style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none",resize:"vertical"}}),o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["Use ","{{variable_name}}"," for dynamic content. Supports *bold*, _italic_, ~strikethrough~"]}),o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:k.length>1024?"#ef4444":"#6b7280",marginTop:"0.25rem"},children:[k.length,"/1024 characters"]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"0.5rem"},children:"Footer (Optional)"}),o.jsx("input",{type:"text",value:N,onChange:z=>_(z.target.value),placeholder:"Powered by Balemoo",style:{width:"100%",padding:"12px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"12px",outline:"none"}})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Buttons (Optional, max 3)"}),o.jsxs("button",{onClick:L,disabled:R.length>=3,style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:R.length>=3?"#9ca3af":"#8b5cf6",background:R.length>=3?"rgba(156, 163, 175, 0.1)":"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",cursor:R.length>=3?"not-allowed":"pointer"},children:[o.jsx(en,{size:14}),"Add Button"]})]}),R.map((z,H)=>o.jsxs("div",{style:{padding:"12px",background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"12px",marginBottom:"0.5rem"},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("select",{value:z.type,onChange:M=>K(H,"type",M.target.value),style:{flex:1,padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"},children:[o.jsx("option",{value:"QUICK_REPLY",children:"Quick Reply"}),o.jsx("option",{value:"URL",children:"URL"}),o.jsx("option",{value:"PHONE_NUMBER",children:"Phone Number"})]}),o.jsx("button",{onClick:()=>B(H),style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",cursor:"pointer"},children:o.jsx(Ht,{size:14,style:{color:"#ef4444"}})})]}),o.jsx("input",{type:"text",value:z.text,onChange:M=>K(H,"text",M.target.value),placeholder:"Button text",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none",marginBottom:z.type!=="QUICK_REPLY"?"0.5rem":"0"}}),z.type==="URL"&&o.jsx("input",{type:"url",value:z.url||"",onChange:M=>K(H,"url",M.target.value),placeholder:"https://example.com",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"}}),z.type==="PHONE_NUMBER"&&o.jsx("input",{type:"tel",value:z.phoneNumber||"",onChange:M=>K(H,"phoneNumber",M.target.value),placeholder:"+628123456789",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(209, 213, 219, 0.5)",borderRadius:"8px",outline:"none"}})]},H))]}),P.length>0&&o.jsxs("div",{style:{padding:"12px 16px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"12px",marginBottom:"1.5rem"},children:[o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6366f1",marginBottom:"0.5rem"},children:["Detected Variables (",P.length,"/10):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(z=>o.jsx("span",{style:{padding:"4px 10px",background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#6366f1"},children:z},z))})]})]}),o.jsxs("div",{style:{position:"sticky",top:0,height:"fit-content"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Live Preview"}),o.jsx(ky,{template:{name:f,category:h,language:x,content:{header:b!=="NONE"?{type:b,text:b==="TEXT"?j:void 0}:void 0,body:{text:k},footer:N.trim()?{text:N.trim()}:void 0,buttons:R.length>0?R:void 0}},sampleData:$})]})]}),o.jsxs("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px"},children:[o.jsx("button",{onClick:t,disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer"},children:"Cancel"}),o.jsxs("button",{onClick:()=>Y(!1),disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[u&&o.jsx($t,{size:16,className:"animate-spin"}),"Save as Draft"]}),!n&&o.jsxs("button",{onClick:()=>Y(!0),disabled:u,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[u&&o.jsx($t,{size:16,className:"animate-spin"}),"Save & Submit to META"]})]})]})})}):null}function EO({isOpen:e,onClose:t,template:n,onEdit:r,onDelete:s}){const{submitTemplate:a,simulateReject:l}=Ma(),[u,d]=S.useState(!1),[f,m]=S.useState(!1),[h,g]=S.useState("");if(!e||!n)return null;const x=n.status==="DRAFT"||n.status==="REJECTED",v=n.status==="DRAFT",b={};n.variables.forEach(E=>{E.toLowerCase().includes("name")?b[E]="John Doe":E.toLowerCase().includes("date")?b[E]="Feb 5, 2026":E.toLowerCase().includes("time")?b[E]="7:00 PM":E.toLowerCase().includes("event")?b[E]="Annual Gala":E.toLowerCase().includes("venue")?b[E]="Grand Ballroom":b[E]="Sample"});const w=async()=>{if(v){d(!0);try{await a(n.id),be.success("Template submitted to META for approval"),t()}catch(E){be.error(E instanceof Error?E.message:"Failed to submit template")}finally{d(!1)}}},j=async()=>{if(!h.trim()){be.error("Please provide a rejection reason");return}try{await l(n.id,h),be.info("Template rejected (simulation)"),m(!1),g(""),t()}catch(E){be.error(E instanceof Error?E.message:"Failed to reject template")}},T=()=>{x&&r&&(r(n),t())},k=()=>{x&&s&&(s(n),t())};return o.jsx(io,{children:o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",overflow:"auto"},onClick:t,children:o.jsxs(ce.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:E=>E.stopPropagation(),className:"rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{style:{padding:"1.5rem 2rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937"},children:n.name}),o.jsx(h5,{status:n.status,size:"md"})]}),o.jsx("button",{onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:E=>{E.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:o.jsx(Nn,{size:20,style:{color:"#6b7280"}})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",padding:"2rem",overflow:"auto",flex:1},children:[o.jsxs("div",{style:{overflow:"auto",paddingRight:"1rem"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Template Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Category"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:n.category})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Language"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:n.language})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Created"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:new Date(n.createdAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.25rem"},children:"Last Updated"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937"},children:new Date(n.updatedAt).toLocaleString()})]})]})]}),n.variables.length>0&&o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:["Variables (",n.variables.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:n.variables.map(E=>o.jsx("span",{style:{padding:"6px 12px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"10px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#6366f1"},children:E},E))})]}),(n.submittedAt||n.approvedAt||n.rejectedAt)&&o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Submission History"}),o.jsxs("div",{className:"space-y-3",children:[n.submittedAt&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(po,{size:18,style:{color:"#f59e0b"}}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Submitted to META"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:new Date(n.submittedAt).toLocaleString()})]})]}),n.approvedAt&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ao,{size:18,style:{color:"#10b981"}}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Approved by META"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:new Date(n.approvedAt).toLocaleString()})]})]}),n.rejectedAt&&o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ei,{size:18,style:{color:"#ef4444",marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#374151"},children:"Rejected by META"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem"},children:new Date(n.rejectedAt).toLocaleString()}),n.rejectionReason&&o.jsx("div",{style:{padding:"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:n.rejectionReason})})]})]})]})]}),n.status==="PENDING"&&o.jsxs("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px"},children:[o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#dc2626",marginBottom:"0.5rem"},children:" DEV TOOL: Simulate Rejection"}),f?o.jsxs("div",{children:[o.jsx("input",{type:"text",value:h,onChange:E=>g(E.target.value),placeholder:"Rejection reason...",style:{width:"100%",padding:"8px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#1f2937",background:"#ffffff",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",outline:"none",marginBottom:"0.5rem"}}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:j,style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#ffffff",background:"#ef4444",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Confirm"}),o.jsx("button",{onClick:()=>{m(!1),g("")},style:{padding:"6px 12px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]}):o.jsx("button",{onClick:()=>m(!0),style:{padding:"8px 16px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#ffffff",background:"#ef4444",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Simulate Rejection"})]})]}),o.jsxs("div",{style:{position:"sticky",top:0,height:"fit-content"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#374151",marginBottom:"1rem"},children:"Preview"}),o.jsx(ky,{template:n,sampleData:b})]})]}),o.jsxs("div",{style:{padding:"1.5rem 2rem",borderTop:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{className:"flex gap-2",children:[x&&r&&o.jsxs("button",{onClick:T,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#10b981",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",cursor:"pointer"},children:[o.jsx(xy,{size:16}),"Edit"]}),x&&s&&o.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",cursor:"pointer"},children:[o.jsx(Ht,{size:16}),"Delete"]})]}),o.jsxs("div",{className:"flex gap-2",children:[v&&o.jsxs("button",{onClick:w,disabled:u,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",border:"none",borderRadius:"12px",cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:[o.jsx(Gf,{size:16}),u?"Submitting...":"Submit to META"]}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b7280",background:"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:"12px",cursor:"pointer"},children:"Close"})]})]})]})})})}function _O(){const{user:e}=Gt(),{templates:t,loading:n,error:r,deleteTemplate:s}=Ma(),[a,l]=S.useState(null),[u,d]=S.useState(!1),[f,m]=S.useState(!1),h=(e==null?void 0:e.role)==="admin",g=w=>{l(w),m(!0)},x=w=>{l(w),d(!0)},v=async w=>{if(confirm(`Are you sure you want to delete "${w.name}"?`))try{await s(w.id),be.success("Template deleted successfully")}catch(j){be.error(j instanceof Error?j.message:"Failed to delete template")}},b=()=>{l(null),d(!0)};return h?o.jsxs("div",{style:{padding:"2rem",minHeight:"100%"},children:[o.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[o.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2.5rem",fontWeight:700,color:"#ffffff",marginBottom:"0.5rem",letterSpacing:"-0.02em"},children:"Template Management"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",color:"rgba(255, 255, 255, 0.9)"},children:"Create and manage WhatsApp message templates"})]}),o.jsxs("button",{onClick:b,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#8b5cf6",background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"16px",cursor:"pointer",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"},onMouseEnter:w=>{w.currentTarget.style.transform="scale(1.05)",w.currentTarget.style.boxShadow="0 12px 48px rgba(0, 0, 0, 0.15)"},onMouseLeave:w=>{w.currentTarget.style.transform="scale(1)",w.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.1)"},children:[o.jsx(en,{size:20}),"Create Template"]})]})}),r&&o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6 rounded-2xl",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",padding:"1rem 1.5rem"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:r})}),n&&t.length===0?o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"4rem 2rem"},children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-block rounded-full mb-4",style:{width:"60px",height:"60px",border:"4px solid rgba(139, 92, 246, 0.2)",borderTop:"4px solid #8b5cf6",animation:"spin 1s linear infinite"}}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Loading templates..."})]})}):o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:o.jsx(JF,{templates:t,onView:g,onEdit:x,onDelete:v})})]}),o.jsx(CO,{isOpen:u,onClose:()=>{d(!1),l(null)},editTemplate:a}),o.jsx(EO,{isOpen:f,onClose:()=>{m(!1),l(null)},template:a,onEdit:x,onDelete:v}),o.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]}):o.jsx("div",{style:{padding:"2rem",minHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center rounded-3xl backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"3rem",maxWidth:"500px"},children:[o.jsx("div",{className:"flex items-center justify-center rounded-full mx-auto mb-4",style:{width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:o.jsx(sc,{size:40,style:{color:"#ef4444"}})}),o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:"Access Denied"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Only administrators can manage WhatsApp templates."})]})})}const z1={family:"#10b981",friend:"#3b82f6",colleague:"#f59e0b",vip:"#a855f7",other:"#64748b"},NO={family:"Family",friend:"Friend",colleague:"Colleague",vip:"VIP",other:"Other"},TO={pending:po,confirmed:ao,declined:ei,maybe:Dj},RO={pending:"#f59e0b",confirmed:"#10b981",declined:"#ef4444",maybe:"#6b7280"},IO={pending:"Pending",confirmed:"Confirmed",declined:"Declined",maybe:"Maybe"},AO={ceremony_only:"Ceremony Only",reception_only:"Reception Only",both:"Both Events"},PO=({guest:e,onView:t,onEdit:n,onDelete:r})=>{const s=z1[e.category]||z1.other,a=TO[e.rsvp_status],l=RO[e.rsvp_status];return o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{scale:1.02,translateY:-4},transition:{duration:.2},className:"group relative",children:o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",borderRadius:"24px",padding:"24px",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${s}, ${s}88)`}}),e.checked_in_at&&o.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",fontSize:"12px",fontWeight:600,color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[o.jsx(ao,{size:14}),"Checked In"]}),o.jsx("div",{style:{marginBottom:"16px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:`linear-gradient(135deg, ${s}20, ${s}40)`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(no,{size:20,style:{color:s}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:"#1a1a1a",marginBottom:"2px",lineHeight:"1.2"},children:e.name}),o.jsx("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",background:`${s}15`,borderRadius:"8px",fontSize:"12px",fontWeight:600,color:s},children:NO[e.category]})]})]})}),o.jsxs("div",{style:{marginBottom:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(E4,{size:16,style:{color:"#6b7280",flexShrink:0}}),o.jsx("span",{style:{fontSize:"14px",color:"#4b5563"},children:e.phone})]}),e.email&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(yy,{size:16,style:{color:"#6b7280",flexShrink:0}}),o.jsx("span",{style:{fontSize:"14px",color:"#4b5563",overflow:"hidden",textOverflow:"ellipsis"},children:e.email})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:`${l}10`,border:`1px solid ${l}30`,borderRadius:"12px",marginBottom:"16px"},children:[o.jsx(a,{size:18,style:{color:l}}),o.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:l},children:IO[e.rsvp_status]}),o.jsx("div",{style:{marginLeft:"auto",fontSize:"12px",color:"#6b7280"},children:AO[e.invitation_type]})]}),e.plus_one&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 12px",background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",marginBottom:"16px"},children:[o.jsx(ln,{size:16,style:{color:"#3b82f6"}}),o.jsxs("span",{style:{fontSize:"13px",color:"#4b5563"},children:[e.plus_one_name||"Plus One",e.plus_one_confirmed&&o.jsx("span",{style:{marginLeft:"4px",color:"#10b981",fontWeight:600},children:""})]})]}),e.tags&&e.tags.length>0&&o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"16px"},children:[e.tags.slice(0,3).map((u,d)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.2)",borderRadius:"8px",fontSize:"11px",color:"#6b7280"},children:[o.jsx(H4,{size:12}),u]},d)),e.tags.length>3&&o.jsxs("div",{style:{padding:"4px 10px",background:"rgba(107, 114, 128, 0.1)",borderRadius:"8px",fontSize:"11px",color:"#6b7280"},children:["+",e.tags.length-3," more"]})]}),e.table_number&&o.jsx("div",{style:{marginBottom:"16px"},children:o.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#8b5cf6"},children:["Table ",e.table_number]})}),e.rsvp_at&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#9ca3af",marginBottom:"12px"},children:[o.jsx(Zo,{size:14}),"RSVP: ",new Date(e.rsvp_at).toLocaleDateString()]}),o.jsxs(ce.div,{initial:{opacity:0,y:10},whileHover:{opacity:1,y:0},transition:{duration:.2},style:{position:"absolute",bottom:"16px",right:"16px",display:"flex",gap:"8px",opacity:0},className:"group-hover:opacity-100",children:[t&&o.jsx("button",{onClick:()=>t(e),style:{padding:"8px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(59, 130, 246, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(59, 130, 246, 0.1)",u.currentTarget.style.transform="scale(1)"},children:o.jsx(Vf,{size:16,style:{color:"#3b82f6"}})}),n&&o.jsx("button",{onClick:()=>n(e),style:{padding:"8px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(16, 185, 129, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(16, 185, 129, 0.1)",u.currentTarget.style.transform="scale(1)"},children:o.jsx(xy,{size:16,style:{color:"#10b981"}})}),r&&o.jsx("button",{onClick:()=>r(e),style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(239, 68, 68, 0.2)",u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.background="rgba(239, 68, 68, 0.1)",u.currentTarget.style.transform="scale(1)"},children:o.jsx(Ht,{size:16,style:{color:"#ef4444"}})})]})]})})},MO=()=>{const{user:e}=Gt(),{selectedProject:t}=qt(),{guests:n,filteredGuests:r,loading:s,stats:a,filters:l,setFilters:u,deleteGuest:d,createGuest:f}=Jf(),[m,h]=S.useState(""),[g,x]=S.useState("all"),[v,b]=S.useState("all"),[w,j]=S.useState(!1);if(!e||e.role!=="admin")return o.jsx("div",{style:{padding:"48px",textAlign:"center"},children:o.jsx("p",{style:{fontSize:"16px",color:"#6b7280"},children:"You need admin access to manage guests."})});ye.useEffect(()=>{u({search:m,rsvp_status:g,category:v})},[m,g,v]);const T=async N=>{if(window.confirm(`Are you sure you want to delete ${N.name}?`))try{await d(N.id),be.success("Guest deleted successfully")}catch(_){be.error(_ instanceof Error?_.message:"Failed to delete guest")}},k=async()=>{if(!t){be.error("Please select a project first");return}j(!0);try{const N=["Made","Ketut","Wayan","Nyoman","Putu","Komang","Gede","Kadek","Iluh","Luh","Ni","I","Agung","Ayu","Dewi","Bagus","Rai","Dewa"],_=["Suryawan","Mahendra","Pratama","Wijaya","Kusuma","Saputra","Permana","Santika","Adiputra","Wibawa","Artha","Dharma","Surya","Chandra","Indra"],R=["family","friend","colleague","vip","other"],A=["ceremony_only","reception_only","both"],P=Array.from({length:10},(L,B)=>{const K=N[Math.floor(Math.random()*N.length)],V=_[Math.floor(Math.random()*_.length)],Y=`${K} ${V}`,z=`+62${Math.floor(8e8+Math.random()*99999999)}`;return{name:Y,phone:z,email:`${K.toLowerCase()}.${V.toLowerCase()}@example.com`,category:R[Math.floor(Math.random()*R.length)],invitation_type:A[Math.floor(Math.random()*A.length)],plus_one:Math.random()>.7,tags:["sample","dummy"]}});let $=0;for(const L of P)try{await f(L),$++}catch(B){console.error("Failed to create guest:",B)}$>0?be.success(`Successfully generated ${$} sample guests for ${t.name}!`):be.error("Failed to generate sample guests")}catch(N){be.error(N instanceof Error?N.message:"Failed to generate sample guests")}finally{j(!1)}},E=[{value:"all",label:"All",icon:ln,count:(a==null?void 0:a.total)||0},{value:"confirmed",label:"Confirmed",icon:ao,count:(a==null?void 0:a.confirmed)||0},{value:"pending",label:"Pending",icon:po,count:(a==null?void 0:a.pending)||0},{value:"maybe",label:"Maybe",icon:Dj,count:(a==null?void 0:a.maybe)||0},{value:"declined",label:"Declined",icon:ei,count:(a==null?void 0:a.declined)||0}];return o.jsxs("div",{style:{padding:"32px",maxWidth:"1600px",margin:"0 auto"},children:[o.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},style:{marginBottom:"32px"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"32px",fontWeight:800,background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"8px"},children:"Guest Management"}),o.jsx("p",{style:{fontSize:"16px",color:"#6b7280"},children:"Manage your wedding guest list and track RSVPs"})]}),o.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o.jsxs("button",{onClick:()=>be.info("CSV Import coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[o.jsx(Gj,{size:18}),"Import CSV"]}),o.jsxs("button",{onClick:k,disabled:w,style:{padding:"12px 24px",background:w?"linear-gradient(135deg, #9ca3af, #6b7280)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:w?"none":"0 4px 12px rgba(139, 92, 246, 0.3)",opacity:w?.6:1},children:[o.jsx(W4,{size:18}),w?"Generating...":"Generate Sample Guests"]}),o.jsxs("button",{onClick:()=>be.info("Add Guest form coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[o.jsx(en,{size:18}),"Add Guest"]})]})]})}),a&&o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[{label:"Total Guests",value:a.total,color:"#10b981"},{label:"Confirmed",value:a.confirmed,color:"#10b981"},{label:"Pending",value:a.pending,color:"#f59e0b"},{label:"With Plus One",value:a.with_plus_one,color:"#3b82f6"},{label:"Checked In",value:a.checked_in,color:"#8b5cf6"}].map((N,_)=>o.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.06)"},children:[o.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"8px"},children:N.label}),o.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:N.color},children:N.value})]},_))}),o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"24px"},children:[o.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[o.jsx(ys,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),o.jsx("input",{type:"text",placeholder:"Search guests by name, phone, email, or tags...",value:m,onChange:N=>h(N.target.value),style:{width:"100%",padding:"14px 16px 14px 48px",fontSize:"15px",border:"2px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",outline:"none",transition:"all 0.2s",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)"},onFocus:N=>{N.target.style.borderColor="#10b981",N.target.style.boxShadow="0 0 0 3px rgba(16, 185, 129, 0.1)"},onBlur:N=>{N.target.style.borderColor="rgba(16, 185, 129, 0.2)",N.target.style.boxShadow="none"}})]}),o.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:E.map(N=>{const _=N.icon,R=g===N.value;return o.jsxs("button",{onClick:()=>x(N.value),style:{padding:"10px 16px",background:R?"linear-gradient(135deg, #10b981, #059669)":"rgba(255, 255, 255, 0.9)",color:R?"white":"#4b5563",border:R?"none":"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",boxShadow:R?"0 4px 12px rgba(16, 185, 129, 0.3)":"none"},children:[o.jsx(_,{size:16}),N.label,o.jsx("span",{style:{padding:"2px 8px",background:R?"rgba(255, 255, 255, 0.2)":"rgba(16, 185, 129, 0.1)",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:N.count})]},N.value)})})]}),s?o.jsx("div",{style:{textAlign:"center",padding:"48px"},children:o.jsx("div",{style:{fontSize:"16px",color:"#6b7280"},children:"Loading guests..."})}):r.length===0?o.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},style:{textAlign:"center",padding:"64px 32px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[o.jsx(ln,{size:48,style:{color:"#d1d5db",marginBottom:"16px"}}),o.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:"#1a1a1a",marginBottom:"8px"},children:"No guests found"}),o.jsx("p",{style:{fontSize:"15px",color:"#6b7280",marginBottom:"24px"},children:n.length===0?"Get started by adding your first guest or importing from CSV":"Try adjusting your search or filters"}),o.jsxs("button",{onClick:()=>be.info("Add Guest form coming soon!"),style:{padding:"12px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[o.jsx(en,{size:18}),"Add Your First Guest"]})]}):o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:r.map((N,_)=>o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},children:o.jsx(PO,{guest:N,onView:()=>be.info("Guest details modal coming soon!"),onEdit:()=>be.info("Edit guest form coming soon!"),onDelete:T})},N.id))})]})};function jy({icon:e,title:t,description:n,features:r,color:s}){return o.jsx("div",{style:{padding:"2rem",minHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",style:{maxWidth:"600px"},children:[o.jsxs(ce.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2,type:"spring",stiffness:200},className:"flex items-center justify-center mx-auto mb-6",style:{width:"120px",height:"120px",borderRadius:"30px",background:`linear-gradient(135deg, ${s}20 0%, ${s}10 100%)`,border:`2px solid ${s}40`,position:"relative"},children:[o.jsx(ce.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"30px",background:`linear-gradient(135deg, ${s}30 0%, ${s}10 100%)`}}),o.jsx(e,{size:60,style:{color:s,position:"relative",zIndex:1}})]}),o.jsx(ce.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2.5rem",fontWeight:700,color:"#ffffff",marginBottom:"1rem",letterSpacing:"-0.02em"},children:t}),o.jsx(ce.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",color:"rgba(255, 255, 255, 0.9)",marginBottom:"2rem",lineHeight:1.6},children:n}),o.jsx(ce.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},className:"inline-block rounded-full mb-3",style:{padding:"12px 32px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},children:o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:700,background:`linear-gradient(135deg, ${s} 0%, ${DO(s,-20)} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:" Coming Soon"})}),r&&r.length>0&&o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"rounded-3xl backdrop-blur-xl mt-8",style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",padding:"2rem",textAlign:"left"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"1rem"},children:"Planned Features:"}),o.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:r.map((a,l)=>o.jsxs(ce.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.7+l*.1},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 0",borderBottom:l<r.length-1?"1px solid rgba(0, 0, 0, 0.06)":"none"},children:[o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:s,flexShrink:0}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#6b7280"},children:a})]},l))})]}),o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"flex items-center justify-center gap-2 mt-6",children:[0,1,2].map(a=>o.jsx(ce.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:1.5,repeat:1/0,delay:a*.2},style:{width:"10px",height:"10px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.8)"}},a))})]})})}function DO(e,t){const n=parseInt(e.replace("#",""),16),r=Math.min(255,Math.max(0,(n>>16)+t)),s=Math.min(255,Math.max(0,(n>>8&255)+t)),a=Math.min(255,Math.max(0,(n&255)+t));return`#${(r<<16|s<<8|a).toString(16).padStart(6,"0")}`}const p5=S.createContext(void 0);function FO({children:e}){const{user:t,accessToken:n}=Gt(),{selectedProject:r}=qt(),[s,a]=S.useState([]),[l,u]=S.useState(!1),[d,f]=S.useState(null),m=`https://${zn}.supabase.co/functions/v1/make-server-deeab278`,h=async E=>{if(!t||!n||t.role!=="admin"){a([]);return}try{u(!0),f(null);const N=new URLSearchParams;E!=null&&E.status&&N.append("status",E.status),E!=null&&E.projectId&&N.append("projectId",E.projectId);const _=await fetch(`${m}/chatflows?${N.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const A=await _.json();throw new Error(A.error||"Failed to fetch chatflows")}const R=await _.json();a(R.chatflows||[])}catch(N){console.error("Error fetching chatflows:",N),f(N.message||"Failed to fetch chatflows"),a([])}finally{u(!1)}},g=async(E,N)=>{var _,R;if(!t||!n||t.role!=="admin")return null;if(!N)return console.error(" getChatflowById: projectId is required"),null;console.log(" getChatflowById called for ID:",E,"projectId:",N);try{const A=await fetch(`${m}/chatflows/${E}?projectId=${N}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(console.log(" getChatflowById response status:",A.status),!A.ok){const $=await A.json();throw console.error(" getChatflowById error:",$),new Error($.error||"Failed to fetch chatflow")}const P=await A.json();return console.log(" getChatflowById raw response:",P),console.log(" getChatflowById chatflow.nodes:",(_=P.chatflow)==null?void 0:_.nodes),(R=P.chatflow)!=null&&R.nodes&&(console.log(" Nodes in response:"),P.chatflow.nodes.forEach(($,L)=>{var B,K;console.log(`  Node ${L+1}:`,{id:$.id,type:$.type,hasConfig:!!((B=$.data)!=null&&B.config),config:(K=$.data)==null?void 0:K.config})})),P.chatflow}catch(A){return console.error(" Error fetching chatflow:",A),null}},x=async E=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const N=await fetch(`${m}/chatflows`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(E)});if(!N.ok){const A=await N.json();throw new Error(A.error||"Failed to create chatflow")}const R=(await N.json()).chatflow;return a(A=>[R,...A]),R}catch(N){throw console.error("Error creating chatflow:",N),N}},v=async(E,N,_)=>{var R,A,P,$;if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!_)throw new Error("Project ID is required");console.log(" ChatflowContext.updateChatflow called:",{id:E,projectId:_,updatesKeys:Object.keys(N),nodesCount:(R=N.nodes)==null?void 0:R.length,edgesCount:(A=N.edges)==null?void 0:A.length,fullUpdates:N});try{const L=JSON.stringify({...N,projectId:_});console.log(" Request body length:",L.length,"bytes"),console.log(" Request body:",L);const B=await fetch(`${m}/chatflows/${E}`,{method:"PUT",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:L});if(console.log(" Response status:",B.status,B.statusText),!B.ok){const Y=await B.json();throw console.error(" Backend error response:",Y),new Error(Y.error||"Failed to update chatflow")}const V=(await B.json()).chatflow;return console.log(" Updated chatflow from backend:",V),console.log(" Saved nodes count:",(P=V.nodes)==null?void 0:P.length),console.log(" Saved nodes with config:",($=V.nodes)==null?void 0:$.filter(Y=>Y.data.config).length),a(Y=>Y.map(z=>z.id===E?V:z)),V}catch(L){throw console.error(" Error updating chatflow:",L),L}},b=async(E,N)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!N)throw new Error("Project ID is required");try{const _=await fetch(`${m}/chatflows/${E}?projectId=${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const R=await _.json();throw new Error(R.error||"Failed to delete chatflow")}a(R=>R.filter(A=>A.id!==E))}catch(_){throw console.error("Error deleting chatflow:",_),_}},w=async(E,N,_,R)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!_)throw new Error("Target Project ID is required");try{const A=await fetch(`${m}/chatflows/${E}/clone`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({newName:N,targetProjectId:_,sourceProjectId:R||_})});if(!A.ok){const L=await A.json();throw new Error(L.error||"Failed to clone chatflow")}const $=(await A.json()).chatflow;return await h({projectId:_}),$}catch(A){throw console.error("Error cloning chatflow:",A),A}},j=async(E,N,_)=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");if(!_)throw new Error("Project ID is required");try{const R=await fetch(`${m}/chatflows/${E}/test`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({...N,projectId:_})});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to test chatflow")}return(await R.json()).testResults}catch(R){throw console.error("Error testing chatflow:",R),R}},T=async()=>{if(!t||!n||t.role!=="admin")throw new Error("Unauthorized");try{const E=await fetch(`${m}/chatflows/browse`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!E.ok){const _=await E.json();throw new Error(_.error||"Failed to browse chatflows")}return(await E.json()).chatflowsByProject||{}}catch(E){throw console.error("Error browsing chatflows:",E),E}};S.useEffect(()=>{t&&t.role==="admin"&&(r!=null&&r.id)?h({projectId:r.id}):t&&t.role==="admin"&&a([])},[t,r]);const k={chatflows:s,loading:l,error:d,fetchChatflows:h,getChatflowById:g,createChatflow:x,updateChatflow:v,deleteChatflow:b,cloneChatflow:w,testChatflow:j,browseChatflows:T};return o.jsx(p5.Provider,{value:k,children:e})}function Qf(){const e=S.useContext(p5);if(e===void 0)throw new Error("useChatflows must be used within a ChatflowProvider");return e}function It(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=It(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var OO={value:()=>{}};function Zf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vd(n)}function Vd(e){this._=e}function zO(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vd.prototype=Zf.prototype={constructor:Vd,on:function(e,t){var n=this._,r=zO(e+"",n),s,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((s=(e=r[a]).type)&&(s=$O(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(s=(e=r[a]).type)n[s]=$1(n[s],e.name,t);else if(t==null)for(s in n)n[s]=$1(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vd(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,s=a.length;r<s;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,a=r.length;s<a;++s)r[s].value.apply(t,n)}};function $O(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function $1(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=OO,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qg="http://www.w3.org/1999/xhtml";const L1={svg:"http://www.w3.org/2000/svg",xhtml:Qg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eh(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),L1.hasOwnProperty(t)?{space:L1[t],local:e}:e}function LO(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qg&&t.documentElement.namespaceURI===Qg?t.createElement(e):t.createElementNS(n,e)}}function BO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function m5(e){var t=eh(e);return(t.local?BO:LO)(t)}function WO(){}function Cy(e){return e==null?WO:function(){return this.querySelector(e)}}function VO(e){typeof e!="function"&&(e=Cy(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],l=a.length,u=r[s]=new Array(l),d,f,m=0;m<l;++m)(d=a[m])&&(f=e.call(d,d.__data__,m,a))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f);return new Ln(r,this._parents)}function UO(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function HO(){return[]}function g5(e){return e==null?HO:function(){return this.querySelectorAll(e)}}function GO(e){return function(){return UO(e.apply(this,arguments))}}function qO(e){typeof e=="function"?e=GO(e):e=g5(e);for(var t=this._groups,n=t.length,r=[],s=[],a=0;a<n;++a)for(var l=t[a],u=l.length,d,f=0;f<u;++f)(d=l[f])&&(r.push(e.call(d,d.__data__,f,l)),s.push(d));return new Ln(r,s)}function y5(e){return function(){return this.matches(e)}}function x5(e){return function(t){return t.matches(e)}}var KO=Array.prototype.find;function XO(e){return function(){return KO.call(this.children,e)}}function YO(){return this.firstElementChild}function JO(e){return this.select(e==null?YO:XO(typeof e=="function"?e:x5(e)))}var QO=Array.prototype.filter;function ZO(){return Array.from(this.children)}function ez(e){return function(){return QO.call(this.children,e)}}function tz(e){return this.selectAll(e==null?ZO:ez(typeof e=="function"?e:x5(e)))}function nz(e){typeof e!="function"&&(e=y5(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],l=a.length,u=r[s]=[],d,f=0;f<l;++f)(d=a[f])&&e.call(d,d.__data__,f,a)&&u.push(d);return new Ln(r,this._parents)}function v5(e){return new Array(e.length)}function rz(){return new Ln(this._enter||this._groups.map(v5),this._parents)}function pf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pf.prototype={constructor:pf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sz(e){return function(){return e}}function oz(e,t,n,r,s,a){for(var l=0,u,d=t.length,f=a.length;l<f;++l)(u=t[l])?(u.__data__=a[l],r[l]=u):n[l]=new pf(e,a[l]);for(;l<d;++l)(u=t[l])&&(s[l]=u)}function iz(e,t,n,r,s,a,l){var u,d,f=new Map,m=t.length,h=a.length,g=new Array(m),x;for(u=0;u<m;++u)(d=t[u])&&(g[u]=x=l.call(d,d.__data__,u,t)+"",f.has(x)?s[u]=d:f.set(x,d));for(u=0;u<h;++u)x=l.call(e,a[u],u,a)+"",(d=f.get(x))?(r[u]=d,d.__data__=a[u],f.delete(x)):n[u]=new pf(e,a[u]);for(u=0;u<m;++u)(d=t[u])&&f.get(g[u])===d&&(s[u]=d)}function az(e){return e.__data__}function lz(e,t){if(!arguments.length)return Array.from(this,az);var n=t?iz:oz,r=this._parents,s=this._groups;typeof e!="function"&&(e=sz(e));for(var a=s.length,l=new Array(a),u=new Array(a),d=new Array(a),f=0;f<a;++f){var m=r[f],h=s[f],g=h.length,x=cz(e.call(m,m&&m.__data__,f,r)),v=x.length,b=u[f]=new Array(v),w=l[f]=new Array(v),j=d[f]=new Array(g);n(m,h,b,w,j,x,t);for(var T=0,k=0,E,N;T<v;++T)if(E=b[T]){for(T>=k&&(k=T+1);!(N=w[k])&&++k<v;);E._next=N||null}}return l=new Ln(l,r),l._enter=u,l._exit=d,l}function cz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uz(){return new Ln(this._exit||this._groups.map(v5),this._parents)}function dz(e,t,n){var r=this.enter(),s=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function fz(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,a=r.length,l=Math.min(s,a),u=new Array(s),d=0;d<l;++d)for(var f=n[d],m=r[d],h=f.length,g=u[d]=new Array(h),x,v=0;v<h;++v)(x=f[v]||m[v])&&(g[v]=x);for(;d<s;++d)u[d]=n[d];return new Ln(u,this._parents)}function hz(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,a=r[s],l;--s>=0;)(l=r[s])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function pz(e){e||(e=mz);function t(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var l=n[a],u=l.length,d=s[a]=new Array(u),f,m=0;m<u;++m)(f=l[m])&&(d[m]=f);d.sort(t)}return new Ln(s,this._parents).order()}function mz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gz(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yz(){return Array.from(this)}function xz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length;s<a;++s){var l=r[s];if(l)return l}return null}function vz(){let e=0;for(const t of this)++e;return e}function bz(){return!this.node()}function wz(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],a=0,l=s.length,u;a<l;++a)(u=s[a])&&e.call(u,u.__data__,a,s);return this}function Sz(e){return function(){this.removeAttribute(e)}}function kz(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jz(e,t){return function(){this.setAttribute(e,t)}}function Cz(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ez(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _z(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nz(e,t){var n=eh(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?kz:Sz:typeof t=="function"?n.local?_z:Ez:n.local?Cz:jz)(n,t))}function b5(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Tz(e){return function(){this.style.removeProperty(e)}}function Rz(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iz(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Az(e,t,n){return arguments.length>1?this.each((t==null?Tz:typeof t=="function"?Iz:Rz)(e,t,n??"")):ya(this.node(),e)}function ya(e,t){return e.style.getPropertyValue(t)||b5(e).getComputedStyle(e,null).getPropertyValue(t)}function Pz(e){return function(){delete this[e]}}function Mz(e,t){return function(){this[e]=t}}function Dz(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fz(e,t){return arguments.length>1?this.each((t==null?Pz:typeof t=="function"?Dz:Mz)(e,t)):this.node()[e]}function w5(e){return e.trim().split(/^|\s+/)}function Ey(e){return e.classList||new S5(e)}function S5(e){this._node=e,this._names=w5(e.getAttribute("class")||"")}S5.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function k5(e,t){for(var n=Ey(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function j5(e,t){for(var n=Ey(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Oz(e){return function(){k5(this,e)}}function zz(e){return function(){j5(this,e)}}function $z(e,t){return function(){(t.apply(this,arguments)?k5:j5)(this,e)}}function Lz(e,t){var n=w5(e+"");if(arguments.length<2){for(var r=Ey(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?$z:t?Oz:zz)(n,t))}function Bz(){this.textContent=""}function Wz(e){return function(){this.textContent=e}}function Vz(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Uz(e){return arguments.length?this.each(e==null?Bz:(typeof e=="function"?Vz:Wz)(e)):this.node().textContent}function Hz(){this.innerHTML=""}function Gz(e){return function(){this.innerHTML=e}}function qz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Kz(e){return arguments.length?this.each(e==null?Hz:(typeof e=="function"?qz:Gz)(e)):this.node().innerHTML}function Xz(){this.nextSibling&&this.parentNode.appendChild(this)}function Yz(){return this.each(Xz)}function Jz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qz(){return this.each(Jz)}function Zz(e){var t=typeof e=="function"?e:m5(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function e$(){return null}function t$(e,t){var n=typeof e=="function"?e:m5(e),r=t==null?e$:typeof t=="function"?t:Cy(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function n$(){var e=this.parentNode;e&&e.removeChild(this)}function r$(){return this.each(n$)}function s$(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o$(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i$(e){return this.select(e?o$:s$)}function a$(e){return arguments.length?this.property("__data__",e):this.node().__data__}function l$(e){return function(t){e.call(this,t,this.__data__)}}function c$(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function u$(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function d$(e,t,n){return function(){var r=this.__on,s,a=l$(t);if(r){for(var l=0,u=r.length;l<u;++l)if((s=r[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(s):this.__on=[s]}}function f$(e,t,n){var r=c$(e+""),s,a=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,f=u.length,m;d<f;++d)for(s=0,m=u[d];s<a;++s)if((l=r[s]).type===m.type&&l.name===m.name)return m.value}return}for(u=t?d$:u$,s=0;s<a;++s)this.each(u(r[s],t,n));return this}function C5(e,t,n){var r=b5(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function h$(e,t){return function(){return C5(this,e,t)}}function p$(e,t){return function(){return C5(this,e,t.apply(this,arguments))}}function m$(e,t){return this.each((typeof t=="function"?p$:h$)(e,t))}function*g$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,l;s<a;++s)(l=r[s])&&(yield l)}var E5=[null];function Ln(e,t){this._groups=e,this._parents=t}function Mc(){return new Ln([[document.documentElement]],E5)}function y$(){return this}Ln.prototype=Mc.prototype={constructor:Ln,select:VO,selectAll:qO,selectChild:JO,selectChildren:tz,filter:nz,data:lz,enter:rz,exit:uz,join:dz,merge:fz,selection:y$,order:hz,sort:pz,call:gz,nodes:yz,node:xz,size:vz,empty:bz,each:wz,attr:Nz,style:Az,property:Fz,classed:Lz,text:Uz,html:Kz,raise:Yz,lower:Qz,append:Zz,insert:t$,remove:r$,clone:i$,datum:a$,on:f$,dispatch:m$,[Symbol.iterator]:g$};function On(e){return typeof e=="string"?new Ln([[document.querySelector(e)]],[document.documentElement]):new Ln([[e]],E5)}function x$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function mr(e,t){if(e=x$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const v$={passive:!1},pc={capture:!0,passive:!1};function Bm(e){e.stopImmediatePropagation()}function aa(e){e.preventDefault(),e.stopImmediatePropagation()}function _5(e){var t=e.document.documentElement,n=On(e).on("dragstart.drag",aa,pc);"onselectstart"in t?n.on("selectstart.drag",aa,pc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function N5(e,t){var n=e.document.documentElement,r=On(e).on("dragstart.drag",null);t&&(r.on("click.drag",aa,pc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gd=e=>()=>e;function Zg(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:a,x:l,y:u,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}Zg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function b$(e){return!e.ctrlKey&&!e.button}function w$(){return this.parentNode}function S$(e,t){return t??{x:e.x,y:e.y}}function k$(){return navigator.maxTouchPoints||"ontouchstart"in this}function T5(){var e=b$,t=w$,n=S$,r=k$,s={},a=Zf("start","drag","end"),l=0,u,d,f,m,h=0;function g(E){E.on("mousedown.drag",x).filter(r).on("touchstart.drag",w).on("touchmove.drag",j,v$).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(E,N){if(!(m||!e.call(this,E,N))){var _=k(this,t.call(this,E,N),E,N,"mouse");_&&(On(E.view).on("mousemove.drag",v,pc).on("mouseup.drag",b,pc),_5(E.view),Bm(E),f=!1,u=E.clientX,d=E.clientY,_("start",E))}}function v(E){if(aa(E),!f){var N=E.clientX-u,_=E.clientY-d;f=N*N+_*_>h}s.mouse("drag",E)}function b(E){On(E.view).on("mousemove.drag mouseup.drag",null),N5(E.view,f),aa(E),s.mouse("end",E)}function w(E,N){if(e.call(this,E,N)){var _=E.changedTouches,R=t.call(this,E,N),A=_.length,P,$;for(P=0;P<A;++P)($=k(this,R,E,N,_[P].identifier,_[P]))&&(Bm(E),$("start",E,_[P]))}}function j(E){var N=E.changedTouches,_=N.length,R,A;for(R=0;R<_;++R)(A=s[N[R].identifier])&&(aa(E),A("drag",E,N[R]))}function T(E){var N=E.changedTouches,_=N.length,R,A;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),R=0;R<_;++R)(A=s[N[R].identifier])&&(Bm(E),A("end",E,N[R]))}function k(E,N,_,R,A,P){var $=a.copy(),L=mr(P||_,N),B,K,V;if((V=n.call(E,new Zg("beforestart",{sourceEvent:_,target:g,identifier:A,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:$}),R))!=null)return B=V.x-L[0]||0,K=V.y-L[1]||0,function Y(z,H,M){var U=L,F;switch(z){case"start":s[A]=Y,F=l++;break;case"end":delete s[A],--l;case"drag":L=mr(M||H,N),F=l;break}$.call(z,E,new Zg(z,{sourceEvent:H,subject:V,target:g,identifier:A,active:F,x:L[0]+B,y:L[1]+K,dx:L[0]-U[0],dy:L[1]-U[1],dispatch:$}),R)}}return g.filter=function(E){return arguments.length?(e=typeof E=="function"?E:gd(!!E),g):e},g.container=function(E){return arguments.length?(t=typeof E=="function"?E:gd(E),g):t},g.subject=function(E){return arguments.length?(n=typeof E=="function"?E:gd(E),g):n},g.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:gd(!!E),g):r},g.on=function(){var E=a.on.apply(a,arguments);return E===a?g:E},g.clickDistance=function(E){return arguments.length?(h=(E=+E)*E,g):Math.sqrt(h)},g}function _y(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function R5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Dc(){}var mc=.7,mf=1/mc,la="\\s*([+-]?\\d+)\\s*",gc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j$=/^#([0-9a-f]{3,8})$/,C$=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),E$=new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`),_$=new RegExp(`^rgba\\(${la},${la},${la},${gc}\\)$`),N$=new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${gc}\\)$`),T$=new RegExp(`^hsl\\(${gc},${Wr},${Wr}\\)$`),R$=new RegExp(`^hsla\\(${gc},${Wr},${Wr},${gc}\\)$`),B1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_y(Dc,ti,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:W1,formatHex:W1,formatHex8:I$,formatHsl:A$,formatRgb:V1,toString:V1});function W1(){return this.rgb().formatHex()}function I$(){return this.rgb().formatHex8()}function A$(){return I5(this).formatHsl()}function V1(){return this.rgb().formatRgb()}function ti(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=j$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?U1(t):n===3?new _n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=C$.exec(e))?new _n(t[1],t[2],t[3],1):(t=E$.exec(e))?new _n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_$.exec(e))?yd(t[1],t[2],t[3],t[4]):(t=N$.exec(e))?yd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=T$.exec(e))?q1(t[1],t[2]/100,t[3]/100,1):(t=R$.exec(e))?q1(t[1],t[2]/100,t[3]/100,t[4]):B1.hasOwnProperty(e)?U1(B1[e]):e==="transparent"?new _n(NaN,NaN,NaN,0):null}function U1(e){return new _n(e>>16&255,e>>8&255,e&255,1)}function yd(e,t,n,r){return r<=0&&(e=t=n=NaN),new _n(e,t,n,r)}function P$(e){return e instanceof Dc||(e=ti(e)),e?(e=e.rgb(),new _n(e.r,e.g,e.b,e.opacity)):new _n}function e0(e,t,n,r){return arguments.length===1?P$(e):new _n(e,t,n,r??1)}function _n(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_y(_n,e0,R5(Dc,{brighter(e){return e=e==null?mf:Math.pow(mf,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _n(Jo(this.r),Jo(this.g),Jo(this.b),gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H1,formatHex:H1,formatHex8:M$,formatRgb:G1,toString:G1}));function H1(){return`#${Xo(this.r)}${Xo(this.g)}${Xo(this.b)}`}function M$(){return`#${Xo(this.r)}${Xo(this.g)}${Xo(this.b)}${Xo((isNaN(this.opacity)?1:this.opacity)*255)}`}function G1(){const e=gf(this.opacity);return`${e===1?"rgb(":"rgba("}${Jo(this.r)}, ${Jo(this.g)}, ${Jo(this.b)}${e===1?")":`, ${e})`}`}function gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xo(e){return e=Jo(e),(e<16?"0":"")+e.toString(16)}function q1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yr(e,t,n,r)}function I5(e){if(e instanceof yr)return new yr(e.h,e.s,e.l,e.opacity);if(e instanceof Dc||(e=ti(e)),!e)return new yr;if(e instanceof yr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new yr(l,u,d,e.opacity)}function D$(e,t,n,r){return arguments.length===1?I5(e):new yr(e,t,n,r??1)}function yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_y(yr,D$,R5(Dc,{brighter(e){return e=e==null?mf:Math.pow(mf,e),new yr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mc:Math.pow(mc,e),new yr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new _n(Wm(e>=240?e-240:e+120,s,r),Wm(e,s,r),Wm(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new yr(K1(this.h),xd(this.s),xd(this.l),gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gf(this.opacity);return`${e===1?"hsl(":"hsla("}${K1(this.h)}, ${xd(this.s)*100}%, ${xd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K1(e){return e=(e||0)%360,e<0?e+360:e}function xd(e){return Math.max(0,Math.min(1,e||0))}function Wm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ny=e=>()=>e;function F$(e,t){return function(n){return e+n*t}}function O$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function z$(e){return(e=+e)==1?A5:function(t,n){return n-t?O$(t,n,e):Ny(isNaN(t)?n:t)}}function A5(e,t){var n=t-e;return n?F$(e,n):Ny(isNaN(e)?t:e)}const yf=(function e(t){var n=z$(t);function r(s,a){var l=n((s=e0(s)).r,(a=e0(a)).r),u=n(s.g,a.g),d=n(s.b,a.b),f=A5(s.opacity,a.opacity);return function(m){return s.r=l(m),s.g=u(m),s.b=d(m),s.opacity=f(m),s+""}}return r.gamma=e,r})(1);function $$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function L$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function B$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)s[l]=Kl(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(u){for(l=0;l<r;++l)a[l]=s[l](u);return a}}function W$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function V$(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Kl(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var t0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vm=new RegExp(t0.source,"g");function U$(e){return function(){return e}}function H$(e){return function(t){return e(t)+""}}function P5(e,t){var n=t0.lastIndex=Vm.lastIndex=0,r,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=t0.exec(e))&&(s=Vm.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:zr(r,s)})),n=Vm.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?H$(d[0].x):U$(t):(t=d.length,function(f){for(var m=0,h;m<t;++m)u[(h=d[m]).i]=h.x(f);return u.join("")})}function Kl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ny(t):(n==="number"?zr:n==="string"?(r=ti(t))?(t=r,yf):P5:t instanceof ti?yf:t instanceof Date?W$:L$(t)?$$:Array.isArray(t)?B$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?V$:zr)(e,t)}var X1=180/Math.PI,n0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M5(e,t,n,r,s,a){var l,u,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,l=-l),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*X1,skewX:Math.atan(d)*X1,scaleX:l,scaleY:u}}var vd;function G$(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?n0:M5(t.a,t.b,t.c,t.d,t.e,t.f)}function q$(e){return e==null||(vd||(vd=document.createElementNS("http://www.w3.org/2000/svg","g")),vd.setAttribute("transform",e),!(e=vd.transform.baseVal.consolidate()))?n0:(e=e.matrix,M5(e.a,e.b,e.c,e.d,e.e,e.f))}function D5(e,t,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,m,h,g,x,v){if(f!==h||m!==g){var b=x.push("translate(",null,t,null,n);v.push({i:b-4,x:zr(f,h)},{i:b-2,x:zr(m,g)})}else(h||g)&&x.push("translate("+h+t+g+n)}function l(f,m,h,g){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),g.push({i:h.push(s(h)+"rotate(",null,r)-2,x:zr(f,m)})):m&&h.push(s(h)+"rotate("+m+r)}function u(f,m,h,g){f!==m?g.push({i:h.push(s(h)+"skewX(",null,r)-2,x:zr(f,m)}):m&&h.push(s(h)+"skewX("+m+r)}function d(f,m,h,g,x,v){if(f!==h||m!==g){var b=x.push(s(x)+"scale(",null,",",null,")");v.push({i:b-4,x:zr(f,h)},{i:b-2,x:zr(m,g)})}else(h!==1||g!==1)&&x.push(s(x)+"scale("+h+","+g+")")}return function(f,m){var h=[],g=[];return f=e(f),m=e(m),a(f.translateX,f.translateY,m.translateX,m.translateY,h,g),l(f.rotate,m.rotate,h,g),u(f.skewX,m.skewX,h,g),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,h,g),f=m=null,function(x){for(var v=-1,b=g.length,w;++v<b;)h[(w=g[v]).i]=w.x(x);return h.join("")}}}var K$=D5(G$,"px, ","px)","deg)"),X$=D5(q$,", ",")",")"),Y$=1e-12;function Y1(e){return((e=Math.exp(e))+1/e)/2}function J$(e){return((e=Math.exp(e))-1/e)/2}function Q$(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ud=(function e(t,n,r){function s(a,l){var u=a[0],d=a[1],f=a[2],m=l[0],h=l[1],g=l[2],x=m-u,v=h-d,b=x*x+v*v,w,j;if(b<Y$)j=Math.log(g/f)/t,w=function(R){return[u+R*x,d+R*v,f*Math.exp(t*R*j)]};else{var T=Math.sqrt(b),k=(g*g-f*f+r*b)/(2*f*n*T),E=(g*g-f*f-r*b)/(2*g*n*T),N=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(E*E+1)-E);j=(_-N)/t,w=function(R){var A=R*j,P=Y1(N),$=f/(n*T)*(P*Q$(t*A+N)-J$(N));return[u+$*x,d+$*v,f*P/Y1(t*A+N)]}}return w.duration=j*1e3*t/Math.SQRT2,w}return s.rho=function(a){var l=Math.max(.001,+a),u=l*l,d=u*u;return e(l,u,d)},s})(Math.SQRT2,2,4);var xa=0,$l=0,Tl=0,F5=1e3,xf,Ll,vf=0,ni=0,th=0,yc=typeof performance=="object"&&performance.now?performance:Date,O5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ty(){return ni||(O5(Z$),ni=yc.now()+th)}function Z$(){ni=0}function bf(){this._call=this._time=this._next=null}bf.prototype=z5.prototype={constructor:bf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ty():+n)+(t==null?0:+t),!this._next&&Ll!==this&&(Ll?Ll._next=this:xf=this,Ll=this),this._call=e,this._time=n,r0()},stop:function(){this._call&&(this._call=null,this._time=1/0,r0())}};function z5(e,t,n){var r=new bf;return r.restart(e,t,n),r}function eL(){Ty(),++xa;for(var e=xf,t;e;)(t=ni-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xa}function J1(){ni=(vf=yc.now())+th,xa=$l=0;try{eL()}finally{xa=0,nL(),ni=0}}function tL(){var e=yc.now(),t=e-vf;t>F5&&(th-=t,vf=e)}function nL(){for(var e,t=xf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xf=n);Ll=e,r0(r)}function r0(e){if(!xa){$l&&($l=clearTimeout($l));var t=e-ni;t>24?(e<1/0&&($l=setTimeout(J1,e-yc.now()-th)),Tl&&(Tl=clearInterval(Tl))):(Tl||(vf=yc.now(),Tl=setInterval(tL,F5)),xa=1,O5(J1))}}function Q1(e,t,n){var r=new bf;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var rL=Zf("start","end","cancel","interrupt"),sL=[],$5=0,Z1=1,s0=2,Hd=3,e2=4,o0=5,Gd=6;function nh(e,t,n,r,s,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;oL(e,n,{name:t,index:r,group:s,on:rL,tween:sL,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$5})}function Ry(e,t){var n=Cr(e,t);if(n.state>$5)throw new Error("too late; already scheduled");return n}function Kr(e,t){var n=Cr(e,t);if(n.state>Hd)throw new Error("too late; already running");return n}function Cr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function oL(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=z5(a,0,n.time);function a(f){n.state=Z1,n.timer.restart(l,n.delay,n.time),n.delay<=f&&l(f-n.delay)}function l(f){var m,h,g,x;if(n.state!==Z1)return d();for(m in r)if(x=r[m],x.name===n.name){if(x.state===Hd)return Q1(l);x.state===e2?(x.state=Gd,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[m]):+m<t&&(x.state=Gd,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[m])}if(Q1(function(){n.state===Hd&&(n.state=e2,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=s0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===s0){for(n.state=Hd,s=new Array(g=n.tween.length),m=0,h=-1;m<g;++m)(x=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=x);s.length=h+1}}function u(f){for(var m=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=o0,1),h=-1,g=s.length;++h<g;)s[h].call(e,m);n.state===o0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Gd,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function qd(e,t){var n=e.__transition,r,s,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}s=r.state>s0&&r.state<o0,r.state=Gd,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function iL(e){return this.each(function(){qd(this,e)})}function aL(e,t){var n,r;return function(){var s=Kr(this,e),a=s.tween;if(a!==n){r=n=a;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function lL(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=Kr(this,e),l=a.tween;if(l!==r){s=(r=l).slice();for(var u={name:t,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===t){s[d]=u;break}d===f&&s.push(u)}a.tween=s}}function cL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Cr(this.node(),n).tween,s=0,a=r.length,l;s<a;++s)if((l=r[s]).name===e)return l.value;return null}return this.each((t==null?aL:lL)(n,e,t))}function Iy(e,t,n){var r=e._id;return e.each(function(){var s=Kr(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Cr(s,r).value[t]}}function L5(e,t){var n;return(typeof t=="number"?zr:t instanceof ti?yf:(n=ti(t))?(t=n,yf):P5)(e,t)}function uL(e){return function(){this.removeAttribute(e)}}function dL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fL(e,t,n){var r,s=n+"",a;return function(){var l=this.getAttribute(e);return l===s?null:l===r?a:a=t(r=l,n)}}function hL(e,t,n){var r,s=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===r?a:a=t(r=l,n)}}function pL(e,t,n){var r,s,a;return function(){var l,u=n(this),d;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=u+"",l===d?null:l===r&&d===s?a:(s=d,a=t(r=l,u)))}}function mL(e,t,n){var r,s,a;return function(){var l,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=u+"",l===d?null:l===r&&d===s?a:(s=d,a=t(r=l,u)))}}function gL(e,t){var n=eh(e),r=n==="transform"?X$:L5;return this.attrTween(e,typeof t=="function"?(n.local?mL:pL)(n,r,Iy(this,"attr."+e,t)):t==null?(n.local?dL:uL)(n):(n.local?hL:fL)(n,r,t))}function yL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function vL(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&xL(e,a)),n}return s._value=t,s}function bL(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&yL(e,a)),n}return s._value=t,s}function wL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=eh(e);return this.tween(n,(r.local?vL:bL)(r,t))}function SL(e,t){return function(){Ry(this,e).delay=+t.apply(this,arguments)}}function kL(e,t){return t=+t,function(){Ry(this,e).delay=t}}function jL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SL:kL)(t,e)):Cr(this.node(),t).delay}function CL(e,t){return function(){Kr(this,e).duration=+t.apply(this,arguments)}}function EL(e,t){return t=+t,function(){Kr(this,e).duration=t}}function _L(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?CL:EL)(t,e)):Cr(this.node(),t).duration}function NL(e,t){if(typeof t!="function")throw new Error;return function(){Kr(this,e).ease=t}}function TL(e){var t=this._id;return arguments.length?this.each(NL(t,e)):Cr(this.node(),t).ease}function RL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kr(this,e).ease=n}}function IL(e){if(typeof e!="function")throw new Error;return this.each(RL(this._id,e))}function AL(e){typeof e!="function"&&(e=y5(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],l=a.length,u=r[s]=[],d,f=0;f<l;++f)(d=a[f])&&e.call(d,d.__data__,f,a)&&u.push(d);return new xs(r,this._parents,this._name,this._id)}function PL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),l=new Array(r),u=0;u<a;++u)for(var d=t[u],f=n[u],m=d.length,h=l[u]=new Array(m),g,x=0;x<m;++x)(g=d[x]||f[x])&&(h[x]=g);for(;u<r;++u)l[u]=t[u];return new xs(l,this._parents,this._name,this._id)}function ML(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function DL(e,t,n){var r,s,a=ML(t)?Ry:Kr;return function(){var l=a(this,e),u=l.on;u!==r&&(s=(r=u).copy()).on(t,n),l.on=s}}function FL(e,t){var n=this._id;return arguments.length<2?Cr(this.node(),n).on.on(e):this.each(DL(n,e,t))}function OL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zL(){return this.on("end.remove",OL(this._id))}function $L(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cy(e));for(var r=this._groups,s=r.length,a=new Array(s),l=0;l<s;++l)for(var u=r[l],d=u.length,f=a[l]=new Array(d),m,h,g=0;g<d;++g)(m=u[g])&&(h=e.call(m,m.__data__,g,u))&&("__data__"in m&&(h.__data__=m.__data__),f[g]=h,nh(f[g],t,n,g,f,Cr(m,n)));return new xs(a,this._parents,t,n)}function LL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=g5(e));for(var r=this._groups,s=r.length,a=[],l=[],u=0;u<s;++u)for(var d=r[u],f=d.length,m,h=0;h<f;++h)if(m=d[h]){for(var g=e.call(m,m.__data__,h,d),x,v=Cr(m,n),b=0,w=g.length;b<w;++b)(x=g[b])&&nh(x,t,n,b,g,v);a.push(g),l.push(m)}return new xs(a,l,t,n)}var BL=Mc.prototype.constructor;function WL(){return new BL(this._groups,this._parents)}function VL(e,t){var n,r,s;return function(){var a=ya(this,e),l=(this.style.removeProperty(e),ya(this,e));return a===l?null:a===n&&l===r?s:s=t(n=a,r=l)}}function B5(e){return function(){this.style.removeProperty(e)}}function UL(e,t,n){var r,s=n+"",a;return function(){var l=ya(this,e);return l===s?null:l===r?a:a=t(r=l,n)}}function HL(e,t,n){var r,s,a;return function(){var l=ya(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),ya(this,e))),l===d?null:l===r&&d===s?a:(s=d,a=t(r=l,u))}}function GL(e,t){var n,r,s,a="style."+t,l="end."+a,u;return function(){var d=Kr(this,e),f=d.on,m=d.value[a]==null?u||(u=B5(t)):void 0;(f!==n||s!==m)&&(r=(n=f).copy()).on(l,s=m),d.on=r}}function qL(e,t,n){var r=(e+="")=="transform"?K$:L5;return t==null?this.styleTween(e,VL(e,r)).on("end.style."+e,B5(e)):typeof t=="function"?this.styleTween(e,HL(e,r,Iy(this,"style."+e,t))).each(GL(this._id,e)):this.styleTween(e,UL(e,r,t),n).on("end.style."+e,null)}function KL(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function XL(e,t,n){var r,s;function a(){var l=t.apply(this,arguments);return l!==s&&(r=(s=l)&&KL(e,l,n)),r}return a._value=t,a}function YL(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,XL(e,t,n??""))}function JL(e){return function(){this.textContent=e}}function QL(e){return function(){var t=e(this);this.textContent=t??""}}function ZL(e){return this.tween("text",typeof e=="function"?QL(Iy(this,"text",e)):JL(e==null?"":e+""))}function eB(e){return function(t){this.textContent=e.call(this,t)}}function tB(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&eB(s)),t}return r._value=e,r}function nB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tB(e))}function rB(){for(var e=this._name,t=this._id,n=W5(),r=this._groups,s=r.length,a=0;a<s;++a)for(var l=r[a],u=l.length,d,f=0;f<u;++f)if(d=l[f]){var m=Cr(d,t);nh(d,e,n,f,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new xs(r,this._parents,e,n)}function sB(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(a,l){var u={value:l},d={value:function(){--s===0&&a()}};n.each(function(){var f=Kr(this,r),m=f.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),f.on=t}),s===0&&a()})}var oB=0;function xs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function W5(){return++oB}var as=Mc.prototype;xs.prototype={constructor:xs,select:$L,selectAll:LL,selectChild:as.selectChild,selectChildren:as.selectChildren,filter:AL,merge:PL,selection:WL,transition:rB,call:as.call,nodes:as.nodes,node:as.node,size:as.size,empty:as.empty,each:as.each,on:FL,attr:gL,attrTween:wL,style:qL,styleTween:YL,text:ZL,textTween:nB,remove:zL,tween:cL,delay:jL,duration:_L,ease:TL,easeVarying:IL,end:sB,[Symbol.iterator]:as[Symbol.iterator]};function iB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var aB={time:null,delay:0,duration:250,ease:iB};function lB(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cB(e){var t,n;e instanceof xs?(t=e._id,e=e._name):(t=W5(),(n=aB).time=Ty(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var l=r[a],u=l.length,d,f=0;f<u;++f)(d=l[f])&&nh(d,e,t,f,l,n||lB(d,t));return new xs(r,this._parents,e,t)}Mc.prototype.interrupt=iL;Mc.prototype.transition=cB;const bd=e=>()=>e;function uB(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function ds(e,t,n){this.k=e,this.x=t,this.y=n}ds.prototype={constructor:ds,scale:function(e){return e===1?this:new ds(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ds(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rh=new ds(1,0,0);V5.prototype=ds.prototype;function V5(e){for(;!e.__zoom;)if(!(e=e.parentNode))return rh;return e.__zoom}function Um(e){e.stopImmediatePropagation()}function Rl(e){e.preventDefault(),e.stopImmediatePropagation()}function dB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function fB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function t2(){return this.__zoom||rh}function hB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function pB(){return navigator.maxTouchPoints||"ontouchstart"in this}function mB(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function U5(){var e=dB,t=fB,n=mB,r=hB,s=pB,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Ud,f=Zf("start","zoom","end"),m,h,g,x=500,v=150,b=0,w=10;function j(V){V.property("__zoom",t2).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",$).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(V,Y,z,H){var M=V.selection?V.selection():V;M.property("__zoom",t2),V!==M?N(V,Y,z,H):M.interrupt().each(function(){_(this,arguments).event(H).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},j.scaleBy=function(V,Y,z,H){j.scaleTo(V,function(){var M=this.__zoom.k,U=typeof Y=="function"?Y.apply(this,arguments):Y;return M*U},z,H)},j.scaleTo=function(V,Y,z,H){j.transform(V,function(){var M=t.apply(this,arguments),U=this.__zoom,F=z==null?E(M):typeof z=="function"?z.apply(this,arguments):z,D=U.invert(F),W=typeof Y=="function"?Y.apply(this,arguments):Y;return n(k(T(U,W),F,D),M,l)},z,H)},j.translateBy=function(V,Y,z,H){j.transform(V,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),l)},null,H)},j.translateTo=function(V,Y,z,H,M){j.transform(V,function(){var U=t.apply(this,arguments),F=this.__zoom,D=H==null?E(U):typeof H=="function"?H.apply(this,arguments):H;return n(rh.translate(D[0],D[1]).scale(F.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof z=="function"?-z.apply(this,arguments):-z),U,l)},H,M)};function T(V,Y){return Y=Math.max(a[0],Math.min(a[1],Y)),Y===V.k?V:new ds(Y,V.x,V.y)}function k(V,Y,z){var H=Y[0]-z[0]*V.k,M=Y[1]-z[1]*V.k;return H===V.x&&M===V.y?V:new ds(V.k,H,M)}function E(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function N(V,Y,z,H){V.on("start.zoom",function(){_(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(H).end()}).tween("zoom",function(){var M=this,U=arguments,F=_(M,U).event(H),D=t.apply(M,U),W=z==null?E(D):typeof z=="function"?z.apply(M,U):z,X=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),Z=M.__zoom,G=typeof Y=="function"?Y.apply(M,U):Y,J=d(Z.invert(W).concat(X/Z.k),G.invert(W).concat(X/G.k));return function(ne){if(ne===1)ne=G;else{var te=J(ne),se=X/te[2];ne=new ds(se,W[0]-te[0]*se,W[1]-te[1]*se)}F.zoom(null,ne)}})}function _(V,Y,z){return!z&&V.__zooming||new R(V,Y)}function R(V,Y){this.that=V,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,Y),this.taps=0}R.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,Y){return this.mouse&&V!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var Y=On(this.that).datum();f.call(V,this.that,new uB(V,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:f}),Y)}};function A(V,...Y){if(!e.apply(this,arguments))return;var z=_(this,Y).event(V),H=this.__zoom,M=Math.max(a[0],Math.min(a[1],H.k*Math.pow(2,r.apply(this,arguments)))),U=mr(V);if(z.wheel)(z.mouse[0][0]!==U[0]||z.mouse[0][1]!==U[1])&&(z.mouse[1]=H.invert(z.mouse[0]=U)),clearTimeout(z.wheel);else{if(H.k===M)return;z.mouse=[U,H.invert(U)],qd(this),z.start()}Rl(V),z.wheel=setTimeout(F,v),z.zoom("mouse",n(k(T(H,M),z.mouse[0],z.mouse[1]),z.extent,l));function F(){z.wheel=null,z.end()}}function P(V,...Y){if(g||!e.apply(this,arguments))return;var z=V.currentTarget,H=_(this,Y,!0).event(V),M=On(V.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",X,!0),U=mr(V,z),F=V.clientX,D=V.clientY;_5(V.view),Um(V),H.mouse=[U,this.__zoom.invert(U)],qd(this),H.start();function W(Z){if(Rl(Z),!H.moved){var G=Z.clientX-F,J=Z.clientY-D;H.moved=G*G+J*J>b}H.event(Z).zoom("mouse",n(k(H.that.__zoom,H.mouse[0]=mr(Z,z),H.mouse[1]),H.extent,l))}function X(Z){M.on("mousemove.zoom mouseup.zoom",null),N5(Z.view,H.moved),Rl(Z),H.event(Z).end()}}function $(V,...Y){if(e.apply(this,arguments)){var z=this.__zoom,H=mr(V.changedTouches?V.changedTouches[0]:V,this),M=z.invert(H),U=z.k*(V.shiftKey?.5:2),F=n(k(T(z,U),H,M),t.apply(this,Y),l);Rl(V),u>0?On(this).transition().duration(u).call(N,F,H,V):On(this).call(j.transform,F,H,V)}}function L(V,...Y){if(e.apply(this,arguments)){var z=V.touches,H=z.length,M=_(this,Y,V.changedTouches.length===H).event(V),U,F,D,W;for(Um(V),F=0;F<H;++F)D=z[F],W=mr(D,this),W=[W,this.__zoom.invert(W),D.identifier],M.touch0?!M.touch1&&M.touch0[2]!==W[2]&&(M.touch1=W,M.taps=0):(M.touch0=W,U=!0,M.taps=1+!!m);m&&(m=clearTimeout(m)),U&&(M.taps<2&&(h=W[0],m=setTimeout(function(){m=null},x)),qd(this),M.start())}}function B(V,...Y){if(this.__zooming){var z=_(this,Y).event(V),H=V.changedTouches,M=H.length,U,F,D,W;for(Rl(V),U=0;U<M;++U)F=H[U],D=mr(F,this),z.touch0&&z.touch0[2]===F.identifier?z.touch0[0]=D:z.touch1&&z.touch1[2]===F.identifier&&(z.touch1[0]=D);if(F=z.that.__zoom,z.touch1){var X=z.touch0[0],Z=z.touch0[1],G=z.touch1[0],J=z.touch1[1],ne=(ne=G[0]-X[0])*ne+(ne=G[1]-X[1])*ne,te=(te=J[0]-Z[0])*te+(te=J[1]-Z[1])*te;F=T(F,Math.sqrt(ne/te)),D=[(X[0]+G[0])/2,(X[1]+G[1])/2],W=[(Z[0]+J[0])/2,(Z[1]+J[1])/2]}else if(z.touch0)D=z.touch0[0],W=z.touch0[1];else return;z.zoom("touch",n(k(F,D,W),z.extent,l))}}function K(V,...Y){if(this.__zooming){var z=_(this,Y).event(V),H=V.changedTouches,M=H.length,U,F;for(Um(V),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),U=0;U<M;++U)F=H[U],z.touch0&&z.touch0[2]===F.identifier?delete z.touch0:z.touch1&&z.touch1[2]===F.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(F=mr(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<w)){var D=On(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return j.wheelDelta=function(V){return arguments.length?(r=typeof V=="function"?V:bd(+V),j):r},j.filter=function(V){return arguments.length?(e=typeof V=="function"?V:bd(!!V),j):e},j.touchable=function(V){return arguments.length?(s=typeof V=="function"?V:bd(!!V),j):s},j.extent=function(V){return arguments.length?(t=typeof V=="function"?V:bd([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),j):t},j.scaleExtent=function(V){return arguments.length?(a[0]=+V[0],a[1]=+V[1],j):[a[0],a[1]]},j.translateExtent=function(V){return arguments.length?(l[0][0]=+V[0][0],l[1][0]=+V[1][0],l[0][1]=+V[0][1],l[1][1]=+V[1][1],j):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},j.constrain=function(V){return arguments.length?(n=V,j):n},j.duration=function(V){return arguments.length?(u=+V,j):u},j.interpolate=function(V){return arguments.length?(d=V,j):d},j.on=function(){var V=f.on.apply(f,arguments);return V===f?j:V},j.clickDistance=function(V){return arguments.length?(b=(V=+V)*V,j):Math.sqrt(b)},j.tapDistance=function(V){return arguments.length?(w=+V,j):w},j}const Hr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},xc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],H5=["Enter"," ","Escape"],G5={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var va;(function(e){e.Strict="strict",e.Loose="loose"})(va||(va={}));var Qo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qo||(Qo={}));var vc;(function(e){e.Partial="partial",e.Full="full"})(vc||(vc={}));const q5={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var eo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(eo||(eo={}));var wf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(wf||(wf={}));var Se;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Se||(Se={}));const n2={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top};function K5(e){return e===null?null:e?"valid":"invalid"}const X5=e=>"id"in e&&"source"in e&&"target"in e,gB=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ay=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Fc=(e,t=[0,0])=>{const{width:n,height:r}=ks(e),s=e.origin??t,a=n*s[0],l=r*s[1];return{x:e.position.x-a,y:e.position.y-l}},yB=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const a=typeof s=="string";let l=!t.nodeLookup&&!a?s:void 0;t.nodeLookup&&(l=a?t.nodeLookup.get(s):Ay(s)?s:t.nodeLookup.get(s.id));const u=l?Sf(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return sh(r,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return oh(n)},Oc=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(n=sh(n,Sf(s)),r=!0)}),r?oh(n):{x:0,y:0,width:0,height:0}},Py=(e,t,[n,r,s]=[0,0,1],a=!1,l=!1)=>{const u={...$c(t,[n,r,s]),width:t.width/s,height:t.height/s},d=[];for(const f of e.values()){const{measured:m,selectable:h=!0,hidden:g=!1}=f;if(l&&!h||g)continue;const x=m.width??f.width??f.initialWidth??null,v=m.height??f.height??f.initialHeight??null,b=bc(u,wa(f)),w=(x??0)*(v??0),j=a&&b>0;(!f.internals.handleBounds||j||b>=w||f.dragging)&&d.push(f)}return d},xB=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function vB(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function bB({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:a},l){if(e.size===0)return Promise.resolve(!0);const u=vB(e,l),d=Oc(u),f=My(d,t,n,(l==null?void 0:l.minZoom)??s,(l==null?void 0:l.maxZoom)??a,(l==null?void 0:l.padding)??.1);return await r.setViewport(f,{duration:l==null?void 0:l.duration,ease:l==null?void 0:l.ease,interpolate:l==null?void 0:l.interpolate}),Promise.resolve(!0)}function Y5({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:a}){const l=n.get(e),u=l.parentId?n.get(l.parentId):void 0,{x:d,y:f}=u?u.internals.positionAbsolute:{x:0,y:0},m=l.origin??r;let h=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!u)a==null||a("005",Hr.error005());else{const x=u.measured.width,v=u.measured.height;x&&v&&(h=[[d,f],[d+x,f+v]])}else u&&Sa(l.extent)&&(h=[[l.extent[0][0]+d,l.extent[0][1]+f],[l.extent[1][0]+d,l.extent[1][1]+f]]);const g=Sa(h)?ri(t,h,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&(a==null||a("015",Hr.error015())),{position:{x:g.x-d+(l.measured.width??0)*m[0],y:g.y-f+(l.measured.height??0)*m[1]},positionAbsolute:g}}async function wB({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const a=new Set(e.map(g=>g.id)),l=[];for(const g of n){if(g.deletable===!1)continue;const x=a.has(g.id),v=!x&&g.parentId&&l.find(b=>b.id===g.parentId);(x||v)&&l.push(g)}const u=new Set(t.map(g=>g.id)),d=r.filter(g=>g.deletable!==!1),m=xB(l,d);for(const g of d)u.has(g.id)&&!m.find(v=>v.id===g.id)&&m.push(g);if(!s)return{edges:m,nodes:l};const h=await s({nodes:l,edges:m});return typeof h=="boolean"?h?{edges:m,nodes:l}:{edges:[],nodes:[]}:h}const ba=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ri=(e={x:0,y:0},t,n)=>({x:ba(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:ba(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function J5(e,t,n){const{width:r,height:s}=ks(n),{x:a,y:l}=n.internals.positionAbsolute;return ri(e,[[a,l],[a+r,l+s]],t)}const r2=(e,t,n)=>e<t?ba(Math.abs(e-t),1,t)/t:e>n?-ba(Math.abs(e-n),1,t)/t:0,Q5=(e,t,n=15,r=40)=>{const s=r2(e.x,r,t.width-r)*n,a=r2(e.y,r,t.height-r)*n;return[s,a]},sh=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),i0=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),oh=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),wa=(e,t=[0,0])=>{var s,a;const{x:n,y:r}=Ay(e)?e.internals.positionAbsolute:Fc(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Sf=(e,t=[0,0])=>{var s,a;const{x:n,y:r}=Ay(e)?e.internals.positionAbsolute:Fc(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},Z5=(e,t)=>oh(sh(i0(e),i0(t))),bc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},s2=e=>vr(e.width)&&vr(e.height)&&vr(e.x)&&vr(e.y),vr=e=>!isNaN(e)&&isFinite(e),SB=(e,t)=>{},zc=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),$c=({x:e,y:t},[n,r,s],a=!1,l=[1,1])=>{const u={x:(e-n)/s,y:(t-r)/s};return a?zc(u,l):u},kf=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function Bi(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function kB(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Bi(e,n),s=Bi(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=Bi(e.top??e.y??0,n),s=Bi(e.bottom??e.y??0,n),a=Bi(e.left??e.x??0,t),l=Bi(e.right??e.x??0,t);return{top:r,right:l,bottom:s,left:a,x:a+l,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function jB(e,t,n,r,s,a){const{x:l,y:u}=kf(e,[t,n,r]),{x:d,y:f}=kf({x:e.x+e.width,y:e.y+e.height},[t,n,r]),m=s-d,h=a-f;return{left:Math.floor(l),top:Math.floor(u),right:Math.floor(m),bottom:Math.floor(h)}}const My=(e,t,n,r,s,a)=>{const l=kB(a,t,n),u=(t-l.x)/e.width,d=(n-l.y)/e.height,f=Math.min(u,d),m=ba(f,r,s),h=e.x+e.width/2,g=e.y+e.height/2,x=t/2-h*m,v=n/2-g*m,b=jB(e,x,v,m,t,n),w={left:Math.min(b.left-l.left,0),top:Math.min(b.top-l.top,0),right:Math.min(b.right-l.right,0),bottom:Math.min(b.bottom-l.bottom,0)};return{x:x-w.left+w.right,y:v-w.top+w.bottom,zoom:m}},wc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Sa(e){return e!=null&&e!=="parent"}function ks(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function eC(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function tC(e,t={width:0,height:0},n,r,s){const a={...e},l=r.get(n);if(l){const u=l.origin||s;a.x+=l.internals.positionAbsolute.x-(t.width??0)*u[0],a.y+=l.internals.positionAbsolute.y-(t.height??0)*u[1]}return a}function o2(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function CB(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function EB(e){return{...G5,...e||{}}}function Xl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:a,y:l}=br(e),u=$c({x:a-((s==null?void 0:s.left)??0),y:l-((s==null?void 0:s.top)??0)},r),{x:d,y:f}=n?zc(u,t):u;return{xSnapped:d,ySnapped:f,...u}}const Dy=e=>({width:e.offsetWidth,height:e.offsetHeight}),nC=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},_B=["INPUT","SELECT","TEXTAREA"];function rC(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:_B.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const sC=e=>"clientX"in e,br=(e,t)=>{var a,l;const n=sC(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,s=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},i2=(e,t,n,r,s)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:s,position:l.getAttribute("data-handlepos"),x:(u.left-n.left)/r,y:(u.top-n.top)/r,...Dy(l)}})};function oC({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u}){const d=e*.125+s*.375+l*.375+n*.125,f=t*.125+a*.375+u*.375+r*.125,m=Math.abs(d-e),h=Math.abs(f-t);return[d,f,m,h]}function wd(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function a2({pos:e,x1:t,y1:n,x2:r,y2:s,c:a}){switch(e){case Se.Left:return[t-wd(t-r,a),n];case Se.Right:return[t+wd(r-t,a),n];case Se.Top:return[t,n-wd(n-s,a)];case Se.Bottom:return[t,n+wd(s-n,a)]}}function iC({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:s,targetPosition:a=Se.Top,curvature:l=.25}){const[u,d]=a2({pos:n,x1:e,y1:t,x2:r,y2:s,c:l}),[f,m]=a2({pos:a,x1:r,y1:s,x2:e,y2:t,c:l}),[h,g,x,v]=oC({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${e},${t} C${u},${d} ${f},${m} ${r},${s}`,h,g,x,v]}function aC({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,a=n<e?n+s:n-s,l=Math.abs(r-t)/2,u=r<t?r+l:r-l;return[a,u,s,l]}function NB({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1,zIndexMode:a="basic"}){if(a==="manual")return r;const l=s&&n?r+1e3:r,u=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return l+u}function TB({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const a=sh(Sf(e),Sf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return bc(l,oh(a))>0}const RB=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,IB=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),lC=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||RB;let s;return X5(e)?s={...e}:s={...e,id:r(e)},IB(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function cC({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,a,l,u]=aC({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,a,l,u]}const l2={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},AB=({source:e,sourcePosition:t=Se.Bottom,target:n})=>t===Se.Left||t===Se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},c2=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function PB({source:e,sourcePosition:t=Se.Bottom,target:n,targetPosition:r=Se.Top,center:s,offset:a,stepPosition:l}){const u=l2[t],d=l2[r],f={x:e.x+u.x*a,y:e.y+u.y*a},m={x:n.x+d.x*a,y:n.y+d.y*a},h=AB({source:f,sourcePosition:t,target:m}),g=h.x!==0?"x":"y",x=h[g];let v=[],b,w;const j={x:0,y:0},T={x:0,y:0},[,,k,E]=aC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[g]*d[g]===-1){g==="x"?(b=s.x??f.x+(m.x-f.x)*l,w=s.y??(f.y+m.y)/2):(b=s.x??(f.x+m.x)/2,w=s.y??f.y+(m.y-f.y)*l);const _=[{x:b,y:f.y},{x:b,y:m.y}],R=[{x:f.x,y:w},{x:m.x,y:w}];u[g]===x?v=g==="x"?_:R:v=g==="x"?R:_}else{const _=[{x:f.x,y:m.y}],R=[{x:m.x,y:f.y}];if(g==="x"?v=u.x===x?R:_:v=u.y===x?_:R,t===r){const B=Math.abs(e[g]-n[g]);if(B<=a){const K=Math.min(a-1,a-B);u[g]===x?j[g]=(f[g]>e[g]?-1:1)*K:T[g]=(m[g]>n[g]?-1:1)*K}}if(t!==r){const B=g==="x"?"y":"x",K=u[g]===d[B],V=f[B]>m[B],Y=f[B]<m[B];(u[g]===1&&(!K&&V||K&&Y)||u[g]!==1&&(!K&&Y||K&&V))&&(v=g==="x"?_:R)}const A={x:f.x+j.x,y:f.y+j.y},P={x:m.x+T.x,y:m.y+T.y},$=Math.max(Math.abs(A.x-v[0].x),Math.abs(P.x-v[0].x)),L=Math.max(Math.abs(A.y-v[0].y),Math.abs(P.y-v[0].y));$>=L?(b=(A.x+P.x)/2,w=v[0].y):(b=v[0].x,w=(A.y+P.y)/2)}return[[e,{x:f.x+j.x,y:f.y+j.y},...v,{x:m.x+T.x,y:m.y+T.y},n],b,w,k,E]}function MB(e,t,n,r){const s=Math.min(c2(e,t)/2,c2(t,n)/2,r),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const f=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${a+s*f},${l}Q ${a},${l} ${a},${l+s*m}`}const u=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${a},${l+s*d}Q ${a},${l} ${a+s*u},${l}`}function a0({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:s,targetPosition:a=Se.Top,borderRadius:l=5,centerX:u,centerY:d,offset:f=20,stepPosition:m=.5}){const[h,g,x,v,b]=PB({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:d},offset:f,stepPosition:m});return[h.reduce((j,T,k)=>{let E="";return k>0&&k<h.length-1?E=MB(h[k-1],T,h[k+1],l):E=`${k===0?"M":"L"}${T.x} ${T.y}`,j+=E,j},""),g,x,v,b]}function u2(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function DB(e){var h;const{sourceNode:t,targetNode:n}=e;if(!u2(t)||!u2(n))return null;const r=t.internals.handleBounds||d2(t.handles),s=n.internals.handleBounds||d2(n.handles),a=f2((r==null?void 0:r.source)??[],e.sourceHandle),l=f2(e.connectionMode===va.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!a||!l)return(h=e.onError)==null||h.call(e,"008",Hr.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=(a==null?void 0:a.position)||Se.Bottom,d=(l==null?void 0:l.position)||Se.Top,f=si(t,a,u),m=si(n,l,d);return{sourceX:f.x,sourceY:f.y,targetX:m.x,targetY:m.y,sourcePosition:u,targetPosition:d}}function d2(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function si(e,t,n=Se.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:l,height:u}=t??ks(e);if(r)return{x:s+l/2,y:a+u/2};switch((t==null?void 0:t.position)??n){case Se.Top:return{x:s+l/2,y:a};case Se.Right:return{x:s+l,y:a+u/2};case Se.Bottom:return{x:s+l/2,y:a+u};case Se.Left:return{x:s,y:a+u/2}}}function f2(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function l0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function FB(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const a=new Set;return e.reduce((l,u)=>([u.markerStart||r,u.markerEnd||s].forEach(d=>{if(d&&typeof d=="object"){const f=l0(d,t);a.has(f)||(l.push({id:f,color:d.color||n,...d}),a.add(f))}}),l),[]).sort((l,u)=>l.id.localeCompare(u.id))}const uC=1e3,OB=10,Fy={nodeOrigin:[0,0],nodeExtent:xc,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},zB={...Fy,checkEquality:!0};function Oy(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function $B(e,t,n){const r=Oy(Fy,n);for(const s of e.values())if(s.parentId)$y(s,e,t,r);else{const a=Fc(s,r.nodeOrigin),l=Sa(s.extent)?s.extent:r.nodeExtent,u=ri(a,l,ks(s));s.internals.positionAbsolute=u}}function LB(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const s of e.handles){const a={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(a):s.type==="target"&&r.push(a)}return{source:n,target:r}}function zy(e){return e==="manual"}function c0(e,t,n,r={}){var f,m;const s=Oy(zB,r),a={i:0},l=new Map(t),u=s!=null&&s.elevateNodesOnSelect&&!zy(s.zIndexMode)?uC:0;let d=e.length>0;t.clear(),n.clear();for(const h of e){let g=l.get(h.id);if(s.checkEquality&&h===(g==null?void 0:g.internals.userNode))t.set(h.id,g);else{const x=Fc(h,s.nodeOrigin),v=Sa(h.extent)?h.extent:s.nodeExtent,b=ri(x,v,ks(h));g={...s.defaults,...h,measured:{width:(f=h.measured)==null?void 0:f.width,height:(m=h.measured)==null?void 0:m.height},internals:{positionAbsolute:b,handleBounds:LB(h,g),z:dC(h,u,s.zIndexMode),userNode:h}},t.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(d=!1),h.parentId&&$y(g,t,n,r,a)}return d}function BB(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function $y(e,t,n,r,s){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:u,zIndexMode:d}=Oy(Fy,r),f=e.parentId,m=t.get(f);if(!m){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}BB(e,n),s&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++s.i,m.internals.z=m.internals.z+s.i*OB),s&&m.internals.rootParentIndex!==void 0&&(s.i=m.internals.rootParentIndex);const h=a&&!zy(d)?uC:0,{x:g,y:x,z:v}=WB(e,m,l,u,h,d),{positionAbsolute:b}=e.internals,w=g!==b.x||x!==b.y;(w||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:g,y:x}:b,z:v}})}function dC(e,t,n){const r=vr(e.zIndex)?e.zIndex:0;return zy(n)?r:r+(e.selected?t:0)}function WB(e,t,n,r,s,a){const{x:l,y:u}=t.internals.positionAbsolute,d=ks(e),f=Fc(e,n),m=Sa(e.extent)?ri(f,e.extent,d):f;let h=ri({x:l+m.x,y:u+m.y},r,d);e.extent==="parent"&&(h=J5(h,d,t));const g=dC(e,s,a),x=t.internals.z??0;return{x:h.x,y:h.y,z:x>=g?x+1:g}}function Ly(e,t,n,r=[0,0]){var l;const s=[],a=new Map;for(const u of e){const d=t.get(u.parentId);if(!d)continue;const f=((l=a.get(u.parentId))==null?void 0:l.expandedRect)??wa(d),m=Z5(f,u.rect);a.set(u.parentId,{expandedRect:m,parent:d})}return a.size>0&&a.forEach(({expandedRect:u,parent:d},f)=>{var k;const m=d.internals.positionAbsolute,h=ks(d),g=d.origin??r,x=u.x<m.x?Math.round(Math.abs(m.x-u.x)):0,v=u.y<m.y?Math.round(Math.abs(m.y-u.y)):0,b=Math.max(h.width,Math.round(u.width)),w=Math.max(h.height,Math.round(u.height)),j=(b-h.width)*g[0],T=(w-h.height)*g[1];(x>0||v>0||j||T)&&(s.push({id:f,type:"position",position:{x:d.position.x-x+j,y:d.position.y-v+T}}),(k=n.get(f))==null||k.forEach(E=>{e.some(N=>N.id===E.id)||s.push({id:E.id,type:"position",position:{x:E.position.x+x,y:E.position.y+v}})})),(h.width<u.width||h.height<u.height||x||v)&&s.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:b+(x?g[0]*x-j:0),height:w+(v?g[1]*v-T:0)}})}),s}function VB(e,t,n,r,s,a,l){const u=r==null?void 0:r.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const f=[],m=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(m.transform),g=[];for(const x of e.values()){const v=t.get(x.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),d=!0;continue}const b=Dy(x.nodeElement),w=v.measured.width!==b.width||v.measured.height!==b.height;if(!!(b.width&&b.height&&(w||!v.internals.handleBounds||x.force))){const T=x.nodeElement.getBoundingClientRect(),k=Sa(v.extent)?v.extent:a;let{positionAbsolute:E}=v.internals;v.parentId&&v.extent==="parent"?E=J5(E,b,t.get(v.parentId)):k&&(E=ri(E,k,b));const N={...v,measured:b,internals:{...v.internals,positionAbsolute:E,handleBounds:{source:i2("source",x.nodeElement,T,h,v.id),target:i2("target",x.nodeElement,T,h,v.id)}}};t.set(v.id,N),v.parentId&&$y(N,t,n,{nodeOrigin:s,zIndexMode:l}),d=!0,w&&(f.push({id:v.id,type:"dimensions",dimensions:b}),v.expandParent&&v.parentId&&g.push({id:v.id,parentId:v.parentId,rect:wa(N,s)}))}}if(g.length>0){const x=Ly(g,t,n,s);f.push(...x)}return{changes:f,updatedInternals:d}}async function UB({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,a]],r),u=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(u)}function h2(e,t,n,r,s,a){let l=s;const u=r.get(l)||new Map;r.set(l,u.set(n,t)),l=`${s}-${e}`;const d=r.get(l)||new Map;if(r.set(l,d.set(n,t)),a){l=`${s}-${e}-${a}`;const f=r.get(l)||new Map;r.set(l,f.set(n,t))}}function fC(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:a,sourceHandle:l=null,targetHandle:u=null}=r,d={edgeId:r.id,source:s,target:a,sourceHandle:l,targetHandle:u},f=`${s}-${l}--${a}-${u}`,m=`${a}-${u}--${s}-${l}`;h2("source",d,m,e,s,l),h2("target",d,f,e,a,u),t.set(r.id,r)}}function hC(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:hC(n,t):!1}function p2(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function HB(e,t,n,r){const s=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!hC(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&s.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return s}function Hm({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var l,u,d;const s=[];for(const[f,m]of t){const h=(l=n.get(f))==null?void 0:l.internals.userNode;h&&s.push({...h,position:m.position,dragging:r})}if(!e)return[s[0],s];const a=(u=n.get(e))==null?void 0:u.internals.userNode;return[a?{...a,position:((d=t.get(e))==null?void 0:d.position)||a.position,dragging:r}:s[0],s]}function GB({dragItems:e,snapGrid:t,x:n,y:r}){const s=e.values().next().value;if(!s)return null;const a={x:n-s.distance.x,y:r-s.distance.y},l=zc(a,t);return{x:l.x-a.x,y:l.y-a.y}}function qB({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let a={x:null,y:null},l=0,u=new Map,d=!1,f={x:0,y:0},m=null,h=!1,g=null,x=!1,v=!1,b=null;function w({noDragClassName:T,handleSelector:k,domNode:E,isSelectable:N,nodeId:_,nodeClickDistance:R=0}){g=On(E);function A({x:B,y:K}){const{nodeLookup:V,nodeExtent:Y,snapGrid:z,snapToGrid:H,nodeOrigin:M,onNodeDrag:U,onSelectionDrag:F,onError:D,updateNodePositions:W}=t();a={x:B,y:K};let X=!1;const Z=u.size>1,G=Z&&Y?i0(Oc(u)):null,J=Z&&H?GB({dragItems:u,snapGrid:z,x:B,y:K}):null;for(const[ne,te]of u){if(!V.has(ne))continue;let se={x:B-te.distance.x,y:K-te.distance.y};H&&(se=J?{x:Math.round(se.x+J.x),y:Math.round(se.y+J.y)}:zc(se,z));let le=null;if(Z&&Y&&!te.extent&&G){const{positionAbsolute:ie}=te.internals,ue=ie.x-G.x+Y[0][0],xe=ie.x+te.measured.width-G.x2+Y[1][0],ge=ie.y-G.y+Y[0][1],Ae=ie.y+te.measured.height-G.y2+Y[1][1];le=[[ue,ge],[xe,Ae]]}const{position:de,positionAbsolute:fe}=Y5({nodeId:ne,nextPosition:se,nodeLookup:V,nodeExtent:le||Y,nodeOrigin:M,onError:D});X=X||te.position.x!==de.x||te.position.y!==de.y,te.position=de,te.internals.positionAbsolute=fe}if(v=v||X,!!X&&(W(u,!0),b&&(r||U||!_&&F))){const[ne,te]=Hm({nodeId:_,dragItems:u,nodeLookup:V});r==null||r(b,u,ne,te),U==null||U(b,ne,te),_||F==null||F(b,te)}}async function P(){if(!m)return;const{transform:B,panBy:K,autoPanSpeed:V,autoPanOnNodeDrag:Y}=t();if(!Y){d=!1,cancelAnimationFrame(l);return}const[z,H]=Q5(f,m,V);(z!==0||H!==0)&&(a.x=(a.x??0)-z/B[2],a.y=(a.y??0)-H/B[2],await K({x:z,y:H})&&A(a)),l=requestAnimationFrame(P)}function $(B){var Z;const{nodeLookup:K,multiSelectionActive:V,nodesDraggable:Y,transform:z,snapGrid:H,snapToGrid:M,selectNodesOnDrag:U,onNodeDragStart:F,onSelectionDragStart:D,unselectNodesAndEdges:W}=t();h=!0,(!U||!N)&&!V&&_&&((Z=K.get(_))!=null&&Z.selected||W()),N&&U&&_&&(e==null||e(_));const X=Xl(B.sourceEvent,{transform:z,snapGrid:H,snapToGrid:M,containerBounds:m});if(a=X,u=HB(K,Y,X,_),u.size>0&&(n||F||!_&&D)){const[G,J]=Hm({nodeId:_,dragItems:u,nodeLookup:K});n==null||n(B.sourceEvent,u,G,J),F==null||F(B.sourceEvent,G,J),_||D==null||D(B.sourceEvent,J)}}const L=T5().clickDistance(R).on("start",B=>{const{domNode:K,nodeDragThreshold:V,transform:Y,snapGrid:z,snapToGrid:H}=t();m=(K==null?void 0:K.getBoundingClientRect())||null,x=!1,v=!1,b=B.sourceEvent,V===0&&$(B),a=Xl(B.sourceEvent,{transform:Y,snapGrid:z,snapToGrid:H,containerBounds:m}),f=br(B.sourceEvent,m)}).on("drag",B=>{const{autoPanOnNodeDrag:K,transform:V,snapGrid:Y,snapToGrid:z,nodeDragThreshold:H,nodeLookup:M}=t(),U=Xl(B.sourceEvent,{transform:V,snapGrid:Y,snapToGrid:z,containerBounds:m});if(b=B.sourceEvent,(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||_&&!M.has(_))&&(x=!0),!x){if(!d&&K&&h&&(d=!0,P()),!h){const F=br(B.sourceEvent,m),D=F.x-f.x,W=F.y-f.y;Math.sqrt(D*D+W*W)>H&&$(B)}(a.x!==U.xSnapped||a.y!==U.ySnapped)&&u&&h&&(f=br(B.sourceEvent,m),A(U))}}).on("end",B=>{if(!(!h||x)&&(d=!1,h=!1,cancelAnimationFrame(l),u.size>0)){const{nodeLookup:K,updateNodePositions:V,onNodeDragStop:Y,onSelectionDragStop:z}=t();if(v&&(V(u,!1),v=!1),s||Y||!_&&z){const[H,M]=Hm({nodeId:_,dragItems:u,nodeLookup:K,dragging:!1});s==null||s(B.sourceEvent,u,H,M),Y==null||Y(B.sourceEvent,H,M),_||z==null||z(B.sourceEvent,M)}}}).filter(B=>{const K=B.target;return!B.button&&(!T||!p2(K,`.${T}`,E))&&(!k||p2(K,k,E))});g.call(L)}function j(){g==null||g.on(".drag",null)}return{update:w,destroy:j}}function KB(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())bc(s,wa(a))>0&&r.push(a);return r}const XB=250;function YB(e,t,n,r){var u,d;let s=[],a=1/0;const l=KB(e,n,t+XB);for(const f of l){const m=[...((u=f.internals.handleBounds)==null?void 0:u.source)??[],...((d=f.internals.handleBounds)==null?void 0:d.target)??[]];for(const h of m){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:g,y:x}=si(f,h,h.position,!0),v=Math.sqrt(Math.pow(g-e.x,2)+Math.pow(x-e.y,2));v>t||(v<a?(s=[{...h,x:g,y:x}],a=v):v===a&&s.push({...h,x:g,y:x}))}}if(!s.length)return null;if(s.length>1){const f=r.type==="source"?"target":"source";return s.find(m=>m.type===f)??s[0]}return s[0]}function pC(e,t,n,r,s,a=!1){var f,m,h;const l=r.get(e);if(!l)return null;const u=s==="strict"?(f=l.internals.handleBounds)==null?void 0:f[t]:[...((m=l.internals.handleBounds)==null?void 0:m.source)??[],...((h=l.internals.handleBounds)==null?void 0:h.target)??[]],d=(n?u==null?void 0:u.find(g=>g.id===n):u==null?void 0:u[0])??null;return d&&a?{...d,...si(l,d,d.position,!0)}:d}function mC(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function JB(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const gC=()=>!0;function QB(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:a,isTarget:l,domNode:u,nodeLookup:d,lib:f,autoPanOnConnect:m,flowId:h,panBy:g,cancelConnection:x,onConnectStart:v,onConnect:b,onConnectEnd:w,isValidConnection:j=gC,onReconnectEnd:T,updateConnection:k,getTransform:E,getFromHandle:N,autoPanSpeed:_,dragThreshold:R=1,handleDomNode:A}){const P=nC(e.target);let $=0,L;const{x:B,y:K}=br(e),V=mC(a,A),Y=u==null?void 0:u.getBoundingClientRect();let z=!1;if(!Y||!V)return;const H=pC(s,V,r,d,t);if(!H)return;let M=br(e,Y),U=!1,F=null,D=!1,W=null;function X(){if(!m||!Y)return;const[de,fe]=Q5(M,Y,_);g({x:de,y:fe}),$=requestAnimationFrame(X)}const Z={...H,nodeId:s,type:V,position:H.position},G=d.get(s);let ne={inProgress:!0,isValid:null,from:si(G,Z,Se.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:G,to:M,toHandle:null,toPosition:n2[Z.position],toNode:null,pointer:M};function te(){z=!0,k(ne),v==null||v(e,{nodeId:s,handleId:r,handleType:V})}R===0&&te();function se(de){if(!z){const{x:Ae,y:Ve}=br(de),ze=Ae-B,gt=Ve-K;if(!(ze*ze+gt*gt>R*R))return;te()}if(!N()||!Z){le(de);return}const fe=E();M=br(de,Y),L=YB($c(M,fe,!1,[1,1]),n,d,Z),U||(X(),U=!0);const ie=yC(de,{handle:L,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:l?"target":"source",isValidConnection:j,doc:P,lib:f,flowId:h,nodeLookup:d});W=ie.handleDomNode,F=ie.connection,D=JB(!!L,ie.isValid);const ue=d.get(s),xe=ue?si(ue,Z,Se.Left,!0):ne.from,ge={...ne,from:xe,isValid:D,to:ie.toHandle&&D?kf({x:ie.toHandle.x,y:ie.toHandle.y},fe):M,toHandle:ie.toHandle,toPosition:D&&ie.toHandle?ie.toHandle.position:n2[Z.position],toNode:ie.toHandle?d.get(ie.toHandle.nodeId):null,pointer:M};k(ge),ne=ge}function le(de){if(!("touches"in de&&de.touches.length>0)){if(z){(L||W)&&F&&D&&(b==null||b(F));const{inProgress:fe,...ie}=ne,ue={...ie,toPosition:ne.toHandle?ne.toPosition:null};w==null||w(de,ue),a&&(T==null||T(de,ue))}x(),cancelAnimationFrame($),U=!1,D=!1,F=null,W=null,P.removeEventListener("mousemove",se),P.removeEventListener("mouseup",le),P.removeEventListener("touchmove",se),P.removeEventListener("touchend",le)}}P.addEventListener("mousemove",se),P.addEventListener("mouseup",le),P.addEventListener("touchmove",se),P.addEventListener("touchend",le)}function yC(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:a,doc:l,lib:u,flowId:d,isValidConnection:f=gC,nodeLookup:m}){const h=a==="target",g=t?l.querySelector(`.${u}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x,y:v}=br(e),b=l.elementFromPoint(x,v),w=b!=null&&b.classList.contains(`${u}-flow__handle`)?b:g,j={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const T=mC(void 0,w),k=w.getAttribute("data-nodeid"),E=w.getAttribute("data-handleid"),N=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!k||!T)return j;const R={source:h?k:r,sourceHandle:h?E:s,target:h?r:k,targetHandle:h?s:E};j.connection=R;const P=N&&_&&(n===va.Strict?h&&T==="source"||!h&&T==="target":k!==r||E!==s);j.isValid=P&&f(R),j.toHandle=pC(k,T,E,m,n,!0)}return j}const u0={onPointerDown:QB,isValid:yC};function ZB({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=On(e);function a({translateExtent:u,width:d,height:f,zoomStep:m=1,pannable:h=!0,zoomable:g=!0,inversePan:x=!1}){const v=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const E=n(),N=k.sourceEvent.ctrlKey&&wc()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*m,R=E[2]*Math.pow(2,_*N);t.scaleTo(R)};let b=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(b=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},j=k=>{const E=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const N=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[N[0]-b[0],N[1]-b[1]];b=N;const R=r()*Math.max(E[2],Math.log(E[2]))*(x?-1:1),A={x:E[0]-_[0]*R,y:E[1]-_[1]*R},P=[[0,0],[d,f]];t.setViewportConstrained({x:A.x,y:A.y,zoom:E[2]},P,u)},T=U5().on("start",w).on("zoom",h?j:null).on("zoom.wheel",g?v:null);s.call(T,{})}function l(){s.on("zoom",null)}return{update:a,destroy:l,pointer:mr}}const ih=e=>({x:e.x,y:e.y,zoom:e.k}),Gm=({x:e,y:t,zoom:n})=>rh.translate(e,t).scale(n),ra=(e,t)=>e.target.closest(`.${t}`),xC=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),e9=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,qm=(e,t=0,n=e9,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},vC=e=>{const t=e.ctrlKey&&wc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function t9({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:a,zoomOnPinch:l,onPanZoomStart:u,onPanZoom:d,onPanZoomEnd:f}){return m=>{if(ra(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(m.ctrlKey&&l){const w=mr(m),j=vC(m),T=h*Math.pow(2,j);r.scaleTo(n,T,w,m);return}const g=m.deltaMode===1?20:1;let x=s===Qo.Vertical?0:m.deltaX*g,v=s===Qo.Horizontal?0:m.deltaY*g;!wc()&&m.shiftKey&&s!==Qo.Vertical&&(x=m.deltaY*g,v=0),r.translateBy(n,-(x/h)*a,-(v/h)*a,{internal:!0});const b=ih(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(m,b),e.panScrollTimeout=setTimeout(()=>{f==null||f(m,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u==null||u(m,b))}}function n9({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const a=r.type==="wheel",l=!t&&a&&!r.ctrlKey,u=ra(r,e);if(r.ctrlKey&&a&&u&&r.preventDefault(),l||u)return null;r.preventDefault(),n.call(this,r,s)}}function r9({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,l,u;if((a=r.sourceEvent)!=null&&a.internal)return;const s=ih(r.transform);e.mouseButton=((l=r.sourceEvent)==null?void 0:l.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((u=r.sourceEvent)==null?void 0:u.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function s9({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return a=>{var l,u;e.usedRightMouseButton=!!(n&&xC(t,e.mouseButton??0)),(l=a.sourceEvent)!=null&&l.sync||r([a.transform.x,a.transform.y,a.transform.k]),s&&!((u=a.sourceEvent)!=null&&u.internal)&&(s==null||s(a.sourceEvent,ih(a.transform)))}}function o9({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:a}){return l=>{var u;if(!((u=l.sourceEvent)!=null&&u.internal)&&(e.isZoomingOrPanning=!1,a&&xC(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&a(l.sourceEvent),e.usedRightMouseButton=!1,r(!1),s)){const d=ih(l.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(l.sourceEvent,d)},n?150:0)}}}function i9({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:a,userSelectionActive:l,noWheelClassName:u,noPanClassName:d,lib:f,connectionInProgress:m}){return h=>{var w;const g=e||t,x=n&&h.ctrlKey,v=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(ra(h,`${f}-flow__node`)||ra(h,`${f}-flow__edge`)))return!0;if(!r&&!g&&!s&&!a&&!n||l||m&&!v||ra(h,u)&&v||ra(h,d)&&(!v||s&&v&&!e)||!n&&h.ctrlKey&&v)return!1;if(!n&&h.type==="touchstart"&&((w=h.touches)==null?void 0:w.length)>1)return h.preventDefault(),!1;if(!g&&!s&&!x&&v||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||v)&&b}}function a9({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:s,onPanZoom:a,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),h=U5().scaleExtent([t,n]).translateExtent(r),g=On(e).call(h);T({x:s.x,y:s.y,zoom:ba(s.zoom,t,n)},[[0,0],[m.width,m.height]],r);const x=g.on("wheel.zoom"),v=g.on("dblclick.zoom");h.wheelDelta(vC);function b(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?Kl:Ud).transform(qm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function w({noWheelClassName:L,noPanClassName:B,onPaneContextMenu:K,userSelectionActive:V,panOnScroll:Y,panOnDrag:z,panOnScrollMode:H,panOnScrollSpeed:M,preventScrolling:U,zoomOnPinch:F,zoomOnScroll:D,zoomOnDoubleClick:W,zoomActivationKeyPressed:X,lib:Z,onTransformChange:G,connectionInProgress:J,paneClickDistance:ne,selectionOnDrag:te}){V&&!f.isZoomingOrPanning&&j();const se=Y&&!X&&!V;h.clickDistance(te?1/0:!vr(ne)||ne<0?0:ne);const le=se?t9({zoomPanValues:f,noWheelClassName:L,d3Selection:g,d3Zoom:h,panOnScrollMode:H,panOnScrollSpeed:M,zoomOnPinch:F,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}):n9({noWheelClassName:L,preventScrolling:U,d3ZoomHandler:x});if(g.on("wheel.zoom",le,{passive:!1}),!V){const fe=r9({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});h.on("start",fe);const ie=s9({zoomPanValues:f,panOnDrag:z,onPaneContextMenu:!!K,onPanZoom:a,onTransformChange:G});h.on("zoom",ie);const ue=o9({zoomPanValues:f,panOnDrag:z,panOnScroll:Y,onPaneContextMenu:K,onPanZoomEnd:u,onDraggingChange:d});h.on("end",ue)}const de=i9({zoomActivationKeyPressed:X,panOnDrag:z,zoomOnScroll:D,panOnScroll:Y,zoomOnDoubleClick:W,zoomOnPinch:F,userSelectionActive:V,noPanClassName:B,noWheelClassName:L,lib:Z,connectionInProgress:J});h.filter(de),W?g.on("dblclick.zoom",v):g.on("dblclick.zoom",null)}function j(){h.on("zoom",null)}async function T(L,B,K){const V=Gm(L),Y=h==null?void 0:h.constrain()(V,B,K);return Y&&await b(Y),new Promise(z=>z(Y))}async function k(L,B){const K=Gm(L);return await b(K,B),new Promise(V=>V(K))}function E(L){if(g){const B=Gm(L),K=g.property("__zoom");(K.k!==L.zoom||K.x!==L.x||K.y!==L.y)&&(h==null||h.transform(g,B,null,{sync:!0}))}}function N(){const L=g?V5(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function _(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?Kl:Ud).scaleTo(qm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function R(L,B){return g?new Promise(K=>{h==null||h.interpolate((B==null?void 0:B.interpolate)==="linear"?Kl:Ud).scaleBy(qm(g,B==null?void 0:B.duration,B==null?void 0:B.ease,()=>K(!0)),L)}):Promise.resolve(!1)}function A(L){h==null||h.scaleExtent(L)}function P(L){h==null||h.translateExtent(L)}function $(L){const B=!vr(L)||L<0?0:L;h==null||h.clickDistance(B)}return{update:w,destroy:j,setViewport:k,setViewportConstrained:T,getViewport:N,scaleTo:_,scaleBy:R,setScaleExtent:A,setTranslateExtent:P,syncViewport:E,setClickDistance:$}}var ka;(function(e){e.Line="line",e.Handle="handle"})(ka||(ka={}));function l9({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:a}){const l=e-t,u=n-r,d=[l>0?1:l<0?-1:0,u>0?1:u<0?-1:0];return l&&s&&(d[0]=d[0]*-1),u&&a&&(d[1]=d[1]*-1),d}function m2(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function qs(e,t){return Math.max(0,t-e)}function Ks(e,t){return Math.max(0,e-t)}function Sd(e,t,n){return Math.max(0,t-e,e-n)}function g2(e,t){return e?!t:t}function c9(e,t,n,r,s,a,l,u){let{affectsX:d,affectsY:f}=t;const{isHorizontal:m,isVertical:h}=t,g=m&&h,{xSnapped:x,ySnapped:v}=n,{minWidth:b,maxWidth:w,minHeight:j,maxHeight:T}=r,{x:k,y:E,width:N,height:_,aspectRatio:R}=e;let A=Math.floor(m?x-e.pointerX:0),P=Math.floor(h?v-e.pointerY:0);const $=N+(d?-A:A),L=_+(f?-P:P),B=-a[0]*N,K=-a[1]*_;let V=Sd($,b,w),Y=Sd(L,j,T);if(l){let M=0,U=0;d&&A<0?M=qs(k+A+B,l[0][0]):!d&&A>0&&(M=Ks(k+$+B,l[1][0])),f&&P<0?U=qs(E+P+K,l[0][1]):!f&&P>0&&(U=Ks(E+L+K,l[1][1])),V=Math.max(V,M),Y=Math.max(Y,U)}if(u){let M=0,U=0;d&&A>0?M=Ks(k+A,u[0][0]):!d&&A<0&&(M=qs(k+$,u[1][0])),f&&P>0?U=Ks(E+P,u[0][1]):!f&&P<0&&(U=qs(E+L,u[1][1])),V=Math.max(V,M),Y=Math.max(Y,U)}if(s){if(m){const M=Sd($/R,j,T)*R;if(V=Math.max(V,M),l){let U=0;!d&&!f||d&&!f&&g?U=Ks(E+K+$/R,l[1][1])*R:U=qs(E+K+(d?A:-A)/R,l[0][1])*R,V=Math.max(V,U)}if(u){let U=0;!d&&!f||d&&!f&&g?U=qs(E+$/R,u[1][1])*R:U=Ks(E+(d?A:-A)/R,u[0][1])*R,V=Math.max(V,U)}}if(h){const M=Sd(L*R,b,w)/R;if(Y=Math.max(Y,M),l){let U=0;!d&&!f||f&&!d&&g?U=Ks(k+L*R+B,l[1][0])/R:U=qs(k+(f?P:-P)*R+B,l[0][0])/R,Y=Math.max(Y,U)}if(u){let U=0;!d&&!f||f&&!d&&g?U=qs(k+L*R,u[1][0])/R:U=Ks(k+(f?P:-P)*R,u[0][0])/R,Y=Math.max(Y,U)}}}P=P+(P<0?Y:-Y),A=A+(A<0?V:-V),s&&(g?$>L*R?P=(g2(d,f)?-A:A)/R:A=(g2(d,f)?-P:P)*R:m?(P=A/R,f=d):(A=P*R,d=f));const z=d?k+A:k,H=f?E+P:E;return{width:N+(d?-A:A),height:_+(f?-P:P),x:a[0]*A*(d?-1:1)+z,y:a[1]*P*(f?-1:1)+H}}const bC={width:0,height:0,x:0,y:0},u9={...bC,pointerX:0,pointerY:0,aspectRatio:1};function d9(e){return[[0,0],[e.measured.width,e.measured.height]]}function f9(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,a=e.measured.width??0,l=e.measured.height??0,u=n[0]*a,d=n[1]*l;return[[r-u,s-d],[r+a-u,s+l-d]]}function h9({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const a=On(e);let l={controlDirection:m2("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:f,boundaries:m,keepAspectRatio:h,resizeDirection:g,onResizeStart:x,onResize:v,onResizeEnd:b,shouldResize:w}){let j={...bC},T={...u9};l={boundaries:m,resizeDirection:g,keepAspectRatio:h,controlDirection:m2(f)};let k,E=null,N=[],_,R,A,P=!1;const $=T5().on("start",L=>{const{nodeLookup:B,transform:K,snapGrid:V,snapToGrid:Y,nodeOrigin:z,paneDomNode:H}=n();if(k=B.get(t),!k)return;E=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:U}=Xl(L.sourceEvent,{transform:K,snapGrid:V,snapToGrid:Y,containerBounds:E});j={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},T={...j,pointerX:M,pointerY:U,aspectRatio:j.width/j.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=B.get(k.parentId),R=_&&k.extent==="parent"?d9(_):void 0),N=[],A=void 0;for(const[F,D]of B)if(D.parentId===t&&(N.push({id:F,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const W=f9(D,k,D.origin??z);A?A=[[Math.min(W[0][0],A[0][0]),Math.min(W[0][1],A[0][1])],[Math.max(W[1][0],A[1][0]),Math.max(W[1][1],A[1][1])]]:A=W}x==null||x(L,{...j})}).on("drag",L=>{const{transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:Y}=n(),z=Xl(L.sourceEvent,{transform:B,snapGrid:K,snapToGrid:V,containerBounds:E}),H=[];if(!k)return;const{x:M,y:U,width:F,height:D}=j,W={},X=k.origin??Y,{width:Z,height:G,x:J,y:ne}=c9(T,l.controlDirection,z,l.boundaries,l.keepAspectRatio,X,R,A),te=Z!==F,se=G!==D,le=J!==M&&te,de=ne!==U&&se;if(!le&&!de&&!te&&!se)return;if((le||de||X[0]===1||X[1]===1)&&(W.x=le?J:j.x,W.y=de?ne:j.y,j.x=W.x,j.y=W.y,N.length>0)){const xe=J-M,ge=ne-U;for(const Ae of N)Ae.position={x:Ae.position.x-xe+X[0]*(Z-F),y:Ae.position.y-ge+X[1]*(G-D)},H.push(Ae)}if((te||se)&&(W.width=te&&(!l.resizeDirection||l.resizeDirection==="horizontal")?Z:j.width,W.height=se&&(!l.resizeDirection||l.resizeDirection==="vertical")?G:j.height,j.width=W.width,j.height=W.height),_&&k.expandParent){const xe=X[0]*(W.width??0);W.x&&W.x<xe&&(j.x=xe,T.x=T.x-(W.x-xe));const ge=X[1]*(W.height??0);W.y&&W.y<ge&&(j.y=ge,T.y=T.y-(W.y-ge))}const fe=l9({width:j.width,prevWidth:F,height:j.height,prevHeight:D,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),ie={...j,direction:fe};(w==null?void 0:w(L,ie))!==!1&&(P=!0,v==null||v(L,ie),r(W,H))}).on("end",L=>{P&&(b==null||b(L,{...j}),s==null||s({...j}),P=!1)});a.call($)}function d(){a.on(".drag",null)}return{update:u,destroy:d}}var Km={exports:{}},Xm={},Ym={exports:{}},Jm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2;function p9(){if(y2)return Jm;y2=1;var e=jc();function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(h,g){var x=g(),v=r({inst:{value:x,getSnapshot:g}}),b=v[0].inst,w=v[1];return a(function(){b.value=x,b.getSnapshot=g,d(b)&&w({inst:b})},[h,x,g]),s(function(){return d(b)&&w({inst:b}),h(function(){d(b)&&w({inst:b})})},[h]),l(x),x}function d(h){var g=h.getSnapshot;h=h.value;try{var x=g();return!n(h,x)}catch{return!0}}function f(h,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Jm.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Jm}var x2;function m9(){return x2||(x2=1,Ym.exports=p9()),Ym.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function g9(){if(v2)return Xm;v2=1;var e=jc(),t=m9();function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Xm.useSyncExternalStoreWithSelector=function(f,m,h,g,x){var v=a(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=u(function(){function j(_){if(!T){if(T=!0,k=_,_=g(_),x!==void 0&&b.hasValue){var R=b.value;if(x(R,_))return E=R}return E=_}if(R=E,r(k,_))return R;var A=g(_);return x!==void 0&&x(R,A)?(k=_,R):(k=_,E=A)}var T=!1,k,E,N=h===void 0?null:h;return[function(){return j(m())},N===null?void 0:function(){return j(N())}]},[m,h,g,x]);var w=s(f,v[0],v[1]);return l(function(){b.hasValue=!0,b.value=w},[w]),d(w),w},Xm}var b2;function y9(){return b2||(b2=1,Km.exports=g9()),Km.exports}var x9=y9();const v9=Ff(x9),b9={},w2=e=>{let t;const n=new Set,r=(m,h)=>{const g=typeof m=="function"?m(t):m;if(!Object.is(g,t)){const x=t;t=h??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(v=>v(t,x))}},s=()=>t,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(b9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,s,d);return d},w9=e=>e?w2(e):w2,{useDebugValue:S9}=ye,{useSyncExternalStoreWithSelector:k9}=v9,j9=e=>e;function wC(e,t=j9,n){const r=k9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return S9(r),r}const S2=(e,t)=>{const n=w9(e),r=(s,a=t)=>wC(n,s,a);return Object.assign(r,n),r},C9=(e,t)=>e?S2(e,t):S2;function it(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const ah=S.createContext(null),E9=ah.Provider,SC=Hr.error001();function Ge(e,t){const n=S.useContext(ah);if(n===null)throw new Error(SC);return wC(n,e,t)}function lt(){const e=S.useContext(ah);if(e===null)throw new Error(SC);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const k2={display:"none"},_9={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kC="react-flow__node-desc",jC="react-flow__edge-desc",N9="react-flow__aria-live",T9=e=>e.ariaLiveMessage,R9=e=>e.ariaLabelConfig;function I9({rfId:e}){const t=Ge(T9);return o.jsx("div",{id:`${N9}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:_9,children:t})}function A9({rfId:e,disableKeyboardA11y:t}){const n=Ge(R9);return o.jsxs(o.Fragment,{children:[o.jsx("div",{id:`${kC}-${e}`,style:k2,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),o.jsx("div",{id:`${jC}-${e}`,style:k2,children:n["edge.a11yDescription.default"]}),!t&&o.jsx(I9,{rfId:e})]})}const lh=S.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},a)=>{const l=`${e}`.split("-");return o.jsx("div",{className:It(["react-flow__panel",n,...l]),style:r,ref:a,...s,children:t})});lh.displayName="Panel";function P9({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:o.jsx(lh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:o.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const M9=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},kd=e=>e.id;function D9(e,t){return it(e.selectedNodes.map(kd),t.selectedNodes.map(kd))&&it(e.selectedEdges.map(kd),t.selectedEdges.map(kd))}function F9({onSelectionChange:e}){const t=lt(),{selectedNodes:n,selectedEdges:r}=Ge(M9,D9);return S.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(a=>a(s))},[n,r,e]),null}const O9=e=>!!e.onSelectionChangeHandlers;function z9({onSelectionChange:e}){const t=Ge(O9);return e||t?o.jsx(F9,{onSelectionChange:e}):null}const CC=[0,0],$9={x:0,y:0,zoom:1},L9=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],j2=[...L9,"rfId"],B9=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),C2={translateExtent:xc,nodeOrigin:CC,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function W9(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:a,setNodeExtent:l,reset:u,setDefaultNodesAndEdges:d}=Ge(B9,it),f=lt();S.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=C2,u()}),[]);const m=S.useRef(C2);return S.useEffect(()=>{for(const h of j2){const g=e[h],x=m.current[h];g!==x&&(typeof e[h]>"u"||(h==="nodes"?t(g):h==="edges"?n(g):h==="minZoom"?r(g):h==="maxZoom"?s(g):h==="translateExtent"?a(g):h==="nodeExtent"?l(g):h==="ariaLabelConfig"?f.setState({ariaLabelConfig:EB(g)}):h==="fitView"?f.setState({fitViewQueued:g}):h==="fitViewOptions"?f.setState({fitViewOptions:g}):f.setState({[h]:g})))}m.current=e},j2.map(h=>e[h])),null}function E2(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function V9(e){var r;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const s=E2(),a=()=>n(s!=null&&s.matches?"dark":"light");return a(),s==null||s.addEventListener("change",a),()=>{s==null||s.removeEventListener("change",a)}},[e]),t!==null?t:(r=E2())!=null&&r.matches?"dark":"light"}const _2=typeof document<"u"?document:null;function Sc(e=null,t={target:_2,actInsideInputWithModifier:!0}){const[n,r]=S.useState(!1),s=S.useRef(!1),a=S.useRef(new Set([])),[l,u]=S.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=f.reduce((h,g)=>h.concat(...g),[]);return[f,m]}return[[],[]]},[e]);return S.useEffect(()=>{const d=(t==null?void 0:t.target)??_2,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const m=x=>{var w,j;if(s.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!s.current||s.current&&!f)&&rC(x))return!1;const b=T2(x.code,u);if(a.current.add(x[b]),N2(l,a.current,!1)){const T=((j=(w=x.composedPath)==null?void 0:w.call(x))==null?void 0:j[0])||x.target,k=(T==null?void 0:T.nodeName)==="BUTTON"||(T==null?void 0:T.nodeName)==="A";t.preventDefault!==!1&&(s.current||!k)&&x.preventDefault(),r(!0)}},h=x=>{const v=T2(x.code,u);N2(l,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(x[v]),x.key==="Meta"&&a.current.clear(),s.current=!1},g=()=>{a.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",h),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",h),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function N2(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function T2(e,t){return t.includes(e)?"code":"key"}const U9=()=>{const e=lt();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,a],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:a,maxZoom:l,panZoom:u}=e.getState(),d=My(t,r,s,a,l,(n==null?void 0:n.padding)??.1);return u?(await u.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:a,domNode:l}=e.getState();if(!l)return t;const{x:u,y:d}=l.getBoundingClientRect(),f={x:t.x-u,y:t.y-d},m=n.snapGrid??s,h=n.snapToGrid??a;return $c(f,r,h,m)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:a}=r.getBoundingClientRect(),l=kf(t,n);return{x:l.x+s,y:l.y+a}}}),[])};function EC(e,t){const n=[],r=new Map,s=[];for(const a of e)if(a.type==="add"){s.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const l=r.get(a.id);l?l.push(a):r.set(a.id,[a])}for(const a of t){const l=r.get(a.id);if(!l){n.push(a);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const u={...a};for(const d of l)H9(d,u);n.push(u)}return s.length&&s.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function H9(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function _C(e,t){return EC(e,t)}function NC(e,t){return EC(e,t)}function Vo(e,t){return{id:e,type:"select",selected:t}}function sa(e,t=new Set,n=!1){const r=[];for(const[s,a]of e){const l=t.has(s);!(a.selected===void 0&&!l)&&a.selected!==l&&(n&&(a.selected=l),r.push(Vo(a.id,l)))}return r}function R2({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,l]of e.entries()){const u=t.get(l.id),d=((s=u==null?void 0:u.internals)==null?void 0:s.userNode)??u;d!==void 0&&d!==l&&n.push({id:l.id,item:l,type:"replace"}),d===void 0&&n.push({item:l,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function I2(e){return{id:e.id,type:"remove"}}const A2=e=>gB(e),G9=e=>X5(e);function TC(e){return S.forwardRef(e)}const q9=typeof window<"u"?S.useLayoutEffect:S.useEffect;function P2(e){const[t,n]=S.useState(BigInt(0)),[r]=S.useState(()=>K9(()=>n(s=>s+BigInt(1))));return q9(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function K9(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const RC=S.createContext(null);function X9({children:e}){const t=lt(),n=S.useCallback(u=>{const{nodes:d=[],setNodes:f,hasDefaultNodes:m,onNodesChange:h,nodeLookup:g,fitViewQueued:x,onNodesChangeMiddlewareMap:v}=t.getState();let b=d;for(const j of u)b=typeof j=="function"?j(b):j;let w=R2({items:b,lookup:g});for(const j of v.values())w=j(w);m&&f(b),w.length>0?h==null||h(w):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:j,nodes:T,setNodes:k}=t.getState();j&&k(T)})},[]),r=P2(n),s=S.useCallback(u=>{const{edges:d=[],setEdges:f,hasDefaultEdges:m,onEdgesChange:h,edgeLookup:g}=t.getState();let x=d;for(const v of u)x=typeof v=="function"?v(x):v;m?f(x):h&&h(R2({items:x,lookup:g}))},[]),a=P2(s),l=S.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return o.jsx(RC.Provider,{value:l,children:e})}function Y9(){const e=S.useContext(RC);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const J9=e=>!!e.panZoom;function By(){const e=U9(),t=lt(),n=Y9(),r=Ge(J9),s=S.useMemo(()=>{const a=h=>t.getState().nodeLookup.get(h),l=h=>{n.nodeQueue.push(h)},u=h=>{n.edgeQueue.push(h)},d=h=>{var j,T;const{nodeLookup:g,nodeOrigin:x}=t.getState(),v=A2(h)?h:g.get(h.id),b=v.parentId?tC(v.position,v.measured,v.parentId,g,x):v.position,w={...v,position:b,width:((j=v.measured)==null?void 0:j.width)??v.width,height:((T=v.measured)==null?void 0:T.height)??v.height};return wa(w)},f=(h,g,x={replace:!1})=>{l(v=>v.map(b=>{if(b.id===h){const w=typeof g=="function"?g(b):g;return x.replace&&A2(w)?w:{...b,...w}}return b}))},m=(h,g,x={replace:!1})=>{u(v=>v.map(b=>{if(b.id===h){const w=typeof g=="function"?g(b):g;return x.replace&&G9(w)?w:{...b,...w}}return b}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var g;return(g=a(h))==null?void 0:g.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(g=>({...g}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:l,setEdges:u,addNodes:h=>{const g=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:x}=t.getState(),[v,b,w]=x;return{nodes:h.map(j=>({...j})),edges:g.map(j=>({...j})),viewport:{x:v,y:b,zoom:w}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:x,edges:v,onNodesDelete:b,onEdgesDelete:w,triggerNodeChanges:j,triggerEdgeChanges:T,onDelete:k,onBeforeDelete:E}=t.getState(),{nodes:N,edges:_}=await wB({nodesToRemove:h,edgesToRemove:g,nodes:x,edges:v,onBeforeDelete:E}),R=_.length>0,A=N.length>0;if(R){const P=_.map(I2);w==null||w(_),T(P)}if(A){const P=N.map(I2);b==null||b(N),j(P)}return(A||R)&&(k==null||k({nodes:N,edges:_})),{deletedNodes:N,deletedEdges:_}},getIntersectingNodes:(h,g=!0,x)=>{const v=s2(h),b=v?h:d(h),w=x!==void 0;return b?(x||t.getState().nodes).filter(j=>{const T=t.getState().nodeLookup.get(j.id);if(T&&!v&&(j.id===h.id||!T.internals.positionAbsolute))return!1;const k=wa(w?j:T),E=bc(k,b);return g&&E>0||E>=k.width*k.height||E>=b.width*b.height}):[]},isNodeIntersecting:(h,g,x=!0)=>{const b=s2(h)?h:d(h);if(!b)return!1;const w=bc(b,g);return x&&w>0||w>=g.width*g.height||w>=b.width*b.height},updateNode:f,updateNodeData:(h,g,x={replace:!1})=>{f(h,v=>{const b=typeof g=="function"?g(v):g;return x.replace?{...v,data:b}:{...v,data:{...v.data,...b}}},x)},updateEdge:m,updateEdgeData:(h,g,x={replace:!1})=>{m(h,v=>{const b=typeof g=="function"?g(v):g;return x.replace?{...v,data:b}:{...v,data:{...v.data,...b}}},x)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:x}=t.getState();return yB(h,{nodeLookup:g,nodeOrigin:x})},getHandleConnections:({type:h,id:g,nodeId:x})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${x}-${h}${g?`-${g}`:""}`))==null?void 0:v.values())??[])},getNodeConnections:({type:h,handleId:g,nodeId:x})=>{var v;return Array.from(((v=t.getState().connectionLookup.get(`${x}${h?g?`-${h}-${g}`:`-${h}`:""}`))==null?void 0:v.values())??[])},fitView:async h=>{const g=t.getState().fitViewResolver??CB();return t.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:g}),n.nodeQueue.push(x=>[...x]),g.promise}}},[]);return S.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const M2=e=>e.selected,Q9=typeof window<"u"?window:void 0;function Z9({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=lt(),{deleteElements:r}=By(),s=Sc(e,{actInsideInputWithModifier:!1}),a=Sc(t,{target:Q9});S.useEffect(()=>{if(s){const{edges:l,nodes:u}=n.getState();r({nodes:u.filter(M2),edges:l.filter(M2)}),n.setState({nodesSelectionActive:!1})}},[s]),S.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function e7(e){const t=lt();S.useEffect(()=>{const n=()=>{var s,a,l,u;if(!e.current||!(((a=(s=e.current).checkVisibility)==null?void 0:a.call(s))??!0))return!1;const r=Dy(e.current);(r.height===0||r.width===0)&&((u=(l=t.getState()).onError)==null||u.call(l,"004",Hr.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const ch={position:"absolute",width:"100%",height:"100%",top:0,left:0},t7=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function n7({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:a=Qo.Free,zoomOnDoubleClick:l=!0,panOnDrag:u=!0,defaultViewport:d,translateExtent:f,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:x=!0,children:v,noWheelClassName:b,noPanClassName:w,onViewportChange:j,isControlledViewport:T,paneClickDistance:k,selectionOnDrag:E}){const N=lt(),_=S.useRef(null),{userSelectionActive:R,lib:A,connectionInProgress:P}=Ge(t7,it),$=Sc(g),L=S.useRef();e7(_);const B=S.useCallback(K=>{j==null||j({x:K[0],y:K[1],zoom:K[2]}),T||N.setState({transform:K})},[j,T]);return S.useEffect(()=>{if(_.current){L.current=a9({domNode:_.current,minZoom:m,maxZoom:h,translateExtent:f,viewport:d,onDraggingChange:z=>N.setState({paneDragging:z}),onPanZoomStart:(z,H)=>{const{onViewportChangeStart:M,onMoveStart:U}=N.getState();U==null||U(z,H),M==null||M(H)},onPanZoom:(z,H)=>{const{onViewportChange:M,onMove:U}=N.getState();U==null||U(z,H),M==null||M(H)},onPanZoomEnd:(z,H)=>{const{onViewportChangeEnd:M,onMoveEnd:U}=N.getState();U==null||U(z,H),M==null||M(H)}});const{x:K,y:V,zoom:Y}=L.current.getViewport();return N.setState({panZoom:L.current,transform:[K,V,Y],domNode:_.current.closest(".react-flow")}),()=>{var z;(z=L.current)==null||z.destroy()}}},[]),S.useEffect(()=>{var K;(K=L.current)==null||K.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:a,zoomOnDoubleClick:l,panOnDrag:u,zoomActivationKeyPressed:$,preventScrolling:x,noPanClassName:w,userSelectionActive:R,noWheelClassName:b,lib:A,onTransformChange:B,connectionInProgress:P,selectionOnDrag:E,paneClickDistance:k})},[e,t,n,r,s,a,l,u,$,x,w,R,b,A,B,P,E,k]),o.jsx("div",{className:"react-flow__renderer",ref:_,style:ch,children:v})}const r7=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function s7(){const{userSelectionActive:e,userSelectionRect:t}=Ge(r7,it);return e&&t?o.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Qm=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},o7=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function i7({isSelecting:e,selectionKeyPressed:t,selectionMode:n=vc.Full,panOnDrag:r,paneClickDistance:s,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:m,onPaneMouseEnter:h,onPaneMouseMove:g,onPaneMouseLeave:x,children:v}){const b=lt(),{userSelectionActive:w,elementsSelectable:j,dragging:T,connectionInProgress:k}=Ge(o7,it),E=j&&(e||w),N=S.useRef(null),_=S.useRef(),R=S.useRef(new Set),A=S.useRef(new Set),P=S.useRef(!1),$=M=>{if(P.current||k){P.current=!1;return}d==null||d(M),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},L=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}f==null||f(M)},B=m?M=>m(M):void 0,K=M=>{P.current&&(M.stopPropagation(),P.current=!1)},V=M=>{var G,J;const{domNode:U}=b.getState();if(_.current=U==null?void 0:U.getBoundingClientRect(),!_.current)return;const F=M.target===N.current;if(!F&&!!M.target.closest(".nokey")||!e||!(a&&F||t)||M.button!==0||!M.isPrimary)return;(J=(G=M.target)==null?void 0:G.setPointerCapture)==null||J.call(G,M.pointerId),P.current=!1;const{x:X,y:Z}=br(M.nativeEvent,_.current);b.setState({userSelectionRect:{width:0,height:0,startX:X,startY:Z,x:X,y:Z}}),F||(M.stopPropagation(),M.preventDefault())},Y=M=>{const{userSelectionRect:U,transform:F,nodeLookup:D,edgeLookup:W,connectionLookup:X,triggerNodeChanges:Z,triggerEdgeChanges:G,defaultEdgeOptions:J,resetSelectedElements:ne}=b.getState();if(!_.current||!U)return;const{x:te,y:se}=br(M.nativeEvent,_.current),{startX:le,startY:de}=U;if(!P.current){const ge=t?0:s;if(Math.hypot(te-le,se-de)<=ge)return;ne(),l==null||l(M)}P.current=!0;const fe={startX:le,startY:de,x:te<le?te:le,y:se<de?se:de,width:Math.abs(te-le),height:Math.abs(se-de)},ie=R.current,ue=A.current;R.current=new Set(Py(D,fe,F,n===vc.Partial,!0).map(ge=>ge.id)),A.current=new Set;const xe=(J==null?void 0:J.selectable)??!0;for(const ge of R.current){const Ae=X.get(ge);if(Ae)for(const{edgeId:Ve}of Ae.values()){const ze=W.get(Ve);ze&&(ze.selectable??xe)&&A.current.add(Ve)}}if(!o2(ie,R.current)){const ge=sa(D,R.current,!0);Z(ge)}if(!o2(ue,A.current)){const ge=sa(W,A.current);G(ge)}b.setState({userSelectionRect:fe,userSelectionActive:!0,nodesSelectionActive:!1})},z=M=>{var U,F;M.button===0&&((F=(U=M.target)==null?void 0:U.releasePointerCapture)==null||F.call(U,M.pointerId),!w&&M.target===N.current&&b.getState().userSelectionRect&&($==null||$(M)),b.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(u==null||u(M),b.setState({nodesSelectionActive:R.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return o.jsxs("div",{className:It(["react-flow__pane",{draggable:H,dragging:T,selection:e}]),onClick:E?void 0:Qm($,N),onContextMenu:Qm(L,N),onWheel:Qm(B,N),onPointerEnter:E?void 0:h,onPointerMove:E?Y:g,onPointerUp:E?z:void 0,onPointerDownCapture:E?V:void 0,onClickCapture:E?K:void 0,onPointerLeave:x,ref:N,style:ch,children:[v,o.jsx(s7,{})]})}function d0({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:l,nodeLookup:u,onError:d}=t.getState(),f=u.get(e);if(!f){d==null||d("012",Hr.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&l)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var m;return(m=r==null?void 0:r.current)==null?void 0:m.blur()})):s([e])}function IC({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,nodeClickDistance:l}){const u=lt(),[d,f]=S.useState(!1),m=S.useRef();return S.useEffect(()=>{m.current=qB({getStoreItems:()=>u.getState(),onNodeMouseDown:h=>{d0({id:h,store:u,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),S.useEffect(()=>{var h,g;if(t)(h=m.current)==null||h.destroy();else if(e.current)return(g=m.current)==null||g.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:s,nodeClickDistance:l}),()=>{var x;(x=m.current)==null||x.destroy()}},[n,r,t,a,e,s]),d}const a7=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function AC(){const e=lt();return S.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:a,nodesDraggable:l,onError:u,updateNodePositions:d,nodeLookup:f,nodeOrigin:m}=e.getState(),h=new Map,g=a7(l),x=s?a[0]:5,v=s?a[1]:5,b=n.direction.x*x*n.factor,w=n.direction.y*v*n.factor;for(const[,j]of f){if(!g(j))continue;let T={x:j.internals.positionAbsolute.x+b,y:j.internals.positionAbsolute.y+w};s&&(T=zc(T,a));const{position:k,positionAbsolute:E}=Y5({nodeId:j.id,nextPosition:T,nodeLookup:f,nodeExtent:r,nodeOrigin:m,onError:u});j.position=k,j.internals.positionAbsolute=E,h.set(j.id,j)}d(h)},[])}const Wy=S.createContext(null),l7=Wy.Provider;Wy.Consumer;const PC=()=>S.useContext(Wy),c7=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),u7=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:a,connection:l}=r,{fromHandle:u,toHandle:d,isValid:f}=l,m=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n,connectingTo:m,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:a===va.Strict?(u==null?void 0:u.type)!==n:e!==(u==null?void 0:u.nodeId)||t!==(u==null?void 0:u.id),connectionInProcess:!!u,clickConnectionInProcess:!!s,valid:m&&f}};function d7({type:e="source",position:t=Se.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:l,onConnect:u,children:d,className:f,onMouseDown:m,onTouchStart:h,...g},x){var Y,z;const v=l||null,b=e==="target",w=lt(),j=PC(),{connectOnClick:T,noPanClassName:k,rfId:E}=Ge(c7,it),{connectingFrom:N,connectingTo:_,clickConnecting:R,isPossibleEndHandle:A,connectionInProcess:P,clickConnectionInProcess:$,valid:L}=Ge(u7(j,v,e),it);j||(z=(Y=w.getState()).onError)==null||z.call(Y,"010",Hr.error010());const B=H=>{const{defaultEdgeOptions:M,onConnect:U,hasDefaultEdges:F}=w.getState(),D={...M,...H};if(F){const{edges:W,setEdges:X}=w.getState();X(lC(D,W))}U==null||U(D),u==null||u(D)},K=H=>{if(!j)return;const M=sC(H.nativeEvent);if(s&&(M&&H.button===0||!M)){const U=w.getState();u0.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:b,handleId:v,nodeId:j,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:B,isValidConnection:n||U.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}M?m==null||m(H):h==null||h(H)},V=H=>{const{onClickConnectStart:M,onClickConnectEnd:U,connectionClickStartHandle:F,connectionMode:D,isValidConnection:W,lib:X,rfId:Z,nodeLookup:G,connection:J}=w.getState();if(!j||!F&&!s)return;if(!F){M==null||M(H.nativeEvent,{nodeId:j,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:j,type:e,id:v}});return}const ne=nC(H.target),te=n||W,{connection:se,isValid:le}=u0.isValid(H.nativeEvent,{handle:{nodeId:j,id:v,type:e},connectionMode:D,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:te,flowId:Z,doc:ne,lib:X,nodeLookup:G});le&&se&&B(se);const de=structuredClone(J);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,U==null||U(H,de),w.setState({connectionClickStartHandle:null})};return o.jsx("div",{"data-handleid":v,"data-nodeid":j,"data-handlepos":t,"data-id":`${E}-${j}-${v}-${e}`,className:It(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,f,{source:!b,target:b,connectable:r,connectablestart:s,connectableend:a,clickconnecting:R,connectingfrom:N,connectingto:_,valid:L,connectionindicator:r&&(!P||A)&&(P||$?a:s)}]),onMouseDown:K,onTouchStart:K,onClick:T?V:void 0,ref:x,...g,children:d})}const Tt=S.memo(TC(d7));function f7({data:e,isConnectable:t,sourcePosition:n=Se.Bottom}){return o.jsxs(o.Fragment,{children:[e==null?void 0:e.label,o.jsx(Tt,{type:"source",position:n,isConnectable:t})]})}function h7({data:e,isConnectable:t,targetPosition:n=Se.Top,sourcePosition:r=Se.Bottom}){return o.jsxs(o.Fragment,{children:[o.jsx(Tt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,o.jsx(Tt,{type:"source",position:r,isConnectable:t})]})}function p7(){return null}function m7({data:e,isConnectable:t,targetPosition:n=Se.Top}){return o.jsxs(o.Fragment,{children:[o.jsx(Tt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const jf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},D2={input:f7,default:h7,output:m7,group:p7};function g7(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const y7=e=>{const{width:t,height:n,x:r,y:s}=Oc(e.nodeLookup,{filter:a=>!!a.selected});return{width:vr(t)?t:null,height:vr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function x7({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=lt(),{width:s,height:a,transformString:l,userSelectionActive:u}=Ge(y7,it),d=AC(),f=S.useRef(null);if(S.useEffect(()=>{var g;n||(g=f.current)==null||g.focus({preventScroll:!0})},[n]),IC({nodeRef:f}),u||!s||!a)return null;const m=e?g=>{const x=r.getState().nodes.filter(v=>v.selected);e(g,x)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(jf,g.key)&&(g.preventDefault(),d({direction:jf[g.key],factor:g.shiftKey?4:1}))};return o.jsx("div",{className:It(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:o.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:s,height:a}})})}const F2=typeof window<"u"?window:void 0,v7=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function MC({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:u,deleteKeyCode:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:b,zoomActivationKeyCode:w,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:N,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:A,defaultViewport:P,translateExtent:$,minZoom:L,maxZoom:B,preventScrolling:K,onSelectionContextMenu:V,noWheelClassName:Y,noPanClassName:z,disableKeyboardA11y:H,onViewportChange:M,isControlledViewport:U}){const{nodesSelectionActive:F,userSelectionActive:D}=Ge(v7,it),W=Sc(f,{target:F2}),X=Sc(b,{target:F2}),Z=X||A,G=X||E,J=m&&Z!==!0,ne=W||D||J;return Z9({deleteKeyCode:d,multiSelectionKeyCode:v}),o.jsx(n7,{onPaneContextMenu:a,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:G,panOnScrollSpeed:N,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:!W&&Z,defaultViewport:P,translateExtent:$,minZoom:L,maxZoom:B,zoomActivationKeyCode:w,preventScrolling:K,noWheelClassName:Y,noPanClassName:z,onViewportChange:M,isControlledViewport:U,paneClickDistance:u,selectionOnDrag:J,children:o.jsxs(i7,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:Z,isSelecting:!!ne,selectionMode:h,selectionKeyPressed:W,paneClickDistance:u,selectionOnDrag:J,children:[e,F&&o.jsx(x7,{onSelectionContextMenu:V,noPanClassName:z,disableKeyboardA11y:H})]})})}MC.displayName="FlowRenderer";const b7=S.memo(MC),w7=e=>t=>e?Py(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function S7(e){return Ge(S.useCallback(w7(e),[e]),it)}const k7=e=>e.updateNodeInternals;function j7(){const e=Ge(k7),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const a=s.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:s.target,force:!0})}),e(r)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function C7({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=lt(),a=S.useRef(null),l=S.useRef(null),u=S.useRef(e.sourcePosition),d=S.useRef(e.targetPosition),f=S.useRef(t),m=n&&!!e.internals.handleBounds;return S.useEffect(()=>{a.current&&!e.hidden&&(!m||l.current!==a.current)&&(l.current&&(r==null||r.unobserve(l.current)),r==null||r.observe(a.current),l.current=a.current)},[m,e.hidden]),S.useEffect(()=>()=>{l.current&&(r==null||r.unobserve(l.current),l.current=null)},[]),S.useEffect(()=>{if(a.current){const h=f.current!==t,g=u.current!==e.sourcePosition,x=d.current!==e.targetPosition;(h||g||x)&&(f.current=t,u.current=e.sourcePosition,d.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function E7({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:a,onDoubleClick:l,nodesDraggable:u,elementsSelectable:d,nodesConnectable:f,nodesFocusable:m,resizeObserver:h,noDragClassName:g,noPanClassName:x,disableKeyboardA11y:v,rfId:b,nodeTypes:w,nodeClickDistance:j,onError:T}){const{node:k,internals:E,isParent:N}=Ge(te=>{const se=te.nodeLookup.get(e),le=te.parentLookup.has(e);return{node:se,internals:se.internals,isParent:le}},it);let _=k.type||"default",R=(w==null?void 0:w[_])||D2[_];R===void 0&&(T==null||T("003",Hr.error003(_)),_="default",R=(w==null?void 0:w.default)||D2.default);const A=!!(k.draggable||u&&typeof k.draggable>"u"),P=!!(k.selectable||d&&typeof k.selectable>"u"),$=!!(k.connectable||f&&typeof k.connectable>"u"),L=!!(k.focusable||m&&typeof k.focusable>"u"),B=lt(),K=eC(k),V=C7({node:k,nodeType:_,hasDimensions:K,resizeObserver:h}),Y=IC({nodeRef:V,disabled:k.hidden||!A,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:j}),z=AC();if(k.hidden)return null;const H=ks(k),M=g7(k),U=P||A||t||n||r||s,F=n?te=>n(te,{...E.userNode}):void 0,D=r?te=>r(te,{...E.userNode}):void 0,W=s?te=>s(te,{...E.userNode}):void 0,X=a?te=>a(te,{...E.userNode}):void 0,Z=l?te=>l(te,{...E.userNode}):void 0,G=te=>{const{selectNodesOnDrag:se,nodeDragThreshold:le}=B.getState();P&&(!se||!A||le>0)&&d0({id:e,store:B,nodeRef:V}),t&&t(te,{...E.userNode})},J=te=>{if(!(rC(te.nativeEvent)||v)){if(H5.includes(te.key)&&P){const se=te.key==="Escape";d0({id:e,store:B,unselect:se,nodeRef:V})}else if(A&&k.selected&&Object.prototype.hasOwnProperty.call(jf,te.key)){te.preventDefault();const{ariaLabelConfig:se}=B.getState();B.setState({ariaLiveMessage:se["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~E.positionAbsolute.x,y:~~E.positionAbsolute.y})}),z({direction:jf[te.key],factor:te.shiftKey?4:1})}}},ne=()=>{var ue;if(v||!((ue=V.current)!=null&&ue.matches(":focus-visible")))return;const{transform:te,width:se,height:le,autoPanOnNodeFocus:de,setCenter:fe}=B.getState();if(!de)return;Py(new Map([[e,k]]),{x:0,y:0,width:se,height:le},te,!0).length>0||fe(k.position.x+H.width/2,k.position.y+H.height/2,{zoom:te[2]})};return o.jsx("div",{className:It(["react-flow__node",`react-flow__node-${_}`,{[x]:A},k.className,{selected:k.selected,selectable:P,parent:N,draggable:A,dragging:Y}]),ref:V,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:U?"all":"none",visibility:K?"visible":"hidden",...k.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:F,onMouseMove:D,onMouseLeave:W,onContextMenu:X,onClick:G,onDoubleClick:Z,onKeyDown:L?J:void 0,tabIndex:L?0:void 0,onFocus:L?ne:void 0,role:k.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${kC}-${b}`,"aria-label":k.ariaLabel,...k.domAttributes,children:o.jsx(l7,{value:e,children:o.jsx(R,{id:e,data:k.data,type:_,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:k.selected??!1,selectable:P,draggable:A,deletable:k.deletable??!0,isConnectable:$,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:Y,dragHandle:k.dragHandle,zIndex:E.z,parentId:k.parentId,...H})})})}var _7=S.memo(E7);const N7=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function DC(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:a}=Ge(N7,it),l=S7(e.onlyRenderVisibleElements),u=j7();return o.jsx("div",{className:"react-flow__nodes",style:ch,children:l.map(d=>o.jsx(_7,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:a},d))})}DC.displayName="NodeRenderer";const T7=S.memo(DC);function R7(e){return Ge(S.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const a=n.nodeLookup.get(s.source),l=n.nodeLookup.get(s.target);a&&l&&TB({sourceNode:a,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),it)}const I7=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return o.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},A7=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return o.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},O2={[wf.Arrow]:I7,[wf.ArrowClosed]:A7};function P7(e){const t=lt();return S.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(O2,e)?O2[e]:((a=(s=t.getState()).onError)==null||a.call(s,"009",Hr.error009(e)),null)},[e])}const M7=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const d=P7(t);return d?o.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0",children:o.jsx(d,{color:n,strokeWidth:l})}):null},FC=({defaultColor:e,rfId:t})=>{const n=Ge(a=>a.edges),r=Ge(a=>a.defaultEdgeOptions),s=S.useMemo(()=>FB(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?o.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:o.jsx("defs",{children:s.map(a=>o.jsx(M7,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};FC.displayName="MarkerDefinitions";var D7=S.memo(FC);function OC({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:a,labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...m}){const[h,g]=S.useState({x:1,y:0,width:0,height:0}),x=It(["react-flow__edge-textwrapper",f]),v=S.useRef(null);return S.useEffect(()=>{if(v.current){const b=v.current.getBBox();g({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),n?o.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...m,children:[s&&o.jsx("rect",{width:h.width+2*l[0],x:-l[0],y:-l[1],height:h.height+2*l[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),o.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:v,style:r,children:n}),d]}):null}OC.displayName="EdgeText";const F7=S.memo(OC);function uh({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,interactionWidth:f=20,...m}){return o.jsxs(o.Fragment,{children:[o.jsx("path",{...m,d:e,fill:"none",className:It(["react-flow__edge-path",m.className])}),f?o.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&vr(t)&&vr(n)?o.jsx(F7,{x:t,y:n,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function z2({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===Se.Left||e===Se.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function zC({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:s,targetPosition:a=Se.Top}){const[l,u]=z2({pos:n,x1:e,y1:t,x2:r,y2:s}),[d,f]=z2({pos:a,x1:r,y1:s,x2:e,y2:t}),[m,h,g,x]=oC({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${e},${t} C${l},${u} ${d},${f} ${r},${s}`,m,h,g,x]}function $C(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:l,targetPosition:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:v,markerEnd:b,markerStart:w,interactionWidth:j})=>{const[T,k,E]=zC({sourceX:n,sourceY:r,sourcePosition:l,targetX:s,targetY:a,targetPosition:u}),N=e.isInternal?void 0:t;return o.jsx(uh,{id:N,path:T,labelX:k,labelY:E,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:v,markerEnd:b,markerStart:w,interactionWidth:j})})}const O7=$C({isInternal:!1}),LC=$C({isInternal:!0});O7.displayName="SimpleBezierEdge";LC.displayName="SimpleBezierEdgeInternal";function BC(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,sourcePosition:x=Se.Bottom,targetPosition:v=Se.Top,markerEnd:b,markerStart:w,pathOptions:j,interactionWidth:T})=>{const[k,E,N]=a0({sourceX:n,sourceY:r,sourcePosition:x,targetX:s,targetY:a,targetPosition:v,borderRadius:j==null?void 0:j.borderRadius,offset:j==null?void 0:j.offset,stepPosition:j==null?void 0:j.stepPosition}),_=e.isInternal?void 0:t;return o.jsx(uh,{id:_,path:k,labelX:E,labelY:N,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:b,markerStart:w,interactionWidth:T})})}const WC=BC({isInternal:!1}),VC=BC({isInternal:!0});WC.displayName="SmoothStepEdge";VC.displayName="SmoothStepEdgeInternal";function UC(e){return S.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return o.jsx(WC,{...n,id:r,pathOptions:S.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const z7=UC({isInternal:!1}),HC=UC({isInternal:!0});z7.displayName="StepEdge";HC.displayName="StepEdgeInternal";function GC(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:v,interactionWidth:b})=>{const[w,j,T]=cC({sourceX:n,sourceY:r,targetX:s,targetY:a}),k=e.isInternal?void 0:t;return o.jsx(uh,{id:k,path:w,labelX:j,labelY:T,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:v,interactionWidth:b})})}const $7=GC({isInternal:!1}),qC=GC({isInternal:!0});$7.displayName="StraightEdge";qC.displayName="StraightEdgeInternal";function KC(e){return S.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:l=Se.Bottom,targetPosition:u=Se.Top,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:v,markerEnd:b,markerStart:w,pathOptions:j,interactionWidth:T})=>{const[k,E,N]=iC({sourceX:n,sourceY:r,sourcePosition:l,targetX:s,targetY:a,targetPosition:u,curvature:j==null?void 0:j.curvature}),_=e.isInternal?void 0:t;return o.jsx(uh,{id:_,path:k,labelX:E,labelY:N,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:v,markerEnd:b,markerStart:w,interactionWidth:T})})}const L7=KC({isInternal:!1}),XC=KC({isInternal:!0});L7.displayName="BezierEdge";XC.displayName="BezierEdgeInternal";const $2={default:XC,straight:qC,step:HC,smoothstep:VC,simplebezier:LC},L2={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},B7=(e,t,n)=>n===Se.Left?e-t:n===Se.Right?e+t:e,W7=(e,t,n)=>n===Se.Top?e-t:n===Se.Bottom?e+t:e,B2="react-flow__edgeupdater";function W2({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:l,type:u}){return o.jsx("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:l,className:It([B2,`${B2}-${u}`]),cx:B7(t,r,e),cy:W7(n,r,e),r,stroke:"transparent",fill:"transparent"})}function V7({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:a,targetY:l,sourcePosition:u,targetPosition:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:h,setReconnecting:g,setUpdateHover:x}){const v=lt(),b=(E,N)=>{if(E.button!==0)return;const{autoPanOnConnect:_,domNode:R,isValidConnection:A,connectionMode:P,connectionRadius:$,lib:L,onConnectStart:B,onConnectEnd:K,cancelConnection:V,nodeLookup:Y,rfId:z,panBy:H,updateConnection:M}=v.getState(),U=N.type==="target",F=(X,Z)=>{g(!1),h==null||h(X,n,N.type,Z)},D=X=>f==null?void 0:f(n,X),W=(X,Z)=>{g(!0),m==null||m(E,n,N.type),B==null||B(X,Z)};u0.onPointerDown(E.nativeEvent,{autoPanOnConnect:_,connectionMode:P,connectionRadius:$,domNode:R,handleId:N.id,nodeId:N.nodeId,nodeLookup:Y,isTarget:U,edgeUpdaterType:N.type,lib:L,flowId:z,cancelConnection:V,panBy:H,isValidConnection:A,onConnect:D,onConnectStart:W,onConnectEnd:K,onReconnectEnd:F,updateConnection:M,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,dragThreshold:v.getState().connectionDragThreshold,handleDomNode:E.currentTarget})},w=E=>b(E,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),j=E=>b(E,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>x(!0),k=()=>x(!1);return o.jsxs(o.Fragment,{children:[(e===!0||e==="source")&&o.jsx(W2,{position:u,centerX:r,centerY:s,radius:t,onMouseDown:w,onMouseEnter:T,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&o.jsx(W2,{position:d,centerX:a,centerY:l,radius:t,onMouseDown:j,onMouseEnter:T,onMouseOut:k,type:"target"})]})}function U7({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,rfId:v,edgeTypes:b,noPanClassName:w,onError:j,disableKeyboardA11y:T}){let k=Ge(fe=>fe.edgeLookup.get(e));const E=Ge(fe=>fe.defaultEdgeOptions);k=E?{...E,...k}:k;let N=k.type||"default",_=(b==null?void 0:b[N])||$2[N];_===void 0&&(j==null||j("011",Hr.error011(N)),N="default",_=(b==null?void 0:b.default)||$2.default);const R=!!(k.focusable||t&&typeof k.focusable>"u"),A=typeof h<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),P=!!(k.selectable||r&&typeof k.selectable>"u"),$=S.useRef(null),[L,B]=S.useState(!1),[K,V]=S.useState(!1),Y=lt(),{zIndex:z,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W}=Ge(S.useCallback(fe=>{const ie=fe.nodeLookup.get(k.source),ue=fe.nodeLookup.get(k.target);if(!ie||!ue)return{zIndex:k.zIndex,...L2};const xe=DB({id:e,sourceNode:ie,targetNode:ue,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:fe.connectionMode,onError:j});return{zIndex:NB({selected:k.selected,zIndex:k.zIndex,sourceNode:ie,targetNode:ue,elevateOnSelect:fe.elevateEdgesOnSelect,zIndexMode:fe.zIndexMode}),...xe||L2}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),it),X=S.useMemo(()=>k.markerStart?`url('#${l0(k.markerStart,v)}')`:void 0,[k.markerStart,v]),Z=S.useMemo(()=>k.markerEnd?`url('#${l0(k.markerEnd,v)}')`:void 0,[k.markerEnd,v]);if(k.hidden||H===null||M===null||U===null||F===null)return null;const G=fe=>{var ge;const{addSelectedEdges:ie,unselectNodesAndEdges:ue,multiSelectionActive:xe}=Y.getState();P&&(Y.setState({nodesSelectionActive:!1}),k.selected&&xe?(ue({nodes:[],edges:[k]}),(ge=$.current)==null||ge.blur()):ie([e])),s&&s(fe,k)},J=a?fe=>{a(fe,{...k})}:void 0,ne=l?fe=>{l(fe,{...k})}:void 0,te=u?fe=>{u(fe,{...k})}:void 0,se=d?fe=>{d(fe,{...k})}:void 0,le=f?fe=>{f(fe,{...k})}:void 0,de=fe=>{var ie;if(!T&&H5.includes(fe.key)&&P){const{unselectNodesAndEdges:ue,addSelectedEdges:xe}=Y.getState();fe.key==="Escape"?((ie=$.current)==null||ie.blur(),ue({edges:[k]})):xe([e])}};return o.jsx("svg",{style:{zIndex:z},children:o.jsxs("g",{className:It(["react-flow__edge",`react-flow__edge-${N}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!P&&!s,updating:L,selectable:P}]),onClick:G,onDoubleClick:J,onContextMenu:ne,onMouseEnter:te,onMouseMove:se,onMouseLeave:le,onKeyDown:R?de:void 0,tabIndex:R?0:void 0,role:k.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":R?`${jC}-${v}`:void 0,ref:$,...k.domAttributes,children:[!K&&o.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:P,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:X,markerEnd:Z,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),A&&o.jsx(V7,{edge:k,isReconnectable:A,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,sourceX:H,sourceY:M,targetX:U,targetY:F,sourcePosition:D,targetPosition:W,setUpdateHover:B,setReconnecting:V})]})})}var H7=S.memo(U7);const G7=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function YC({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:x,onReconnectEnd:v,disableKeyboardA11y:b}){const{edgesFocusable:w,edgesReconnectable:j,elementsSelectable:T,onError:k}=Ge(G7,it),E=R7(t);return o.jsxs("div",{className:"react-flow__edges",children:[o.jsx(D7,{defaultColor:e,rfId:n}),E.map(N=>o.jsx(H7,{id:N,edgesFocusable:w,edgesReconnectable:j,elementsSelectable:T,noPanClassName:s,onReconnect:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onClick:m,reconnectRadius:h,onDoubleClick:g,onReconnectStart:x,onReconnectEnd:v,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:b},N))]})}YC.displayName="EdgeRenderer";const q7=S.memo(YC),K7=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function X7({children:e}){const t=Ge(K7);return o.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Y7(e){const t=By(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const J7=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Q7(e){const t=Ge(J7),n=lt();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Z7(e){return e.connection.inProgress?{...e.connection,to:$c(e.connection.to,e.transform)}:{...e.connection}}function eW(e){return Z7}function tW(e){const t=eW();return Ge(t,it)}const nW=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function rW({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:a,height:l,isValid:u,inProgress:d}=Ge(nW,it);return!(a&&s&&d)?null:o.jsx("svg",{style:e,width:a,height:l,className:"react-flow__connectionline react-flow__container",children:o.jsx("g",{className:It(["react-flow__connection",K5(u)]),children:o.jsx(JC,{style:t,type:n,CustomComponent:r,isValid:u})})})}const JC=({style:e,type:t=eo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:a,fromNode:l,fromHandle:u,fromPosition:d,to:f,toNode:m,toHandle:h,toPosition:g,pointer:x}=tW();if(!s)return;if(n)return o.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:u,fromX:a.x,fromY:a.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:K5(r),toNode:m,toHandle:h,pointer:x});let v="";const b={sourceX:a.x,sourceY:a.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(t){case eo.Bezier:[v]=iC(b);break;case eo.SimpleBezier:[v]=zC(b);break;case eo.Step:[v]=a0({...b,borderRadius:0});break;case eo.SmoothStep:[v]=a0(b);break;default:[v]=cC(b)}return o.jsx("path",{d:v,fill:"none",className:"react-flow__connection-path",style:e})};JC.displayName="ConnectionLine";const sW={};function V2(e=sW){S.useRef(e),lt(),S.useEffect(()=>{},[e])}function oW(){lt(),S.useRef(!1),S.useEffect(()=>{},[])}function QC({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:x,connectionLineType:v,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:j,selectionKeyCode:T,selectionOnDrag:k,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:_,zoomActivationKeyCode:R,deleteKeyCode:A,onlyRenderVisibleElements:P,elementsSelectable:$,defaultViewport:L,translateExtent:B,minZoom:K,maxZoom:V,preventScrolling:Y,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:M,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:D,zoomOnDoubleClick:W,panOnDrag:X,onPaneClick:Z,onPaneMouseEnter:G,onPaneMouseMove:J,onPaneMouseLeave:ne,onPaneScroll:te,onPaneContextMenu:se,paneClickDistance:le,nodeClickDistance:de,onEdgeContextMenu:fe,onEdgeMouseEnter:ie,onEdgeMouseMove:ue,onEdgeMouseLeave:xe,reconnectRadius:ge,onReconnect:Ae,onReconnectStart:Ve,onReconnectEnd:ze,noDragClassName:gt,noWheelClassName:jt,noPanClassName:He,disableKeyboardA11y:Lt,nodeExtent:Yr,rfId:Wn,viewport:wt,onViewportChange:At}){return V2(e),V2(t),oW(),Y7(n),Q7(wt),o.jsx(b7,{onPaneClick:Z,onPaneMouseEnter:G,onPaneMouseMove:J,onPaneMouseLeave:ne,onPaneContextMenu:se,onPaneScroll:te,paneClickDistance:le,deleteKeyCode:A,selectionKeyCode:T,selectionOnDrag:k,selectionMode:E,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:N,panActivationKeyCode:_,zoomActivationKeyCode:R,elementsSelectable:$,zoomOnScroll:H,zoomOnPinch:M,zoomOnDoubleClick:W,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:D,panOnDrag:X,defaultViewport:L,translateExtent:B,minZoom:K,maxZoom:V,onSelectionContextMenu:h,preventScrolling:Y,noDragClassName:gt,noWheelClassName:jt,noPanClassName:He,disableKeyboardA11y:Lt,onViewportChange:At,isControlledViewport:!!wt,children:o.jsxs(X7,{children:[o.jsx(q7,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:Ae,onReconnectStart:Ve,onReconnectEnd:ze,onlyRenderVisibleElements:P,onEdgeContextMenu:fe,onEdgeMouseEnter:ie,onEdgeMouseMove:ue,onEdgeMouseLeave:xe,reconnectRadius:ge,defaultMarkerColor:z,noPanClassName:He,disableKeyboardA11y:Lt,rfId:Wn}),o.jsx(rW,{style:b,type:v,component:w,containerStyle:j}),o.jsx("div",{className:"react-flow__edgelabel-renderer"}),o.jsx(T7,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,nodeClickDistance:de,onlyRenderVisibleElements:P,noPanClassName:He,noDragClassName:gt,disableKeyboardA11y:Lt,nodeExtent:Yr,rfId:Wn}),o.jsx("div",{className:"react-flow__viewport-portal"})]})})}QC.displayName="GraphView";const iW=S.memo(QC),U2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:l,fitViewOptions:u,minZoom:d=.5,maxZoom:f=2,nodeOrigin:m,nodeExtent:h,zIndexMode:g="basic"}={})=>{const x=new Map,v=new Map,b=new Map,w=new Map,j=r??t??[],T=n??e??[],k=m??[0,0],E=h??xc;fC(b,w,j);const N=c0(T,x,v,{nodeOrigin:k,nodeExtent:E,zIndexMode:g});let _=[0,0,1];if(l&&s&&a){const R=Oc(x,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:A,y:P,zoom:$}=My(R,s,a,d,f,(u==null?void 0:u.padding)??.1);_=[A,P,$]}return{rfId:"1",width:s??0,height:a??0,transform:_,nodes:T,nodesInitialized:N,nodeLookup:x,parentLookup:v,edges:j,edgeLookup:w,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:d,maxZoom:f,translateExtent:xc,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:va.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:u,fitViewResolver:null,connection:{...q5},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:SB,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:G5,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},aW=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:h,zIndexMode:g})=>C9((x,v)=>{async function b(){const{nodeLookup:w,panZoom:j,fitViewOptions:T,fitViewResolver:k,width:E,height:N,minZoom:_,maxZoom:R}=v();j&&(await bB({nodes:w,width:E,height:N,panZoom:j,minZoom:_,maxZoom:R},T),k==null||k.resolve(!0),x({fitViewResolver:null}))}return{...U2({nodes:e,edges:t,width:s,height:a,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:h,defaultNodes:n,defaultEdges:r,zIndexMode:g}),setNodes:w=>{const{nodeLookup:j,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:E,fitViewQueued:N,zIndexMode:_}=v(),R=c0(w,j,T,{nodeOrigin:k,nodeExtent:h,elevateNodesOnSelect:E,checkEquality:!0,zIndexMode:_});N&&R?(b(),x({nodes:w,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):x({nodes:w,nodesInitialized:R})},setEdges:w=>{const{connectionLookup:j,edgeLookup:T}=v();fC(j,T,w),x({edges:w})},setDefaultNodesAndEdges:(w,j)=>{if(w){const{setNodes:T}=v();T(w),x({hasDefaultNodes:!0})}if(j){const{setEdges:T}=v();T(j),x({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:j,nodeLookup:T,parentLookup:k,domNode:E,nodeOrigin:N,nodeExtent:_,debug:R,fitViewQueued:A,zIndexMode:P}=v(),{changes:$,updatedInternals:L}=VB(w,T,k,E,N,_,P);L&&($B(T,k,{nodeOrigin:N,nodeExtent:_,zIndexMode:P}),A?(b(),x({fitViewQueued:!1,fitViewOptions:void 0})):x({}),($==null?void 0:$.length)>0&&(R&&console.log("React Flow: trigger node changes",$),j==null||j($)))},updateNodePositions:(w,j=!1)=>{const T=[];let k=[];const{nodeLookup:E,triggerNodeChanges:N,connection:_,updateConnection:R,onNodesChangeMiddlewareMap:A}=v();for(const[P,$]of w){const L=E.get(P),B=!!(L!=null&&L.expandParent&&(L!=null&&L.parentId)&&($!=null&&$.position)),K={id:P,type:"position",position:B?{x:Math.max(0,$.position.x),y:Math.max(0,$.position.y)}:$.position,dragging:j};if(L&&_.inProgress&&_.fromNode.id===L.id){const V=si(L,_.fromHandle,Se.Left,!0);R({..._,from:V})}B&&L.parentId&&T.push({id:P,parentId:L.parentId,rect:{...$.internals.positionAbsolute,width:$.measured.width??0,height:$.measured.height??0}}),k.push(K)}if(T.length>0){const{parentLookup:P,nodeOrigin:$}=v(),L=Ly(T,E,P,$);k.push(...L)}for(const P of A.values())k=P(k);N(k)},triggerNodeChanges:w=>{const{onNodesChange:j,setNodes:T,nodes:k,hasDefaultNodes:E,debug:N}=v();if(w!=null&&w.length){if(E){const _=_C(w,k);T(_)}N&&console.log("React Flow: trigger node changes",w),j==null||j(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:j,setEdges:T,edges:k,hasDefaultEdges:E,debug:N}=v();if(w!=null&&w.length){if(E){const _=NC(w,k);T(_)}N&&console.log("React Flow: trigger edge changes",w),j==null||j(w)}},addSelectedNodes:w=>{const{multiSelectionActive:j,edgeLookup:T,nodeLookup:k,triggerNodeChanges:E,triggerEdgeChanges:N}=v();if(j){const _=w.map(R=>Vo(R,!0));E(_);return}E(sa(k,new Set([...w]),!0)),N(sa(T))},addSelectedEdges:w=>{const{multiSelectionActive:j,edgeLookup:T,nodeLookup:k,triggerNodeChanges:E,triggerEdgeChanges:N}=v();if(j){const _=w.map(R=>Vo(R,!0));N(_);return}N(sa(T,new Set([...w]))),E(sa(k,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:j}={})=>{const{edges:T,nodes:k,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:_}=v(),R=w||k,A=j||T,P=R.map(L=>{const B=E.get(L.id);return B&&(B.selected=!1),Vo(L.id,!1)}),$=A.map(L=>Vo(L.id,!1));N(P),_($)},setMinZoom:w=>{const{panZoom:j,maxZoom:T}=v();j==null||j.setScaleExtent([w,T]),x({minZoom:w})},setMaxZoom:w=>{const{panZoom:j,minZoom:T}=v();j==null||j.setScaleExtent([T,w]),x({maxZoom:w})},setTranslateExtent:w=>{var j;(j=v().panZoom)==null||j.setTranslateExtent(w),x({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:j,triggerNodeChanges:T,triggerEdgeChanges:k,elementsSelectable:E}=v();if(!E)return;const N=j.reduce((R,A)=>A.selected?[...R,Vo(A.id,!1)]:R,[]),_=w.reduce((R,A)=>A.selected?[...R,Vo(A.id,!1)]:R,[]);T(N),k(_)},setNodeExtent:w=>{const{nodes:j,nodeLookup:T,parentLookup:k,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:_,zIndexMode:R}=v();w[0][0]===_[0][0]&&w[0][1]===_[0][1]&&w[1][0]===_[1][0]&&w[1][1]===_[1][1]||(c0(j,T,k,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:R}),x({nodeExtent:w}))},panBy:w=>{const{transform:j,width:T,height:k,panZoom:E,translateExtent:N}=v();return UB({delta:w,panZoom:E,transform:j,translateExtent:N,width:T,height:k})},setCenter:async(w,j,T)=>{const{width:k,height:E,maxZoom:N,panZoom:_}=v();if(!_)return Promise.resolve(!1);const R=typeof(T==null?void 0:T.zoom)<"u"?T.zoom:N;return await _.setViewport({x:k/2-w*R,y:E/2-j*R,zoom:R},{duration:T==null?void 0:T.duration,ease:T==null?void 0:T.ease,interpolate:T==null?void 0:T.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{x({connection:{...q5}})},updateConnection:w=>{x({connection:w})},reset:()=>x({...U2()})}},Object.is);function lW({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:a,initialMinZoom:l,initialMaxZoom:u,initialFitViewOptions:d,fitView:f,nodeOrigin:m,nodeExtent:h,zIndexMode:g,children:x}){const[v]=S.useState(()=>aW({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:f,minZoom:l,maxZoom:u,fitViewOptions:d,nodeOrigin:m,nodeExtent:h,zIndexMode:g}));return o.jsx(E9,{value:v,children:o.jsx(X9,{children:x})})}function cW({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:a,height:l,fitView:u,fitViewOptions:d,minZoom:f,maxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:x}){return S.useContext(ah)?o.jsx(o.Fragment,{children:e}):o.jsx(lW,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:a,initialHeight:l,fitView:u,initialFitViewOptions:d,initialMinZoom:f,initialMaxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:x,children:e})}const uW={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function dW({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a,edgeTypes:l,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:h,onMoveEnd:g,onConnect:x,onConnectStart:v,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:j,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:E,onNodeContextMenu:N,onNodeDoubleClick:_,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:P,onNodesDelete:$,onEdgesDelete:L,onDelete:B,onSelectionChange:K,onSelectionDragStart:V,onSelectionDrag:Y,onSelectionDragStop:z,onSelectionContextMenu:H,onSelectionStart:M,onSelectionEnd:U,onBeforeDelete:F,connectionMode:D,connectionLineType:W=eo.Bezier,connectionLineStyle:X,connectionLineComponent:Z,connectionLineContainerStyle:G,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:te=!1,selectionMode:se=vc.Full,panActivationKeyCode:le="Space",multiSelectionKeyCode:de=wc()?"Meta":"Control",zoomActivationKeyCode:fe=wc()?"Meta":"Control",snapToGrid:ie,snapGrid:ue,onlyRenderVisibleElements:xe=!1,selectNodesOnDrag:ge,nodesDraggable:Ae,autoPanOnNodeFocus:Ve,nodesConnectable:ze,nodesFocusable:gt,nodeOrigin:jt=CC,edgesFocusable:He,edgesReconnectable:Lt,elementsSelectable:Yr=!0,defaultViewport:Wn=$9,minZoom:wt=.5,maxZoom:At=2,translateExtent:Zn=xc,preventScrolling:er=!0,nodeExtent:Ue,defaultMarkerColor:tn="#b1b1b7",zoomOnScroll:yn=!0,zoomOnPinch:tr=!0,panOnScroll:Jr=!1,panOnScrollSpeed:Cs=.5,panOnScrollMode:Es=Qo.Free,zoomOnDoubleClick:yo=!0,panOnDrag:Qr=!0,onPaneClick:xn,onPaneMouseEnter:xo,onPaneMouseMove:_r,onPaneMouseLeave:nr,onPaneScroll:vo,onPaneContextMenu:Le,paneClickDistance:ct=1,nodeClickDistance:St=0,children:Bt,onReconnect:Nr,onReconnectStart:yt,onReconnectEnd:Ct,onEdgeContextMenu:Tr,onEdgeDoubleClick:Pt,onEdgeMouseEnter:cn,onEdgeMouseMove:Rr,onEdgeMouseLeave:vn,reconnectRadius:bo=10,onNodesChange:Wa,onEdgesChange:bh,noDragClassName:wh="nodrag",noWheelClassName:Sh="nowheel",noPanClassName:Ir="nopan",fitView:Va,fitViewOptions:Ua,connectOnClick:kh,attributionPosition:Uc,proOptions:Hc,defaultEdgeOptions:Gc,elevateNodesOnSelect:qc=!0,elevateEdgesOnSelect:jh=!1,disableKeyboardA11y:Kc=!1,autoPanOnConnect:ut,autoPanOnNodeDrag:Ch,autoPanSpeed:Ha,connectionRadius:Xc,isValidConnection:li,onError:Eh,style:Yc,id:wo,nodeDragThreshold:Vn,connectionDragThreshold:_h,viewport:Tn,onViewportChange:Nh,width:Th,height:Rh,colorMode:ci="light",debug:ui,onScroll:Ar,ariaLabelConfig:di,zIndexMode:Jc="basic",...Ih},Ga){const fi=wo||"1",qa=V9(ci),So=S.useCallback(Qc=>{Qc.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ar==null||Ar(Qc)},[Ar]);return o.jsx("div",{"data-testid":"rf__wrapper",...Ih,onScroll:So,style:{...Yc,...uW},ref:Ga,className:It(["react-flow",s,qa]),id:wo,role:"application",children:o.jsxs(cW,{nodes:e,edges:t,width:Th,height:Rh,fitView:Va,fitViewOptions:Ua,minZoom:wt,maxZoom:At,nodeOrigin:jt,nodeExtent:Ue,zIndexMode:Jc,children:[o.jsx(iW,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:E,onNodeContextMenu:N,onNodeDoubleClick:_,nodeTypes:a,edgeTypes:l,connectionLineType:W,connectionLineStyle:X,connectionLineComponent:Z,connectionLineContainerStyle:G,selectionKeyCode:ne,selectionOnDrag:te,selectionMode:se,deleteKeyCode:J,multiSelectionKeyCode:de,panActivationKeyCode:le,zoomActivationKeyCode:fe,onlyRenderVisibleElements:xe,defaultViewport:Wn,translateExtent:Zn,minZoom:wt,maxZoom:At,preventScrolling:er,zoomOnScroll:yn,zoomOnPinch:tr,zoomOnDoubleClick:yo,panOnScroll:Jr,panOnScrollSpeed:Cs,panOnScrollMode:Es,panOnDrag:Qr,onPaneClick:xn,onPaneMouseEnter:xo,onPaneMouseMove:_r,onPaneMouseLeave:nr,onPaneScroll:vo,onPaneContextMenu:Le,paneClickDistance:ct,nodeClickDistance:St,onSelectionContextMenu:H,onSelectionStart:M,onSelectionEnd:U,onReconnect:Nr,onReconnectStart:yt,onReconnectEnd:Ct,onEdgeContextMenu:Tr,onEdgeDoubleClick:Pt,onEdgeMouseEnter:cn,onEdgeMouseMove:Rr,onEdgeMouseLeave:vn,reconnectRadius:bo,defaultMarkerColor:tn,noDragClassName:wh,noWheelClassName:Sh,noPanClassName:Ir,rfId:fi,disableKeyboardA11y:Kc,nodeExtent:Ue,viewport:Tn,onViewportChange:Nh}),o.jsx(W9,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:v,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:j,nodesDraggable:Ae,autoPanOnNodeFocus:Ve,nodesConnectable:ze,nodesFocusable:gt,edgesFocusable:He,edgesReconnectable:Lt,elementsSelectable:Yr,elevateNodesOnSelect:qc,elevateEdgesOnSelect:jh,minZoom:wt,maxZoom:At,nodeExtent:Ue,onNodesChange:Wa,onEdgesChange:bh,snapToGrid:ie,snapGrid:ue,connectionMode:D,translateExtent:Zn,connectOnClick:kh,defaultEdgeOptions:Gc,fitView:Va,fitViewOptions:Ua,onNodesDelete:$,onEdgesDelete:L,onDelete:B,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:P,onSelectionDrag:Y,onSelectionDragStart:V,onSelectionDragStop:z,onMove:m,onMoveStart:h,onMoveEnd:g,noPanClassName:Ir,nodeOrigin:jt,rfId:fi,autoPanOnConnect:ut,autoPanOnNodeDrag:Ch,autoPanSpeed:Ha,onError:Eh,connectionRadius:Xc,isValidConnection:li,selectNodesOnDrag:ge,nodeDragThreshold:Vn,connectionDragThreshold:_h,onBeforeDelete:F,debug:ui,ariaLabelConfig:di,zIndexMode:Jc}),o.jsx(z9,{onSelectionChange:K}),Bt,o.jsx(P9,{proOptions:Hc,position:Uc}),o.jsx(A9,{rfId:fi,disableKeyboardA11y:Kc})]})})}var fW=TC(dW);function hW(e){const[t,n]=S.useState(e),r=S.useCallback(s=>n(a=>_C(s,a)),[]);return[t,n,r]}function pW(e){const[t,n]=S.useState(e),r=S.useCallback(s=>n(a=>NC(s,a)),[]);return[t,n,r]}function mW({dimensions:e,lineWidth:t,variant:n,className:r}){return o.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:It(["react-flow__background-pattern",n,r])})}function gW({radius:e,className:t}){return o.jsx("circle",{cx:e,cy:e,r:e,className:It(["react-flow__background-pattern","dots",t])})}var ps;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ps||(ps={}));const yW={[ps.Dots]:1,[ps.Lines]:1,[ps.Cross]:6},xW=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ZC({id:e,variant:t=ps.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=0,color:l,bgColor:u,style:d,className:f,patternClassName:m}){const h=S.useRef(null),{transform:g,patternId:x}=Ge(xW,it),v=r||yW[t],b=t===ps.Dots,w=t===ps.Cross,j=Array.isArray(n)?n:[n,n],T=[j[0]*g[2]||1,j[1]*g[2]||1],k=v*g[2],E=Array.isArray(a)?a:[a,a],N=w?[k,k]:T,_=[E[0]*g[2]||1+N[0]/2,E[1]*g[2]||1+N[1]/2],R=`${x}${e||""}`;return o.jsxs("svg",{className:It(["react-flow__background",f]),style:{...d,...ch,"--xy-background-color-props":u,"--xy-background-pattern-color-props":l},ref:h,"data-testid":"rf__background",children:[o.jsx("pattern",{id:R,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:b?o.jsx(gW,{radius:k/2,className:m}):o.jsx(mW,{dimensions:N,lineWidth:s,variant:t,className:m})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}ZC.displayName="Background";const vW=S.memo(ZC);function bW(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:o.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function wW(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:o.jsx("path",{d:"M0 0h32v4.2H0z"})})}function SW(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:o.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function kW(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jW(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function jd({children:e,className:t,...n}){return o.jsx("button",{type:"button",className:It(["react-flow__controls-button",t]),...n,children:e})}const CW=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function eE({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:l,onFitView:u,onInteractiveChange:d,className:f,children:m,position:h="bottom-left",orientation:g="vertical","aria-label":x}){const v=lt(),{isInteractive:b,minZoomReached:w,maxZoomReached:j,ariaLabelConfig:T}=Ge(CW,it),{zoomIn:k,zoomOut:E,fitView:N}=By(),_=()=>{k(),a==null||a()},R=()=>{E(),l==null||l()},A=()=>{N(s),u==null||u()},P=()=>{v.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d==null||d(!b)},$=g==="horizontal"?"horizontal":"vertical";return o.jsxs(lh,{className:It(["react-flow__controls",$,f]),position:h,style:e,"data-testid":"rf__controls","aria-label":x??T["controls.ariaLabel"],children:[t&&o.jsxs(o.Fragment,{children:[o.jsx(jd,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:j,children:o.jsx(bW,{})}),o.jsx(jd,{onClick:R,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:w,children:o.jsx(wW,{})})]}),n&&o.jsx(jd,{className:"react-flow__controls-fitview",onClick:A,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:o.jsx(SW,{})}),r&&o.jsx(jd,{className:"react-flow__controls-interactive",onClick:P,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:b?o.jsx(jW,{}):o.jsx(kW,{})}),m]})}eE.displayName="Controls";const EW=S.memo(eE);function _W({id:e,x:t,y:n,width:r,height:s,style:a,color:l,strokeColor:u,strokeWidth:d,className:f,borderRadius:m,shapeRendering:h,selected:g,onClick:x}){const{background:v,backgroundColor:b}=a||{},w=l||v||b;return o.jsx("rect",{className:It(["react-flow__minimap-node",{selected:g},f]),x:t,y:n,rx:m,ry:m,width:r,height:s,style:{fill:w,stroke:u,strokeWidth:d},shapeRendering:h,onClick:x?j=>x(j,e):void 0})}const NW=S.memo(_W),TW=e=>e.nodes.map(t=>t.id),Zm=e=>e instanceof Function?e:()=>e;function RW({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:a=NW,onClick:l}){const u=Ge(TW,it),d=Zm(t),f=Zm(e),m=Zm(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return o.jsx(o.Fragment,{children:u.map(g=>o.jsx(AW,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:f,nodeClassNameFunc:m,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:a,onClick:l,shapeRendering:h},g))})}function IW({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:a,shapeRendering:l,NodeComponent:u,onClick:d}){const{node:f,x:m,y:h,width:g,height:x}=Ge(v=>{const{internals:b}=v.nodeLookup.get(e),w=b.userNode,{x:j,y:T}=b.positionAbsolute,{width:k,height:E}=ks(w);return{node:w,x:j,y:T,width:k,height:E}},it);return!f||f.hidden||!eC(f)?null:o.jsx(u,{x:m,y:h,width:g,height:x,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:s,strokeColor:n(f),strokeWidth:a,shapeRendering:l,onClick:d,id:f.id})}const AW=S.memo(IW);var PW=S.memo(RW);const MW=200,DW=150,FW=e=>!e.hidden,OW=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Z5(Oc(e.nodeLookup,{filter:FW}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},zW="react-flow__minimap-desc";function tE({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:d,maskColor:f,maskStrokeColor:m,maskStrokeWidth:h,position:g="bottom-right",onClick:x,onNodeClick:v,pannable:b=!1,zoomable:w=!1,ariaLabel:j,inversePan:T,zoomStep:k=1,offsetScale:E=5}){const N=lt(),_=S.useRef(null),{boundingRect:R,viewBB:A,rfId:P,panZoom:$,translateExtent:L,flowWidth:B,flowHeight:K,ariaLabelConfig:V}=Ge(OW,it),Y=(e==null?void 0:e.width)??MW,z=(e==null?void 0:e.height)??DW,H=R.width/Y,M=R.height/z,U=Math.max(H,M),F=U*Y,D=U*z,W=E*U,X=R.x-(F-R.width)/2-W,Z=R.y-(D-R.height)/2-W,G=F+W*2,J=D+W*2,ne=`${zW}-${P}`,te=S.useRef(0),se=S.useRef();te.current=U,S.useEffect(()=>{if(_.current&&$)return se.current=ZB({domNode:_.current,panZoom:$,getTransform:()=>N.getState().transform,getViewScale:()=>te.current}),()=>{var ie;(ie=se.current)==null||ie.destroy()}},[$]),S.useEffect(()=>{var ie;(ie=se.current)==null||ie.update({translateExtent:L,width:B,height:K,inversePan:T,pannable:b,zoomStep:k,zoomable:w})},[b,w,T,k,L,B,K]);const le=x?ie=>{var ge;const[ue,xe]=((ge=se.current)==null?void 0:ge.pointer(ie))||[0,0];x(ie,{x:ue,y:xe})}:void 0,de=v?S.useCallback((ie,ue)=>{const xe=N.getState().nodeLookup.get(ue).internals.userNode;v(ie,xe)},[]):void 0,fe=j??V["minimap.ariaLabel"];return o.jsx(lh,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*U:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:It(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:o.jsxs("svg",{width:Y,height:z,viewBox:`${X} ${Z} ${G} ${J}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ne,ref:_,onClick:le,children:[fe&&o.jsx("title",{id:ne,children:fe}),o.jsx(PW,{onClick:de,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:u}),o.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-W},${Z-W}h${G+W*2}v${J+W*2}h${-G-W*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}tE.displayName="MiniMap";const $W=S.memo(tE),LW=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,BW={[ka.Line]:"right",[ka.Handle]:"bottom-right"};function WW({nodeId:e,position:t,variant:n=ka.Handle,className:r,style:s=void 0,children:a,color:l,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:g,autoScale:x=!0,shouldResize:v,onResizeStart:b,onResize:w,onResizeEnd:j}){const T=PC(),k=typeof e=="string"?e:T,E=lt(),N=S.useRef(null),_=n===ka.Handle,R=Ge(S.useCallback(LW(_&&x),[_,x]),it),A=S.useRef(null),P=t??BW[n];S.useEffect(()=>{if(!(!N.current||!k))return A.current||(A.current=h9({domNode:N.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:L,transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:Y,domNode:z}=E.getState();return{nodeLookup:L,transform:B,snapGrid:K,snapToGrid:V,nodeOrigin:Y,paneDomNode:z}},onChange:(L,B)=>{const{triggerNodeChanges:K,nodeLookup:V,parentLookup:Y,nodeOrigin:z}=E.getState(),H=[],M={x:L.x,y:L.y},U=V.get(k);if(U&&U.expandParent&&U.parentId){const F=U.origin??z,D=L.width??U.measured.width??0,W=L.height??U.measured.height??0,X={id:U.id,parentId:U.parentId,rect:{width:D,height:W,...tC({x:L.x??U.position.x,y:L.y??U.position.y},{width:D,height:W},U.parentId,V,F)}},Z=Ly([X],V,Y,z);H.push(...Z),M.x=L.x?Math.max(F[0]*D,L.x):void 0,M.y=L.y?Math.max(F[1]*W,L.y):void 0}if(M.x!==void 0&&M.y!==void 0){const F={id:k,type:"position",position:{...M}};H.push(F)}if(L.width!==void 0&&L.height!==void 0){const D={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};H.push(D)}for(const F of B){const D={...F,type:"position"};H.push(D)}K(H)},onEnd:({width:L,height:B})=>{const K={id:k,type:"dimensions",resizing:!1,dimensions:{width:L,height:B}};E.getState().triggerNodeChanges([K])}})),A.current.update({controlPosition:P,boundaries:{minWidth:u,minHeight:d,maxWidth:f,maxHeight:m},keepAspectRatio:h,resizeDirection:g,onResizeStart:b,onResize:w,onResizeEnd:j,shouldResize:v}),()=>{var L;(L=A.current)==null||L.destroy()}},[P,u,d,f,m,h,b,w,j,v]);const $=P.split("-");return o.jsx("div",{className:It(["react-flow__resize-control","nodrag",...$,n,r]),ref:N,style:{...s,scale:R,...l&&{[_?"backgroundColor":"borderColor"]:l}},children:a})}S.memo(WW);function VW({data:e,selected:t}){return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%)",border:t?"2px solid #f59e0b":"1px solid rgba(245, 158, 11, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(245, 158, 11, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ga,{size:18,style:{color:"#f59e0b"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Start"})]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Flow starting point"}),o.jsx(Tt,{type:"source",position:Se.Bottom,style:{background:"#f59e0b",width:"12px",height:"12px",border:"2px solid white"}})]})}function UW({data:e,selected:t}){var n,r;return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(6, 182, 212, 0.05) 100%)",border:t?"2px solid #06b6d4":"1px solid rgba(6, 182, 212, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(6, 182, 212, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#06b6d4",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(6, 182, 212, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(yy,{size:18,style:{color:"#06b6d4"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Send Template"})]}),((n=e.config)==null?void 0:n.templateName)&&o.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#06b6d4",fontWeight:500,marginBottom:"4px"},children:[" ",e.config.templateName]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:(r=e.config)!=null&&r.templateId?"Template configured":"Send WhatsApp template"}),o.jsx(Tt,{type:"source",position:Se.Bottom,style:{background:"#06b6d4",width:"12px",height:"12px",border:"2px solid white"}})]})}function HW({data:e,selected:t}){return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%)",border:t?"2px solid #3b82f6":"1px solid rgba(59, 130, 246, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(59, 130, 246, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#3b82f6",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(59, 130, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(po,{size:18,style:{color:"#3b82f6"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Wait Reply"})]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Wait for user response"}),o.jsx(Tt,{type:"source",position:Se.Bottom,style:{background:"#3b82f6",width:"12px",height:"12px",border:"2px solid white"}})]})}function GW({data:e,selected:t}){var n,r,s;return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)",border:t?"2px solid #8b5cf6":"1px solid rgba(139, 92, 246, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(139, 92, 246, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#8b5cf6",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx($j,{size:18,style:{color:"#8b5cf6"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Condition"})]}),((n=e.config)==null?void 0:n.variable)&&((r=e.config)==null?void 0:r.value)&&o.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#8b5cf6",fontWeight:500,marginBottom:"4px",padding:"6px 8px",background:"rgba(139, 92, 246, 0.1)",borderRadius:"6px"},children:[e.config.variable," ",e.config.operator==="equals"?"==":e.config.operator==="not_equals"?"!=":e.config.operator==="contains"?"":"~"," ",e.config.value]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:(s=e.config)!=null&&s.variable?"Condition configured":"Branch based on logic"}),o.jsx(Tt,{type:"source",position:Se.Bottom,id:"true",style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white",left:"30%"}}),o.jsx(Tt,{type:"source",position:Se.Bottom,id:"false",style:{background:"#ef4444",width:"12px",height:"12px",border:"2px solid white",left:"70%"}})]})}function qW({data:e,selected:t}){return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",border:t?"2px solid #10b981":"1px solid rgba(16, 185, 129, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Hj,{size:18,style:{color:"#10b981"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Delay"})]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Wait for duration"}),o.jsx(Tt,{type:"source",position:Se.Bottom,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}})]})}function KW({data:e,selected:t}){var l,u,d;const n=e.config,r=((l=n==null?void 0:n.questions)==null?void 0:l.length)||0,s=(n==null?void 0:n.enableConfirmation)||!1,a=((u=n==null?void 0:n.onMaxRetry)==null?void 0:u.action)==="jump_to_node"&&((d=n==null?void 0:n.onMaxRetry)==null?void 0:d.jumpToNodeId);return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.08) 100%)",border:t?"2px solid #10b981":"1px solid rgba(16, 185, 129, 0.3)",minWidth:"220px",boxShadow:t?"0 8px 24px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#10b981",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Fj,{size:18,style:{color:"#10b981"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Guest Form"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:r>0?`${r} question${r>1?"s":""}`:"No questions yet"}),s&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",color:"#059669"},children:[o.jsx(Mj,{size:12}),o.jsx("span",{children:"Confirmation enabled"})]}),a&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.7rem",color:"#f59e0b"},children:[o.jsx(Hf,{size:12}),o.jsx("span",{children:"Retry jump configured"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",paddingTop:"8px",borderTop:"1px solid rgba(16, 185, 129, 0.2)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",position:"relative"},children:[o.jsx(Tt,{type:"source",position:Se.Bottom,id:"confirmed",style:{position:"relative",transform:"none",background:"#10b981",width:"10px",height:"10px",border:"2px solid white",left:0,bottom:0}}),o.jsx("span",{style:{fontSize:"0.65rem",color:"#059669",fontWeight:500},children:"Confirmed"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",position:"relative"},children:[o.jsx("span",{style:{fontSize:"0.65rem",color:"#f59e0b",fontWeight:500},children:"Max Retry"}),o.jsx(Tt,{type:"source",position:Se.Bottom,id:"max_retry",style:{position:"relative",transform:"none",background:"#f59e0b",width:"10px",height:"10px",border:"2px solid white",right:0,bottom:0}})]})]})]})}function XW({data:e,selected:t}){return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, rgba(236, 72, 153, 0.05) 100%)",border:t?"2px solid #ec4899":"1px solid rgba(236, 72, 153, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(236, 72, 153, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#ec4899",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(236, 72, 153, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(by,{size:18,style:{color:"#ec4899"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"Update Guest"})]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"Modify guest data"}),o.jsx(Tt,{type:"source",position:Se.Bottom,style:{background:"#ec4899",width:"12px",height:"12px",border:"2px solid white"}})]})}function YW({data:e,selected:t}){return o.jsxs("div",{style:{padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(100, 116, 139, 0.15) 0%, rgba(100, 116, 139, 0.05) 100%)",border:t?"2px solid #64748b":"1px solid rgba(100, 116, 139, 0.3)",minWidth:"200px",boxShadow:t?"0 8px 24px rgba(100, 116, 139, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},children:[o.jsx(Tt,{type:"target",position:Se.Top,style:{background:"#64748b",width:"12px",height:"12px",border:"2px solid white"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(zj,{size:18,style:{color:"#64748b"}})}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e.label||"End"})]}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:"End conversation"})]})}const JW={trigger:VW,send_template:UW,wait_reply:HW,condition:GW,delay:qW,guest_form:KW,update_guest:XW,end:YW};function QW({nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onNodeSelect:s,isLocked:a=!1}){const[l,u,d]=hW(e),[f,m,h]=pW(t),[g,x]=S.useState(null),v=S.useMemo(()=>{const _=[];return e.forEach(R=>{var A;if(R.type==="guest_form"){const P=R.data.config;((A=P==null?void 0:P.onMaxRetry)==null?void 0:A.action)==="jump_to_node"&&P.onMaxRetry.jumpToNodeId&&e.some(L=>L.id===P.onMaxRetry.jumpToNodeId)&&_.push({id:`ghost_${R.id}_${P.onMaxRetry.jumpToNodeId}`,source:R.id,target:P.onMaxRetry.jumpToNodeId,sourceHandle:"max_retry",type:"smoothstep",animated:!0,style:{stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"5,5",opacity:.7},label:"Max Retry",labelStyle:{fontSize:10,fill:"#f59e0b",fontWeight:600},labelBgStyle:{fill:"rgba(255, 255, 255, 0.9)"},selectable:!1,deletable:!1,data:{isGhost:!0}})}}),_},[e]);S.useEffect(()=>{u(e)},[e,u]),S.useEffect(()=>{m(t)},[t,m]),S.useEffect(()=>{const _=R=>{if(!a&&(R.key==="Delete"||R.key==="Backspace")&&g){if(g.startsWith("ghost_"))return;const A=f.filter(P=>P.id!==g);m(A),r(A),x(null)}};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[g,f,m,r,a]);const b=S.useCallback(_=>{if(a)return;const R=lC({..._,type:"smoothstep",animated:!0,style:{stroke:"rgba(139, 92, 246, 0.6)",strokeWidth:2}},f);m(R),r(R)},[f,m,r,a]),w=S.useCallback((_,R)=>{x(null),s(R)},[s]),j=S.useCallback((_,R)=>{R.id.startsWith("ghost_")||(x(R.id),s(null))},[s]),T=S.useCallback(()=>{x(null),s(null)},[s]),k=S.useCallback(_=>{a||(_.preventDefault(),_.dataTransfer.dropEffect="move")},[a]),E=S.useCallback(_=>{if(a)return;_.preventDefault();const R=_.dataTransfer.getData("application/reactflow");if(!R)return;const A={x:_.clientX-250,y:_.clientY-100},P={trigger:"Start",send_template:"Send Template",wait_reply:"Wait Reply",condition:"Condition",delay:"Delay",guest_form:"Guest Form",update_guest:"Update Guest",end:"End"},$={id:`${R}_${Date.now()}`,type:R,position:A,data:{label:P[R]||`New ${R.replace("_"," ")}`,config:null}},L=[...l,$];u(L),n(L)},[l,u,n,a]),N=S.useMemo(()=>[...f.map(R=>({...R,style:{...R.style,stroke:g===R.id?"#ef4444":"rgba(139, 92, 246, 0.6)",strokeWidth:g===R.id?3:2}})),...v],[f,v,g]);return o.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[g&&!g.startsWith("ghost_")&&o.jsxs("div",{style:{position:"absolute",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:10,padding:"8px 16px",background:"rgba(239, 68, 68, 0.9)",color:"white",borderRadius:"8px",fontSize:"0.875rem",fontWeight:500,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:["Press ",o.jsx("strong",{children:"Delete"})," or ",o.jsx("strong",{children:"Backspace"})," to remove connection"]}),o.jsxs(fW,{nodes:l,edges:N,onNodesChange:_=>{d(_),u(R=>(n(R),R))},onEdgesChange:_=>{const R=_.filter(A=>"id"in A&&typeof A.id=="string"?!A.id.startsWith("ghost_"):!0);h(R),r(f)},onConnect:b,onNodeClick:w,onEdgeClick:j,onPaneClick:T,onDragOver:k,onDrop:E,nodeTypes:JW,fitView:!0,deleteKeyCode:null,style:{background:"rgba(255, 255, 255, 0.5)"},children:[o.jsx(vW,{variant:ps.Dots,gap:20,size:1,color:"rgba(245, 158, 11, 0.15)"}),o.jsx(EW,{style:{background:"rgba(255, 255, 255, 0.9)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.2)"}}),o.jsx($W,{style:{background:"rgba(255, 255, 255, 0.9)",borderRadius:"12px",border:"1px solid rgba(245, 158, 11, 0.2)"},nodeColor:_=>({trigger:"#f59e0b",send_template:"#06b6d4",wait_reply:"#3b82f6",condition:"#8b5cf6",delay:"#10b981",guest_form:"#10b981",update_guest:"#ec4899",end:"#64748b"})[_.type||"default"]||"#999"})]})]})}function Zt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ZW(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Cd=43200,H2=1440;let eV={};function tV(){return eV}function G2(e){const t=Zt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Kd(e,t){const n=Zt(e),r=Zt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function nV(e){return ZW(e,Date.now())}function rV(e,t){const n=Zt(e),r=Zt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function sV(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function oV(e,t){return+Zt(e)-+Zt(t)}function iV(e){const t=Zt(e);return t.setHours(23,59,59,999),t}function aV(e){const t=Zt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function lV(e){const t=Zt(e);return+iV(t)==+aV(t)}function cV(e,t){const n=Zt(e),r=Zt(t),s=Kd(n,r),a=Math.abs(rV(n,r));let l;if(a<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let u=Kd(n,r)===-s;lV(Zt(e))&&a===1&&Kd(e,r)===1&&(u=!1),l=s*(a-Number(u))}return l===0?0:l}function uV(e,t,n){const r=oV(e,t)/1e3;return sV(n==null?void 0:n.roundingMethod)(r)}const dV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fV=(e,t,n)=>{let r;const s=dV[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function eg(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const hV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gV={date:eg({formats:hV,defaultWidth:"full"}),time:eg({formats:pV,defaultWidth:"full"}),dateTime:eg({formats:mV,defaultWidth:"full"})},yV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xV=(e,t,n,r)=>yV[e];function Il(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):l;s=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[u]||e.values[l]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const vV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CV=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},EV={ordinalNumber:CV,era:Il({values:vV,defaultWidth:"wide"}),quarter:Il({values:bV,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Il({values:wV,defaultWidth:"wide"}),day:Il({values:SV,defaultWidth:"wide"}),dayPeriod:Il({values:kV,defaultWidth:"wide",formattingValues:jV,defaultFormattingWidth:"wide"})};function Al(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const l=a[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?NV(u,h=>h.test(l)):_V(u,h=>h.test(l));let f;f=e.valueCallback?e.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const m=t.slice(l.length);return{value:f,rest:m}}}function _V(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function NV(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function TV(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let l=e.valueCallback?e.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const u=t.slice(s.length);return{value:l,rest:u}}}const RV=/^(\d+)(th|st|nd|rd)?/i,IV=/\d+/i,AV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PV={any:[/^b/i,/^(a|c)/i]},MV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DV={any:[/1/i,/2/i,/3/i,/4/i]},FV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$V={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},BV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WV={ordinalNumber:TV({matchPattern:RV,parsePattern:IV,valueCallback:e=>parseInt(e,10)}),era:Al({matchPatterns:AV,defaultMatchWidth:"wide",parsePatterns:PV,defaultParseWidth:"any"}),quarter:Al({matchPatterns:MV,defaultMatchWidth:"wide",parsePatterns:DV,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Al({matchPatterns:FV,defaultMatchWidth:"wide",parsePatterns:OV,defaultParseWidth:"any"}),day:Al({matchPatterns:zV,defaultMatchWidth:"wide",parsePatterns:$V,defaultParseWidth:"any"}),dayPeriod:Al({matchPatterns:LV,defaultMatchWidth:"any",parsePatterns:BV,defaultParseWidth:"any"})},VV={code:"en-US",formatDistance:fV,formatLong:gV,formatRelative:xV,localize:EV,match:WV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UV(e,t,n){const r=tV(),s=(n==null?void 0:n.locale)??r.locale??VV,a=2520,l=Kd(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let d,f;l>0?(d=Zt(t),f=Zt(e)):(d=Zt(e),f=Zt(t));const m=uV(f,d),h=(G2(f)-G2(d))/1e3,g=Math.round((m-h)/60);let x;if(g<2)return n!=null&&n.includeSeconds?m<5?s.formatDistance("lessThanXSeconds",5,u):m<10?s.formatDistance("lessThanXSeconds",10,u):m<20?s.formatDistance("lessThanXSeconds",20,u):m<40?s.formatDistance("halfAMinute",0,u):m<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):g===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",g,u);if(g<45)return s.formatDistance("xMinutes",g,u);if(g<90)return s.formatDistance("aboutXHours",1,u);if(g<H2){const v=Math.round(g/60);return s.formatDistance("aboutXHours",v,u)}else{if(g<a)return s.formatDistance("xDays",1,u);if(g<Cd){const v=Math.round(g/H2);return s.formatDistance("xDays",v,u)}else if(g<Cd*2)return x=Math.round(g/Cd),s.formatDistance("aboutXMonths",x,u)}if(x=cV(f,d),x<12){const v=Math.round(g/Cd);return s.formatDistance("xMonths",v,u)}else{const v=x%12,b=Math.trunc(x/12);return v<3?s.formatDistance("aboutXYears",b,u):v<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}}function HV(e,t){return UV(e,nV(e),t)}function GV({chatflow:e,onClose:t}){const{templates:n}=Ma(),[r,s]=S.useState([]),[a,l]=S.useState([]),[u,d]=S.useState({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),f=S.useRef(u);f.current=u;const m=S.useRef(null),h=S.useRef(null),[g,x]=S.useState(null),[v,b]=S.useState(!1),[w,j]=S.useState(!1),[T,k]=S.useState(""),[E,N]=S.useState(0),[_,R]=S.useState({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}});S.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[a]),S.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[r]);const A=F=>{s(D=>[...D,{...F,id:Date.now().toString(),timestamp:new Date}])},P=F=>{l(D=>[...D,{...F,timestamp:new Date}])},$=F=>new Promise(D=>setTimeout(D,F)),L=(F,D)=>{const W=D?e.edges.find(X=>X.source===F&&X.sourceHandle===D):e.edges.find(X=>X.source===F);return W&&e.nodes.find(X=>X.id===W.target)||null},B=async F=>{var D,W;console.log(" [EXECUTE NODE] Starting:",F.type,F.data.label,F.id),x(F.id);try{switch(F.type){case"trigger":P({nodeId:F.id,nodeName:F.data.label,action:"Start Flow",result:"success",message:"Flow triggered"});const X=L(F.id);X&&(await $(500),await B(X));break;case"send_template":const Z=F.data.config,G=Z==null?void 0:Z.templateId,J=n.find(Ue=>Ue.id===G);if(J){P({nodeId:F.id,nodeName:F.data.label,action:"Send Template",result:"success",message:`Sending "${J.name}"`});let Ue=J.content.body.text;console.log(" [SEND TEMPLATE] Original message:",Ue),console.log(" [SEND TEMPLATE] Config variables:",Z==null?void 0:Z.variables),console.log(" [SEND TEMPLATE] Available variables:",f.current),Z!=null&&Z.variables&&Object.entries(Z.variables).forEach(([tn,yn])=>{const tr=yn.replace(/\{\{|\}\}/g,""),Jr=f.current[tr]||`[${tn}]`;console.log(` [SEND TEMPLATE] Replace {{${tn}}} with "${Jr}" (from ${tr})`);const Cs=new RegExp(`\\{\\{${tn}\\}\\}`,"g");Ue=Ue.replace(Cs,Jr)}),Object.entries(f.current).forEach(([tn,yn])=>{const tr=new RegExp(`\\{\\{${tn}\\}\\}`,"g");Ue=Ue.replace(tr,yn)}),console.log(" [SEND TEMPLATE] Final message:",Ue),A({type:"sent",content:Ue})}else P({nodeId:F.id,nodeName:F.data.label,action:"Send Template",result:"error",message:"Template not found or not configured"}),A({type:"sent",content:"[Template not configured]"});const ne=L(F.id);ne&&(await $(1e3),await B(ne));break;case"wait_reply":const te=F.data.config;P({nodeId:F.id,nodeName:F.data.label,action:"Wait Reply",result:"waiting",message:te!=null&&te.expectedValues?`Waiting for user input (expected: ${te.expectedValues.join(", ")})...`:"Waiting for user input..."}),j(!0),N(0);break;case"condition":const se=F.data.config;console.log(" [CONDITION NODE] Starting evaluation:",{nodeId:F.id,nodeName:F.data.label,config:se,allVariables:f.current});const le=f.current[(se==null?void 0:se.variable)||""],de=(se==null?void 0:se.value)||"",fe=(se==null?void 0:se.operator)||"equals",ie=(se==null?void 0:se.caseSensitive)||!1;console.log(" [CONDITION NODE] Values to compare:",{variableName:se==null?void 0:se.variable,variableValue:le,compareValue:de,operator:fe,caseSensitive:ie});let ue=le!==void 0?String(le):"",xe=de;ie||(ue=ue.toLowerCase(),xe=xe.toLowerCase()),console.log(" [CONDITION NODE] After case handling:",{varVal:ue,compVal:xe});let ge=!1;try{switch(fe){case"equals":ge=ue===xe;break;case"not_equals":ge=ue!==xe;break;case"contains":ge=ue.includes(xe);break;case"matches":ge=new RegExp(xe,ie?"":"i").test(String(le));break;default:ge=!1}}catch(Ue){console.error("Error evaluating condition:",Ue),ge=!1}console.log(" [CONDITION NODE] Condition result:",ge),P({nodeId:F.id,nodeName:F.data.label,action:"Evaluate Condition",result:"success",message:`${se==null?void 0:se.variable} ${fe} "${de}"  ${ge?"TRUE":"FALSE"} (value: "${le}")`});const Ae=e.edges.filter(Ue=>Ue.source===F.id);console.log(" [CONDITION NODE] All edges from this node:",Ae);const Ve=ge?"true":"false";console.log(" [CONDITION NODE] Looking for edge with sourceHandle:",Ve);const ze=L(F.id,Ve);console.log(" [CONDITION NODE] Next node found:",ze==null?void 0:ze.id,(D=ze==null?void 0:ze.data)==null?void 0:D.label),ze?(await $(800),await B(ze)):(P({nodeId:F.id,nodeName:F.data.label,action:"Condition Error",result:"error",message:`No ${ge?"TRUE":"FALSE"} path defined. Please connect both true and false edges.`}),b(!1));break;case"delay":const gt=((W=F.data.config)==null?void 0:W.duration)||1;P({nodeId:F.id,nodeName:F.data.label,action:"Delay",result:"success",message:`Waiting ${gt} seconds...`}),await $(gt*1e3);const jt=L(F.id);jt&&await B(jt);break;case"set_variable":const He=F.data.config;He!=null&&He.variableName&&(He!=null&&He.value)?(d(Ue=>({...Ue,[He.variableName]:He.value})),P({nodeId:F.id,nodeName:F.data.label,action:"Set Variable",result:"success",message:`Set ${He.variableName} = "${He.value}"`})):P({nodeId:F.id,nodeName:F.data.label,action:"Set Variable",result:"error",message:"Variable name or value not configured"});const Lt=L(F.id);Lt&&(await $(500),await B(Lt));break;case"update_guest":const Yr=F.data.config;P({nodeId:F.id,nodeName:F.data.label,action:"Update Guest",result:"success",message:"Guest data would be updated (simulation only)"});const Wn=L(F.id);Wn&&(await $(500),await B(Wn));break;case"guest_form":const wt=F.data.config;if(!wt||!wt.questions||wt.questions.length===0){P({nodeId:F.id,nodeName:F.data.label,action:"Guest Form Error",result:"error",message:"No questions configured in guest form"});const Ue=L(F.id);Ue&&(await $(500),await B(Ue));break}P({nodeId:F.id,nodeName:F.data.label,action:"Start Guest Form",result:"success",message:`Starting form with ${wt.questions.length} question(s)`}),R({isActive:!0,nodeId:F.id,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}});const At=wt.questions[0];let er=At.promptMessage||At.question;At.type==="choice"&&At.options&&At.options.length>0&&(er+=`

Pilihan: ${At.options.join(", ")}`),A({type:"sent",content:er}),P({nodeId:F.id,nodeName:F.data.label,action:"Ask Question",result:"waiting",message:`Q1/${wt.questions.length}: ${At.variableName}`}),j(!0);break;case"end":P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"success",message:"Flow completed"}),b(!1),x(null);break}}catch(X){console.error(" [EXECUTE NODE] Error executing node:",F.id,X),P({nodeId:F.id,nodeName:F.data.label,action:"Execution Error",result:"error",message:`Error: ${X instanceof Error?X.message:String(X)}`}),b(!1)}},K=async()=>{if(console.log(" [SIMULATOR] Starting flow test..."),!e||!e.nodes||e.nodes.length===0){console.error(" [SIMULATOR] No nodes in chatflow!"),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:"No nodes found in chatflow. Please add nodes to the flow first."});return}const F=e.nodes.find(D=>D.type==="trigger");if(!F){console.error(" [SIMULATOR] No trigger node found!"),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:"No trigger node found. Please add a Trigger node to start the flow."}),b(!0);return}s([]),l([]),d({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),b(!0),j(!1),N(0);try{await B(F)}catch(D){console.error(" [SIMULATOR] Execution error:",D),P({nodeId:"system",nodeName:"System",action:"Error",result:"error",message:`Execution error: ${D instanceof Error?D.message:String(D)}`}),b(!1)}},V=async()=>{var X,Z,G;if(!T.trim()||!w)return;if(console.log(" [SEND REPLY] User input:",T),console.log(" [SEND REPLY] Current node ID:",g),console.log(" [SEND REPLY] Guest form active:",_.isActive),A({type:"received",content:T}),_.isActive&&_.nodeId){await Y(T.trim()),k("");return}const F=e.nodes.find(J=>J.id===g);console.log(" [SEND REPLY] Current node:",F),console.log(" [SEND REPLY] Config saveAs:",(X=F==null?void 0:F.data.config)==null?void 0:X.saveAs);const D=F==null?void 0:F.data.config;if(D!=null&&D.expectedValues&&D.expectedValues.length>0){const J=D.caseSensitive||!1,ne=J?T.trim():T.trim().toLowerCase(),te=D.expectedValues.map(le=>J?le:le.toLowerCase());console.log(" [VALIDATION] Expected values:",te),console.log(" [VALIDATION] User input (normalized):",ne);const se=te.includes(ne);if(console.log(" [VALIDATION] Is valid:",se),se)P({nodeId:F.id,nodeName:F.data.label,action:"Validation Success",result:"success",message:`Valid input: "${T}"`}),N(0);else{const le=D.maxRetries||3,de=E+1;if(console.log(" [VALIDATION] Invalid input. Retry",de,"/",le),de<le){const fe=D.retryMessage||`Maaf, mohon jawab dengan salah satu dari: ${D.expectedValues.join(", ")}`;A({type:"sent",content:fe}),P({nodeId:F.id,nodeName:F.data.label,action:"Validation Failed",result:"error",message:`Invalid input "${T}". Retry ${de}/${le}`}),N(de),k("");return}else{const fe=D.fallbackAction||"end",ie=D.fallbackMessage||"Maaf, kami tidak dapat memproses jawaban Anda.";if(P({nodeId:F.id,nodeName:F.data.label,action:"Max Retries Reached",result:"error",message:`Max retries (${le}) reached. Action: ${fe}`}),A({type:"sent",content:ie}),N(0),k(""),fe==="end"){j(!1),P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"error",message:"Flow ended due to max retries reached"}),b(!1),x(null);return}else if(fe==="wait_again"){P({nodeId:F.id,nodeName:F.data.label,action:"Wait for Reply Again",result:"error",message:"Waiting for user input again (unlimited retries after fallback)"});return}j(!1),P({nodeId:F.id,nodeName:F.data.label,action:"Continue with Invalid",result:"error",message:`Continuing flow with invalid input: "${T}"`})}}}let W=f.current;if((Z=F==null?void 0:F.data.config)!=null&&Z.saveAs){const J=F.data.config.saveAs;console.log(" [SEND REPLY] Saving to variable:",J,"=",T),W={...f.current,[J]:T},d(W),console.log(" [SEND REPLY] Updated variables:",W)}else console.log(" [SEND REPLY] No saveAs configured, variable NOT saved");if(k(""),j(!1),await $(100),g){const J=L(g);console.log(" [SEND REPLY] Next node:",J==null?void 0:J.id,(G=J==null?void 0:J.data)==null?void 0:G.label),J&&(await $(400),await B(J))}},Y=async F=>{const D=e.nodes.find(te=>te.id===_.nodeId);if(!D)return;const W=D.data.config,X=W.questions;if(_.isConfirmationPhase){const te=W.confirmYesKeywords||["ya","yes","benar","ok"],se=W.confirmNoKeywords||["tidak","no","salah","ulang"],le=F.toLowerCase();if(te.some(de=>le===de.toLowerCase())){P({nodeId:D.id,nodeName:D.data.label,action:"Form Confirmed",result:"success",message:"User confirmed all answers"});const de={...f.current,..._.collectedAnswers};d(de),f.current=de,R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1);const fe=L(D.id,"confirmed");if(fe)await $(500),await B(fe);else{const ie=L(D.id);ie&&(await $(500),await B(ie))}return}else if(se.some(de=>le===de.toLowerCase())){const de=_.confirmRetryCount+1,fe=W.maxConfirmRetries||3;if(de>=fe){P({nodeId:D.id,nodeName:D.data.label,action:"Max Confirm Retries",result:"error",message:`Max confirmation retries (${fe}) reached`}),await H(D,W);return}P({nodeId:D.id,nodeName:D.data.label,action:"Re-enter Data",result:"success",message:`User wants to re-enter. Retry ${de}/${fe}`}),R(xe=>({...xe,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:de,isConfirmationPhase:!1,collectedAnswers:{}}));const ie=X[0];let ue=ie.promptMessage||ie.question;ie.type==="choice"&&ie.options&&(ue+=`

Pilihan: ${ie.options.join(", ")}`),A({type:"sent",content:ue});return}else{A({type:"sent",content:`Mohon jawab dengan "${te[0]}" atau "${se[0]}"`});return}}const Z=X[_.currentQuestionIndex],G=z(Z,F);if(!G.valid){const te=_.questionRetryCount+1,se=W.maxQuestionRetries||3;if(te>=se){P({nodeId:D.id,nodeName:D.data.label,action:"Max Question Retries",result:"error",message:`Max retries for question "${Z.variableName}"`}),await H(D,W);return}P({nodeId:D.id,nodeName:D.data.label,action:"Invalid Answer",result:"error",message:`${G.error}. Retry ${te}/${se}`}),R(de=>({...de,questionRetryCount:te}));const le=Z.errorMessage||G.error||"Jawaban tidak valid";A({type:"sent",content:le});return}const J={..._.collectedAnswers,[Z.variableName]:F};P({nodeId:D.id,nodeName:D.data.label,action:"Answer Saved",result:"success",message:`${Z.variableName} = "${F}"`});const ne=_.currentQuestionIndex+1;if(ne<X.length){R(le=>({...le,currentQuestionIndex:ne,questionRetryCount:0,collectedAnswers:J}));const te=X[ne];let se=te.promptMessage||te.question;te.type==="choice"&&te.options&&(se+=`

Pilihan: ${te.options.join(", ")}`),await $(500),A({type:"sent",content:se}),P({nodeId:D.id,nodeName:D.data.label,action:"Ask Question",result:"waiting",message:`Q${ne+1}/${X.length}: ${te.variableName}`})}else if(R(te=>({...te,collectedAnswers:J})),W.enableConfirmation){let te=W.confirmationMessage||`Data yang Anda masukkan:
`;Object.entries(J).forEach(([se,le])=>{const de=new RegExp(`\\{\\{${se}\\}\\}`,"g");te=te.replace(de,le)}),W.confirmationMessage||(te=`Data yang Anda masukkan:
`,X.forEach(se=>{te+=` ${se.question}: ${J[se.variableName]||"-"}
`}),te+=`
Apakah sudah benar? (Ya/Tidak)`),R(se=>({...se,isConfirmationPhase:!0,collectedAnswers:J})),await $(500),A({type:"sent",content:te}),P({nodeId:D.id,nodeName:D.data.label,action:"Confirm Data",result:"waiting",message:"Waiting for confirmation..."})}else{P({nodeId:D.id,nodeName:D.data.label,action:"Form Complete",result:"success",message:"All questions answered"});const te={...f.current,...J};d(te),f.current=te,R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1);const se=L(D.id,"confirmed")||L(D.id);se&&(await $(500),await B(se))}},z=(F,D)=>{if(F.required&&!D.trim())return{valid:!1,error:"Jawaban tidak boleh kosong"};switch(F.type){case"number":const W=parseInt(D);return isNaN(W)?{valid:!1,error:"Mohon masukkan angka"}:F.min!==void 0&&W<F.min?{valid:!1,error:`Minimal ${F.min}`}:F.max!==void 0&&W>F.max?{valid:!1,error:`Maksimal ${F.max}`}:{valid:!0};case"choice":return F.options&&F.options.length>0&&!F.options.map(Z=>Z.toLowerCase()).includes(D.toLowerCase())?{valid:!1,error:`Pilih salah satu: ${F.options.join(", ")}`}:{valid:!0};case"text":default:return{valid:!0}}},H=async(F,D)=>{const W=D.onMaxRetry;if(W!=null&&W.sendCSMessage&&W.csMessage&&A({type:"sent",content:W.csMessage}),R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}}),j(!1),(W==null?void 0:W.action)==="jump_to_node"&&W.jumpToNodeId){const Z=e.nodes.find(G=>G.id===W.jumpToNodeId);if(Z){P({nodeId:F.id,nodeName:F.data.label,action:"Jump to Node",result:"success",message:`Jumping to ${Z.data.label}`}),await $(500),await B(Z);return}}const X=L(F.id,"max_retry");X?(await $(500),await B(X)):(P({nodeId:F.id,nodeName:F.data.label,action:"End Flow",result:"error",message:"Flow ended due to max retries"}),b(!1),x(null))},M=()=>{s([]),l([]),d({"guest.name":"Test User","guest.phone":"+6281234567890","guest.email":"test@example.com","event.name":"Wedding Event","event.date":"January 20, 2026","event.venue":"Grand Ballroom"}),x(null),b(!1),j(!1),k(""),N(0),R({isActive:!1,nodeId:null,currentQuestionIndex:0,questionRetryCount:0,confirmRetryCount:0,isConfirmationPhase:!1,collectedAnswers:{}})},U=o.jsx(io,{children:o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:o.jsxs(ce.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},onClick:F=>F.stopPropagation(),style:{background:"#fff",borderRadius:"24px",width:"90vw",height:"85vh",maxWidth:"1200px",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.2)"},children:[o.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)"},children:[o.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:600,color:"#fff"},children:["Flow Simulator - ",(e==null?void 0:e.name)||"Unknown"]}),o.jsx("button",{onClick:t,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer"},children:o.jsx(Nn,{size:24,style:{color:"#fff"}})})]}),o.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"400px 300px",gap:"1px",background:"#e5e7eb",overflow:"hidden"},children:[o.jsxs("div",{style:{background:"#ece5dd",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsx("div",{style:{background:"#075e54",padding:"12px 16px",color:"#fff",fontSize:"0.875rem",fontWeight:600},children:"Test User"}),o.jsx("div",{ref:h,style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:r.map(F=>o.jsx("div",{style:{alignSelf:F.type==="sent"?"flex-end":"flex-start",background:F.type==="sent"?"#dcf8c6":"#fff",padding:"8px 12px",borderRadius:"8px",maxWidth:"70%",fontSize:"0.875rem",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:F.content},F.id))}),o.jsxs("div",{style:{padding:"12px",background:"#f0f0f0",display:"flex",gap:"8px"},children:[o.jsx("input",{type:"text",value:T,onChange:F=>k(F.target.value),onKeyPress:F=>F.key==="Enter"&&V(),placeholder:w?"Type a message...":"Waiting for flow...",disabled:!w,style:{flex:1,padding:"8px 12px",borderRadius:"20px",border:"none",fontSize:"0.875rem"}}),o.jsx("button",{onClick:V,disabled:!w||!T.trim(),style:{background:w?"#25d366":"#ccc",color:"#fff",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:w?"pointer":"not-allowed"},children:o.jsx(Gf,{size:18})})]})]}),o.jsxs("div",{style:{background:"#fff",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",maxHeight:"200px",overflowY:"auto"},children:[o.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Variables"}),Object.entries(u).map(([F,D])=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"6px",padding:"4px 8px",background:"#f9fafb",borderRadius:"4px"},children:[o.jsxs("span",{style:{color:"#6b7280"},children:[F,":"]}),o.jsx("span",{style:{fontWeight:500},children:JSON.stringify(D)})]},F)),Object.keys(u).length===0&&o.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"No variables yet"})]}),o.jsxs("div",{ref:m,style:{flex:1,padding:"16px",overflowY:"auto",minHeight:0},children:[o.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Execution Log"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[a.map((F,D)=>o.jsxs("div",{style:{padding:"8px",background:F.result==="error"?"#fee2e2":F.result==="waiting"?"#fef3c7":"#d1fae5",borderRadius:"6px",fontSize:"0.75rem"},children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:F.nodeName}),o.jsxs("div",{style:{color:"#6b7280",wordBreak:"break-word"},children:[F.action,": ",F.message]})]},D)),a.length===0&&o.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"No logs yet. Click Start to begin."})]})]})]})]}),o.jsx("div",{style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"12px",justifyContent:"center",background:"#f9fafb",position:"relative",zIndex:10},children:v?o.jsxs("button",{onClick:M,style:{padding:"10px 24px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},children:[o.jsx(Hf,{size:16}),"Reset"]}):o.jsxs("button",{type:"button",onClick:K,style:{padding:"10px 24px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"0.875rem",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[o.jsx(ic,{size:16}),"Start Flow Test"]})})]})})});return Ia.createPortal(U,document.body)}function qV({chatflowName:e,onBack:t,onSave:n,onTest:r,onUpdateName:s,onDelete:a,onToggleLock:l,isSaving:u=!1,hasUnsavedChanges:d=!1,lastSaved:f=null,validation:m,currentChatflow:h,isLocked:g=!1}){const[x,v]=S.useState(!1),[b,w]=S.useState(!1),[j,T]=S.useState(!1),[k,E]=S.useState(e),[N,_]=S.useState(!1),R=S.useRef(null),A=S.useRef(null);S.useEffect(()=>{const K=V=>{R.current&&!R.current.contains(V.target)&&v(!1)};if(x)return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[x]),S.useEffect(()=>{j&&A.current&&(A.current.focus(),A.current.select())},[j]),S.useEffect(()=>{E(e)},[e]);const P=()=>{T(!0),E(e)},$=()=>{k.trim()&&k!==e&&(s==null||s(k.trim())),T(!1)},L=()=>{E(e),T(!1)},B=K=>{K.key==="Enter"?$():K.key==="Escape"&&L()};return o.jsxs("div",{style:{height:"70px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 2rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:o.jsx(ho,{size:20,style:{color:"#f59e0b"}})}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"2px"},children:"Chatflow Studio"}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:j?o.jsxs(o.Fragment,{children:[o.jsx("input",{ref:A,type:"text",value:k,onChange:K=>E(K.target.value),onKeyDown:B,style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",padding:"4px 8px",border:"2px solid #f59e0b",borderRadius:"6px",outline:"none",minWidth:"200px"}}),o.jsx("button",{onClick:$,style:{padding:"4px",background:"#10b981",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:o.jsx(rc,{size:16,style:{color:"#fff"}})}),o.jsx("button",{onClick:L,style:{padding:"4px",background:"#ef4444",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},children:o.jsx(Nn,{size:16,style:{color:"#fff"}})})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1f2937",margin:0},children:e}),s&&o.jsx("button",{onClick:P,style:{padding:"4px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.2s ease"},title:"Edit chatflow name",children:o.jsx(Uf,{size:14,style:{color:"#f59e0b"}})})]})})]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",display:"flex",alignItems:"center",gap:"8px",marginLeft:"16px"},children:[u&&o.jsxs(o.Fragment,{children:[o.jsx($t,{size:14,style:{animation:"spin 1s linear infinite"}}),o.jsx("span",{children:"Saving..."})]}),!u&&d&&o.jsx("span",{children:"Unsaved changes"}),!u&&!d&&f&&o.jsxs("span",{children:["Saved ",HV(f,{addSuffix:!0})]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},children:[m&&!m.valid&&o.jsxs("div",{onClick:()=>v(!x),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"#fee2e2",borderRadius:"8px",cursor:"pointer"},children:[o.jsx($g,{size:16,style:{color:"#dc2626"}}),o.jsxs("span",{style:{fontSize:"0.875rem",color:"#dc2626",fontWeight:500},children:[m.errors.length," error(s)"]})]}),m&&m.valid&&m.warnings.length>0&&o.jsxs("div",{onClick:()=>v(!x),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"#fef3c7",borderRadius:"8px",cursor:"pointer"},children:[o.jsx(uf,{size:16,style:{color:"#f59e0b"}}),o.jsxs("span",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:500},children:[m.warnings.length," warning(s)"]})]}),x&&m&&o.jsxs("div",{ref:R,onClick:K=>K.stopPropagation(),style:{position:"absolute",top:"50px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"350px",maxWidth:"450px",maxHeight:"400px",overflow:"auto",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Validation Results"}),o.jsx("button",{onClick:()=>v(!1),style:{background:"none",border:"none",cursor:"pointer"},children:o.jsx(ei,{size:20,style:{color:"#6b7280"}})})]}),m.errors.map((K,V)=>o.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#fee2e2",borderRadius:"8px",marginBottom:"8px"},children:[o.jsx(ei,{size:16,style:{color:"#dc2626",flexShrink:0,marginTop:"2px"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#dc2626",flex:1},children:K})]},`error-${V}`)),m.warnings.map((K,V)=>o.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#fef3c7",borderRadius:"8px",marginBottom:"8px"},children:[o.jsx(uf,{size:16,style:{color:"#f59e0b",flexShrink:0,marginTop:"2px"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#92400e",flex:1},children:K})]},`warning-${V}`)),m.valid&&m.warnings.length===0&&o.jsxs("div",{style:{display:"flex",gap:"8px",padding:"10px",background:"#d1fae5",borderRadius:"8px"},children:[o.jsx(ao,{size:16,style:{color:"#10b981",flexShrink:0}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#065f46"},children:"Flow is valid"})]})]}),o.jsxs(ce.button,{whileHover:{scale:u||!d?1:1.05},whileTap:{scale:u||!d?1:.95},onClick:n,disabled:u||!d,style:{padding:"10px 20px",borderRadius:"12px",background:d&&!u?"rgba(16, 185, 129, 0.1)":"rgba(156, 163, 175, 0.1)",border:d&&!u?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(156, 163, 175, 0.2)",display:"flex",alignItems:"center",gap:"8px",cursor:u||!d?"not-allowed":"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:d&&!u?"#10b981":"#9ca3af",transition:"all 0.2s ease",opacity:u||!d?.6:1},children:[u?o.jsx($t,{size:16,style:{animation:"spin 1s linear infinite"}}):o.jsx(Uj,{size:16}),"Save"]}),o.jsxs(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(!0),style:{padding:"10px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)",border:"none",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:[o.jsx(ic,{size:16}),"Test Flow"]}),o.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(100, 116, 139, 0.1)",border:"1px solid rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:o.jsx(Ac,{size:18,style:{color:"#64748b"}})}),l&&o.jsx(ce.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:g?"Unlock chatflow for editing":"Lock chatflow (set to active)",style:{width:"40px",height:"40px",borderRadius:"12px",background:g?"rgba(245, 158, 11, 0.1)":"rgba(100, 116, 139, 0.1)",border:g?"1px solid rgba(245, 158, 11, 0.3)":"1px solid rgba(100, 116, 139, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:g?o.jsx(xr,{size:18,style:{color:"#f59e0b"}}):o.jsx(Lj,{size:18,style:{color:"#64748b"}})}),a&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx(ce.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:K=>{K.preventDefault(),K.stopPropagation(),_(!0)},title:"Delete chatflow",style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:o.jsx(Ht,{size:18,style:{color:"#ef4444"}})}),N&&o.jsxs("div",{onClick:K=>K.stopPropagation(),style:{position:"absolute",top:"50px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"280px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",fontWeight:600,color:"#1f2937"},children:"Delete Chatflow?"}),o.jsxs("p",{style:{margin:"0 0 16px 0",fontSize:"0.875rem",color:"#6b7280"},children:['This action cannot be undone. The chatflow "',e,'" will be permanently deleted.']}),o.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),K.stopPropagation(),_(!1)},style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:"0.875rem",fontWeight:500,cursor:"pointer"},children:"Cancel"}),o.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),K.stopPropagation(),_(!1),a()},style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"#ef4444",color:"#fff",fontSize:"0.875rem",fontWeight:500,cursor:"pointer"},children:"Delete"})]})]})]})]}),b&&h&&o.jsx(GV,{chatflow:h,onClose:()=>w(!1)})]})}const KV=[{type:"trigger",icon:ga,label:"Start",description:"Flow starting point",color:"#f59e0b"},{type:"send_template",icon:yy,label:"Send Template",description:"Send WhatsApp template",color:"#06b6d4"},{type:"wait_reply",icon:po,label:"Wait Reply",description:"Wait for user response",color:"#3b82f6"},{type:"condition",icon:$j,label:"Condition",description:"Branch based on logic",color:"#8b5cf6"},{type:"delay",icon:Hj,label:"Delay",description:"Wait for duration",color:"#10b981"},{type:"guest_form",icon:Fj,label:"Guest Form",description:"Collect guest information",color:"#10b981"},{type:"update_guest",icon:by,label:"Update Guest",description:"Update guest data",color:"#ec4899"},{type:"end",icon:zj,label:"End",description:"Flow ending point",color:"#64748b"}];function XV({onCollapse:e}){const t=(n,r)=>{n.dataTransfer.setData("application/reactflow",r),n.dataTransfer.effectAllowed="move"};return o.jsxs("div",{style:{width:"280px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRight:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Node Palette"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280",margin:"4px 0 0 0"},children:"Drag nodes to canvas"})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:KV.map(n=>{const r=n.icon;return o.jsx(ce.div,{draggable:!0,onDragStart:s=>t(s,n.type),whileHover:{scale:1.02,x:4},style:{padding:"12px",borderRadius:"12px",background:`linear-gradient(135deg, ${n.color}15 0%, ${n.color}08 100%)`,border:`1px solid ${n.color}30`,cursor:"grab",transition:"all 0.2s ease"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:`${n.color}20`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(r,{size:18,style:{color:n.color}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",marginBottom:"2px"},children:n.label}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#6b7280"},children:n.description})]})]})},n.type)})})})]})}function YV({node:e}){return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"8px"},children:"Start Node"}),o.jsxs("p",{style:{fontSize:"0.8125rem",color:"#15803d",lineHeight:"1.5"},children:["This is the ",o.jsx("strong",{children:"starting point"})," of your flow. Every flow must have exactly one Start node."]}),o.jsx("p",{style:{fontSize:"0.8125rem",color:"#15803d",lineHeight:"1.5",marginTop:"8px"},children:"The Start node doesn't trigger anything automatically - it simply marks where the flow begins when executed."})]}),o.jsx("div",{style:{padding:"12px",background:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",margin:0},children:[" ",o.jsx("strong",{children:"Tip:"})," Connect the Start node to your first action (usually Send Template)."]})})]})}function JV({node:e,onChange:t}){const{templates:n}=Ma(),r=e.data.config,s=n.filter(m=>m.status==="APPROVED"),a=s.find(m=>m.id===(r==null?void 0:r.templateId)),u=a?(m=>{if(!m)return[];const h=/\{\{(\w+)\}\}/g,g=m.matchAll(h),x=new Set;for(const v of g)x.add(v[1]);return Array.from(x)})(a.content.body.text):[],d=m=>{const h={...r||{templateId:"",templateName:""},...m};console.log(" SendTemplateConfig updating:",{nodeId:e.id,oldConfig:r,updates:m,newConfig:h}),t({...e,data:{...e.data,config:h}})},f=(m,h)=>{const g={...(r==null?void 0:r.variables)||{},[m]:h};d({variables:g})};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"WhatsApp Template"}),o.jsxs("select",{value:(r==null?void 0:r.templateId)||"",onChange:m=>{const h=s.find(g=>g.id===m.target.value);t({...e,data:{...e.data,label:(h==null?void 0:h.name)||"Send Template",config:{...r||{templateId:"",templateName:""},templateId:m.target.value,templateName:(h==null?void 0:h.name)||""}}})},style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"",children:"Select Template"}),s.map(m=>o.jsxs("option",{value:m.id,children:[m.name," (",m.category,")"]},m.id))]}),s.length===0&&o.jsx("p",{style:{fontSize:"0.75rem",color:"#dc2626",marginTop:"4px"},children:"No approved templates available. Create and approve a template first."})]}),a&&o.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Preview"}),o.jsx(ky,{template:a,sampleData:Object.fromEntries(u.map(m=>{var h;return[m,((h=r==null?void 0:r.variables)==null?void 0:h[m])||`[${m}]`]}))})]}),u.length>0&&o.jsxs("div",{children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"12px"},children:"Variable Mapping"}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"12px"},children:"Map template variables to guest fields or flow variables"}),u.map(m=>{var g;const h=((g=r==null?void 0:r.variables)==null?void 0:g[m])||"";return o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{fontSize:"0.8125rem",fontWeight:500,color:"#6b7280",marginBottom:"6px",display:"block"},children:`{{${m}}}`}),o.jsxs("select",{value:h,onChange:x=>f(m,x.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"",children:"Select source"}),o.jsxs("optgroup",{label:"Guest Fields",children:[o.jsx("option",{value:"{{guest.name}}",children:"Guest Name"}),o.jsx("option",{value:"{{guest.phone}}",children:"Guest Phone"}),o.jsx("option",{value:"{{guest.email}}",children:"Guest Email"}),o.jsx("option",{value:"{{guest.table}}",children:"Table Number"}),o.jsx("option",{value:"{{guest.rsvpStatus}}",children:"RSVP Status"})]}),o.jsxs("optgroup",{label:"Event Fields",children:[o.jsx("option",{value:"{{event.name}}",children:"Event Name"}),o.jsx("option",{value:"{{event.date}}",children:"Event Date"}),o.jsx("option",{value:"{{event.venue}}",children:"Event Venue"})]})]})]},m)})]})]})}function QV({node:e,onChange:t}){const n=e.data.config,[r,s]=S.useState(""),a=h=>{const g={...n||{},...h};console.log(" WaitReplyConfig updating:",{nodeId:e.id,oldConfig:n,updates:h,newConfig:g}),t({...e,data:{...e.data,config:g}})},l=(n==null?void 0:n.expectedValues)||[],u=h=>{const g=h.trim();g&&!l.includes(g)&&a({expectedValues:[...l,g]}),s("")},d=h=>{a({expectedValues:l.filter(g=>g!==h)})},f=h=>{h.key==="Enter"||h.key===";"?(h.preventDefault(),u(r)):h.key==="Backspace"&&!r&&l.length>0&&d(l[l.length-1])},m=()=>{r.trim()&&u(r)};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Timeout (seconds)"}),o.jsx("input",{type:"number",value:(n==null?void 0:n.timeout)||300,onChange:h=>a({timeout:parseInt(h.target.value)||300}),min:0,placeholder:"300",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"How long to wait for a user reply (default: 300 seconds = 5 minutes)"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Timeout Action"}),o.jsxs("select",{value:(n==null?void 0:n.timeoutAction)||"continue",onChange:h=>a({timeoutAction:h.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"continue",children:"Continue to next node"}),o.jsx("option",{value:"end",children:"End flow"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"What to do when timeout is reached"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Save Reply As Variable"}),o.jsx("input",{type:"text",value:(n==null?void 0:n.saveAs)||"",onChange:h=>a({saveAs:h.target.value}),placeholder:"e.g., userReply, rsvpResponse",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Store the user's reply in a variable for later use"})]}),o.jsxs("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"12px"},children:"Input Validation (Optional)"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Expected Values"}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",background:"#fff",minHeight:"42px",alignItems:"center"},children:[l.map((h,g)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"6px",fontSize:"0.8125rem",fontWeight:500,color:"#166534"},children:[o.jsx("span",{children:h}),o.jsx("button",{type:"button",onClick:()=>d(h),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",padding:0,background:"rgba(22, 101, 52, 0.1)",border:"none",borderRadius:"50%",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:x=>x.currentTarget.style.background="rgba(22, 101, 52, 0.2)",onMouseLeave:x=>x.currentTarget.style.background="rgba(22, 101, 52, 0.1)",children:o.jsx(Nn,{size:12,style:{color:"#166534"}})})]},g)),o.jsx("input",{type:"text",value:r,onChange:h=>s(h.target.value),onKeyDown:f,onBlur:m,placeholder:l.length===0?"Type and press Enter or ;":"Add more...",style:{flex:1,minWidth:"100px",padding:"4px",border:"none",outline:"none",fontSize:"0.875rem",background:"transparent"}})]}),o.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:["Type a value and press ",o.jsx("kbd",{style:{background:"#f3f4f6",padding:"1px 4px",borderRadius:"3px",border:"1px solid #d1d5db"},children:"Enter"})," or ",o.jsx("kbd",{style:{background:"#f3f4f6",padding:"1px 4px",borderRadius:"3px",border:"1px solid #d1d5db"},children:";"})," to add. Leave empty to accept any input."]})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Retry Message"}),o.jsx("textarea",{value:(n==null?void 0:n.retryMessage)||"",onChange:h=>a({retryMessage:h.target.value}),placeholder:"e.g., Maaf, mohon jawab dengan 'yes' atau 'no' saja.",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Message to send when user input is invalid"})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Max Retries"}),o.jsx("input",{type:"number",value:(n==null?void 0:n.maxRetries)||3,onChange:h=>a({maxRetries:parseInt(h.target.value)||3}),min:1,max:10,placeholder:"3",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Maximum number of retry attempts (default: 3)"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:(n==null?void 0:n.caseSensitive)||!1,onChange:h=>a({caseSensitive:h.target.checked}),style:{width:"16px",height:"16px",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Case sensitive validation"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",marginLeft:"24px"},children:'If checked, "YES" and "yes" will be treated as different'})]}),o.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"2px solid #bbf7d0"},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#166534",marginBottom:"12px"},children:"After Max Retries"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Fallback Action"}),o.jsxs("select",{value:(n==null?void 0:n.fallbackAction)||"end",onChange:h=>a({fallbackAction:h.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"end",children:"End flow (stop execution)"}),o.jsx("option",{value:"continue",children:"Continue to next node"}),o.jsx("option",{value:"wait_again",children:"Wait for reply again (unlimited retries)"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"What to do after max retry attempts reached"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Fallback Message"}),o.jsx("textarea",{value:(n==null?void 0:n.fallbackMessage)||"",onChange:h=>a({fallbackMessage:h.target.value}),placeholder:"e.g., Maaf kami tidak dapat memproses jawaban Anda. Silakan hubungi CS kami di +6281234567890",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),o.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:["Message to send before ",(n==null?void 0:n.fallbackAction)==="continue"?"continuing":"ending"," the flow"]})]})]})]})]})}function ZV({node:e,onChange:t}){const n=e.data.config,r=s=>{const a={...n||{variable:"",operator:"equals",value:""},...s};console.log(" ConditionConfig updating:",{nodeId:e.id,oldConfig:n,updates:s,newConfig:a}),t({...e,data:{...e.data,config:a}})};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Variable to Check"}),o.jsx("input",{type:"text",value:(n==null?void 0:n.variable)||"",onChange:s=>r({variable:s.target.value}),placeholder:"e.g., userReply, rsvpStatus",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"Variable name from wait_reply or set_variable nodes"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Operator"}),o.jsxs("select",{value:(n==null?void 0:n.operator)||"equals",onChange:s=>r({operator:s.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"equals",children:"Equals"}),o.jsx("option",{value:"not_equals",children:"Not Equals"}),o.jsx("option",{value:"contains",children:"Contains"}),o.jsx("option",{value:"matches",children:"Matches (regex)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Value to Compare"}),o.jsx("input",{type:"text",value:(n==null?void 0:n.value)||"",onChange:s=>r({value:s.target.value}),placeholder:"e.g., yes, confirm, hadir",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:(n==null?void 0:n.caseSensitive)||!1,onChange:s=>r({caseSensitive:s.target.checked}),style:{width:"16px",height:"16px",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Case sensitive"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",marginLeft:"24px"},children:'If unchecked, "YES" and "yes" will be treated as the same'})]}),o.jsxs("div",{style:{padding:"12px",background:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:[o.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",fontWeight:500},children:[o.jsx("strong",{children:"Note:"})," Connect two edges from this node:"]}),o.jsxs("ul",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"4px",paddingLeft:"20px"},children:[o.jsx("li",{children:"True path: When condition matches"}),o.jsx("li",{children:"False path: When condition doesn't match"})]})]})]})}function eU({node:e,onChange:t}){const n=e.data.config,r=a=>{const l={...n||{duration:1,unit:"seconds"},...a};console.log(" DelayConfig updating:",{nodeId:e.id,oldConfig:n,updates:a,newConfig:l}),t({...e,data:{...e.data,config:l}})},s=()=>{const a=(n==null?void 0:n.duration)||1,l=(n==null?void 0:n.unit)||"seconds";return a===1?`1 ${l.slice(0,-1)}`:`${a} ${l}`};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Duration"}),o.jsx("input",{type:"number",value:(n==null?void 0:n.duration)||1,onChange:a=>r({duration:parseInt(a.target.value)||1}),min:1,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Time Unit"}),o.jsxs("select",{value:(n==null?void 0:n.unit)||"seconds",onChange:a=>r({unit:a.target.value}),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"seconds",children:"Seconds"}),o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"})]})]}),o.jsxs("div",{style:{padding:"12px",background:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[o.jsxs("p",{style:{fontSize:"0.875rem",color:"#166534",fontWeight:500},children:["Will wait for: ",o.jsx("strong",{children:s()})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#15803d",marginTop:"4px"},children:"The flow will pause before continuing to the next node"})]})]})}const tU=()=>({questions:[],enableConfirmation:!1,confirmationMessage:"",confirmYesKeywords:["ya","benar","ok","sudah"],confirmNoKeywords:["tidak","salah","ulang","bukan"],maxQuestionRetries:3,maxConfirmRetries:3,onMaxRetry:{sendCSMessage:!1,csMessage:"",action:"end",jumpToNodeId:void 0}}),nU=()=>({id:`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:"",type:"text",variableName:"",required:!0,promptMessage:"",errorMessage:"Jawaban tidak valid. Silakan coba lagi."});function rU({node:e,onChange:t,allNodes:n=[]}){var b,w,j,T,k,E,N,_,R;const r=e.data.config||tU(),[s,a]=S.useState(null),[l,u]=S.useState({questions:!0,confirmation:!1,retry:!1,maxRetry:!1}),d=A=>{const P={...r,...A};t({...e,data:{...e.data,config:P}})},f=()=>{const A=nU();d({questions:[...r.questions,A]}),a(A.id)},m=(A,P)=>{d({questions:r.questions.map($=>$.id===A?{...$,...P}:$)})},h=A=>{d({questions:r.questions.filter(P=>P.id!==A)}),s===A&&a(null)},g=(A,P)=>{const $=[...r.questions],L=P==="up"?A-1:A+1;L<0||L>=$.length||([$[A],$[L]]=[$[L],$[A]],d({questions:$}))},x=A=>{u(P=>({...P,[A]:!P[A]}))},v=n.filter(A=>A.id!==e.id&&A.type!=="end");return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsx(Ed,{title:"Questions",count:r.questions.length,expanded:l.questions,onToggle:()=>x("questions")}),l.questions&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.questions.length===0?o.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:"No questions yet. Add your first question below."}):r.questions.map((A,P)=>o.jsx(sU,{question:A,index:P,isEditing:s===A.id,onEdit:()=>a(A.id),onSave:()=>a(null),onUpdate:$=>m(A.id,$),onDelete:()=>h(A.id),onMoveUp:()=>g(P,"up"),onMoveDown:()=>g(P,"down"),canMoveUp:P>0,canMoveDown:P<r.questions.length-1},A.id)),o.jsxs("button",{onClick:f,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"2px dashed #10b981",background:"rgba(16, 185, 129, 0.05)",color:"#10b981",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:[o.jsx(en,{size:18}),"Add Question"]})]}),o.jsx(Ed,{title:"Confirmation",expanded:l.confirmation,onToggle:()=>x("confirmation"),badge:r.enableConfirmation?"ON":"OFF",badgeColor:r.enableConfirmation?"#10b981":"#6b7280"}),l.confirmation&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.enableConfirmation,onChange:A=>d({enableConfirmation:A.target.checked}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Enable confirmation before submit"})]}),r.enableConfirmation&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Confirmation Message"}),o.jsx("textarea",{value:r.confirmationMessage||"",onChange:A=>d({confirmationMessage:A.target.value}),placeholder:"Data Anda:\\n- Nama: {{nama}}\\n- Jumlah: {{jumlah}} orang\\n\\nSudah benar? Balas 'Ya' atau 'Tidak'",style:{...hn,minHeight:"100px",resize:"vertical"}}),o.jsxs("p",{style:Xd,children:["Use ","{{variableName}}"," to include collected values"]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Yes Keywords"}),o.jsx("input",{type:"text",value:((b=r.confirmYesKeywords)==null?void 0:b.join(", "))||"",onChange:A=>d({confirmYesKeywords:A.target.value.split(",").map(P=>P.trim()).filter(Boolean)}),placeholder:"ya, benar, ok",style:hn})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"No Keywords"}),o.jsx("input",{type:"text",value:((w=r.confirmNoKeywords)==null?void 0:w.join(", "))||"",onChange:A=>d({confirmNoKeywords:A.target.value.split(",").map(P=>P.trim()).filter(Boolean)}),placeholder:"tidak, salah, ulang",style:hn})]})]})]})]}),o.jsx(Ed,{title:"Retry Settings",expanded:l.retry,onToggle:()=>x("retry")}),l.retry&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Max Question Retries"}),o.jsx("input",{type:"number",min:1,max:10,value:r.maxQuestionRetries||3,onChange:A=>d({maxQuestionRetries:parseInt(A.target.value)||3}),style:hn}),o.jsx("p",{style:Xd,children:"Per invalid answer"})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Max Confirm Retries"}),o.jsx("input",{type:"number",min:1,max:10,value:r.maxConfirmRetries||3,onChange:A=>d({maxConfirmRetries:parseInt(A.target.value)||3}),style:hn}),o.jsx("p",{style:Xd,children:'When answering "No"'})]})]})}),o.jsx(Ed,{title:"After Max Retries",expanded:l.maxRetry,onToggle:()=>x("maxRetry")}),l.maxRetry&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:((j=r.onMaxRetry)==null?void 0:j.sendCSMessage)||!1,onChange:A=>d({onMaxRetry:{...r.onMaxRetry,sendCSMessage:A.target.checked}}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#374151"},children:"Send CS contact message"})]}),((T=r.onMaxRetry)==null?void 0:T.sendCSMessage)&&o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"CS Message"}),o.jsx("input",{type:"text",value:((k=r.onMaxRetry)==null?void 0:k.csMessage)||"",onChange:A=>d({onMaxRetry:{...r.onMaxRetry,csMessage:A.target.value}}),placeholder:"Hubungi CS kami: +62812345678",style:hn})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Then"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"radio",name:"maxRetryAction",checked:((E=r.onMaxRetry)==null?void 0:E.action)==="end",onChange:()=>d({onMaxRetry:{...r.onMaxRetry,action:"end",jumpToNodeId:void 0}}),style:{accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"End flow"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"radio",name:"maxRetryAction",checked:((N=r.onMaxRetry)==null?void 0:N.action)==="jump_to_node",onChange:()=>d({onMaxRetry:{...r.onMaxRetry,action:"jump_to_node"}}),style:{accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"Jump to node:"})]}),((_=r.onMaxRetry)==null?void 0:_.action)==="jump_to_node"&&o.jsxs("select",{value:((R=r.onMaxRetry)==null?void 0:R.jumpToNodeId)||"",onChange:A=>d({onMaxRetry:{...r.onMaxRetry,jumpToNodeId:A.target.value||void 0}}),style:{...hn,marginLeft:"24px"},children:[o.jsx("option",{value:"",children:"Select target node..."}),v.map(A=>o.jsxs("option",{value:A.id,children:[A.data.label||A.type," (",A.type,")"]},A.id))]})]})]}),o.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #fcd34d"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"#92400e",margin:0},children:[o.jsx("strong",{children:"Note:"})," Max 3 global restarts per guest to prevent infinite loops."]})})]})]})}function Ed({title:e,count:t,expanded:n,onToggle:r,badge:s,badgeColor:a}){return o.jsxs("button",{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",cursor:"pointer",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#1f2937"},children:e}),t!==void 0&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",background:"#10b981",color:"white",fontSize:"0.7rem",fontWeight:600},children:t}),s&&o.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",background:a||"#6b7280",color:"white",fontSize:"0.7rem",fontWeight:600},children:s})]}),n?o.jsx(my,{size:18,color:"#6b7280"}):o.jsx(Ic,{size:18,color:"#6b7280"})]})}function sU({question:e,index:t,isEditing:n,onEdit:r,onSave:s,onUpdate:a,onDelete:l,onMoveUp:u,onMoveDown:d,canMoveUp:f,canMoveDown:m}){var h;return n?o.jsxs("div",{style:{padding:"16px",borderRadius:"12px",border:"2px solid #10b981",background:"rgba(16, 185, 129, 0.05)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[o.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#10b981"},children:["Edit Question ",t+1]}),o.jsx("button",{onClick:s,style:Pl,children:o.jsx(Nn,{size:16})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Question Text"}),o.jsx("input",{type:"text",value:e.question,onChange:g=>a({question:g.target.value}),placeholder:"Siapa nama lengkap Anda?",style:hn})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Answer Type"}),o.jsxs("select",{value:e.type,onChange:g=>a({type:g.target.value}),style:hn,children:[o.jsx("option",{value:"text",children:"Text (free input)"}),o.jsx("option",{value:"number",children:"Number"}),o.jsx("option",{value:"choice",children:"Choice (options)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Variable Name"}),o.jsx("input",{type:"text",value:e.variableName,onChange:g=>a({variableName:g.target.value.replace(/\s/g,"_")}),placeholder:"nama",style:hn}),o.jsxs("p",{style:Xd,children:["Available as ","{{"+(e.variableName||"variableName")+"}}"]})]})]}),e.type==="number"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Min Value"}),o.jsx("input",{type:"number",value:e.min||"",onChange:g=>a({min:g.target.value?parseInt(g.target.value):void 0}),placeholder:"1",style:hn})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Max Value"}),o.jsx("input",{type:"number",value:e.max||"",onChange:g=>a({max:g.target.value?parseInt(g.target.value):void 0}),placeholder:"10",style:hn})]})]}),e.type==="choice"&&o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Options (one per line)"}),o.jsx("textarea",{value:((h=e.options)==null?void 0:h.join(`
`))||"",onChange:g=>a({options:g.target.value.split(`
`).filter(Boolean)}),placeholder:"Halal\\nVegetarian\\nTidak ada",style:{...hn,minHeight:"80px"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Custom Prompt Message (optional)"}),o.jsx("input",{type:"text",value:e.promptMessage||"",onChange:g=>a({promptMessage:g.target.value}),placeholder:"Balas dengan nama lengkap Anda ya!",style:hn})]}),o.jsxs("div",{children:[o.jsx("label",{style:fn,children:"Error Message"}),o.jsx("input",{type:"text",value:e.errorMessage||"",onChange:g=>a({errorMessage:g.target.value}),placeholder:"Jawaban tidak valid. Silakan coba lagi.",style:hn})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:e.required,onChange:g=>a({required:g.target.checked}),style:{width:"16px",height:"16px",accentColor:"#10b981"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"Required"})]})]})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#fff"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",color:"#9ca3af"},children:[o.jsx("button",{onClick:u,disabled:!f,style:{...Pl,opacity:f?1:.3},children:o.jsx(my,{size:14})}),o.jsx("button",{onClick:d,disabled:!m,style:{...Pl,opacity:m?1:.3},children:o.jsx(Ic,{size:14})})]}),o.jsx(gy,{size:16,color:"#9ca3af"}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"#1f2937",marginBottom:"2px"},children:["Q",t+1,": ",e.question||"(no question text)"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[e.type," | ","{{",e.variableName||"?","}}"," | ",e.required?"Required":"Optional"]})]}),o.jsx("button",{onClick:r,style:Pl,title:"Edit",children:o.jsx(Uf,{size:16,color:"#6b7280"})}),o.jsx("button",{onClick:l,style:Pl,title:"Delete",children:o.jsx(Ht,{size:16,color:"#ef4444"})})]})}const fn={display:"block",fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"6px"},hn={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",outline:"none",transition:"border-color 0.2s"},Xd={fontSize:"0.7rem",color:"#9ca3af",marginTop:"4px",margin:"4px 0 0 0"},Pl={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px",borderRadius:"4px",border:"none",background:"transparent",cursor:"pointer",transition:"background 0.2s"},oU=[{value:"name",label:"Guest Name"},{value:"phone",label:"Phone Number"},{value:"email",label:"Email"},{value:"plus_one_count",label:"Plus One Count"},{value:"tags",label:"Tags (append)"},{value:"notes",label:"Notes"},{value:"rsvp_status",label:"RSVP Status"},{value:"table_number",label:"Table Number"},{value:"custom",label:"Custom Field..."}];function iU({node:e,onChange:t,allNodes:n=[]}){var f,m;const r=e.data.config,s=n.filter(h=>h.type==="guest_form").flatMap(h=>{var x;const g=h.data.config;return((x=g==null?void 0:g.questions)==null?void 0:x.map(v=>v.variableName).filter(Boolean))||[]}),a=h=>{const g={...r||{action:"update_rsvp"},...h};console.log("UpdateGuestConfig updating:",{nodeId:e.id,oldConfig:r,updates:h,newConfig:g}),t({...e,data:{...e.data,config:g}})},l=()=>{const h=(r==null?void 0:r.variableMappings)||[];a({variableMappings:[...h,{sourceVariable:"",targetField:"name"}]})},u=(h,g)=>{const v=[...(r==null?void 0:r.variableMappings)||[]];v[h]={...v[h],...g},a({variableMappings:v})},d=h=>{const g=(r==null?void 0:r.variableMappings)||[];a({variableMappings:g.filter((x,v)=>v!==h)})};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"Action"}),o.jsxs("select",{value:(r==null?void 0:r.action)||"update_rsvp",onChange:h=>a({action:h.target.value}),style:_d,children:[o.jsx("option",{value:"map_from_variables",children:"Map from Variables (Guest Form)"}),o.jsx("option",{value:"add_tag",children:"Add Tag"}),o.jsx("option",{value:"remove_tag",children:"Remove Tag"}),o.jsx("option",{value:"update_rsvp",children:"Update RSVP Status"}),o.jsx("option",{value:"update_field",children:"Update Custom Field"})]})]}),(r==null?void 0:r.action)==="map_from_variables"&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.length>0&&o.jsx("div",{style:{padding:"12px",background:"#ecfdf5",borderRadius:"8px",border:"1px solid #a7f3d0"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"#065f46",margin:0},children:[o.jsx("strong",{children:"Available variables:"})," ",s.map(h=>`{{${h}}}`).join(", ")]})}),(((f=r==null?void 0:r.variableMappings)==null?void 0:f.length)||0)===0?o.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:"No mappings configured. Add mappings to save form data to guest record."}):(m=r==null?void 0:r.variableMappings)==null?void 0:m.map((h,g)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"#fff",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Variable"}),s.length>0?o.jsxs("select",{value:h.sourceVariable,onChange:x=>u(g,{sourceVariable:x.target.value}),style:_d,children:[o.jsx("option",{value:"",children:"Select variable..."}),s.map(x=>o.jsx("option",{value:x,children:`{{${x}}}`},x))]}):o.jsx("input",{type:"text",value:h.sourceVariable,onChange:x=>u(g,{sourceVariable:x.target.value}),placeholder:"variableName",style:Wi})]}),o.jsx("div",{style:{padding:"20px 8px 0",color:"#9ca3af",fontSize:"1.2rem"},children:""}),o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Guest Field"}),o.jsx("select",{value:h.targetField,onChange:x=>u(g,{targetField:x.target.value}),style:_d,children:oU.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value))})]}),h.targetField==="custom"&&o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{...ls,marginBottom:"4px",fontSize:"0.75rem"},children:"Field Name"}),o.jsx("input",{type:"text",value:h.customFieldName||"",onChange:x=>u(g,{customFieldName:x.target.value}),placeholder:"customField",style:Wi})]}),o.jsx("button",{onClick:()=>d(g),style:{...lU,marginTop:"20px"},title:"Delete mapping",children:o.jsx(Ht,{size:16,color:"#ef4444"})})]},g)),o.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",borderRadius:"8px",border:"2px dashed #ec4899",background:"rgba(236, 72, 153, 0.05)",color:"#ec4899",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:[o.jsx(en,{size:18}),"Add Mapping"]})]}),(r==null?void 0:r.action)==="add_tag"&&o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"Tag Name"}),o.jsx("input",{type:"text",value:r.tagName||"",onChange:h=>a({tagName:h.target.value}),placeholder:"e.g., confirmed, vip, family",style:Wi})]}),(r==null?void 0:r.action)==="remove_tag"&&o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"Tag Name"}),o.jsx("input",{type:"text",value:r.tagName||"",onChange:h=>a({tagName:h.target.value}),placeholder:"e.g., pending",style:Wi})]}),(r==null?void 0:r.action)==="update_rsvp"&&o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"RSVP Status"}),o.jsxs("select",{value:r.rsvpStatus||"",onChange:h=>a({rsvpStatus:h.target.value}),style:_d,children:[o.jsx("option",{value:"",children:"Select status"}),o.jsx("option",{value:"confirmed",children:"Confirmed (Hadir)"}),o.jsx("option",{value:"declined",children:"Declined (Tidak Hadir)"}),o.jsx("option",{value:"maybe",children:"Maybe (Mungkin)"}),o.jsx("option",{value:"pending",children:"Pending"})]})]}),(r==null?void 0:r.action)==="update_field"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"Field Name"}),o.jsx("input",{type:"text",value:r.fieldName||"",onChange:h=>a({fieldName:h.target.value}),placeholder:"e.g., tableNumber, dietaryRestrictions",style:Wi})]}),o.jsxs("div",{children:[o.jsx("label",{style:ls,children:"Field Value"}),o.jsx("input",{type:"text",value:r.fieldValue||"",onChange:h=>a({fieldValue:h.target.value}),placeholder:"e.g., 5, vegetarian, {{userReply}}",style:Wi}),o.jsxs("p",{style:aU,children:["You can use variables like ",o.jsx("code",{children:"{{userReply}}"})]})]})]}),o.jsx("div",{style:{padding:"12px",background:"#fce7f3",borderRadius:"8px",border:"1px solid #fbcfe8"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"#831843",fontWeight:500,margin:0},children:[o.jsx("strong",{children:"Note:"})," Changes will be applied to the guest record in the database"]})})]})}const ls={fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},Wi={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff"},_d={width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},aU={fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},lU={display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",borderRadius:"8px",border:"none",background:"transparent",cursor:"pointer",transition:"background 0.2s"};function cU({node:e,onChange:t}){const n=e.data.config,r=s=>{console.log(" EndConfig updating:",{nodeId:e.id,oldConfig:n,newReason:s}),t({...e,data:{...e.data,config:{reason:s}}})};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"End Reason"}),o.jsxs("select",{value:(n==null?void 0:n.reason)||"completed",onChange:s=>r(s.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",background:"#fff",cursor:"pointer"},children:[o.jsx("option",{value:"completed",children:"Flow Completed"}),o.jsx("option",{value:"user_declined",children:"User Declined"}),o.jsx("option",{value:"timeout",children:"Timeout"}),o.jsx("option",{value:"error",children:"Error Occurred"}),o.jsx("option",{value:"custom",children:"Custom Reason"})]})]}),(n==null?void 0:n.reason)==="custom"&&o.jsxs("div",{children:[o.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"#374151",marginBottom:"8px",display:"block"},children:"Custom Reason"}),o.jsx("textarea",{value:(n==null?void 0:n.customReason)||"",onChange:s=>t({...e,data:{...e.data,config:{reason:"custom",customReason:s.target.value}}}),placeholder:"Describe why the flow ended",rows:3,style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.875rem",resize:"vertical"}})]}),o.jsxs("div",{style:{padding:"12px",background:"#f3f4f6",borderRadius:"8px",border:"1px solid #d1d5db"},children:[o.jsx("p",{style:{fontSize:"0.875rem",color:"#374151",fontWeight:500},children:"End Node"}),o.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px"},children:"This node marks the end of the conversation flow. No further nodes will be executed after this point."})]}),o.jsx("div",{style:{padding:"12px",background:"#dbeafe",borderRadius:"8px",border:"1px solid #bfdbfe"},children:o.jsxs("p",{style:{fontSize:"0.75rem",color:"#1e40af",fontWeight:500},children:[o.jsx("strong",{children:"Best Practice:"})," Always provide at least one end node in your flow to properly terminate the conversation."]})})]})}function uU({node:e,allNodes:t,isLocked:n=!1,onUpdate:r,onDelete:s,onClose:a}){const l=d=>{n||r({...e,data:{...e.data,label:d}})},u={trigger:"Trigger Node",send_template:"Send Template Node",wait_reply:"Wait Reply Node",condition:"Condition Node",delay:"Delay Node",guest_form:"Guest Form Node",update_guest:"Update Guest Node",end:"End Node"};return o.jsxs("div",{style:{width:"320px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderLeft:"1px solid rgba(245, 158, 11, 0.1)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1f2937",margin:0,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Properties"}),n&&o.jsxs("div",{title:"Chatflow is locked (active)",style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 8px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"6px"},children:[o.jsx(xr,{size:12,style:{color:"#f59e0b"}}),o.jsx("span",{style:{fontSize:"0.7rem",fontWeight:600,color:"#f59e0b"},children:"Locked"})]})]}),o.jsx("button",{onClick:a,style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Nn,{size:16,style:{color:"#6b7280"}})})]}),n&&o.jsxs("div",{style:{padding:"12px 1.5rem",background:"rgba(245, 158, 11, 0.1)",borderBottom:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(xr,{size:14,style:{color:"#f59e0b"}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#92400e"},children:"This chatflow is active. Unlock to edit."})]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:"Node Type"}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",padding:"10px 12px",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",border:"1px solid rgba(245, 158, 11, 0.2)"},children:u[e.type]||e.type})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:"Label"}),o.jsx("input",{type:"text",value:e.data.label,onChange:d=>l(d.target.value),disabled:n,style:{width:"100%",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:n?"#9ca3af":"#1f2937",padding:"10px 12px",background:n?"rgba(0, 0, 0, 0.03)":"rgba(255, 255, 255, 0.9)",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",outline:"none",cursor:n?"not-allowed":"text"}})]}),o.jsxs("div",{style:{marginBottom:"1.5rem",opacity:n?.6:1,pointerEvents:n?"none":"auto"},children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"12px"},children:"Configuration"}),e.type==="trigger"&&o.jsx(YV,{node:e,onChange:r}),e.type==="send_template"&&o.jsx(JV,{node:e,onChange:r}),e.type==="wait_reply"&&o.jsx(QV,{node:e,onChange:r}),e.type==="condition"&&o.jsx(ZV,{node:e,onChange:r}),e.type==="delay"&&o.jsx(eU,{node:e,onChange:r}),e.type==="guest_form"&&o.jsx(rU,{node:e,onChange:r,allNodes:t}),e.type==="update_guest"&&o.jsx(iU,{node:e,onChange:r,allNodes:t}),e.type==="end"&&o.jsx(cU,{node:e,onChange:r})]})]}),!n&&o.jsx("div",{style:{padding:"1.5rem",borderTop:"1px solid rgba(0, 0, 0, 0.05)"},children:o.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,style:{width:"100%",padding:"12px",borderRadius:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",transition:"all 0.2s ease"},children:[o.jsx(Ht,{size:16}),"Delete Node"]})})]})}function dU({chatflow:e,onClick:t,onDelete:n}){const[r,s]=S.useState(!1),[a,l]=S.useState(!1),u={draft:{bg:"rgba(100, 116, 139, 0.1)",text:"#64748b"},active:{bg:"rgba(16, 185, 129, 0.1)",text:"#10b981"},paused:{bg:"rgba(245, 158, 11, 0.1)",text:"#f59e0b"},archived:{bg:"rgba(239, 68, 68, 0.1)",text:"#ef4444"}},d=u[e.status]||u.draft;return o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:t,style:{position:"relative",padding:"1.5rem",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"24px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:r?"0 20px 60px rgba(245, 158, 11, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.08)",transform:r?"scale(1.02)":"scale(1)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:"1rem"},children:[o.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%)",border:"1px solid rgba(245, 158, 11, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(ga,{size:24,style:{color:"#f59e0b"}})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.status==="active"&&o.jsx("div",{title:"Locked - Active chatflow",style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(xr,{size:14,style:{color:"#f59e0b"}})}),n&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!0)},title:"Delete chatflow",style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},children:o.jsx(Ht,{size:14,style:{color:"#ef4444"}})}),a&&o.jsxs("div",{onClick:f=>f.stopPropagation(),style:{position:"absolute",top:"36px",right:"0",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",minWidth:"260px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3},children:[o.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",fontWeight:600,color:"#1f2937"},children:['Delete "',e.name,'"?']}),o.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.8rem",color:"#6b7280"},children:"This action cannot be undone."}),o.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!1)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:"0.8rem",fontWeight:500,cursor:"pointer"},children:"Cancel"}),o.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),f.stopPropagation(),l(!1),n(e.id)},style:{padding:"6px 12px",borderRadius:"6px",border:"none",background:"#ef4444",color:"#fff",fontSize:"0.8rem",fontWeight:500,cursor:"pointer"},children:"Delete"})]})]})]}),o.jsx("div",{style:{padding:"4px 12px",background:d.bg,border:`1px solid ${d.text}30`,borderRadius:"8px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:d.text,textTransform:"capitalize"},children:e.status})]})]}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:e.name}),e.description&&o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280",marginBottom:"1rem",lineHeight:"1.5"},children:e.description}),o.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",marginBottom:"2px"},children:"Nodes"}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937"},children:e.nodes.length})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af",marginBottom:"2px"},children:"Variables"}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1f2937"},children:e.variables.length})]})]}),o.jsxs("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af"},children:["Updated ",new Date(e.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})}function q2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nE(...e){return t=>{let n=!1;const r=e.map(s=>{const a=q2(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():q2(e[s],null)}}}}function at(...e){return S.useCallback(nE(...e),e)}var lo=S.forwardRef((e,t)=>{const{children:n,...r}=e,s=S.Children.toArray(n),a=s.find(fU);if(a){const l=a.props.children,u=s.map(d=>d===a?S.Children.count(l)>1?S.Children.only(null):S.isValidElement(l)?l.props.children:null:d);return o.jsx(f0,{...r,ref:t,children:S.isValidElement(l)?S.cloneElement(l,void 0,u):null})}return o.jsx(f0,{...r,ref:t,children:n})});lo.displayName="Slot";var f0=S.forwardRef((e,t)=>{const{children:n,...r}=e;if(S.isValidElement(n)){const s=pU(n),a=hU(r,n.props);return n.type!==S.Fragment&&(a.ref=t?nE(t,s):s),S.cloneElement(n,a)}return S.Children.count(n)>1?S.Children.only(null):null});f0.displayName="SlotClone";var rE=({children:e})=>o.jsx(o.Fragment,{children:e});function fU(e){return S.isValidElement(e)&&e.type===rE}function hU(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{a(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function pU(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function sE(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=sE(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function oE(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=sE(e))&&(r&&(r+=" "),r+=t);return r}const K2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,X2=oE,iE=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return X2(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,l=Object.keys(s).map(f=>{const m=n==null?void 0:n[f],h=a==null?void 0:a[f];if(m===null)return null;const g=K2(m)||K2(h);return s[f][g]}),u=n&&Object.entries(n).reduce((f,m)=>{let[h,g]=m;return g===void 0||(f[h]=g),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:h,className:g,...x}=m;return Object.entries(x).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...a,...u}[b]):{...a,...u}[b]===w})?[...f,h,g]:f},[]);return X2(e,l,d,n==null?void 0:n.class,n==null?void 0:n.className)},Vy="-",mU=e=>{const t=yU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{const u=l.split(Vy);return u[0]===""&&u.length!==1&&u.shift(),aE(u,t)||gU(l)},getConflictingClassGroupIds:(l,u)=>{const d=n[l]||[];return u&&r[l]?[...d,...r[l]]:d}}},aE=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?aE(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Vy);return(l=t.validators.find(({validator:u})=>u(a)))==null?void 0:l.classGroupId},Y2=/^\[(.+)\]$/,gU=e=>{if(Y2.test(e)){const t=Y2.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},yU=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)h0(n[s],r,s,t);return r},h0=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:J2(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(xU(s)){h0(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,l])=>{h0(l,J2(t,a),n,r)})})},J2=(e,t)=>{let n=e;return t.split(Vy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xU=e=>e.isThemeGetter,vU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,l)=>{n.set(a,l),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let l=n.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return s(a,l),l},set(a,l){n.has(a)?n.set(a,l):s(a,l)}}},p0="!",m0=":",bU=m0.length,wU=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const a=[];let l=0,u=0,d=0,f;for(let v=0;v<s.length;v++){let b=s[v];if(l===0&&u===0){if(b===m0){a.push(s.slice(d,v)),d=v+bU;continue}if(b==="/"){f=v;continue}}b==="["?l++:b==="]"?l--:b==="("?u++:b===")"&&u--}const m=a.length===0?s:s.substring(d),h=SU(m),g=h!==m,x=f&&f>d?f-d:void 0;return{modifiers:a,hasImportantModifier:g,baseClassName:h,maybePostfixModifierPosition:x}};if(t){const s=t+m0,a=r;r=l=>l.startsWith(s)?a(l.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},SU=e=>e.endsWith(p0)?e.substring(0,e.length-1):e.startsWith(p0)?e.substring(1):e,kU=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let a=[];return r.forEach(l=>{l[0]==="["||t[l]?(s.push(...a.sort(),l),a=[]):a.push(l)}),s.push(...a.sort()),s}},jU=e=>({cache:vU(e.cacheSize),parseClassName:wU(e),sortModifiers:kU(e),...mU(e)}),CU=/\s+/,EU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,l=[],u=e.trim().split(CU);let d="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:h,modifiers:g,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:b}=n(m);if(h){d=m+(d.length>0?" "+d:d);continue}let w=!!b,j=r(w?v.substring(0,b):v);if(!j){if(!w){d=m+(d.length>0?" "+d:d);continue}if(j=r(v),!j){d=m+(d.length>0?" "+d:d);continue}w=!1}const T=a(g).join(":"),k=x?T+p0:T,E=k+j;if(l.includes(E))continue;l.push(E);const N=s(j,w);for(let _=0;_<N.length;++_){const R=N[_];l.push(k+R)}d=m+(d.length>0?" "+d:d)}return d};function _U(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=lE(t))&&(r&&(r+=" "),r+=n);return r}const lE=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=lE(e[r]))&&(n&&(n+=" "),n+=t);return n};function NU(e,...t){let n,r,s,a=l;function l(d){const f=t.reduce((m,h)=>h(m),e());return n=jU(f),r=n.cache.get,s=n.cache.set,a=u,u(d)}function u(d){const f=r(d);if(f)return f;const m=EU(d,n);return s(d,m),m}return function(){return a(_U.apply(null,arguments))}}const Ft=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},cE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,uE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,TU=/^\d+\/\d+$/,RU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vi=e=>TU.test(e),Be=e=>!!e&&!Number.isNaN(Number(e)),Xs=e=>!!e&&Number.isInteger(Number(e)),tg=e=>e.endsWith("%")&&Be(e.slice(0,-1)),cs=e=>RU.test(e),DU=()=>!0,FU=e=>IU.test(e)&&!AU.test(e),dE=()=>!1,OU=e=>PU.test(e),zU=e=>MU.test(e),$U=e=>!Ee(e)&&!_e(e),LU=e=>Da(e,pE,dE),Ee=e=>cE.test(e),$o=e=>Da(e,mE,FU),ng=e=>Da(e,HU,Be),Q2=e=>Da(e,fE,dE),BU=e=>Da(e,hE,zU),Nd=e=>Da(e,gE,OU),_e=e=>uE.test(e),Ml=e=>Fa(e,mE),WU=e=>Fa(e,GU),Z2=e=>Fa(e,fE),VU=e=>Fa(e,pE),UU=e=>Fa(e,hE),Td=e=>Fa(e,gE,!0),Da=(e,t,n)=>{const r=cE.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Fa=(e,t,n=!1)=>{const r=uE.exec(e);return r?r[1]?t(r[1]):n:!1},fE=e=>e==="position"||e==="percentage",hE=e=>e==="image"||e==="url",pE=e=>e==="length"||e==="size"||e==="bg-size",mE=e=>e==="length",HU=e=>e==="number",GU=e=>e==="family-name",gE=e=>e==="shadow",qU=()=>{const e=Ft("color"),t=Ft("font"),n=Ft("text"),r=Ft("font-weight"),s=Ft("tracking"),a=Ft("leading"),l=Ft("breakpoint"),u=Ft("container"),d=Ft("spacing"),f=Ft("radius"),m=Ft("shadow"),h=Ft("inset-shadow"),g=Ft("text-shadow"),x=Ft("drop-shadow"),v=Ft("blur"),b=Ft("perspective"),w=Ft("aspect"),j=Ft("ease"),T=Ft("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...E(),_e,Ee],_=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],A=()=>[_e,Ee,d],P=()=>[Vi,"full","auto",...A()],$=()=>[Xs,"none","subgrid",_e,Ee],L=()=>["auto",{span:["full",Xs,_e,Ee]},Xs,_e,Ee],B=()=>[Xs,"auto",_e,Ee],K=()=>["auto","min","max","fr",_e,Ee],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Y=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...A()],H=()=>[Vi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],M=()=>[e,_e,Ee],U=()=>[...E(),Z2,Q2,{position:[_e,Ee]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",VU,LU,{size:[_e,Ee]}],W=()=>[tg,Ml,$o],X=()=>["","none","full",f,_e,Ee],Z=()=>["",Be,Ml,$o],G=()=>["solid","dashed","dotted","double"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[Be,tg,Z2,Q2],te=()=>["","none",v,_e,Ee],se=()=>["none",Be,_e,Ee],le=()=>["none",Be,_e,Ee],de=()=>[Be,_e,Ee],fe=()=>[Vi,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cs],breakpoint:[cs],color:[DU],container:[cs],"drop-shadow":[cs],ease:["in","out","in-out"],font:[$U],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cs],shadow:[cs],spacing:["px",Be],text:[cs],"text-shadow":[cs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vi,Ee,_e,w]}],container:["container"],columns:[{columns:[Be,Ee,_e,u]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Xs,"auto",_e,Ee]}],basis:[{basis:[Vi,"full","auto",u,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Be,Vi,"auto","initial","none",Ee]}],grow:[{grow:["",Be,_e,Ee]}],shrink:[{shrink:["",Be,_e,Ee]}],order:[{order:[Xs,"first","last","none",_e,Ee]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...Y(),"normal"]}],"justify-self":[{"justify-self":["auto",...Y()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...Y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Y(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...Y(),"baseline"]}],"place-self":[{"place-self":["auto",...Y()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[u,"screen",...H()]}],"min-w":[{"min-w":[u,"screen","none",...H()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...H()]}],h:[{h:["screen",...H()]}],"min-h":[{"min-h":["screen","none",...H()]}],"max-h":[{"max-h":["screen",...H()]}],"font-size":[{text:["base",n,Ml,$o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,_e,ng]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tg,Ee]}],"font-family":[{font:[WU,Ee,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,_e,Ee]}],"line-clamp":[{"line-clamp":[Be,"none",_e,ng]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",_e,Ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,Ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:[Be,"from-font","auto",_e,$o]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Be,"auto",_e,Ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xs,_e,Ee],radial:["",_e,Ee],conic:[Xs,_e,Ee]},UU,BU]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...G(),"hidden","none"]}],"divide-style":[{divide:[...G(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...G(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Be,_e,Ee]}],"outline-w":[{outline:["",Be,Ml,$o]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",m,Td,Nd]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",h,Td,Nd]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Be,$o]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",g,Td,Nd]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Be,_e,Ee]}],"mix-blend":[{"mix-blend":[...J(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":J()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Be]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[_e,Ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[Be]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,Ee]}],filter:[{filter:["","none",_e,Ee]}],blur:[{blur:te()}],brightness:[{brightness:[Be,_e,Ee]}],contrast:[{contrast:[Be,_e,Ee]}],"drop-shadow":[{"drop-shadow":["","none",x,Td,Nd]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Be,_e,Ee]}],"hue-rotate":[{"hue-rotate":[Be,_e,Ee]}],invert:[{invert:["",Be,_e,Ee]}],saturate:[{saturate:[Be,_e,Ee]}],sepia:[{sepia:["",Be,_e,Ee]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,Ee]}],"backdrop-blur":[{"backdrop-blur":te()}],"backdrop-brightness":[{"backdrop-brightness":[Be,_e,Ee]}],"backdrop-contrast":[{"backdrop-contrast":[Be,_e,Ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Be,_e,Ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Be,_e,Ee]}],"backdrop-invert":[{"backdrop-invert":["",Be,_e,Ee]}],"backdrop-opacity":[{"backdrop-opacity":[Be,_e,Ee]}],"backdrop-saturate":[{"backdrop-saturate":[Be,_e,Ee]}],"backdrop-sepia":[{"backdrop-sepia":["",Be,_e,Ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,Ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Be,"initial",_e,Ee]}],ease:[{ease:["linear","initial",j,_e,Ee]}],delay:[{delay:[Be,_e,Ee]}],animate:[{animate:["none",T,_e,Ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,_e,Ee]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:le()}],"scale-x":[{"scale-x":le()}],"scale-y":[{"scale-y":le()}],"scale-z":[{"scale-z":le()}],"scale-3d":["scale-3d"],skew:[{skew:de()}],"skew-x":[{"skew-x":de()}],"skew-y":[{"skew-y":de()}],transform:[{transform:[_e,Ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,Ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,Ee]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Be,Ml,$o,ng]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},KU=NU(qU);function tt(...e){return KU(oE(e))}const Uy=iE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function pt({className:e,variant:t,size:n,asChild:r=!1,...s}){const a=r?lo:"button";return o.jsx(a,{"data-slot":"button",className:tt(Uy({variant:t,size:n,className:e})),...s})}function Lc({className:e,type:t,...n}){return o.jsx("input",{type:t,"data-slot":"input",className:tt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var XU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=XU.reduce((e,t)=>{const n=S.forwardRef((r,s)=>{const{asChild:a,...l}=r,u=a?lo:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function YU(e,t){e&&Ia.flushSync(()=>e.dispatchEvent(t))}var JU="Label",yE=S.forwardRef((e,t)=>o.jsx(Je.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yE.displayName=JU;var QU=yE;function ca({className:e,...t}){return o.jsx(QU,{"data-slot":"label",className:tt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Ye(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ZU(e,t){const n=S.createContext(t),r=a=>{const{children:l,...u}=a,d=S.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:d,children:l})};r.displayName=e+"Provider";function s(a){const l=S.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Oa(e,t=[]){let n=[];function r(a,l){const u=S.createContext(l),d=n.length;n=[...n,l];const f=h=>{var j;const{scope:g,children:x,...v}=h,b=((j=g==null?void 0:g[e])==null?void 0:j[d])||u,w=S.useMemo(()=>v,Object.values(v));return o.jsx(b.Provider,{value:w,children:x})};f.displayName=a+"Provider";function m(h,g){var b;const x=((b=g==null?void 0:g[e])==null?void 0:b[d])||u,v=S.useContext(x);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[f,m]}const s=()=>{const a=n.map(l=>S.createContext(l));return function(u){const d=(u==null?void 0:u[e])||a;return S.useMemo(()=>({[`__scope${e}`]:{...u,[e]:d}}),[u,d])}};return s.scopeName=e,[r,eH(s,...t)]}function eH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const h=d(a)[`__scope${f}`];return{...u,...h}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var gn=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},tH=oR.useId||(()=>{}),nH=0;function ua(e){const[t,n]=S.useState(tH());return gn(()=>{n(r=>r??String(nH++))},[e]),e||(t?`radix-${t}`:"")}function vs(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Cf({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=rH({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:r,u=vs(n),d=S.useCallback(f=>{if(a){const h=typeof f=="function"?f(e):f;h!==e&&u(h)}else s(f)},[a,e,s,u]);return[l,d]}function rH({defaultProp:e,onChange:t}){const n=S.useState(e),[r]=n,s=S.useRef(r),a=vs(t);return S.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}function sH(e,t=globalThis==null?void 0:globalThis.document){const n=vs(e);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var oH="DismissableLayer",g0="dismissableLayer.update",iH="dismissableLayer.pointerDownOutside",aH="dismissableLayer.focusOutside",eS,xE=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hy=S.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...d}=e,f=S.useContext(xE),[m,h]=S.useState(null),g=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=S.useState({}),v=at(t,R=>h(R)),b=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=b.indexOf(w),T=m?b.indexOf(m):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,E=T>=j,N=uH(R=>{const A=R.target,P=[...f.branches].some($=>$.contains(A));!E||P||(s==null||s(R),l==null||l(R),R.defaultPrevented||u==null||u())},g),_=dH(R=>{const A=R.target;[...f.branches].some($=>$.contains(A))||(a==null||a(R),l==null||l(R),R.defaultPrevented||u==null||u())},g);return sH(R=>{T===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},g),S.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(eS=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),tS(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=eS)}},[m,g,n,f]),S.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),tS())},[m,f]),S.useEffect(()=>{const R=()=>x({});return document.addEventListener(g0,R),()=>document.removeEventListener(g0,R)},[]),o.jsx(Je.div,{...d,ref:v,style:{pointerEvents:k?E?"auto":"none":void 0,...e.style},onFocusCapture:Ye(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ye(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ye(e.onPointerDownCapture,N.onPointerDownCapture)})});Hy.displayName=oH;var lH="DismissableLayerBranch",cH=S.forwardRef((e,t)=>{const n=S.useContext(xE),r=S.useRef(null),s=at(t,r);return S.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...e,ref:s})});cH.displayName=lH;function uH(e,t=globalThis==null?void 0:globalThis.document){const n=vs(e),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let d=function(){vE(iH,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function dH(e,t=globalThis==null?void 0:globalThis.document){const n=vs(e),r=S.useRef(!1);return S.useEffect(()=>{const s=a=>{a.target&&!r.current&&vE(aH,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tS(){const e=new CustomEvent(g0);document.dispatchEvent(e)}function vE(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?YU(s,a):s.dispatchEvent(a)}var rg="focusScope.autoFocusOnMount",sg="focusScope.autoFocusOnUnmount",nS={bubbles:!1,cancelable:!0},fH="FocusScope",Gy=S.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...l}=e,[u,d]=S.useState(null),f=vs(s),m=vs(a),h=S.useRef(null),g=at(t,b=>d(b)),x=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let b=function(k){if(x.paused||!u)return;const E=k.target;u.contains(E)?h.current=E:Js(h.current,{select:!0})},w=function(k){if(x.paused||!u)return;const E=k.relatedTarget;E!==null&&(u.contains(E)||Js(h.current,{select:!0}))},j=function(k){if(document.activeElement===document.body)for(const N of k)N.removedNodes.length>0&&Js(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const T=new MutationObserver(j);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),T.disconnect()}}},[r,u,x.paused]),S.useEffect(()=>{if(u){sS.add(x);const b=document.activeElement;if(!u.contains(b)){const j=new CustomEvent(rg,nS);u.addEventListener(rg,f),u.dispatchEvent(j),j.defaultPrevented||(hH(xH(bE(u)),{select:!0}),document.activeElement===b&&Js(u))}return()=>{u.removeEventListener(rg,f),setTimeout(()=>{const j=new CustomEvent(sg,nS);u.addEventListener(sg,m),u.dispatchEvent(j),j.defaultPrevented||Js(b??document.body,{select:!0}),u.removeEventListener(sg,m),sS.remove(x)},0)}}},[u,f,m,x]);const v=S.useCallback(b=>{if(!n&&!r||x.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,j=document.activeElement;if(w&&j){const T=b.currentTarget,[k,E]=pH(T);k&&E?!b.shiftKey&&j===E?(b.preventDefault(),n&&Js(k,{select:!0})):b.shiftKey&&j===k&&(b.preventDefault(),n&&Js(E,{select:!0})):j===T&&b.preventDefault()}},[n,r,x.paused]);return o.jsx(Je.div,{tabIndex:-1,...l,ref:g,onKeyDown:v})});Gy.displayName=fH;function hH(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Js(r,{select:t}),document.activeElement!==n)return}function pH(e){const t=bE(e),n=rS(t,e),r=rS(t.reverse(),e);return[n,r]}function bE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function rS(e,t){for(const n of e)if(!mH(n,{upTo:t}))return n}function mH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function gH(e){return e instanceof HTMLInputElement&&"select"in e}function Js(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&gH(e)&&t&&e.select()}}var sS=yH();function yH(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=oS(e,t),e.unshift(t)},remove(t){var n;e=oS(e,t),(n=e[0])==null||n.resume()}}}function oS(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function xH(e){return e.filter(t=>t.tagName!=="A")}var vH="Portal",qy=S.forwardRef((e,t)=>{var u;const{container:n,...r}=e,[s,a]=S.useState(!1);gn(()=>a(!0),[]);const l=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?Tj.createPortal(o.jsx(Je.div,{...r,ref:t}),l):null});qy.displayName=vH;function bH(e,t){return S.useReducer((n,r)=>t[n][r]??n,e)}var Bc=e=>{const{present:t,children:n}=e,r=wH(t),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),a=at(r.ref,SH(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:a}):null};Bc.displayName="Presence";function wH(e){const[t,n]=S.useState(),r=S.useRef({}),s=S.useRef(e),a=S.useRef("none"),l=e?"mounted":"unmounted",[u,d]=bH(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=Rd(r.current);a.current=u==="mounted"?f:"none"},[u]),gn(()=>{const f=r.current,m=s.current;if(m!==e){const g=a.current,x=Rd(f);e?d("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),gn(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,h=x=>{const b=Rd(r.current).includes(x.animationName);if(x.target===t&&b&&(d("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},g=x=>{x.target===t&&(a.current=Rd(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Rd(e){return(e==null?void 0:e.animationName)||"none"}function SH(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var og=0;function wE(){S.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??iS()),document.body.insertAdjacentElement("beforeend",e[1]??iS()),og++,()=>{og===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),og--}},[])}function iS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Yd="right-scroll-bar-position",Jd="width-before-scroll-bar",kH="with-scroll-bars-hidden",jH="--removed-body-scroll-bar-size";function ig(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function CH(e,t){var n=S.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var EH=typeof window<"u"?S.useLayoutEffect:S.useEffect,aS=new WeakMap;function _H(e,t){var n=CH(null,function(r){return e.forEach(function(s){return ig(s,r)})});return EH(function(){var r=aS.get(n);if(r){var s=new Set(r),a=new Set(e),l=n.current;s.forEach(function(u){a.has(u)||ig(u,null)}),a.forEach(function(u){s.has(u)||ig(u,l)})}aS.set(n,e)},[e]),n}function NH(e){return e}function TH(e,t){t===void 0&&(t=NH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var l=t(a,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(r=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(a),l=n}var d=function(){var m=l;l=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),n}}}};return s}function RH(e){e===void 0&&(e={});var t=TH(null);return t.options=$r({async:!0,ssr:!1},e),t}var SE=function(e){var t=e.sideCar,n=Aa(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,$r({},n))};SE.isSideCarExport=!0;function IH(e,t){return e.useMedium(t),SE}var kE=RH(),ag=function(){},dh=S.forwardRef(function(e,t){var n=S.useRef(null),r=S.useState({onScrollCapture:ag,onWheelCapture:ag,onTouchMoveCapture:ag}),s=r[0],a=r[1],l=e.forwardProps,u=e.children,d=e.className,f=e.removeScrollBar,m=e.enabled,h=e.shards,g=e.sideCar,x=e.noRelative,v=e.noIsolation,b=e.inert,w=e.allowPinchZoom,j=e.as,T=j===void 0?"div":j,k=e.gapMode,E=Aa(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=g,_=_H([n,t]),R=$r($r({},E),s);return S.createElement(S.Fragment,null,m&&S.createElement(N,{sideCar:kE,removeScrollBar:f,shards:h,noRelative:x,noIsolation:v,inert:b,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:k}),l?S.cloneElement(S.Children.only(u),$r($r({},R),{ref:_})):S.createElement(T,$r({},R,{className:d,ref:_}),u))});dh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dh.classNames={fullWidth:Jd,zeroRight:Yd};var AH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=AH();return t&&e.setAttribute("nonce",t),e}function MH(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FH=function(){var e=0,t=null;return{add:function(n){e==0&&(t=PH())&&(MH(t,n),DH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},OH=function(){var e=FH();return function(t,n){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jE=function(){var e=OH(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},zH={left:0,top:0,right:0,gap:0},lg=function(e){return parseInt(e||"",10)||0},$H=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[lg(n),lg(r),lg(s)]},LH=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zH;var t=$H(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},BH=jE(),da="data-scroll-locked",WH=function(e,t,n,r){var s=e.left,a=e.top,l=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(kH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(da,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Jd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Yd," .").concat(Yd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jd," .").concat(Jd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(da,`] {
    `).concat(jH,": ").concat(u,`px;
  }
`)},lS=function(){var e=parseInt(document.body.getAttribute(da)||"0",10);return isFinite(e)?e:0},VH=function(){S.useEffect(function(){return document.body.setAttribute(da,(lS()+1).toString()),function(){var e=lS()-1;e<=0?document.body.removeAttribute(da):document.body.setAttribute(da,e.toString())}},[])},UH=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;VH();var a=S.useMemo(function(){return LH(s)},[s]);return S.createElement(BH,{styles:WH(a,!t,s,n?"":"!important")})},y0=!1;if(typeof window<"u")try{var Id=Object.defineProperty({},"passive",{get:function(){return y0=!0,!0}});window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{y0=!1}var Ui=y0?{passive:!1}:!1,HH=function(e){return e.tagName==="TEXTAREA"},CE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!HH(e)&&n[t]==="visible")},GH=function(e){return CE(e,"overflowY")},qH=function(e){return CE(e,"overflowX")},cS=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=EE(e,r);if(s){var a=_E(e,r),l=a[1],u=a[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},KH=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},XH=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},EE=function(e,t){return e==="v"?GH(t):qH(t)},_E=function(e,t){return e==="v"?KH(t):XH(t)},YH=function(e,t){return e==="h"&&t==="rtl"?-1:1},JH=function(e,t,n,r,s){var a=YH(e,window.getComputedStyle(t).direction),l=a*r,u=n.target,d=t.contains(u),f=!1,m=l>0,h=0,g=0;do{if(!u)break;var x=_E(e,u),v=x[0],b=x[1],w=x[2],j=b-w-a*v;(v||j)&&EE(e,u)&&(h+=j,g+=v);var T=u.parentNode;u=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(m&&Math.abs(h)<1||!m&&Math.abs(g)<1)&&(f=!0),f},Ad=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},uS=function(e){return[e.deltaX,e.deltaY]},dS=function(e){return e&&"current"in e?e.current:e},QH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ZH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},eG=0,Hi=[];function tG(e){var t=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(eG++)[0],a=S.useState(jE)[0],l=S.useRef(e);S.useEffect(function(){l.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var b=l8([e.lockRef.current],(e.shards||[]).map(dS),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var u=S.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!l.current.allowPinchZoom;var j=Ad(b),T=n.current,k="deltaX"in b?b.deltaX:T[0]-j[0],E="deltaY"in b?b.deltaY:T[1]-j[1],N,_=b.target,R=Math.abs(k)>Math.abs(E)?"h":"v";if("touches"in b&&R==="h"&&_.type==="range")return!1;var A=window.getSelection(),P=A&&A.anchorNode,$=P?P===_||P.contains(_):!1;if($)return!1;var L=cS(R,_);if(!L)return!0;if(L?N=R:(N=R==="v"?"h":"v",L=cS(R,_)),!L)return!1;if(!r.current&&"changedTouches"in b&&(k||E)&&(r.current=N),!N)return!0;var B=r.current||N;return JH(B,w,b,B==="h"?k:E)},[]),d=S.useCallback(function(b){var w=b;if(!(!Hi.length||Hi[Hi.length-1]!==a)){var j="deltaY"in w?uS(w):Ad(w),T=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&QH(N.delta,j)})[0];if(T&&T.should){w.cancelable&&w.preventDefault();return}if(!T){var k=(l.current.shards||[]).map(dS).filter(Boolean).filter(function(N){return N.contains(w.target)}),E=k.length>0?u(w,k[0]):!l.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),f=S.useCallback(function(b,w,j,T){var k={name:b,delta:w,target:j,should:T,shadowParent:nG(j)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(E){return E!==k})},1)},[]),m=S.useCallback(function(b){n.current=Ad(b),r.current=void 0},[]),h=S.useCallback(function(b){f(b.type,uS(b),b.target,u(b,e.lockRef.current))},[]),g=S.useCallback(function(b){f(b.type,Ad(b),b.target,u(b,e.lockRef.current))},[]);S.useEffect(function(){return Hi.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",d,Ui),document.addEventListener("touchmove",d,Ui),document.addEventListener("touchstart",m,Ui),function(){Hi=Hi.filter(function(b){return b!==a}),document.removeEventListener("wheel",d,Ui),document.removeEventListener("touchmove",d,Ui),document.removeEventListener("touchstart",m,Ui)}},[]);var x=e.removeScrollBar,v=e.inert;return S.createElement(S.Fragment,null,v?S.createElement(a,{styles:ZH(s)}):null,x?S.createElement(UH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nG(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const rG=IH(kE,tG);var Ky=S.forwardRef(function(e,t){return S.createElement(dh,$r({},e,{ref:t,sideCar:rG}))});Ky.classNames=dh.classNames;var sG=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gi=new WeakMap,Pd=new WeakMap,Md={},cg=0,NE=function(e){return e&&(e.host||NE(e.parentNode))},oG=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=NE(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iG=function(e,t,n,r){var s=oG(t,Array.isArray(e)?e:[e]);Md[n]||(Md[n]=new WeakMap);var a=Md[n],l=[],u=new Set,d=new Set(s),f=function(h){!h||u.has(h)||(u.add(h),f(h.parentNode))};s.forEach(f);var m=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(g){if(u.has(g))m(g);else try{var x=g.getAttribute(r),v=x!==null&&x!=="false",b=(Gi.get(g)||0)+1,w=(a.get(g)||0)+1;Gi.set(g,b),a.set(g,w),l.push(g),b===1&&v&&Pd.set(g,!0),w===1&&g.setAttribute(n,"true"),v||g.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",g,j)}})};return m(t),u.clear(),cg++,function(){l.forEach(function(h){var g=Gi.get(h)-1,x=a.get(h)-1;Gi.set(h,g),a.set(h,x),g||(Pd.has(h)||h.removeAttribute(r),Pd.delete(h)),x||h.removeAttribute(n)}),cg--,cg||(Gi=new WeakMap,Gi=new WeakMap,Pd=new WeakMap,Md={})}},TE=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=sG(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),iG(r,s,n,"aria-hidden")):function(){return null}},Xy="Dialog",[RE,IE]=Oa(Xy),[aG,Er]=RE(Xy),AE=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:l=!0}=e,u=S.useRef(null),d=S.useRef(null),[f=!1,m]=Cf({prop:r,defaultProp:s,onChange:a});return o.jsx(aG,{scope:t,triggerRef:u,contentRef:d,contentId:ua(),titleId:ua(),descriptionId:ua(),open:f,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(h=>!h),[m]),modal:l,children:n})};AE.displayName=Xy;var PE="DialogTrigger",ME=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(PE,n),a=at(t,s.triggerRef);return o.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Qy(s.open),...r,ref:a,onClick:Ye(e.onClick,s.onOpenToggle)})});ME.displayName=PE;var Yy="DialogPortal",[lG,DE]=RE(Yy,{forceMount:void 0}),FE=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=Er(Yy,t);return o.jsx(lG,{scope:t,forceMount:n,children:S.Children.map(r,l=>o.jsx(Bc,{present:n||a.open,children:o.jsx(qy,{asChild:!0,container:s,children:l})}))})};FE.displayName=Yy;var Ef="DialogOverlay",OE=S.forwardRef((e,t)=>{const n=DE(Ef,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Er(Ef,e.__scopeDialog);return a.modal?o.jsx(Bc,{present:r||a.open,children:o.jsx(cG,{...s,ref:t})}):null});OE.displayName=Ef;var cG=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(Ef,n);return o.jsx(Ky,{as:lo,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Je.div,{"data-state":Qy(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),oi="DialogContent",zE=S.forwardRef((e,t)=>{const n=DE(oi,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Er(oi,e.__scopeDialog);return o.jsx(Bc,{present:r||a.open,children:a.modal?o.jsx(uG,{...s,ref:t}):o.jsx(dG,{...s,ref:t})})});zE.displayName=oi;var uG=S.forwardRef((e,t)=>{const n=Er(oi,e.__scopeDialog),r=S.useRef(null),s=at(t,n.contentRef,r);return S.useEffect(()=>{const a=r.current;if(a)return TE(a)},[]),o.jsx($E,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ye(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ye(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&a.preventDefault()}),onFocusOutside:Ye(e.onFocusOutside,a=>a.preventDefault())})}),dG=S.forwardRef((e,t)=>{const n=Er(oi,e.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return o.jsx($E,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,u;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var d,f;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),$E=S.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...l}=e,u=Er(oi,n),d=S.useRef(null),f=at(t,d);return wE(),o.jsxs(o.Fragment,{children:[o.jsx(Gy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Hy,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Qy(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(hG,{titleId:u.titleId}),o.jsx(mG,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Jy="DialogTitle",LE=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(Jy,n);return o.jsx(Je.h2,{id:s.titleId,...r,ref:t})});LE.displayName=Jy;var BE="DialogDescription",WE=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(BE,n);return o.jsx(Je.p,{id:s.descriptionId,...r,ref:t})});WE.displayName=BE;var VE="DialogClose",UE=S.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Er(VE,n);return o.jsx(Je.button,{type:"button",...r,ref:t,onClick:Ye(e.onClick,()=>s.onOpenChange(!1))})});UE.displayName=VE;function Qy(e){return e?"open":"closed"}var HE="DialogTitleWarning",[fG,GE]=ZU(HE,{contentName:oi,titleName:Jy,docsSlug:"dialog"}),hG=({titleId:e})=>{const t=GE(HE),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},pG="DialogDescriptionWarning",mG=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GE(pG).contentName}}.`;return S.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},qE=AE,gG=ME,KE=FE,XE=OE,YE=zE,JE=LE,QE=WE,Zy=UE;function ZE({...e}){return o.jsx(qE,{"data-slot":"dialog",...e})}function yG({...e}){return o.jsx(KE,{"data-slot":"dialog-portal",...e})}function xG({className:e,...t}){return o.jsx(XE,{"data-slot":"dialog-overlay",className:tt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function e_({className:e,children:t,...n}){return o.jsxs(yG,{"data-slot":"dialog-portal",children:[o.jsx(xG,{}),o.jsxs(YE,{"data-slot":"dialog-content",className:tt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,o.jsxs(Zy,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(Nn,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function t_({className:e,...t}){return o.jsx("div",{"data-slot":"dialog-header",className:tt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function vG({className:e,...t}){return o.jsx("div",{"data-slot":"dialog-footer",className:tt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function n_({className:e,...t}){return o.jsx(JE,{"data-slot":"dialog-title",className:tt("text-lg leading-none font-semibold",e),...t})}function bG({className:e,...t}){return o.jsx(QE,{"data-slot":"dialog-description",className:tt("text-muted-foreground text-sm",e),...t})}function fS(e,[t,n]){return Math.min(n,Math.max(t,e))}function wG(e){const t=e+"CollectionProvider",[n,r]=Oa(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:v,children:b}=x,w=ye.useRef(null),j=ye.useRef(new Map).current;return o.jsx(s,{scope:v,itemMap:j,collectionRef:w,children:b})};l.displayName=t;const u=e+"CollectionSlot",d=ye.forwardRef((x,v)=>{const{scope:b,children:w}=x,j=a(u,b),T=at(v,j.collectionRef);return o.jsx(lo,{ref:T,children:w})});d.displayName=u;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=ye.forwardRef((x,v)=>{const{scope:b,children:w,...j}=x,T=ye.useRef(null),k=at(v,T),E=a(f,b);return ye.useEffect(()=>(E.itemMap.set(T,{ref:T,...j}),()=>void E.itemMap.delete(T))),o.jsx(lo,{[m]:"",ref:k,children:w})});h.displayName=f;function g(x){const v=a(e+"CollectionConsumer",x);return ye.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const j=Array.from(w.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((E,N)=>j.indexOf(E.ref.current)-j.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:l,Slot:d,ItemSlot:h},g,r]}var SG=S.createContext(void 0);function kG(e){const t=S.useContext(SG);return e||t||"ltr"}const jG=["top","right","bottom","left"],co=Math.min,Dn=Math.max,_f=Math.round,Dd=Math.floor,Vr=e=>({x:e,y:e}),CG={left:"right",right:"left",bottom:"top",top:"bottom"},EG={start:"end",end:"start"};function x0(e,t,n){return Dn(e,co(t,n))}function bs(e,t){return typeof e=="function"?e(t):e}function ws(e){return e.split("-")[0]}function za(e){return e.split("-")[1]}function ex(e){return e==="x"?"y":"x"}function tx(e){return e==="y"?"height":"width"}const _G=new Set(["top","bottom"]);function Lr(e){return _G.has(ws(e))?"y":"x"}function nx(e){return ex(Lr(e))}function NG(e,t,n){n===void 0&&(n=!1);const r=za(e),s=nx(e),a=tx(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(l=Nf(l)),[l,Nf(l)]}function TG(e){const t=Nf(e);return[v0(e),t,v0(t)]}function v0(e){return e.replace(/start|end/g,t=>EG[t])}const hS=["left","right"],pS=["right","left"],RG=["top","bottom"],IG=["bottom","top"];function AG(e,t,n){switch(e){case"top":case"bottom":return n?t?pS:hS:t?hS:pS;case"left":case"right":return t?RG:IG;default:return[]}}function PG(e,t,n,r){const s=za(e);let a=AG(ws(e),n==="start",r);return s&&(a=a.map(l=>l+"-"+s),t&&(a=a.concat(a.map(v0)))),a}function Nf(e){return e.replace(/left|right|bottom|top/g,t=>CG[t])}function MG(e){return{top:0,right:0,bottom:0,left:0,...e}}function r_(e){return typeof e!="number"?MG(e):{top:e,right:e,bottom:e,left:e}}function Tf(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function mS(e,t,n){let{reference:r,floating:s}=e;const a=Lr(t),l=nx(t),u=tx(l),d=ws(t),f=a==="y",m=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,g=r[u]/2-s[u]/2;let x;switch(d){case"top":x={x:m,y:r.y-s.height};break;case"bottom":x={x:m,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-s.width,y:h};break;default:x={x:r.x,y:r.y}}switch(za(t)){case"start":x[l]-=g*(n&&f?-1:1);break;case"end":x[l]+=g*(n&&f?-1:1);break}return x}async function DG(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:l,elements:u,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=bs(t,e),v=r_(x),w=u[g?h==="floating"?"reference":"floating":h],j=Tf(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:m,strategy:d})),T=h==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),E=await(a.isElement==null?void 0:a.isElement(k))?await(a.getScale==null?void 0:a.getScale(k))||{x:1,y:1}:{x:1,y:1},N=Tf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:k,strategy:d}):T);return{top:(j.top-N.top+v.top)/E.y,bottom:(N.bottom-j.bottom+v.bottom)/E.y,left:(j.left-N.left+v.left)/E.x,right:(N.right-j.right+v.right)/E.x}}const FG=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:l}=n,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:h}=mS(f,r,d),g=r,x={},v=0;for(let w=0;w<u.length;w++){var b;const{name:j,fn:T}=u[w],{x:k,y:E,data:N,reset:_}=await T({x:m,y:h,initialPlacement:r,placement:g,strategy:s,middlewareData:x,rects:f,platform:{...l,detectOverflow:(b=l.detectOverflow)!=null?b:DG},elements:{reference:e,floating:t}});m=k??m,h=E??h,x={...x,[j]:{...x[j],...N}},_&&v<=50&&(v++,typeof _=="object"&&(_.placement&&(g=_.placement),_.rects&&(f=_.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:m,y:h}=mS(f,g,d)),w=-1)}return{x:m,y:h,placement:g,strategy:s,middlewareData:x}},OG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:l,elements:u,middlewareData:d}=t,{element:f,padding:m=0}=bs(e,t)||{};if(f==null)return{};const h=r_(m),g={x:n,y:r},x=nx(s),v=tx(x),b=await l.getDimensions(f),w=x==="y",j=w?"top":"left",T=w?"bottom":"right",k=w?"clientHeight":"clientWidth",E=a.reference[v]+a.reference[x]-g[x]-a.floating[v],N=g[x]-a.reference[x],_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let R=_?_[k]:0;(!R||!await(l.isElement==null?void 0:l.isElement(_)))&&(R=u.floating[k]||a.floating[v]);const A=E/2-N/2,P=R/2-b[v]/2-1,$=co(h[j],P),L=co(h[T],P),B=$,K=R-b[v]-L,V=R/2-b[v]/2+A,Y=x0(B,V,K),z=!d.arrow&&za(s)!=null&&V!==Y&&a.reference[v]/2-(V<B?$:L)-b[v]/2<0,H=z?V<B?V-B:V-K:0;return{[x]:g[x]+H,data:{[x]:Y,centerOffset:V-Y-H,...z&&{alignmentOffset:H}},reset:z}}}),zG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:f}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...w}=bs(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const j=ws(s),T=Lr(u),k=ws(u)===u,E=await(d.isRTL==null?void 0:d.isRTL(f.floating)),N=g||(k||!b?[Nf(u)]:TG(u)),_=v!=="none";!g&&_&&N.push(...PG(u,b,v,E));const R=[u,...N],A=await d.detectOverflow(t,w),P=[];let $=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&P.push(A[j]),h){const V=NG(s,l,E);P.push(A[V[0]],A[V[1]])}if($=[...$,{placement:s,overflows:P}],!P.every(V=>V<=0)){var L,B;const V=(((L=a.flip)==null?void 0:L.index)||0)+1,Y=R[V];if(Y&&(!(h==="alignment"?T!==Lr(Y):!1)||$.every(M=>Lr(M.placement)===T?M.overflows[0]>0:!0)))return{data:{index:V,overflows:$},reset:{placement:Y}};let z=(B=$.filter(H=>H.overflows[0]<=0).sort((H,M)=>H.overflows[1]-M.overflows[1])[0])==null?void 0:B.placement;if(!z)switch(x){case"bestFit":{var K;const H=(K=$.filter(M=>{if(_){const U=Lr(M.placement);return U===T||U==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(U=>U>0).reduce((U,F)=>U+F,0)]).sort((M,U)=>M[1]-U[1])[0])==null?void 0:K[0];H&&(z=H);break}case"initialPlacement":z=u;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function gS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yS(e){return jG.some(t=>e[t]>=0)}const $G=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:s="referenceHidden",...a}=bs(e,t);switch(s){case"referenceHidden":{const l=await r.detectOverflow(t,{...a,elementContext:"reference"}),u=gS(l,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:yS(u)}}}case"escaped":{const l=await r.detectOverflow(t,{...a,altBoundary:!0}),u=gS(l,n.floating);return{data:{escapedOffsets:u,escaped:yS(u)}}}default:return{}}}}},s_=new Set(["left","top"]);async function LG(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ws(n),u=za(n),d=Lr(n)==="y",f=s_.has(l)?-1:1,m=a&&d?-1:1,h=bs(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return u&&typeof v=="number"&&(x=u==="end"?v*-1:v),d?{x:x*m,y:g*f}:{x:g*f,y:x*m}}const BG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:l,middlewareData:u}=t,d=await LG(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:a+d.y,data:{...d,placement:l}}}}},WG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s,platform:a}=t,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:j=>{let{x:T,y:k}=j;return{x:T,y:k}}},...f}=bs(e,t),m={x:n,y:r},h=await a.detectOverflow(t,f),g=Lr(ws(s)),x=ex(g);let v=m[x],b=m[g];if(l){const j=x==="y"?"top":"left",T=x==="y"?"bottom":"right",k=v+h[j],E=v-h[T];v=x0(k,v,E)}if(u){const j=g==="y"?"top":"left",T=g==="y"?"bottom":"right",k=b+h[j],E=b-h[T];b=x0(k,b,E)}const w=d.fn({...t,[x]:v,[g]:b});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[x]:l,[g]:u}}}}}},VG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:l}=t,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=bs(e,t),m={x:n,y:r},h=Lr(s),g=ex(h);let x=m[g],v=m[h];const b=bs(u,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const k=g==="y"?"height":"width",E=a.reference[g]-a.floating[k]+w.mainAxis,N=a.reference[g]+a.reference[k]-w.mainAxis;x<E?x=E:x>N&&(x=N)}if(f){var j,T;const k=g==="y"?"width":"height",E=s_.has(ws(s)),N=a.reference[h]-a.floating[k]+(E&&((j=l.offset)==null?void 0:j[h])||0)+(E?0:w.crossAxis),_=a.reference[h]+a.reference[k]+(E?0:((T=l.offset)==null?void 0:T[h])||0)-(E?w.crossAxis:0);v<N?v=N:v>_&&(v=_)}return{[g]:x,[h]:v}}}},UG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:l,elements:u}=t,{apply:d=()=>{},...f}=bs(e,t),m=await l.detectOverflow(t,f),h=ws(s),g=za(s),x=Lr(s)==="y",{width:v,height:b}=a.floating;let w,j;h==="top"||h==="bottom"?(w=h,j=g===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=h,w=g==="end"?"top":"bottom");const T=b-m.top-m.bottom,k=v-m.left-m.right,E=co(b-m[w],T),N=co(v-m[j],k),_=!t.middlewareData.shift;let R=E,A=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=T),_&&!g){const $=Dn(m.left,0),L=Dn(m.right,0),B=Dn(m.top,0),K=Dn(m.bottom,0);x?A=v-2*($!==0||L!==0?$+L:Dn(m.left,m.right)):R=b-2*(B!==0||K!==0?B+K:Dn(m.top,m.bottom))}await d({...t,availableWidth:A,availableHeight:R});const P=await l.getDimensions(u.floating);return v!==P.width||b!==P.height?{reset:{rects:!0}}:{}}}};function fh(){return typeof window<"u"}function $a(e){return o_(e)?(e.nodeName||"").toLowerCase():"#document"}function $n(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xr(e){var t;return(t=(o_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function o_(e){return fh()?e instanceof Node||e instanceof $n(e).Node:!1}function Sr(e){return fh()?e instanceof Element||e instanceof $n(e).Element:!1}function Gr(e){return fh()?e instanceof HTMLElement||e instanceof $n(e).HTMLElement:!1}function xS(e){return!fh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $n(e).ShadowRoot}const HG=new Set(["inline","contents"]);function Wc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!HG.has(s)}const GG=new Set(["table","td","th"]);function qG(e){return GG.has($a(e))}const KG=[":popover-open",":modal"];function hh(e){return KG.some(t=>{try{return e.matches(t)}catch{return!1}})}const XG=["transform","translate","scale","rotate","perspective"],YG=["transform","translate","scale","rotate","perspective","filter"],JG=["paint","layout","strict","content"];function rx(e){const t=sx(),n=Sr(e)?kr(e):e;return XG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||YG.some(r=>(n.willChange||"").includes(r))||JG.some(r=>(n.contain||"").includes(r))}function QG(e){let t=uo(e);for(;Gr(t)&&!ja(t);){if(rx(t))return t;if(hh(t))return null;t=uo(t)}return null}function sx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZG=new Set(["html","body","#document"]);function ja(e){return ZG.has($a(e))}function kr(e){return $n(e).getComputedStyle(e)}function ph(e){return Sr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function uo(e){if($a(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xS(e)&&e.host||Xr(e);return xS(t)?t.host:t}function i_(e){const t=uo(e);return ja(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gr(t)&&Wc(t)?t:i_(t)}function kc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=i_(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),l=$n(s);if(a){const u=b0(l);return t.concat(l,l.visualViewport||[],Wc(s)?s:[],u&&n?kc(u):[])}return t.concat(s,kc(s,[],n))}function b0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function a_(e){const t=kr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Gr(e),a=s?e.offsetWidth:n,l=s?e.offsetHeight:r,u=_f(n)!==a||_f(r)!==l;return u&&(n=a,r=l),{width:n,height:r,$:u}}function ox(e){return Sr(e)?e:e.contextElement}function fa(e){const t=ox(e);if(!Gr(t))return Vr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=a_(t);let l=(a?_f(n.width):n.width)/r,u=(a?_f(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const eq=Vr(0);function l_(e){const t=$n(e);return!sx()||!t.visualViewport?eq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function tq(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$n(e)?!1:t}function ii(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=ox(e);let l=Vr(1);t&&(r?Sr(r)&&(l=fa(r)):l=fa(e));const u=tq(a,n,r)?l_(a):Vr(0);let d=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,m=s.width/l.x,h=s.height/l.y;if(a){const g=$n(a),x=r&&Sr(r)?$n(r):r;let v=g,b=b0(v);for(;b&&r&&x!==v;){const w=fa(b),j=b.getBoundingClientRect(),T=kr(b),k=j.left+(b.clientLeft+parseFloat(T.paddingLeft))*w.x,E=j.top+(b.clientTop+parseFloat(T.paddingTop))*w.y;d*=w.x,f*=w.y,m*=w.x,h*=w.y,d+=k,f+=E,v=$n(b),b=b0(v)}}return Tf({width:m,height:h,x:d,y:f})}function mh(e,t){const n=ph(e).scrollLeft;return t?t.left+n:ii(Xr(e)).left+n}function c_(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-mh(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function nq(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",l=Xr(r),u=t?hh(t.floating):!1;if(r===l||u&&a)return n;let d={scrollLeft:0,scrollTop:0},f=Vr(1);const m=Vr(0),h=Gr(r);if((h||!h&&!a)&&(($a(r)!=="body"||Wc(l))&&(d=ph(r)),Gr(r))){const x=ii(r);f=fa(r),m.x=x.x+r.clientLeft,m.y=x.y+r.clientTop}const g=l&&!h&&!a?c_(l,d):Vr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+g.x,y:n.y*f.y-d.scrollTop*f.y+m.y+g.y}}function rq(e){return Array.from(e.getClientRects())}function sq(e){const t=Xr(e),n=ph(e),r=e.ownerDocument.body,s=Dn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Dn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+mh(e);const u=-n.scrollTop;return kr(r).direction==="rtl"&&(l+=Dn(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:l,y:u}}const vS=25;function oq(e,t){const n=$n(e),r=Xr(e),s=n.visualViewport;let a=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){a=s.width,l=s.height;const m=sx();(!m||m&&t==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const f=mh(r);if(f<=0){const m=r.ownerDocument,h=m.body,g=getComputedStyle(h),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(r.clientWidth-h.clientWidth-x);v<=vS&&(a-=v)}else f<=vS&&(a+=f);return{width:a,height:l,x:u,y:d}}const iq=new Set(["absolute","fixed"]);function aq(e,t){const n=ii(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Gr(e)?fa(e):Vr(1),l=e.clientWidth*a.x,u=e.clientHeight*a.y,d=s*a.x,f=r*a.y;return{width:l,height:u,x:d,y:f}}function bS(e,t,n){let r;if(t==="viewport")r=oq(e,n);else if(t==="document")r=sq(Xr(e));else if(Sr(t))r=aq(t,n);else{const s=l_(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Tf(r)}function u_(e,t){const n=uo(e);return n===t||!Sr(n)||ja(n)?!1:kr(n).position==="fixed"||u_(n,t)}function lq(e,t){const n=t.get(e);if(n)return n;let r=kc(e,[],!1).filter(u=>Sr(u)&&$a(u)!=="body"),s=null;const a=kr(e).position==="fixed";let l=a?uo(e):e;for(;Sr(l)&&!ja(l);){const u=kr(l),d=rx(l);!d&&u.position==="fixed"&&(s=null),(a?!d&&!s:!d&&u.position==="static"&&!!s&&iq.has(s.position)||Wc(l)&&!d&&u_(e,l))?r=r.filter(m=>m!==l):s=u,l=uo(l)}return t.set(e,r),r}function cq(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const l=[...n==="clippingAncestors"?hh(t)?[]:lq(t,this._c):[].concat(n),r],u=l[0],d=l.reduce((f,m)=>{const h=bS(t,m,s);return f.top=Dn(h.top,f.top),f.right=co(h.right,f.right),f.bottom=co(h.bottom,f.bottom),f.left=Dn(h.left,f.left),f},bS(t,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function uq(e){const{width:t,height:n}=a_(e);return{width:t,height:n}}function dq(e,t,n){const r=Gr(t),s=Xr(t),a=n==="fixed",l=ii(e,!0,a,t);let u={scrollLeft:0,scrollTop:0};const d=Vr(0);function f(){d.x=mh(s)}if(r||!r&&!a)if(($a(t)!=="body"||Wc(s))&&(u=ph(t)),r){const x=ii(t,!0,a,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else s&&f();a&&!r&&s&&f();const m=s&&!r&&!a?c_(s,u):Vr(0),h=l.left+u.scrollLeft-d.x-m.x,g=l.top+u.scrollTop-d.y-m.y;return{x:h,y:g,width:l.width,height:l.height}}function ug(e){return kr(e).position==="static"}function wS(e,t){if(!Gr(e)||kr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Xr(e)===n&&(n=n.ownerDocument.body),n}function d_(e,t){const n=$n(e);if(hh(e))return n;if(!Gr(e)){let s=uo(e);for(;s&&!ja(s);){if(Sr(s)&&!ug(s))return s;s=uo(s)}return n}let r=wS(e,t);for(;r&&qG(r)&&ug(r);)r=wS(r,t);return r&&ja(r)&&ug(r)&&!rx(r)?n:r||QG(e)||n}const fq=async function(e){const t=this.getOffsetParent||d_,n=this.getDimensions,r=await n(e.floating);return{reference:dq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hq(e){return kr(e).direction==="rtl"}const pq={convertOffsetParentRelativeRectToViewportRelativeRect:nq,getDocumentElement:Xr,getClippingRect:cq,getOffsetParent:d_,getElementRects:fq,getClientRects:rq,getDimensions:uq,getScale:fa,isElement:Sr,isRTL:hq};function f_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function mq(e,t){let n=null,r;const s=Xr(e);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const f=e.getBoundingClientRect(),{left:m,top:h,width:g,height:x}=f;if(u||t(),!g||!x)return;const v=Dd(h),b=Dd(s.clientWidth-(m+g)),w=Dd(s.clientHeight-(h+x)),j=Dd(m),k={rootMargin:-v+"px "+-b+"px "+-w+"px "+-j+"px",threshold:Dn(0,co(1,d))||1};let E=!0;function N(_){const R=_[0].intersectionRatio;if(R!==d){if(!E)return l();R?l(!1,R):r=setTimeout(()=>{l(!1,1e-7)},1e3)}R===1&&!f_(f,e.getBoundingClientRect())&&l(),E=!1}try{n=new IntersectionObserver(N,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,k)}n.observe(e)}return l(!0),a}function gq(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=ox(e),m=s||a?[...f?kc(f):[],...kc(t)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),a&&j.addEventListener("resize",n)});const h=f&&u?mq(f,n):null;let g=-1,x=null;l&&(x=new ResizeObserver(j=>{let[T]=j;T&&T.target===f&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=x)==null||k.observe(t)})),n()}),f&&!d&&x.observe(f),x.observe(t));let v,b=d?ii(e):null;d&&w();function w(){const j=ii(e);b&&!f_(b,j)&&n(),b=j,v=requestAnimationFrame(w)}return n(),()=>{var j;m.forEach(T=>{s&&T.removeEventListener("scroll",n),a&&T.removeEventListener("resize",n)}),h==null||h(),(j=x)==null||j.disconnect(),x=null,d&&cancelAnimationFrame(v)}}const yq=BG,xq=WG,vq=zG,bq=UG,wq=$G,SS=OG,Sq=VG,kq=(e,t,n)=>{const r=new Map,s={platform:pq,...n},a={...s.platform,_c:r};return FG(e,t,{...s,platform:a})};var jq=typeof document<"u",Cq=function(){},Qd=jq?S.useLayoutEffect:Cq;function Rf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Rf(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!Rf(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function h_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kS(e,t){const n=h_(e);return Math.round(t*n)/n}function dg(e){const t=S.useRef(e);return Qd(()=>{t.current=e}),t}function Eq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=e,[m,h]=S.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=S.useState(r);Rf(g,r)||x(r);const[v,b]=S.useState(null),[w,j]=S.useState(null),T=S.useCallback(M=>{M!==_.current&&(_.current=M,b(M))},[]),k=S.useCallback(M=>{M!==R.current&&(R.current=M,j(M))},[]),E=a||v,N=l||w,_=S.useRef(null),R=S.useRef(null),A=S.useRef(m),P=d!=null,$=dg(d),L=dg(s),B=dg(f),K=S.useCallback(()=>{if(!_.current||!R.current)return;const M={placement:t,strategy:n,middleware:g};L.current&&(M.platform=L.current),kq(_.current,R.current,M).then(U=>{const F={...U,isPositioned:B.current!==!1};V.current&&!Rf(A.current,F)&&(A.current=F,Ia.flushSync(()=>{h(F)}))})},[g,t,n,L,B]);Qd(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[f]);const V=S.useRef(!1);Qd(()=>(V.current=!0,()=>{V.current=!1}),[]),Qd(()=>{if(E&&(_.current=E),N&&(R.current=N),E&&N){if($.current)return $.current(E,N,K);K()}},[E,N,K,$,P]);const Y=S.useMemo(()=>({reference:_,floating:R,setReference:T,setFloating:k}),[T,k]),z=S.useMemo(()=>({reference:E,floating:N}),[E,N]),H=S.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const U=kS(z.floating,m.x),F=kS(z.floating,m.y);return u?{...M,transform:"translate("+U+"px, "+F+"px)",...h_(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:F}},[n,u,z.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:K,refs:Y,elements:z,floatingStyles:H}),[m,K,Y,z,H])}const _q=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?SS({element:r.current,padding:s}).fn(n):{}:r?SS({element:r,padding:s}).fn(n):{}}}},Nq=(e,t)=>({...yq(e),options:[e,t]}),Tq=(e,t)=>({...xq(e),options:[e,t]}),Rq=(e,t)=>({...Sq(e),options:[e,t]}),Iq=(e,t)=>({...vq(e),options:[e,t]}),Aq=(e,t)=>({...bq(e),options:[e,t]}),Pq=(e,t)=>({...wq(e),options:[e,t]}),Mq=(e,t)=>({..._q(e),options:[e,t]});var Dq="Arrow",p_=S.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(Je.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});p_.displayName=Dq;var Fq=p_;function m_(e){const[t,n]=S.useState(void 0);return gn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let l,u;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,u=f.blockSize}else l=e.offsetWidth,u=e.offsetHeight;n({width:l,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ix="Popper",[g_,y_]=Oa(ix),[Oq,x_]=g_(ix),v_=e=>{const{__scopePopper:t,children:n}=e,[r,s]=S.useState(null);return o.jsx(Oq,{scope:t,anchor:r,onAnchorChange:s,children:n})};v_.displayName=ix;var b_="PopperAnchor",w_=S.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=x_(b_,n),l=S.useRef(null),u=at(t,l);return S.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:o.jsx(Je.div,{...s,ref:u})});w_.displayName=b_;var ax="PopperContent",[zq,$q]=g_(ax),S_=S.forwardRef((e,t)=>{var ne,te,se,le,de,fe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:v,...b}=e,w=x_(ax,n),[j,T]=S.useState(null),k=at(t,ie=>T(ie)),[E,N]=S.useState(null),_=m_(E),R=(_==null?void 0:_.width)??0,A=(_==null?void 0:_.height)??0,P=r+(a!=="center"?"-"+a:""),$=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(f)?f:[f],B=L.length>0,K={padding:$,boundary:L.filter(Bq),altBoundary:B},{refs:V,floatingStyles:Y,placement:z,isPositioned:H,middlewareData:M}=Eq({strategy:"fixed",placement:P,whileElementsMounted:(...ie)=>gq(...ie,{animationFrame:x==="always"}),elements:{reference:w.anchor},middleware:[Nq({mainAxis:s+A,alignmentAxis:l}),d&&Tq({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Rq():void 0,...K}),d&&Iq({...K}),Aq({...K,apply:({elements:ie,rects:ue,availableWidth:xe,availableHeight:ge})=>{const{width:Ae,height:Ve}=ue.reference,ze=ie.floating.style;ze.setProperty("--radix-popper-available-width",`${xe}px`),ze.setProperty("--radix-popper-available-height",`${ge}px`),ze.setProperty("--radix-popper-anchor-width",`${Ae}px`),ze.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),E&&Mq({element:E,padding:u}),Wq({arrowWidth:R,arrowHeight:A}),g&&Pq({strategy:"referenceHidden",...K})]}),[U,F]=C_(z),D=vs(v);gn(()=>{H&&(D==null||D())},[H,D]);const W=(ne=M.arrow)==null?void 0:ne.x,X=(te=M.arrow)==null?void 0:te.y,Z=((se=M.arrow)==null?void 0:se.centerOffset)!==0,[G,J]=S.useState();return gn(()=>{j&&J(window.getComputedStyle(j).zIndex)},[j]),o.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:H?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(le=M.transformOrigin)==null?void 0:le.x,(de=M.transformOrigin)==null?void 0:de.y].join(" "),...((fe=M.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(zq,{scope:n,placedSide:U,onArrowChange:N,arrowX:W,arrowY:X,shouldHideArrow:Z,children:o.jsx(Je.div,{"data-side":U,"data-align":F,...b,ref:k,style:{...b.style,animation:H?void 0:"none"}})})})});S_.displayName=ax;var k_="PopperArrow",Lq={top:"bottom",right:"left",bottom:"top",left:"right"},j_=S.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=$q(k_,r),l=Lq[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(Fq,{...s,ref:n,style:{...s.style,display:"block"}})})});j_.displayName=k_;function Bq(e){return e!==null}var Wq=e=>({name:"transformOrigin",options:e,fn(t){var w,j,T;const{placement:n,rects:r,middlewareData:s}=t,l=((w=s.arrow)==null?void 0:w.centerOffset)!==0,u=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[f,m]=C_(n),h={start:"0%",center:"50%",end:"100%"}[m],g=(((j=s.arrow)==null?void 0:j.x)??0)+u/2,x=(((T=s.arrow)==null?void 0:T.y)??0)+d/2;let v="",b="";return f==="bottom"?(v=l?h:`${g}px`,b=`${-d}px`):f==="top"?(v=l?h:`${g}px`,b=`${r.floating.height+d}px`):f==="right"?(v=`${-d}px`,b=l?h:`${x}px`):f==="left"&&(v=`${r.floating.width+d}px`,b=l?h:`${x}px`),{data:{x:v,y:b}}}});function C_(e){const[t,n="center"]=e.split("-");return[t,n]}var Vq=v_,Uq=w_,Hq=S_,Gq=j_;function E_(e){const t=S.useRef({value:e,previous:e});return S.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var qq="VisuallyHidden",__=S.forwardRef((e,t)=>o.jsx(Je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));__.displayName=qq;var Kq=[" ","Enter","ArrowUp","ArrowDown"],Xq=[" ","Enter"],Vc="Select",[gh,yh,Yq]=wG(Vc),[La]=Oa(Vc,[Yq,y_]),xh=y_(),[Jq,mo]=La(Vc),[Qq,Zq]=La(Vc),N_=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:l,defaultValue:u,onValueChange:d,dir:f,name:m,autoComplete:h,disabled:g,required:x,form:v}=e,b=xh(t),[w,j]=S.useState(null),[T,k]=S.useState(null),[E,N]=S.useState(!1),_=kG(f),[R=!1,A]=Cf({prop:r,defaultProp:s,onChange:a}),[P,$]=Cf({prop:l,defaultProp:u,onChange:d}),L=S.useRef(null),B=w?v||!!w.closest("form"):!0,[K,V]=S.useState(new Set),Y=Array.from(K).map(z=>z.props.value).join(";");return o.jsx(Vq,{...b,children:o.jsxs(Jq,{required:x,scope:t,trigger:w,onTriggerChange:j,valueNode:T,onValueNodeChange:k,valueNodeHasChildren:E,onValueNodeHasChildrenChange:N,contentId:ua(),value:P,onValueChange:$,open:R,onOpenChange:A,dir:_,triggerPointerDownPosRef:L,disabled:g,children:[o.jsx(gh.Provider,{scope:t,children:o.jsx(Qq,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback(z=>{V(H=>new Set(H).add(z))},[]),onNativeOptionRemove:S.useCallback(z=>{V(H=>{const M=new Set(H);return M.delete(z),M})},[]),children:n})}),B?o.jsxs(J_,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:h,value:P,onChange:z=>$(z.target.value),disabled:g,form:v,children:[P===void 0?o.jsx("option",{value:""}):null,Array.from(K)]},Y):null]})})};N_.displayName=Vc;var T_="SelectTrigger",R_=S.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=xh(n),l=mo(T_,n),u=l.disabled||r,d=at(t,l.onTriggerChange),f=yh(n),m=S.useRef("touch"),[h,g,x]=Q_(b=>{const w=f().filter(k=>!k.disabled),j=w.find(k=>k.value===l.value),T=Z_(w,b,j);T!==void 0&&l.onValueChange(T.value)}),v=b=>{u||(l.onOpenChange(!0),x()),b&&(l.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return o.jsx(Uq,{asChild:!0,...a,children:o.jsx(Je.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":Y_(l.value)?"":void 0,...s,ref:d,onClick:Ye(s.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&v(b)}),onPointerDown:Ye(s.onPointerDown,b=>{m.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Ye(s.onKeyDown,b=>{const w=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&g(b.key),!(w&&b.key===" ")&&Kq.includes(b.key)&&(v(),b.preventDefault())})})})});R_.displayName=T_;var I_="SelectValue",A_=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:l="",...u}=e,d=mo(I_,n),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,h=at(t,d.onValueNodeChange);return gn(()=>{f(m)},[f,m]),o.jsx(Je.span,{...u,ref:h,style:{pointerEvents:"none"},children:Y_(d.value)?o.jsx(o.Fragment,{children:l}):a})});A_.displayName=I_;var eK="SelectIcon",P_=S.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(Je.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});P_.displayName=eK;var tK="SelectPortal",M_=e=>o.jsx(qy,{asChild:!0,...e});M_.displayName=tK;var ai="SelectContent",D_=S.forwardRef((e,t)=>{const n=mo(ai,e.__scopeSelect),[r,s]=S.useState();if(gn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Ia.createPortal(o.jsx(F_,{scope:e.__scopeSelect,children:o.jsx(gh.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(O_,{...e,ref:t})});D_.displayName=ai;var fr=10,[F_,go]=La(ai),nK="SelectContentImpl",O_=S.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:l,side:u,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:b,avoidCollisions:w,...j}=e,T=mo(ai,n),[k,E]=S.useState(null),[N,_]=S.useState(null),R=at(t,ne=>E(ne)),[A,P]=S.useState(null),[$,L]=S.useState(null),B=yh(n),[K,V]=S.useState(!1),Y=S.useRef(!1);S.useEffect(()=>{if(k)return TE(k)},[k]),wE();const z=S.useCallback(ne=>{const[te,...se]=B().map(fe=>fe.ref.current),[le]=se.slice(-1),de=document.activeElement;for(const fe of ne)if(fe===de||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===te&&N&&(N.scrollTop=0),fe===le&&N&&(N.scrollTop=N.scrollHeight),fe==null||fe.focus(),document.activeElement!==de))return},[B,N]),H=S.useCallback(()=>z([A,k]),[z,A,k]);S.useEffect(()=>{K&&H()},[K,H]);const{onOpenChange:M,triggerPointerDownPosRef:U}=T;S.useEffect(()=>{if(k){let ne={x:0,y:0};const te=le=>{var de,fe;ne={x:Math.abs(Math.round(le.pageX)-(((de=U.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(le.pageY)-(((fe=U.current)==null?void 0:fe.y)??0))}},se=le=>{ne.x<=10&&ne.y<=10?le.preventDefault():k.contains(le.target)||M(!1),document.removeEventListener("pointermove",te),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",se,{capture:!0})}}},[k,M,U]),S.useEffect(()=>{const ne=()=>M(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[M]);const[F,D]=Q_(ne=>{const te=B().filter(de=>!de.disabled),se=te.find(de=>de.ref.current===document.activeElement),le=Z_(te,ne,se);le&&setTimeout(()=>le.ref.current.focus())}),W=S.useCallback((ne,te,se)=>{const le=!Y.current&&!se;(T.value!==void 0&&T.value===te||le)&&(P(ne),le&&(Y.current=!0))},[T.value]),X=S.useCallback(()=>k==null?void 0:k.focus(),[k]),Z=S.useCallback((ne,te,se)=>{const le=!Y.current&&!se;(T.value!==void 0&&T.value===te||le)&&L(ne)},[T.value]),G=r==="popper"?w0:z_,J=G===w0?{side:u,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return o.jsx(F_,{scope:n,content:k,viewport:N,onViewportChange:_,itemRefCallback:W,selectedItem:A,onItemLeave:X,itemTextRefCallback:Z,focusSelectedItem:H,selectedItemText:$,position:r,isPositioned:K,searchRef:F,children:o.jsx(Ky,{as:lo,allowPinchZoom:!0,children:o.jsx(Gy,{asChild:!0,trapped:T.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:Ye(s,ne=>{var te;(te=T.trigger)==null||te.focus({preventScroll:!0}),ne.preventDefault()}),children:o.jsx(Hy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:o.jsx(G,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ne=>ne.preventDefault(),...j,...J,onPlaced:()=>V(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Ye(j.onKeyDown,ne=>{const te=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!te&&ne.key.length===1&&D(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let le=B().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const de=ne.target,fe=le.indexOf(de);le=le.slice(fe+1)}setTimeout(()=>z(le)),ne.preventDefault()}})})})})})})});O_.displayName=nK;var rK="SelectItemAlignedPosition",z_=S.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=mo(ai,n),l=go(ai,n),[u,d]=S.useState(null),[f,m]=S.useState(null),h=at(t,R=>m(R)),g=yh(n),x=S.useRef(!1),v=S.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:j,focusSelectedItem:T}=l,k=S.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&b&&w&&j){const R=a.trigger.getBoundingClientRect(),A=f.getBoundingClientRect(),P=a.valueNode.getBoundingClientRect(),$=j.getBoundingClientRect();if(a.dir!=="rtl"){const de=$.left-A.left,fe=P.left-de,ie=R.left-fe,ue=R.width+ie,xe=Math.max(ue,A.width),ge=window.innerWidth-fr,Ae=fS(fe,[fr,Math.max(fr,ge-xe)]);u.style.minWidth=ue+"px",u.style.left=Ae+"px"}else{const de=A.right-$.right,fe=window.innerWidth-P.right-de,ie=window.innerWidth-R.right-fe,ue=R.width+ie,xe=Math.max(ue,A.width),ge=window.innerWidth-fr,Ae=fS(fe,[fr,Math.max(fr,ge-xe)]);u.style.minWidth=ue+"px",u.style.right=Ae+"px"}const L=g(),B=window.innerHeight-fr*2,K=b.scrollHeight,V=window.getComputedStyle(f),Y=parseInt(V.borderTopWidth,10),z=parseInt(V.paddingTop,10),H=parseInt(V.borderBottomWidth,10),M=parseInt(V.paddingBottom,10),U=Y+z+K+M+H,F=Math.min(w.offsetHeight*5,U),D=window.getComputedStyle(b),W=parseInt(D.paddingTop,10),X=parseInt(D.paddingBottom,10),Z=R.top+R.height/2-fr,G=B-Z,J=w.offsetHeight/2,ne=w.offsetTop+J,te=Y+z+ne,se=U-te;if(te<=Z){const de=L.length>0&&w===L[L.length-1].ref.current;u.style.bottom="0px";const fe=f.clientHeight-b.offsetTop-b.offsetHeight,ie=Math.max(G,J+(de?X:0)+fe+H),ue=te+ie;u.style.height=ue+"px"}else{const de=L.length>0&&w===L[0].ref.current;u.style.top="0px";const ie=Math.max(Z,Y+b.offsetTop+(de?W:0)+J)+se;u.style.height=ie+"px",b.scrollTop=te-Z+b.offsetTop}u.style.margin=`${fr}px 0`,u.style.minHeight=F+"px",u.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[g,a.trigger,a.valueNode,u,f,b,w,j,a.dir,r]);gn(()=>k(),[k]);const[E,N]=S.useState();gn(()=>{f&&N(window.getComputedStyle(f).zIndex)},[f]);const _=S.useCallback(R=>{R&&v.current===!0&&(k(),T==null||T(),v.current=!1)},[k,T]);return o.jsx(oK,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:x,onScrollButtonChange:_,children:o.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:o.jsx(Je.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});z_.displayName=rK;var sK="SelectPopperPosition",w0=S.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=fr,...a}=e,l=xh(n);return o.jsx(Hq,{...l,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});w0.displayName=sK;var[oK,lx]=La(ai,{}),S0="SelectViewport",$_=S.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=go(S0,n),l=lx(S0,n),u=at(t,a.onViewportChange),d=S.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(gh.Slot,{scope:n,children:o.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ye(s.onScroll,f=>{const m=f.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=l;if(g!=null&&g.current&&h){const x=Math.abs(d.current-m.scrollTop);if(x>0){const v=window.innerHeight-fr*2,b=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),j=Math.max(b,w);if(j<v){const T=j+x,k=Math.min(v,T),E=T-k;h.style.height=k+"px",h.style.bottom==="0px"&&(m.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});$_.displayName=S0;var L_="SelectGroup",[iK,aK]=La(L_),lK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=ua();return o.jsx(iK,{scope:n,id:s,children:o.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:t})})});lK.displayName=L_;var B_="SelectLabel",cK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=aK(B_,n);return o.jsx(Je.div,{id:s.id,...r,ref:t})});cK.displayName=B_;var If="SelectItem",[uK,W_]=La(If),V_=S.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...l}=e,u=mo(If,n),d=go(If,n),f=u.value===r,[m,h]=S.useState(a??""),[g,x]=S.useState(!1),v=at(t,T=>{var k;return(k=d.itemRefCallback)==null?void 0:k.call(d,T,r,s)}),b=ua(),w=S.useRef("touch"),j=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(uK,{scope:n,value:r,disabled:s,textId:b,isSelected:f,onItemTextChange:S.useCallback(T=>{h(k=>k||((T==null?void 0:T.textContent)??"").trim())},[]),children:o.jsx(gh.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:o.jsx(Je.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":f&&g,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:v,onFocus:Ye(l.onFocus,()=>x(!0)),onBlur:Ye(l.onBlur,()=>x(!1)),onClick:Ye(l.onClick,()=>{w.current!=="mouse"&&j()}),onPointerUp:Ye(l.onPointerUp,()=>{w.current==="mouse"&&j()}),onPointerDown:Ye(l.onPointerDown,T=>{w.current=T.pointerType}),onPointerMove:Ye(l.onPointerMove,T=>{var k;w.current=T.pointerType,s?(k=d.onItemLeave)==null||k.call(d):w.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ye(l.onPointerLeave,T=>{var k;T.currentTarget===document.activeElement&&((k=d.onItemLeave)==null||k.call(d))}),onKeyDown:Ye(l.onKeyDown,T=>{var E;((E=d.searchRef)==null?void 0:E.current)!==""&&T.key===" "||(Xq.includes(T.key)&&j(),T.key===" "&&T.preventDefault())})})})})});V_.displayName=If;var Bl="SelectItemText",U_=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,l=mo(Bl,n),u=go(Bl,n),d=W_(Bl,n),f=Zq(Bl,n),[m,h]=S.useState(null),g=at(t,j=>h(j),d.onItemTextChange,j=>{var T;return(T=u.itemTextRefCallback)==null?void 0:T.call(u,j,d.value,d.disabled)}),x=m==null?void 0:m.textContent,v=S.useMemo(()=>o.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=f;return gn(()=>(b(v),()=>w(v)),[b,w,v]),o.jsxs(o.Fragment,{children:[o.jsx(Je.span,{id:d.textId,...a,ref:g}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ia.createPortal(a.children,l.valueNode):null]})});U_.displayName=Bl;var H_="SelectItemIndicator",G_=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return W_(H_,n).isSelected?o.jsx(Je.span,{"aria-hidden":!0,...r,ref:t}):null});G_.displayName=H_;var k0="SelectScrollUpButton",q_=S.forwardRef((e,t)=>{const n=go(k0,e.__scopeSelect),r=lx(k0,e.__scopeSelect),[s,a]=S.useState(!1),l=at(t,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=d.scrollTop>0;a(f)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(X_,{...e,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});q_.displayName=k0;var j0="SelectScrollDownButton",K_=S.forwardRef((e,t)=>{const n=go(j0,e.__scopeSelect),r=lx(j0,e.__scopeSelect),[s,a]=S.useState(!1),l=at(t,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(X_,{...e,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});K_.displayName=j0;var X_=S.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=go("SelectScrollButton",n),l=S.useRef(null),u=yh(n),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),gn(()=>{var m;const f=u().find(h=>h.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[u]),o.jsx(Je.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Ye(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Ye(s.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Ye(s.onPointerLeave,()=>{d()})})}),dK="SelectSeparator",fK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Je.div,{"aria-hidden":!0,...r,ref:t})});fK.displayName=dK;var C0="SelectArrow",hK=S.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=xh(n),a=mo(C0,n),l=go(C0,n);return a.open&&l.position==="popper"?o.jsx(Gq,{...s,...r,ref:t}):null});hK.displayName=C0;function Y_(e){return e===""||e===void 0}var J_=S.forwardRef((e,t)=>{const{value:n,...r}=e,s=S.useRef(null),a=at(t,s),l=E_(n);return S.useEffect(()=>{const u=s.current,d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&m){const h=new Event("change",{bubbles:!0});m.call(u,n),u.dispatchEvent(h)}},[l,n]),o.jsx(__,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});J_.displayName="BubbleSelect";function Q_(e){const t=vs(e),n=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const u=n.current+l;t(u),(function d(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[t]),a=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function Z_(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let l=pK(e,Math.max(a,0));s.length===1&&(l=l.filter(f=>f!==n));const d=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function pK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var mK=N_,gK=R_,yK=A_,xK=P_,vK=M_,bK=D_,wK=$_,SK=V_,kK=U_,jK=G_,CK=q_,EK=K_;function Af({...e}){return o.jsx(mK,{"data-slot":"select",...e})}function Pf({...e}){return o.jsx(yK,{"data-slot":"select-value",...e})}function Mf({className:e,size:t="default",children:n,...r}){return o.jsxs(gK,{"data-slot":"select-trigger","data-size":t,className:tt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,o.jsx(xK,{asChild:!0,children:o.jsx(Ic,{className:"size-4 opacity-50"})})]})}function Df({className:e,children:t,position:n="popper",...r}){return o.jsx(vK,{children:o.jsxs(bK,{"data-slot":"select-content",className:tt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(_K,{}),o.jsx(wK,{className:tt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),o.jsx(NK,{})]})})}function gr({className:e,children:t,...n}){return o.jsxs(SK,{"data-slot":"select-item",className:tt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[o.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:o.jsx(jK,{children:o.jsx(rc,{className:"size-4"})})}),o.jsx(kK,{children:t})]})}function _K({className:e,...t}){return o.jsx(CK,{"data-slot":"select-scroll-up-button",className:tt("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(my,{className:"size-4"})})}function NK({className:e,...t}){return o.jsx(EK,{"data-slot":"select-scroll-down-button",className:tt("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Ic,{className:"size-4"})})}function TK({open:e,onClose:t,onSuccess:n}){var P;const{browseChatflows:r,cloneChatflow:s,fetchChatflows:a}=Qf(),{selectedProject:l,projects:u}=qt(),[d,f]=S.useState(!1),[m,h]=S.useState(!1),[g,x]=S.useState({}),[v,b]=S.useState(""),[w,j]=S.useState(""),[T,k]=S.useState("");S.useEffect(()=>{e&&(E(),b(""),j(""),k(""))},[e]),S.useEffect(()=>{var $;if(w&&v){const L=($=g[v])==null?void 0:$.find(B=>B.id===w);L&&k(`${L.name} (Copy)`)}},[w,v,g]);const E=async()=>{try{h(!0);const $=await r();x($)}catch($){console.error("Failed to browse chatflows:",$),be.error("Failed to load chatflows")}finally{h(!1)}},N=async()=>{if(!(l!=null&&l.id)){be.error("Please select a target project first");return}if(!w){be.error("Please select a chatflow to clone");return}if(!T.trim()){be.error("Please enter a name for the cloned chatflow");return}try{f(!0);const $=await s(w,T.trim(),l.id,v);be.success("Chatflow cloned successfully"),await a({projectId:l.id}),n&&n($),t()}catch($){console.error("Failed to clone chatflow:",$),be.error($.message||"Failed to clone chatflow")}finally{f(!1)}},_=$=>{const L=u.find(B=>B.id===$);return(L==null?void 0:L.name)||$},R=v?g[v]||[]:[],A=Object.keys(g).filter($=>g[$].length>0);return o.jsx(ZE,{open:e,onOpenChange:$=>!$&&t(),children:o.jsxs(e_,{className:"sm:max-w-[500px]",children:[o.jsxs(t_,{children:[o.jsxs(n_,{className:"flex items-center gap-2",children:[o.jsx(cf,{size:20}),"Clone Chatflow from Another Project"]}),o.jsxs(bG,{children:["Clone an existing chatflow from any project to the current project (",l==null?void 0:l.name,")."]})]}),m?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx($t,{className:"animate-spin mr-2",size:24}),o.jsx("span",{className:"text-sm text-gray-500",children:"Loading chatflows..."})]}):A.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(ga,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No chatflows found in any project."}),o.jsx("p",{className:"text-sm",children:"Create a chatflow first before cloning."})]}):o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ca,{htmlFor:"sourceProject",className:"flex items-center gap-2",children:[o.jsx(i4,{size:16}),"Source Project"]}),o.jsxs(Af,{value:v,onValueChange:$=>{b($),j("")},children:[o.jsx(Mf,{children:o.jsx(Pf,{placeholder:"Select source project..."})}),o.jsx(Df,{children:A.map($=>o.jsxs(gr,{value:$,children:[_($)," (",g[$].length," chatflows)"]},$))})]})]}),v&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ca,{htmlFor:"chatflow",className:"flex items-center gap-2",children:[o.jsx(ga,{size:16}),"Chatflow to Clone"]}),o.jsxs(Af,{value:w,onValueChange:j,children:[o.jsx(Mf,{children:o.jsx(Pf,{placeholder:"Select chatflow..."})}),o.jsx(Df,{children:R.map($=>o.jsx(gr,{value:$.id,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:$.name}),o.jsxs("span",{className:"text-xs text-gray-400",children:[$.nodesCount," nodes - ",$.status]})]})},$.id))})]})]}),w&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ca,{htmlFor:"newName",children:"New Chatflow Name"}),o.jsx(Lc,{id:"newName",value:T,onChange:$=>k($.target.value),placeholder:"Enter name for the cloned chatflow..."})]}),w&&o.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm",children:[o.jsx("p",{className:"font-medium text-amber-800",children:"Clone Details:"}),o.jsxs("ul",{className:"mt-1 text-amber-700 space-y-1",children:[o.jsxs("li",{children:["From: ",_(v)]}),o.jsxs("li",{children:["To: ",l==null?void 0:l.name]}),o.jsxs("li",{children:["Chatflow: ",(P=R.find($=>$.id===w))==null?void 0:P.name]})]})]})]}),o.jsxs(vG,{children:[o.jsx(pt,{variant:"outline",onClick:t,disabled:d,children:"Cancel"}),o.jsx(pt,{onClick:N,disabled:d||!w||!T.trim(),className:"bg-amber-500 hover:bg-amber-600",children:d?o.jsxs(o.Fragment,{children:[o.jsx($t,{className:"animate-spin mr-2",size:16}),"Cloning..."]}):o.jsxs(o.Fragment,{children:[o.jsx(cf,{size:16,className:"mr-2"}),"Clone Chatflow"]})})]})]})})}function RK(){const e=Rt(),{chatflows:t,createChatflow:n,deleteChatflow:r,loading:s}=Qf(),{selectedProject:a}=qt(),[l,u]=S.useState(""),[d,f]=S.useState(!1),[m,h]=S.useState(!1),g=async()=>{if(!a){be.error("Please select a project first");return}f(!0);try{const b=await n({name:`Untitled Flow ${t.length+1}`,description:"New chatflow",projectId:a.id});be.success("Chatflow created successfully"),e(`/kabar-in/chatflow/${b.id}`)}catch{be.error("Failed to create chatflow")}finally{f(!1)}},x=async b=>{if(!(a!=null&&a.id)){be.error("Please select a project first");return}try{await r(b,a.id),be.success("Chatflow deleted successfully")}catch{be.error("Failed to delete chatflow")}},v=t.filter(b=>b.name.toLowerCase().includes(l.toLowerCase()));return o.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)",padding:"2rem"},children:[o.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:700,color:"#1f2937",marginBottom:"0.5rem"},children:"Chatflow Studio"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Design automated conversation flows with visual drag-and-drop builder"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[o.jsxs("div",{style:{flex:1,position:"relative"},children:[o.jsx(ys,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),o.jsx("input",{type:"text",placeholder:"Search chatflows...",value:l,onChange:b=>u(b.target.value),style:{width:"100%",padding:"12px 16px 12px 48px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#1f2937",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"12px",outline:"none"}})]}),o.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(!0),style:{padding:"12px 24px",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#f59e0b"},children:[o.jsx(cf,{size:18}),"Clone from Project"]}),o.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:d,style:{padding:"12px 24px",background:"linear-gradient(135deg, #f59e0b 0%, #f97316 100%)",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",cursor:d?"not-allowed":"pointer",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ffffff",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)",opacity:d?.6:1},children:[o.jsx(en,{size:18}),"Create Chatflow"]})]}),s?o.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b7280"},children:"Loading chatflows..."})}):v.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",background:"rgba(255, 255, 255, 0.5)",borderRadius:"24px",border:"2px dashed rgba(245, 158, 11, 0.2)"},children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,color:"#1f2937",marginBottom:"0.5rem"},children:l?"No chatflows found":"No chatflows yet"}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:l?"Try a different search term":"Create your first chatflow to get started"})]}):o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:v.map(b=>o.jsx(dU,{chatflow:b,onClick:()=>e(`/kabar-in/chatflow/${b.id}`),onDelete:x},b.id))})]}),o.jsx(TK,{open:m,onClose:()=>h(!1),onSuccess:()=>{h(!1)}})]})}function IK(e,t){const n=[],r=[];if(e.length===0)return n.push("Flow must have at least one node"),{valid:!1,errors:n,warnings:r};const s=e.filter(h=>h.type==="trigger");s.length===0?n.push("Flow must have a trigger node"):s.length>1&&n.push("Flow can only have one trigger node");const a=e.filter(h=>h.type==="end");a.length===0&&n.push("Flow must have at least one end node");const l=new Set;t.forEach(h=>{l.add(h.source),l.add(h.target)});const u=e.filter(h=>!l.has(h.id)&&h.type!=="trigger"&&e.length>1);return u.length>0&&n.push(`${u.length} disconnected node(s): ${u.map(h=>h.data.label).join(", ")}`),s.length===1&&e.length>1&&(t.some(g=>g.source===s[0].id)||n.push("Trigger node must connect to another node")),a.forEach(h=>{!t.some(x=>x.target===h.id)&&e.length>1&&n.push(`End node "${h.data.label}" is not connected`)}),e.filter(h=>h.type==="condition").forEach(h=>{const g=t.filter(x=>x.source===h.id);g.length===0?n.push(`Condition "${h.data.label}" has no outputs`):g.length===1?r.push(`Condition "${h.data.label}" should have 2 outputs (true/false paths)`):g.length>2&&n.push(`Condition "${h.data.label}" has too many outputs (max 2)`)}),e.filter(h=>h.type==="send_template").forEach(h=>{var g;(g=h.data.config)!=null&&g.templateId||n.push(`Send Template "${h.data.label}" has no template selected`)}),AK(e,t)&&n.push("Flow contains circular dependency (infinite loop)"),e.forEach(h=>{var g,x;if(h.type==="trigger"){const v=h.data.config;(v==null?void 0:v.type)==="keyword"&&!v.keyword&&n.push(`Trigger "${h.data.label}" needs a keyword`)}if(h.type==="wait_reply"){const v=h.data.config;v!=null&&v.timeout&&v.timeout<0&&n.push(`Wait Reply "${h.data.label}" has invalid timeout value`)}if(h.type==="condition"){const v=h.data.config;v!=null&&v.variable||n.push(`Condition "${h.data.label}" needs a variable to check`),v!=null&&v.value||n.push(`Condition "${h.data.label}" needs a value to compare`)}if(h.type==="delay"){const v=h.data.config;(!(v!=null&&v.duration)||v.duration<=0)&&n.push(`Delay "${h.data.label}" needs a valid duration`)}if(h.type==="guest_form"){const v=h.data.config;!(v!=null&&v.questions)||v.questions.length===0?n.push(`Guest Form "${h.data.label}" needs at least one question`):v.questions.forEach((b,w)=>{b.variableName||n.push(`Guest Form "${h.data.label}" question ${w+1} needs a variable name`),b.question||n.push(`Guest Form "${h.data.label}" question ${w+1} needs question text`),b.type==="choice"&&(!b.options||b.options.length===0)&&n.push(`Guest Form "${h.data.label}" question ${w+1} (choice type) needs options`)}),v!=null&&v.enableConfirmation&&(v.confirmationMessage||r.push(`Guest Form "${h.data.label}" has confirmation enabled but no message`),(!v.confirmYesKeywords||v.confirmYesKeywords.length===0)&&r.push(`Guest Form "${h.data.label}" has no "Yes" keywords configured`),(!v.confirmNoKeywords||v.confirmNoKeywords.length===0)&&r.push(`Guest Form "${h.data.label}" has no "No" keywords configured`)),((g=v==null?void 0:v.onMaxRetry)==null?void 0:g.action)==="jump_to_node"&&!v.onMaxRetry.jumpToNodeId&&n.push(`Guest Form "${h.data.label}" has jump action but no target node selected`),(x=v==null?void 0:v.onMaxRetry)!=null&&x.jumpToNodeId&&(e.some(w=>w.id===v.onMaxRetry.jumpToNodeId)||n.push(`Guest Form "${h.data.label}" references a non-existent jump target node`))}if(h.type==="update_guest"){const v=h.data.config;(v==null?void 0:v.action)==="add_tag"&&!v.tagName&&n.push(`Update Guest "${h.data.label}" needs a tag name`),(v==null?void 0:v.action)==="remove_tag"&&!v.tagName&&n.push(`Update Guest "${h.data.label}" needs a tag name`),(v==null?void 0:v.action)==="update_rsvp"&&!v.rsvpStatus&&n.push(`Update Guest "${h.data.label}" needs an RSVP status`),(v==null?void 0:v.action)==="update_field"&&!v.fieldName&&n.push(`Update Guest "${h.data.label}" needs a field name`),(v==null?void 0:v.action)==="map_from_variables"&&(!v.variableMappings||v.variableMappings.length===0?n.push(`Update Guest "${h.data.label}" needs at least one variable mapping`):v.variableMappings.forEach((b,w)=>{b.sourceVariable||n.push(`Update Guest "${h.data.label}" mapping ${w+1} needs a source variable`),b.targetField||n.push(`Update Guest "${h.data.label}" mapping ${w+1} needs a target field`)}))}}),{valid:n.length===0,errors:n,warnings:r}}function AK(e,t){const n=new Set,r=new Set;function s(l){n.add(l),r.add(l);const u=t.filter(d=>d.source===l);for(const d of u)if(n.has(d.target)){if(r.has(d.target))return!0}else if(s(d.target))return!0;return r.delete(l),!1}const a=e.find(l=>l.type==="trigger");return a?s(a.id):!1}function jS(){const{id:e}=ly(),t=Rt(),{chatflows:n,getChatflowById:r,updateChatflow:s,deleteChatflow:a}=Qf(),{selectedProject:l}=qt(),[u,d]=S.useState(!1),[f,m]=S.useState(null),[h,g]=S.useState([]),[x,v]=S.useState([]),[b,w]=S.useState(!1),[j,T]=S.useState(null),[k,E]=S.useState(!1),[N,_]=S.useState(!0),[R,A]=S.useState({valid:!0,errors:[],warnings:[]});S.useRef(null);const P=S.useRef(!0),$=M=>{const U=new Set;return M.forEach(F=>{var D;F.type==="set_variable"&&((D=F.data.config)!=null&&D.variableName)&&U.add(F.data.config.variableName)}),Array.from(U)},L=S.useCallback(async()=>{if(!e){console.error(" No chatflow ID");return}if(!(l!=null&&l.id)){console.error(" No project selected"),alert("Please select a project first");return}console.log(" ========== SAVE CHATFLOW START =========="),console.log(" Nodes count:",h.length),console.log(" Edges count:",x.length),console.log(" Project ID:",l.id),h.forEach((M,U)=>{console.log(`Node ${U+1}:`,{id:M.id,type:M.type,label:M.data.label,hasConfig:!!M.data.config,config:M.data.config})});try{w(!0);const M=$(h);console.log(" Extracted variables:",M);const U={nodes:h,edges:x,variables:M};console.log(" Sending payload to backend:",JSON.stringify(U,null,2));const F=await s(e,U,l.id);console.log(" Backend response:",F),E(!1),T(new Date),console.log(" Chatflow saved successfully"),console.log(" ========== SAVE CHATFLOW END ==========")}catch(M){console.error(" Save error:",M),alert("Failed to save chatflow")}finally{w(!1)}},[e,h,x,s,l==null?void 0:l.id]),B=S.useCallback(async M=>{if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}try{await s(e,{name:M},l.id),console.log("Chatflow name updated successfully")}catch(U){console.error("Update name error:",U),alert("Failed to update chatflow name")}},[e,s,l==null?void 0:l.id]),K=S.useCallback(async()=>{if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}try{await a(e,l.id),console.log("Chatflow deleted successfully"),t("/kabar-in/chatflow")}catch(M){console.error("Delete error:",M),alert("Failed to delete chatflow")}},[e,a,t,l==null?void 0:l.id]),V=S.useCallback(async()=>{var F;if(!e){console.error("No chatflow ID");return}if(!(l!=null&&l.id)){console.error("No project selected");return}const U=((F=n.find(D=>D.id===e))==null?void 0:F.status)==="active"?"draft":"active";try{await s(e,{status:U},l.id),console.log(`Chatflow status changed to ${U}`)}catch(D){console.error("Toggle lock error:",D),alert("Failed to change chatflow status")}},[e,n,s,l==null?void 0:l.id]);if(S.useEffect(()=>{P.current||(h.length>0||x.length>0)&&E(!0)},[h,x]),S.useEffect(()=>{const M=IK(h,x);A(M)},[h,x]),S.useEffect(()=>{(async()=>{var U;if(!e){_(!1),P.current=!1;return}if(!(l!=null&&l.id)){console.log("Waiting for project selection...");return}try{_(!0),P.current=!0;const F=await r(e,l.id);console.log(" ========== LOAD CHATFLOW =========="),console.log(" Loaded chatflow:",F),console.log(" Nodes from backend:",F==null?void 0:F.nodes),console.log(" Nodes count:",(U=F==null?void 0:F.nodes)==null?void 0:U.length),F!=null&&F.nodes&&F.nodes.forEach((D,W)=>{var X,Z,G;console.log(`Loaded Node ${W+1}:`,{id:D.id,type:D.type,label:(X=D.data)==null?void 0:X.label,hasConfig:!!((Z=D.data)!=null&&Z.config),config:(G=D.data)==null?void 0:G.config})}),F&&(console.log(" Setting nodes state with:",F.nodes),g(F.nodes||[]),v(F.edges||[]),E(!1),T(new Date(F.updatedAt)),console.log(" Nodes state set successfully")),console.log(" ========== LOAD CHATFLOW END ==========")}catch(F){console.error("Load error:",F),alert("Failed to load chatflow")}finally{_(!1),setTimeout(()=>{P.current=!1},100)}})()},[e,l==null?void 0:l.id]),!e)return o.jsx(RK,{});if(N)return o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)"},children:o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(245, 158, 11, 0.2)",borderTopColor:"#f59e0b",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b7280"},children:"Loading chatflow..."})]})});const z=n.find(M=>M.id===e),H=(z==null?void 0:z.status)==="active";return o.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.03) 0%, rgba(139, 92, 246, 0.03) 100%)"},children:[o.jsx(qV,{chatflowId:e,chatflowName:(z==null?void 0:z.name)||"Untitled Flow",onBack:()=>t("/kabar-in/chatflow"),onSave:L,onUpdateName:B,onDelete:K,onToggleLock:V,isSaving:b,hasUnsavedChanges:k,lastSaved:j,validation:R,isLocked:H,currentChatflow:z?{...z,nodes:h,edges:x}:void 0}),o.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[!u&&!H&&o.jsx(XV,{onCollapse:()=>d(!0)}),o.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:o.jsx(QW,{nodes:h,edges:x,onNodesChange:H?()=>{}:g,onEdgesChange:H?()=>{}:v,onNodeSelect:m,isLocked:H})}),f&&o.jsx(uU,{node:f,allNodes:h,isLocked:H,onUpdate:M=>{H||(console.log(" ChatflowStudio.onUpdate called:",{nodeId:M.id,nodeType:M.type,config:M.data.config,fullNode:M}),g(U=>{const F=U.map(D=>D.id===M.id?M:D);return console.log(" Nodes state updated. Total nodes:",F.length),console.log(" Updated node in array:",F.find(D=>D.id===M.id)),F}),m(M))},onDelete:()=>{g(M=>M.filter(U=>U.id!==f.id)),m(null)},onClose:()=>m(null)})]})]})}async function Dl(e){const t=await e.text();try{return JSON.parse(t)}catch{throw console.error("Failed to parse JSON:",t),new Error("Invalid JSON response from server")}}const eN=S.createContext(void 0);function PK({children:e}){const{user:t,accessToken:n}=Gt(),[r,s]=S.useState([]),[a,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${zn}.supabase.co/functions/v1/make-server-deeab278`,m=async _=>{if(!t||!n){s([]);return}try{l(!0),d(null);const R=new URLSearchParams;R.append("projectId",_);const A=await fetch(`${f}/campaigns?${R.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}}),P=await Dl(A);if(!A.ok)throw new Error(P.error||"Failed to fetch campaigns");s(P.campaigns||[])}catch(R){console.error("Error fetching campaigns:",R),d(R.message||"Failed to fetch campaigns"),s([])}finally{l(!1)}},h=async _=>{if(!t||!n)return null;try{const R=await fetch(`${f}/campaigns/${_}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}}),A=await Dl(R);if(!R.ok)throw new Error(A.error||"Failed to fetch campaign");return A.campaign}catch(R){return console.error("Error fetching campaign:",R),d(R.message||"Failed to fetch campaign"),null}},N={campaigns:r,loading:a,error:u,fetchCampaigns:m,getCampaignById:h,createCampaign:async(_,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({..._,projectId:R})}),P=await Dl(A);if(!A.ok)throw new Error(P.error||"Failed to create campaign");const $=P.campaign;return s(L=>[$,...L]),$}catch(A){throw console.error("Error creating campaign:",A),d(A.message||"Failed to create campaign"),A}},updateCampaign:async(_,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns/${_}`,{method:"PUT",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify(R)}),P=await Dl(A);if(!A.ok)throw new Error(P.error||"Failed to update campaign");const $=P.campaign;return s(L=>L.map(B=>B.id===_?$:B)),$}catch(A){throw console.error("Error updating campaign:",A),d(A.message||"Failed to update campaign"),A}},deleteCampaign:async _=>{if(!t||!n||t.role!=="admin")throw new Error("Only admins can delete campaigns");try{d(null);const R=await fetch(`${f}/campaigns/${_}`,{method:"DELETE",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const A=await R.json();throw new Error(A.error||"Failed to delete campaign")}s(A=>A.filter(P=>P.id!==_))}catch(R){throw console.error("Error deleting campaign:",R),d(R.message||"Failed to delete campaign"),R}},startCampaign:async _=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${_}/start`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to start campaign")}const A=await h(_);A&&s(P=>P.map($=>$.id===_?A:$))}catch(R){throw console.error("Error starting campaign:",R),d(R.message||"Failed to start campaign"),R}},pauseCampaign:async _=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${_}/pause`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to pause campaign")}const A=await h(_);A&&s(P=>P.map($=>$.id===_?A:$))}catch(R){throw console.error("Error pausing campaign:",R),d(R.message||"Failed to pause campaign"),R}},resumeCampaign:async _=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${_}/resume`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to resume campaign")}const A=await h(_);A&&s(P=>P.map($=>$.id===_?A:$))}catch(R){throw console.error("Error resuming campaign:",R),d(R.message||"Failed to resume campaign"),R}},cancelCampaign:async _=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/campaigns/${_}/cancel`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!R.ok){const P=await R.json();throw new Error(P.error||"Failed to cancel campaign")}const A=await h(_);A&&s(P=>P.map($=>$.id===_?A:$))}catch(R){throw console.error("Error cancelling campaign:",R),d(R.message||"Failed to cancel campaign"),R}},previewGuestFilter:async(_,R)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const A=await fetch(`${f}/campaigns/preview-guests`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({projectId:_,guestFilter:R})}),P=await Dl(A);if(!A.ok)throw new Error(P.error||"Failed to preview guests");return P.guests||[]}catch(A){return console.error("Error previewing guests:",A),d(A.message||"Failed to preview guests"),[]}},getCampaignStats:async _=>{const R=await h(_);return(R==null?void 0:R.stats)||null}};return o.jsx(eN.Provider,{value:N,children:e})}function cx(){const e=S.useContext(eN);if(e===void 0)throw new Error("useCampaigns must be used within a CampaignProvider");return e}function MK({className:e,...t}){return o.jsx("textarea",{"data-slot":"textarea",className:tt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var ux="Checkbox",[DK]=Oa(ux),[FK,OK]=DK(ux),tN=S.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:l,disabled:u,value:d="on",onCheckedChange:f,form:m,...h}=e,[g,x]=S.useState(null),v=at(t,E=>x(E)),b=S.useRef(!1),w=g?m||!!g.closest("form"):!0,[j=!1,T]=Cf({prop:s,defaultProp:a,onChange:f}),k=S.useRef(j);return S.useEffect(()=>{const E=g==null?void 0:g.form;if(E){const N=()=>T(k.current);return E.addEventListener("reset",N),()=>E.removeEventListener("reset",N)}},[g,T]),o.jsxs(FK,{scope:n,state:j,disabled:u,children:[o.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":ro(j)?"mixed":j,"aria-required":l,"data-state":sN(j),"data-disabled":u?"":void 0,disabled:u,value:d,...h,ref:v,onKeyDown:Ye(e.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Ye(e.onClick,E=>{T(N=>ro(N)?!0:!N),w&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),w&&o.jsx(zK,{control:g,bubbles:!b.current,name:r,value:d,checked:j,required:l,disabled:u,form:m,style:{transform:"translateX(-100%)"},defaultChecked:ro(a)?!1:a})]})});tN.displayName=ux;var nN="CheckboxIndicator",rN=S.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=OK(nN,n);return o.jsx(Bc,{present:r||ro(a.state)||a.state===!0,children:o.jsx(Je.span,{"data-state":sN(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});rN.displayName=nN;var zK=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...a}=e,l=S.useRef(null),u=E_(n),d=m_(t);S.useEffect(()=>{const m=l.current,h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&x){const v=new Event("click",{bubbles:r});m.indeterminate=ro(n),x.call(m,ro(n)?!1:n),m.dispatchEvent(v)}},[u,n,r]);const f=S.useRef(ro(n)?!1:n);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??f.current,...a,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ro(e){return e==="indeterminate"}function sN(e){return ro(e)?"indeterminate":e?"checked":"unchecked"}var $K=tN,LK=rN;function vh({className:e,...t}){return o.jsx($K,{"data-slot":"checkbox",className:tt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(LK,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(rc,{className:"size-3.5"})})})}function BK({guests:e,selectedIds:t,onSelectionChange:n,loading:r=!1}){const[s,a]=S.useState(""),l=S.useMemo(()=>{if(!s.trim())return e;const h=s.toLowerCase();return e.filter(g=>{var x;return g.name.toLowerCase().includes(h)||g.phone.includes(h)||((x=g.email)==null?void 0:x.toLowerCase().includes(h))})},[e,s]),u=l.length>0&&l.every(h=>t.includes(h.id)),d=l.some(h=>t.includes(h.id))&&!u,f=h=>{if(h){const g=new Set(t);l.forEach(x=>g.add(x.id)),n(Array.from(g))}else{const g=new Set(l.map(x=>x.id));n(t.filter(x=>!g.has(x)))}},m=(h,g)=>{n(g?[...t,h]:t.filter(x=>x!==h))};return r?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx($t,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx(ln,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guests found"}),o.jsx("p",{className:"text-gray-600",children:"Add guests to your project first before creating a campaign."})]}):o.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"relative flex-1 max-w-md",children:[o.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Lc,{type:"text",placeholder:"Search guests...",value:s,onChange:h=>a(h.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(vy,{className:"h-4 w-4"}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium text-gray-900",children:t.length})," ","of"," ",o.jsx("span",{className:"font-medium text-gray-900",children:e.length})," ","selected"]})]})]})}),o.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left w-12",children:o.jsx(vh,{checked:u,onCheckedChange:f,"aria-label":u?"Deselect all guests":"Select all guests",className:d?"data-[state=checked]:bg-blue-600":""})}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:l.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500",children:"No guests match your search"})}):l.map(h=>o.jsx(WK,{guest:h,selected:t.includes(h.id),onSelect:g=>m(h.id,g)},h.id))})]})}),o.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-200 flex items-center gap-2",children:[o.jsxs(pt,{variant:"outline",size:"sm",onClick:()=>n(e.map(h=>h.id)),children:["Select All (",e.length,")"]}),o.jsx(pt,{variant:"outline",size:"sm",onClick:()=>n([]),children:"Deselect All"})]})]})}function WK({guest:e,selected:t,onSelect:n}){return o.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${t?"bg-blue-50":""}`,onClick:()=>n(!t),children:[o.jsx("td",{className:"px-4 py-3",onClick:r=>r.stopPropagation(),children:o.jsx(vh,{checked:t,onCheckedChange:n,"aria-label":`Select ${e.name}`})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:e.name}),e.email&&o.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),o.jsx("td",{className:"px-4 py-3 text-gray-700",children:e.phone}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:e.category||"general"})})]})}function VK({open:e,onClose:t,onSuccess:n}){const{selectedProject:r}=qt(),{createCampaign:s}=cx(),{chatflows:a,fetchChatflows:l}=Qf(),{guests:u,fetchGuests:d}=Jf(),[f,m]=S.useState(1),[h,g]=S.useState(!1),[x,v]=S.useState(!1),[b,w]=S.useState({name:"",description:"",chatflow_id:""}),[j,T]=S.useState([]),[k,E]=S.useState(!1);S.useEffect(()=>{e&&(r!=null&&r.id)&&(l({projectId:r.id}),N())},[e,r==null?void 0:r.id]),S.useEffect(()=>{e&&u.length>0&&!k&&(T(u.map(P=>P.id)),E(!0))},[e,u.length,k]),S.useEffect(()=>{e?(m(1),w({name:"",description:"",chatflow_id:""}),E(!1)):(T([]),E(!1))},[e]);const N=S.useCallback(async()=>{if(r!=null&&r.id){v(!0);try{await d()}catch(P){console.error("Failed to refresh guests:",P)}finally{v(!1)}}},[r==null?void 0:r.id,d]),_=async()=>{if(!(r!=null&&r.id)){be.error("Please select a project first");return}if(!b.name.trim()){be.error("Campaign name is required");return}if(!b.chatflow_id){be.error("Please select a chatflow");return}if(j.length===0){be.error("Please select at least one guest");return}g(!0);try{const P={name:b.name.trim(),description:b.description.trim()||void 0,chatflow_id:b.chatflow_id,guest_filter:{custom_guest_ids:j}};await s(P,r.id),be.success(`Campaign "${b.name}" created with ${j.length} guests`),n()}catch(P){const $=P instanceof Error?P.message:"Failed to create campaign";be.error($)}finally{g(!1)}},R=b.name.trim()&&b.chatflow_id,A=j.length>0;return o.jsx(ZE,{open:e,onOpenChange:P=>!P&&t(),children:o.jsxs(e_,{className:"max-w-6xl w-[95vw] h-[90vh] max-h-[90vh] overflow-hidden flex flex-col p-0",children:[o.jsx(t_,{className:"px-6 pt-6 pb-4 border-b",children:o.jsxs(n_,{className:"text-2xl font-semibold",children:["Create Campaign - Step ",f," of 2"]})}),o.jsxs("div",{className:"flex items-center gap-4 px-6 py-4 border-b bg-gray-50",children:[o.jsx(CS,{step:1,currentStep:f,label:"Campaign Details"}),o.jsx("div",{className:"flex-1 h-px bg-gray-300"}),o.jsx(CS,{step:2,currentStep:f,label:"Select Guests"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:f===1?o.jsx(UK,{formData:b,setFormData:w,chatflows:a}):o.jsx(HK,{guests:u,selectedGuestIds:j,setSelectedGuestIds:T,loading:x,onRefresh:N})}),o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-gray-50",children:[o.jsx(pt,{variant:"ghost",onClick:f===1?t:()=>m(1),disabled:h,children:f===1?o.jsxs(o.Fragment,{children:[o.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Cancel"]}):o.jsxs(o.Fragment,{children:[o.jsx(py,{className:"h-4 w-4 mr-2"}),"Back"]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[f===2&&o.jsxs("span",{className:"text-sm text-gray-600 mr-4",children:[j.length," of ",u.length," guests selected"]}),f===1?o.jsxs(pt,{onClick:()=>m(2),disabled:!R,children:["Next",o.jsx(Pj,{className:"h-4 w-4 ml-2"})]}):o.jsx(pt,{onClick:_,disabled:h||!A,children:h?o.jsxs(o.Fragment,{children:[o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})})}function CS({step:e,currentStep:t,label:n}){const r=e===t,s=e<t;return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
          ${r?"bg-blue-600 text-white":s?"bg-green-600 text-white":"bg-gray-100 text-gray-500"}
        `,children:e}),o.jsx("span",{className:`text-sm ${r?"font-medium text-gray-900":"text-gray-500"}`,children:n})]})}function UK({formData:e,setFormData:t,chatflows:n}){return o.jsxs("div",{className:"space-y-6 max-w-lg",children:[o.jsxs("div",{children:[o.jsxs(ca,{htmlFor:"campaign-name",className:"text-base font-medium",children:["Campaign Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Lc,{id:"campaign-name",value:e.name,onChange:r=>t({...e,name:r.target.value}),placeholder:"Enter campaign name",className:"mt-2"})]}),o.jsxs("div",{children:[o.jsx(ca,{htmlFor:"campaign-description",className:"text-base font-medium",children:"Description"}),o.jsx(MK,{id:"campaign-description",value:e.description,onChange:r=>t({...e,description:r.target.value}),placeholder:"Describe the purpose of this campaign...",rows:3,className:"mt-2"})]}),o.jsxs("div",{children:[o.jsxs(ca,{htmlFor:"campaign-chatflow",className:"text-base font-medium",children:["Select Chatflow ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs(Af,{value:e.chatflow_id,onValueChange:r=>t({...e,chatflow_id:r}),children:[o.jsx(Mf,{id:"campaign-chatflow",className:"mt-2",children:o.jsx(Pf,{placeholder:"Choose a chatflow to use"})}),o.jsx(Df,{children:n.length===0?o.jsx(gr,{value:"_none",disabled:!0,children:"No chatflows available"}):n.map(r=>o.jsx(gr,{value:r.id,children:r.name},r.id))})]}),n.length===0&&o.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"Please create a chatflow first before creating a campaign."})]})]})}function HK({guests:e,selectedGuestIds:t,setSelectedGuestIds:n,loading:r,onRefresh:s}){return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"h-5 w-5 text-gray-500"}),o.jsx("span",{className:"font-medium",children:"Select Recipients"})]}),o.jsxs(pt,{variant:"outline",size:"sm",onClick:s,disabled:r,children:[o.jsx(Vj,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),o.jsx(BK,{guests:e,selectedIds:t,onSelectionChange:n,loading:r})]})}const GK=iE("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function oN({className:e,variant:t,asChild:n=!1,...r}){const s=n?lo:"span";return o.jsx(s,{"data-slot":"badge",className:tt(GK({variant:t}),e),...r})}function iN({status:e,className:t=""}){const n={draft:{label:"Draft",className:"bg-gray-100 text-gray-800 hover:bg-gray-100"},ready:{label:"Ready",className:"bg-blue-100 text-blue-800 hover:bg-blue-100"},running:{label:"Running",className:"bg-green-100 text-green-800 hover:bg-green-100"},paused:{label:"Paused",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"},completed:{label:"Completed",className:"bg-purple-100 text-purple-800 hover:bg-purple-100"},archived:{label:"Archived",className:"bg-gray-100 text-gray-600 hover:bg-gray-100"}},r=n[e]||n.draft;return o.jsx(oN,{variant:"secondary",className:`${r.className} ${t}`,children:r.label})}var aN="AlertDialog",[qK]=Oa(aN,[IE]),js=IE(),lN=e=>{const{__scopeAlertDialog:t,...n}=e,r=js(t);return o.jsx(qE,{...r,...n,modal:!0})};lN.displayName=aN;var KK="AlertDialogTrigger",XK=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=js(n);return o.jsx(gG,{...s,...r,ref:t})});XK.displayName=KK;var YK="AlertDialogPortal",cN=e=>{const{__scopeAlertDialog:t,...n}=e,r=js(t);return o.jsx(KE,{...r,...n})};cN.displayName=YK;var JK="AlertDialogOverlay",uN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=js(n);return o.jsx(XE,{...s,...r,ref:t})});uN.displayName=JK;var ha="AlertDialogContent",[QK,ZK]=qK(ha),dN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=js(n),l=S.useRef(null),u=at(t,l),d=S.useRef(null);return o.jsx(fG,{contentName:ha,titleName:fN,docsSlug:"alert-dialog",children:o.jsx(QK,{scope:n,cancelRef:d,children:o.jsxs(YE,{role:"alertdialog",...a,...s,ref:u,onOpenAutoFocus:Ye(s.onOpenAutoFocus,f=>{var m;f.preventDefault(),(m=d.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[o.jsx(rE,{children:r}),o.jsx(tX,{contentRef:l})]})})})});dN.displayName=ha;var fN="AlertDialogTitle",hN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=js(n);return o.jsx(JE,{...s,...r,ref:t})});hN.displayName=fN;var pN="AlertDialogDescription",mN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=js(n);return o.jsx(QE,{...s,...r,ref:t})});mN.displayName=pN;var eX="AlertDialogAction",gN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=js(n);return o.jsx(Zy,{...s,...r,ref:t})});gN.displayName=eX;var yN="AlertDialogCancel",xN=S.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=ZK(yN,n),a=js(n),l=at(t,s);return o.jsx(Zy,{...a,...r,ref:l})});xN.displayName=yN;var tX=({contentRef:e})=>{const t=`\`${ha}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ha}\` by passing a \`${pN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ha}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},nX=lN,rX=cN,sX=uN,oX=dN,iX=gN,aX=xN,lX=hN,cX=mN;function uX({...e}){return o.jsx(nX,{"data-slot":"alert-dialog",...e})}function dX({...e}){return o.jsx(rX,{"data-slot":"alert-dialog-portal",...e})}function fX({className:e,...t}){return o.jsx(sX,{"data-slot":"alert-dialog-overlay",className:tt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function hX({className:e,...t}){return o.jsxs(dX,{children:[o.jsx(fX,{}),o.jsx(oX,{"data-slot":"alert-dialog-content",className:tt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function pX({className:e,...t}){return o.jsx("div",{"data-slot":"alert-dialog-header",className:tt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function mX({className:e,...t}){return o.jsx("div",{"data-slot":"alert-dialog-footer",className:tt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function gX({className:e,...t}){return o.jsx(lX,{"data-slot":"alert-dialog-title",className:tt("text-lg font-semibold",e),...t})}function yX({className:e,...t}){return o.jsx(cX,{"data-slot":"alert-dialog-description",className:tt("text-muted-foreground text-sm",e),...t})}function xX({className:e,...t}){return o.jsx(iX,{className:tt(Uy(),e),...t})}function vX({className:e,...t}){return o.jsx(aX,{className:tt(Uy({variant:"outline"}),e),...t})}function bX(){const e=Rt(),{selectedProject:t}=qt(),{campaigns:n,loading:r,fetchCampaigns:s,deleteCampaign:a}=cx(),[l,u]=S.useState(!1),[d,f]=S.useState(null),[m,h]=S.useState(!1),[g,x]=S.useState(!1);S.useEffect(()=>{t!=null&&t.id&&s(t.id)},[t==null?void 0:t.id,s]);const v=S.useCallback(async()=>{if(t!=null&&t.id){x(!0);try{await s(t.id),be.success("Campaigns refreshed")}catch{be.error("Failed to refresh campaigns")}finally{x(!1)}}},[t==null?void 0:t.id,s]),b=async()=>{if(d){h(!0);try{await a(d.id),be.success(`Campaign "${d.name}" deleted`),f(null),t!=null&&t.id&&s(t.id)}catch(j){const T=j instanceof Error?j.message:"Failed to delete campaign";be.error(T)}finally{h(!1)}}},w=j=>{e(`/kabar-in/operation/${j.id}`)};return t?o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Operation Center"}),o.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage campaigns for ",t.name]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(pt,{variant:"outline",onClick:v,disabled:g,children:[o.jsx(Vj,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]}),o.jsxs(pt,{onClick:()=>u(!0),children:[o.jsx(en,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})]}),r&&n.length===0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(j=>o.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse border border-gray-200"},j))}):n.length===0?o.jsx(wX,{onCreateClick:()=>u(!0)}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(j=>o.jsx(SX,{campaign:j,onClick:()=>w(j),onDelete:()=>f(j)},j.id))}),o.jsx(VK,{open:l,onClose:()=>u(!1),onSuccess:()=>{u(!1),t!=null&&t.id&&s(t.id)}}),o.jsx(uX,{open:!!d,onOpenChange:()=>f(null),children:o.jsxs(hX,{children:[o.jsxs(pX,{children:[o.jsx(gX,{children:"Delete Campaign?"}),o.jsxs(yX,{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"? This action cannot be undone.']})]}),o.jsxs(mX,{children:[o.jsx(vX,{disabled:m,children:"Cancel"}),o.jsx(xX,{onClick:b,disabled:m,className:"bg-red-600 hover:bg-red-700",children:m?o.jsxs(o.Fragment,{children:[o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}):o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx("p",{className:"text-gray-500",children:"Please select a project first"})})}function wX({onCreateClick:e}){return o.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(en,{className:"h-8 w-8 text-blue-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No campaigns yet"}),o.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create your first campaign to start sending messages to your guests"}),o.jsxs(pt,{onClick:e,children:[o.jsx(en,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})}function SX({campaign:e,onClick:t,onDelete:n}){var s,a,l;const r=((a=(s=e.guest_filter)==null?void 0:s.custom_guest_ids)==null?void 0:a.length)||((l=e.stats)==null?void 0:l.total_guests)||0;return o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer group",onClick:t,children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),o.jsx(iN,{status:e.status,className:"mt-2"})]}),o.jsx(pt,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-600 hover:text-red-700 hover:bg-red-50",onClick:u=>{u.stopPropagation(),n()},children:o.jsx(Ht,{className:"h-4 w-4"})})]}),e.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Chatflow:"}),o.jsx("span",{className:"font-medium text-gray-900 truncate ml-2",children:e.chatflow_name||"Not set"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Total Guests:"}),o.jsx("span",{className:"font-medium text-gray-900",children:r})]}),e.stats&&e.status!=="draft"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Completed:"}),o.jsx("span",{className:"font-medium text-green-600",children:e.stats.executions_completed})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Failed:"}),o.jsx("span",{className:"font-medium text-red-600",children:e.stats.executions_failed})]})]})]}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 text-xs text-gray-500",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})}async function Lo(e){const t=await e.text();try{return JSON.parse(t)}catch{throw console.error("Failed to parse JSON:",t),new Error("Invalid JSON response from server")}}const vN=S.createContext(void 0);function kX({children:e}){const{user:t,accessToken:n}=Gt(),[r,s]=S.useState([]),[a,l]=S.useState(!1),[u,d]=S.useState(null),f=`https://${zn}.supabase.co/functions/v1/make-server-deeab278`,m=async N=>{if(!t||!n){s([]);return}try{l(!0),d(null);const _=await fetch(`${f}/campaigns/${N}/executions`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Lo(_);if(!_.ok)throw new Error(R.error||"Failed to fetch executions");s(R.executions||[])}catch(_){console.error("Error fetching executions:",_),d(_.message||"Failed to fetch executions"),s([])}finally{l(!1)}},h=async N=>{if(!t||!n)return null;try{const _=await fetch(`${f}/executions/${N}`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Lo(_);if(!_.ok)throw new Error(R.error||"Failed to fetch execution");return R.execution}catch(_){return console.error("Error fetching execution:",_),d(_.message||"Failed to fetch execution"),null}},E={executions:r,loading:a,error:u,fetchExecutions:m,getExecutionById:h,getExecutionMessages:async N=>{if(!t||!n)return[];try{const _=await fetch(`${f}/executions/${N}/messages`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}}),R=await Lo(_);if(!_.ok)throw new Error(R.error||"Failed to fetch messages");return R.messages||[]}catch(_){return console.error("Error fetching messages:",_),d(_.message||"Failed to fetch messages"),[]}},retryExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const _=await fetch(`${f}/executions/${N}/retry`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const A=await _.json();throw new Error(A.error||"Failed to retry execution")}const R=await h(N);R&&s(A=>A.map(P=>P.id===N?R:P))}catch(_){throw console.error("Error retrying execution:",_),d(_.message||"Failed to retry execution"),_}},pauseExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const _=await fetch(`${f}/executions/${N}/pause`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const R=await _.json();throw new Error(R.error||"Failed to pause execution")}s(R=>R.map(A=>A.id===N?{...A,status:"paused",paused_at:new Date().toISOString()}:A))}catch(_){throw console.error("Error pausing execution:",_),d(_.message||"Failed to pause execution"),_}},resumeExecution:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const _=await fetch(`${f}/executions/${N}/resume`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(!_.ok){const A=await _.json();throw new Error(A.error||"Failed to resume execution")}const R=await h(N);R&&s(A=>A.map(P=>P.id===N?R:P))}catch(_){throw console.error("Error resuming execution:",_),d(_.message||"Failed to resume execution"),_}},bulkRetryExecutions:async(N,_)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/executions/bulk-retry`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:_,campaign_id:N})}),A=await Lo(R);if(!R.ok)throw new Error(A.error||"Failed to bulk retry executions");return await m(N),A.result}catch(R){throw console.error("Error bulk retrying executions:",R),d(R.message||"Failed to bulk retry executions"),R}},bulkPauseExecutions:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const _=await fetch(`${f}/executions/bulk-pause`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:N})}),R=await Lo(_);if(!_.ok)throw new Error(R.error||"Failed to bulk pause executions");const A=new Date().toISOString();return s(P=>P.map($=>R.result.succeeded.includes($.id)?{...$,status:"paused",paused_at:A}:$)),R.result}catch(_){throw console.error("Error bulk pausing executions:",_),d(_.message||"Failed to bulk pause executions"),_}},bulkResumeExecutions:async(N,_)=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const R=await fetch(`${f}/executions/bulk-resume`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:_,campaign_id:N})}),A=await Lo(R);if(!R.ok)throw new Error(A.error||"Failed to bulk resume executions");return await m(N),A.result}catch(R){throw console.error("Error bulk resuming executions:",R),d(R.message||"Failed to bulk resume executions"),R}},bulkCancelExecutions:async N=>{if(!t||!n)throw new Error("User not authenticated");try{d(null);const _=await fetch(`${f}/executions/bulk-cancel`,{method:"POST",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"},body:JSON.stringify({execution_ids:N})}),R=await Lo(_);if(!_.ok)throw new Error(R.error||"Failed to bulk cancel executions");return s(A=>A.map(P=>R.result.succeeded.includes(P.id)?{...P,status:"cancelled"}:P)),R.result}catch(_){throw console.error("Error bulk cancelling executions:",_),d(_.message||"Failed to bulk cancel executions"),_}}};return o.jsx(vN.Provider,{value:E,children:e})}function dx(){const e=S.useContext(vN);if(e===void 0)throw new Error("useExecutions must be used within an ExecutionProvider");return e}function jX({status:e,className:t=""}){const n={pending:{label:"Pending",className:"bg-gray-100 text-gray-800"},running:{label:"Running",className:"bg-blue-100 text-blue-800"},paused:{label:"Paused",className:"bg-yellow-100 text-yellow-800"},waiting:{label:"Waiting",className:"bg-amber-100 text-amber-800"},completed:{label:"Completed",className:"bg-green-100 text-green-800"},failed:{label:"Failed",className:"bg-red-100 text-red-800"},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-600"}},r=n[e]||n.pending;return o.jsx(oN,{variant:"secondary",className:`${r.className} ${t}`,children:r.label})}function CX({phase:e,className:t=""}){const r={invitation:{label:"Invitation",color:"text-blue-600 bg-blue-50"},reminder:{label:"Reminder",color:"text-amber-600 bg-amber-50"},thank_you:{label:"Thank You",color:"text-green-600 bg-green-50"},follow_up:{label:"Follow Up",color:"text-purple-600 bg-purple-50"}}[e]||{label:e.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),color:"text-gray-600 bg-gray-50"};return o.jsx("span",{className:`
        inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium
        ${r.color} ${t}
      `,children:r.label})}function EX({progress:e,size:t="md",showLabel:n=!0,className:r=""}){const s=Math.min(100,Math.max(0,e)),a={sm:"h-1.5",md:"h-2.5",lg:"h-4"},l=u=>u>=100?"bg-green-500":u>=66?"bg-blue-500":u>=33?"bg-yellow-500":"bg-gray-400";return o.jsxs("div",{className:r,children:[o.jsx("div",{className:`w-full bg-gray-200 rounded-full overflow-hidden ${a[t]}`,children:o.jsx("div",{className:`${a[t]} rounded-full transition-all duration-300 ${l(s)}`,style:{width:`${s}%`}})}),n&&o.jsxs("div",{className:"text-xs text-gray-600 mt-1 text-right",children:[Math.round(s),"%"]})]})}function _X({campaignId:e,selectedIds:t,onComplete:n}){const{bulkRetryExecutions:r,bulkPauseExecutions:s,bulkResumeExecutions:a,bulkCancelExecutions:l}=dx(),[u,d]=S.useState(null),f=async()=>{d("retry");try{const v=await r(e,t);be.success(`Retried ${v.success} execution(s)`),v.failed>0&&be.warning(`${v.failed} execution(s) failed to retry`),n()}catch(v){const b=v instanceof Error?v.message:"Failed to retry executions";be.error(b)}finally{d(null)}},m=async()=>{d("pause");try{const v=await s(t);be.success(`Paused ${v.success} execution(s)`),v.failed>0&&be.warning(`${v.failed} execution(s) failed to pause`),n()}catch(v){const b=v instanceof Error?v.message:"Failed to pause executions";be.error(b)}finally{d(null)}},h=async()=>{d("resume");try{const v=await a(e,t);be.success(`Resumed ${v.success} execution(s)`),v.failed>0&&be.warning(`${v.failed} execution(s) failed to resume`),n()}catch(v){const b=v instanceof Error?v.message:"Failed to resume executions";be.error(b)}finally{d(null)}},g=async()=>{if(confirm(`Are you sure you want to cancel ${t.length} execution(s)?`)){d("cancel");try{const v=await l(t);be.success(`Cancelled ${v.success} execution(s)`),v.failed>0&&be.warning(`${v.failed} execution(s) failed to cancel`),n()}catch(v){const b=v instanceof Error?v.message:"Failed to cancel executions";be.error(b)}finally{d(null)}}},x=u!==null;return o.jsxs("div",{className:"px-4 py-3 bg-blue-50 border-b border-blue-200 flex items-center justify-between",children:[o.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[t.length," execution(s) selected"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(pt,{variant:"outline",size:"sm",onClick:f,disabled:x,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[u==="retry"?o.jsx($t,{className:"h-4 w-4 mr-1 animate-spin"}):o.jsx(Hf,{className:"h-4 w-4 mr-1"}),"Retry"]}),o.jsxs(pt,{variant:"outline",size:"sm",onClick:m,disabled:x,className:"text-yellow-700 border-yellow-300 hover:bg-yellow-100",children:[u==="pause"?o.jsx($t,{className:"h-4 w-4 mr-1 animate-spin"}):o.jsx(Wj,{className:"h-4 w-4 mr-1"}),"Pause"]}),o.jsxs(pt,{variant:"outline",size:"sm",onClick:h,disabled:x,className:"text-green-700 border-green-300 hover:bg-green-100",children:[u==="resume"?o.jsx($t,{className:"h-4 w-4 mr-1 animate-spin"}):o.jsx(ic,{className:"h-4 w-4 mr-1"}),"Resume"]}),o.jsxs(pt,{variant:"outline",size:"sm",onClick:g,disabled:x,className:"text-red-700 border-red-300 hover:bg-red-100",children:[u==="cancel"?o.jsx($t,{className:"h-4 w-4 mr-1 animate-spin"}):o.jsx(Ij,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}function NX({campaignId:e}){const{executions:t,loading:n,fetchExecutions:r}=dx(),[s,a]=S.useState(""),[l,u]=S.useState("all"),[d,f]=S.useState([]),m=S.useMemo(()=>t.filter(w=>{const j=s===""||w.guest_name.toLowerCase().includes(s.toLowerCase())||w.guest_phone.includes(s),T=l==="all"||w.status===l;return j&&T}),[t,s,l]),h=m.length>0&&d.length===m.length,g=d.length>0&&d.length<m.length,x=w=>{f(w?m.map(j=>j.id):[])},v=(w,j)=>{f(j?[...d,w]:d.filter(T=>T!==w))},b=()=>{f([]),r(e)};return n&&t.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx($t,{className:"h-8 w-8 animate-spin text-blue-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Lc,{placeholder:"Search by name or phone...",value:s,onChange:w=>a(w.target.value),className:"pl-10"})]}),o.jsxs(Af,{value:l,onValueChange:w=>u(w),children:[o.jsx(Mf,{className:"w-full sm:w-[180px]",children:o.jsx(Pf,{placeholder:"Filter by status"})}),o.jsxs(Df,{children:[o.jsx(gr,{value:"all",children:"All Statuses"}),o.jsx(gr,{value:"pending",children:"Pending"}),o.jsx(gr,{value:"running",children:"Running"}),o.jsx(gr,{value:"paused",children:"Paused"}),o.jsx(gr,{value:"completed",children:"Completed"}),o.jsx(gr,{value:"failed",children:"Failed"}),o.jsx(gr,{value:"cancelled",children:"Cancelled"})]})]})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",m.length," of ",t.length," executions"]})]}),d.length>0&&o.jsx(_X,{campaignId:e,selectedIds:d,onComplete:b}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left",children:o.jsx(vh,{checked:h,onCheckedChange:x,"aria-label":"Select all executions",className:g?"data-[state=checked]:bg-blue-600":""})}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Guest"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Status"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Phase"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Progress"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No executions found"})}):m.map(w=>o.jsx(TX,{execution:w,selected:d.includes(w.id),onSelect:j=>v(w.id,j)},w.id))})]})})]})}function TX({execution:e,selected:t,onSelect:n}){var l,u;const r=((l=e.node_history)==null?void 0:l.filter(d=>d.status==="completed").length)||0,s=((u=e.node_history)==null?void 0:u.length)||1,a=r/s*100;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-4",children:o.jsx(vh,{checked:t,onCheckedChange:n,"aria-label":`Select execution for ${e.guest_name}`})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:e.guest_name}),o.jsx("div",{className:"text-sm text-gray-500",children:e.guest_phone})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx(jX,{status:e.status})}),o.jsx("td",{className:"px-4 py-4",children:e.current_phase?o.jsx(CX,{phase:e.current_phase}):o.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"w-32",children:[o.jsx(EX,{progress:a,size:"sm",showLabel:!1}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r,"/",s," nodes"]})]})}),o.jsx("td",{className:"px-4 py-4",children:o.jsx(pt,{variant:"ghost",size:"sm",children:"View Details"})})]})}function RX(){var $,L,B,K,V,Y,z;const{campaignId:e}=ly(),t=Rt(),{selectedProject:n}=qt(),{getCampaignById:r,startCampaign:s,pauseCampaign:a,resumeCampaign:l,cancelCampaign:u}=cx(),{executions:d,fetchExecutions:f}=dx(),{guests:m,fetchGuests:h}=Jf(),[g,x]=S.useState(null),[v,b]=S.useState(!0),[w,j]=S.useState(!1);S.useEffect(()=>{e&&(T(),f(e)),n!=null&&n.id&&h()},[e,n==null?void 0:n.id]),S.useEffect(()=>{if((g==null?void 0:g.status)==="running"){const H=setInterval(()=>{T(),e&&f(e)},5e3);return()=>clearInterval(H)}},[g==null?void 0:g.status,e]);const T=async()=>{if(e)try{b(!0);const H=await r(e);x(H)}catch(H){console.error("Failed to load campaign:",H),be.error("Failed to load campaign")}finally{b(!1)}},k=S.useMemo(()=>{var M;if(!((M=g==null?void 0:g.guest_filter)!=null&&M.custom_guest_ids))return[];const H=new Set(g.guest_filter.custom_guest_ids);return m.filter(U=>H.has(U.id))},[($=g==null?void 0:g.guest_filter)==null?void 0:$.custom_guest_ids,m]),E=async()=>{if(e){j(!0);try{await s(e),be.success("Campaign started successfully!"),await T(),f(e)}catch(H){const M=H instanceof Error?H.message:"Failed to start campaign";be.error(M)}finally{j(!1)}}},N=async()=>{if(e){j(!0);try{await a(e),be.success("Campaign paused"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to pause campaign";be.error(M)}finally{j(!1)}}},_=async()=>{if(e){j(!0);try{await l(e),be.success("Campaign resumed"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to resume campaign";be.error(M)}finally{j(!1)}}},R=async()=>{if(e&&confirm("Are you sure you want to cancel this campaign?")){j(!0);try{await u(e),be.success("Campaign cancelled"),await T()}catch(H){const M=H instanceof Error?H.message:"Failed to cancel campaign";be.error(M)}finally{j(!1)}}};if(v)return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse mb-4"}),o.jsx("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse mb-8"}),o.jsx("div",{className:"grid grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(H=>o.jsx("div",{className:"h-24 bg-gray-100 rounded-lg animate-pulse"},H))}),o.jsx("div",{className:"h-96 bg-gray-100 rounded-lg animate-pulse"})]});if(!g)return o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Campaign Not Found"}),o.jsx(pt,{onClick:()=>t("/kabar-in/operation"),className:"mt-4",children:"Back to Campaigns"})]})});const A=((B=(L=g.guest_filter)==null?void 0:L.custom_guest_ids)==null?void 0:B.length)||((K=g.stats)==null?void 0:K.total_guests)||0,P=g.status==="draft";return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs(pt,{variant:"ghost",onClick:()=>t("/kabar-in/operation"),className:"mb-4",children:[o.jsx(py,{className:"h-4 w-4 mr-1"}),"Back to Campaigns"]}),o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:g.name}),o.jsx(iN,{status:g.status})]}),g.description&&o.jsx("p",{className:"text-gray-600",children:g.description}),o.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Chatflow: ",o.jsx("span",{className:"font-medium text-gray-700",children:g.chatflow_name})]})]}),o.jsxs("div",{className:"flex gap-2",children:[g.status==="draft"&&o.jsxs(pt,{onClick:E,disabled:w||A===0,children:[w?o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(ic,{className:"h-4 w-4 mr-2"}),"Start Campaign"]}),g.status==="running"&&o.jsxs(pt,{onClick:N,disabled:w,variant:"outline",children:[w?o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(Wj,{className:"h-4 w-4 mr-2"}),"Pause"]}),g.status==="paused"&&o.jsxs(o.Fragment,{children:[o.jsxs(pt,{onClick:_,disabled:w,children:[w?o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(ic,{className:"h-4 w-4 mr-2"}),"Resume"]}),o.jsxs(pt,{onClick:R,disabled:w,variant:"destructive",children:[w?o.jsx($t,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(Ij,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[o.jsx(Fd,{icon:ln,label:"Total Guests",value:A,color:"blue"}),o.jsx(Fd,{icon:po,label:"Running",value:((V=g.stats)==null?void 0:V.executions_running)||0,color:"yellow"}),o.jsx(Fd,{icon:Mj,label:"Completed",value:((Y=g.stats)==null?void 0:Y.executions_completed)||0,color:"green"}),o.jsx(Fd,{icon:ei,label:"Failed",value:((z=g.stats)==null?void 0:z.executions_failed)||0,color:"red"})]}),P?o.jsx(IX,{guests:k,totalSelected:A,loading:m.length===0}):o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Guest Executions"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track the progress of each guest through the chatflow"})]}),o.jsx(NX,{campaignId:e})]})]})}function IX({guests:e,totalSelected:t,loading:n}){const[r,s]=S.useState(""),a=S.useMemo(()=>{if(!r.trim())return e;const l=r.toLowerCase();return e.filter(u=>{var d;return u.name.toLowerCase().includes(l)||u.phone.includes(l)||((d=u.email)==null?void 0:d.toLowerCase().includes(l))})},[e,r]);return n?o.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx($t,{className:"h-8 w-8 animate-spin text-blue-600"})})}):o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Selected Guests"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"These guests will receive messages when you start the campaign"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm bg-blue-50 text-blue-700 px-3 py-1.5 rounded-full",children:[o.jsx(vy,{className:"h-4 w-4"}),o.jsxs("span",{className:"font-medium",children:[t," guests selected"]})]})]})}),o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Lc,{type:"text",placeholder:"Search guests...",value:r,onChange:l=>s(l.target.value),className:"pl-10"})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:r?"No guests match your search":"No guests selected for this campaign"})}):a.map(l=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"font-medium text-gray-900",children:l.name})}),o.jsx("td",{className:"px-6 py-4 text-gray-700",children:l.phone}),o.jsx("td",{className:"px-6 py-4 text-gray-700",children:l.email||"-"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 capitalize",children:l.category||"general"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"Pending"})})]},l.id))})]})}),o.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 text-sm text-gray-600",children:["Showing ",a.length," of ",t," guests"]})]})}function Fd({icon:e,label:t,value:n,color:r}){const s={blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",green:"bg-green-50 text-green-600",red:"bg-red-50 text-red-600"};return o.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:t}),o.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n})]}),o.jsx("div",{className:`p-3 rounded-full ${s[r]}`,children:o.jsx(e,{className:"h-6 w-6"})})]})})}function AX(e){const t=[],n=[];if(e.version||t.push({field:"version",message:"Flow version is required",type:"error",path:"version"}),!e.screens||e.screens.length===0)t.push({field:"screens",message:"At least one screen is required",type:"error",path:"screens"});else{e.screens.forEach((u,d)=>{PX(u,e.screens).forEach(m=>{t.push({...m,path:`screens[${d}].${m.path||""}`})})});const r=e.screens.map(u=>u.id),s=r.filter((u,d)=>r.indexOf(u)!==d);s.length>0&&t.push({field:"screens",message:`Duplicate screen IDs found: ${s.join(", ")}`,type:"error",path:"screens"}),e.screens.some(u=>u.terminal)||n.push({field:"screens",message:"Flow should have at least one terminal screen",type:"warning",path:"screens"});const l=DX(e.screens);t.push(...l)}return{valid:t.length===0,errors:t,warnings:n}}function PX(e,t){const n=[];return e.id?/^[A-Z][A-Z0-9_]*$/.test(e.id)||n.push({field:"id",message:"Screen ID should be uppercase with underscores (e.g., WELCOME_SCREEN)",type:"error",path:"id"}):n.push({field:"id",message:"Screen ID is required",type:"error",path:"id"}),e.layout?!e.layout.children||e.layout.children.length===0?n.push({field:"layout.children",message:"Screen must have at least one component",type:"error",path:"layout.children"}):e.layout.children.forEach((r,s)=>{MX(r,e).forEach(l=>{n.push({...l,path:`layout.children[${s}].${l.path||""}`})})}):n.push({field:"layout",message:"Screen layout is required",type:"error",path:"layout"}),e.terminal&&e.success===void 0&&n.push({field:"success",message:"Terminal screens should have success flag set",type:"error",path:"success"}),n}function MX(e,t){const n=[];if(!e.type)return n.push({field:"type",message:"Component type is required",type:"error",path:"type"}),n;switch(e.type){case"TextHeading":case"TextSubheading":case"TextBody":case"TextCaption":(!e.text||e.text.trim()==="")&&n.push({field:"text",message:`${e.type} text cannot be empty`,type:"error",path:"text"});const r={TextHeading:80,TextSubheading:80,TextBody:4096,TextCaption:409};e.text&&e.text.length>r[e.type]&&n.push({field:"text",message:`${e.type} exceeds maximum length of ${r[e.type]} characters`,type:"error",path:"text"});break;case"TextInput":case"TextArea":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),e.label||n.push({field:"label",message:`${e.type} must have a label`,type:"error",path:"label"}),e.name&&t.data&&!t.data[e.name]&&n.push({field:"name",message:`Field "${e.name}" not found in screen data`,type:"error",path:"name"});break;case"RadioButtonsGroup":case"CheckboxGroup":case"Dropdown":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),(!e["data-source"]||e["data-source"].length===0)&&n.push({field:"data-source",message:`${e.type} must have at least one option`,type:"error",path:"data-source"});break;case"Footer":e.label||n.push({field:"label",message:"Footer button must have a label",type:"error",path:"label"}),e["on-click-action"]||n.push({field:"on-click-action",message:"Footer button must have an action",type:"error",path:"on-click-action"});break;case"DatePicker":case"CalendarPicker":e.name||n.push({field:"name",message:`${e.type} must have a name`,type:"error",path:"name"}),e.label||n.push({field:"label",message:`${e.type} must have a label`,type:"error",path:"label"});break}return n}function DX(e){const t=[],n=e.map(r=>r.id);return e.forEach((r,s)=>{var a;(a=r.layout)!=null&&a.children&&r.layout.children.forEach((l,u)=>{var d;if(l.type==="Footer"&&l["on-click-action"]){const f=l["on-click-action"];if(f.name==="navigate"){const m=f;(d=m.next)!=null&&d.name&&!n.includes(m.next.name)&&t.push({field:"on-click-action",message:`Navigation target "${m.next.name}" does not exist`,type:"error",path:`screens[${s}].layout.children[${u}].on-click-action`})}}})}),t}function FX(e){const t=JSON.stringify(e.flow_json,null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(t),r=`${e.name.replace(/\s+/g,"_").toLowerCase()}_flow.json`,s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",r),s.click()}async function OX(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{var a;try{const l=JSON.parse((a=s.target)==null?void 0:a.result);t(l)}catch{n(new Error("Invalid JSON file"))}},r.onerror=()=>{n(new Error("Failed to read file"))},r.readAsText(e)})}function zX(e,t){return{id:e,title:e,terminal:!1,data:{},layout:{type:"SingleColumnLayout",children:[]}}}function $X(e,t="SCREEN"){let n=1,r=`${t}_${n}`;for(;e.includes(r);)n++,r=`${t}_${n}`;return r}function LX(e,t){let n=1,r=`${t}_${n}`;for(;e.includes(r);)n++,r=`${t}_${n}`;return r}function BX(e){return{TextHeading:{type:"TextHeading",text:"Heading Text"},TextSubheading:{type:"TextSubheading",text:"Subheading Text"},TextBody:{type:"TextBody",text:"Body text goes here"},TextCaption:{type:"TextCaption",text:"Caption text"},TextInput:{type:"TextInput",name:"field_name",label:"Label",required:!1,"input-type":"text"},TextArea:{type:"TextArea",name:"field_name",label:"Label",required:!1},RadioButtonsGroup:{type:"RadioButtonsGroup",name:"field_name",label:"Select an option","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},CheckboxGroup:{type:"CheckboxGroup",name:"field_name",label:"Select options","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},Dropdown:{type:"Dropdown",name:"field_name",label:"Select from dropdown","data-source":[{id:"option1",title:"Option 1"},{id:"option2",title:"Option 2"}],required:!1},DatePicker:{type:"DatePicker",name:"field_name",label:"Select a date",required:!1},CalendarPicker:{type:"CalendarPicker",name:"field_name",title:"Select a date",mode:"single",required:!1},Footer:{type:"Footer",label:"Continue","on-click-action":{name:"complete",payload:{}}},OptIn:{type:"OptIn",name:"field_name",label:"I agree to the terms",required:!1},EmbeddedLink:{type:"EmbeddedLink",text:"Click here","on-click-action":{name:"open_url",payload:{url:"https://example.com"}}},Image:{type:"Image",src:"https://via.placeholder.com/300","scale-type":"cover"},ImageCarousel:{type:"ImageCarousel",images:[{src:"https://via.placeholder.com/300","alt-text":"Image 1"},{src:"https://via.placeholder.com/300","alt-text":"Image 2"}]},ChipsSelector:{type:"ChipsSelector",name:"field_name",label:"Select chips","data-source":[{id:"chip1",title:"Chip 1"},{id:"chip2",title:"Chip 2"}],required:!1},NavigationList:{type:"NavigationList","data-source":[{id:"item1",title:"Item 1"},{id:"item2",title:"Item 2"}]},PhotoPicker:{type:"PhotoPicker",name:"field_name",label:"Upload photo","photo-source":"camera_gallery",required:!1},If:{type:"If",condition:"true",then:[]},Switch:{type:"Switch",cases:[{condition:"true",components:[]}]}}[e]}function E0(e){return{TextHeading:"Heading",TextSubheading:"Subheading",TextBody:"Body Text",TextCaption:"Caption",TextInput:"Text Input",TextArea:"Text Area",RadioButtonsGroup:"Radio Buttons",CheckboxGroup:"Checkbox Group",Dropdown:"Dropdown",DatePicker:"Date Picker",CalendarPicker:"Calendar Picker",Footer:"Button",OptIn:"Opt-in Checkbox",EmbeddedLink:"Link",Image:"Image",ImageCarousel:"Image Carousel",ChipsSelector:"Chips Selector",NavigationList:"Navigation List",PhotoPicker:"Photo Picker",If:"Conditional (If)",Switch:"Switch"}[e]||e}function WX(e){return{TextHeading:"Large heading text (max 80 chars)",TextSubheading:"Subheading text (max 80 chars)",TextBody:"Body text with markdown support (max 4096 chars)",TextCaption:"Small caption text (max 409 chars)",TextInput:"Single-line text input field",TextArea:"Multi-line text input field",RadioButtonsGroup:"Single selection from options",CheckboxGroup:"Multiple selection from options",Dropdown:"Dropdown selection",DatePicker:"Date selection",CalendarPicker:"Calendar-based date picker",Footer:"Action button",OptIn:"Checkbox for consent/agreement",EmbeddedLink:"Clickable link",Image:"Display an image",ImageCarousel:"Multiple images in carousel",ChipsSelector:"Chip-based selection",NavigationList:"List with navigation",PhotoPicker:"Upload photos from device",If:"Conditional rendering",Switch:"Multiple conditional branches"}[e]||""}function bN(e){var n,r;const t=[];return(r=(n=e.layout)==null?void 0:n.children)==null||r.forEach(s=>{"name"in s&&s.name&&t.push(s.name)}),t}function fg(e){const t=bN(e),n={};return t.forEach(r=>{e.data&&e.data[r]?n[r]=e.data[r]:n[r]={type:"string",__example__:""}}),{...e,data:n}}function qi(e){return{id:e.id,project_id:e.projectId,name:e.name,description:e.description,category:e.category,status:e.status,flow_json:e.flowJson,version:e.version,created_at:e.createdAt,updated_at:e.updatedAt,created_by:e.createdBy,published_at:e.publishedAt}}function VX(e){return{id:e.id,name:e.name,description:e.description,category:e.category,thumbnail_url:e.thumbnailUrl,flow_json:e.flowJson,is_public:e.isPublic,created_at:e.createdAt}}const wN=S.createContext(void 0);function UX({children:e}){const{user:t,accessToken:n}=Gt(),{selectedProject:r}=qt(),[s,a]=S.useState([]),[l,u]=S.useState([]),[d,f]=S.useState(null),[m,h]=S.useState(null),[g,x]=S.useState(null),[v,b]=S.useState(null),[w,j]=S.useState(!1),[T,k]=S.useState(null),[E,N]=S.useState(null),_=S.useRef(null),R=S.useRef(null);R.current=d;const A=`https://${zn}.supabase.co/functions/v1/make-server-deeab278`,P=S.useCallback(()=>({Authorization:`Bearer ${De}`,"X-User-Token":n||"","Content-Type":"application/json"}),[n]),$=S.useCallback(async()=>{if(!t||!n||!(r!=null&&r.id)){a([]);return}try{j(!0),k(null);const ie=await fetch(`${A}/wa-flows?projectId=${encodeURIComponent(r.id)}`,{method:"GET",headers:P()});if(!ie.ok){const ge=await ie.json();throw new Error(ge.error||"Failed to fetch flows")}const xe=((await ie.json()).flows||[]).map(qi);a(xe)}catch(ie){console.error("Error fetching flows:",ie),k(ie.message||"Failed to fetch flows"),a([])}finally{j(!1)}},[t,n,r,A,P]),L=async ie=>{if(!t||!n||!(r!=null&&r.id))return null;try{const ue=await fetch(`${A}/wa-flows/${ie}?projectId=${encodeURIComponent(r.id)}`,{method:"GET",headers:P()});if(!ue.ok){const ge=await ue.json();throw new Error(ge.error||"Failed to fetch flow")}const xe=await ue.json();return xe.flow?qi(xe.flow):null}catch(ue){return console.error("Error fetching flow:",ue),null}},B=async(ie,ue,xe)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const ge=await fetch(`${A}/wa-flows`,{method:"POST",headers:P(),body:JSON.stringify({name:ie,description:xe,category:ue,projectId:r.id})});if(!ge.ok){const ze=await ge.json();throw new Error(ze.error||"Failed to create flow")}const Ae=await ge.json(),Ve=qi(Ae.flow);return a(ze=>[Ve,...ze]),Ve}catch(ge){throw console.error("Error creating flow:",ge),ge}},K=async(ie,ue)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const xe=await fetch(`${A}/wa-flows/from-template`,{method:"POST",headers:P(),body:JSON.stringify({templateId:ie,name:ue,projectId:r.id})});if(!xe.ok){const Ve=await xe.json();throw new Error(Ve.error||"Failed to create flow from template")}const ge=await xe.json(),Ae=qi(ge.flow);return a(Ve=>[Ae,...Ve]),Ae}catch(xe){throw console.error("Error creating flow from template:",xe),xe}},V=async(ie,ue)=>{var xe;if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const ge={};ue.name!==void 0&&(ge.name=ue.name),ue.description!==void 0&&(ge.description=ue.description),ue.category!==void 0&&(ge.category=ue.category),ue.status!==void 0&&(ge.status=ue.status),ue.flow_json!==void 0&&(ge.flowJson=ue.flow_json);const Ae=await fetch(`${A}/wa-flows/${ie}?projectId=${encodeURIComponent(r.id)}`,{method:"PUT",headers:P(),body:JSON.stringify(ge)});if(!Ae.ok){const gt=await Ae.json();throw new Error(gt.error||"Failed to update flow")}const Ve=await Ae.json(),ze=qi(Ve.flow);return a(gt=>gt.map(jt=>jt.id===ie?ze:jt)),((xe=R.current)==null?void 0:xe.id)===ie&&f(ze),ze}catch(ge){throw console.error("Error updating flow:",ge),ge}},Y=async ie=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const ue=await fetch(`${A}/wa-flows/${ie}?projectId=${encodeURIComponent(r.id)}`,{method:"DELETE",headers:P()});if(!ue.ok){const xe=await ue.json();throw new Error(xe.error||"Failed to delete flow")}a(xe=>xe.filter(ge=>ge.id!==ie)),(d==null?void 0:d.id)===ie&&f(null)}catch(ue){throw console.error("Error deleting flow:",ue),ue}},z=async(ie,ue)=>{if(!t||!n||!(r!=null&&r.id))throw new Error("Unauthorized or no project selected");try{const xe=await fetch(`${A}/wa-flows/${ie}/clone`,{method:"POST",headers:P(),body:JSON.stringify({newName:ue,sourceProjectId:r.id,targetProjectId:r.id})});if(!xe.ok){const Ve=await xe.json();throw new Error(Ve.error||"Failed to clone flow")}const ge=await xe.json(),Ae=qi(ge.flow);return a(Ve=>[Ae,...Ve]),Ae}catch(xe){throw console.error("Error cloning flow:",xe),xe}},H=S.useCallback(async()=>{if(!(!t||!n))try{const ie=await fetch(`${A}/wa-flow-templates`,{method:"GET",headers:P()});if(!ie.ok){const ge=await ie.json();throw new Error(ge.error||"Failed to fetch templates")}const xe=((await ie.json()).templates||[]).map(VX);u(xe)}catch(ie){console.error("Error fetching templates:",ie)}},[t,n,A,P]),M=ie=>{var ue,xe;f(ie),h(((xe=(ue=ie==null?void 0:ie.flow_json)==null?void 0:ue.screens)==null?void 0:xe[0])||null),x(null),b(null),N(null)},U=ie=>{h(ie),x(null),b(null)},F=ie=>{if(!d)return;const ue={...d.flow_json,screens:[...d.flow_json.screens,ie]};f({...d,flow_json:ue}),le()},D=(ie,ue)=>{if(!d)return;const xe=d.flow_json.screens.map(Ae=>Ae.id===ie?{...Ae,...ue}:Ae),ge={...d.flow_json,screens:xe};f({...d,flow_json:ge}),(m==null?void 0:m.id)===ie&&h({...m,...ue}),le()},W=ie=>{if(!d)return;const ue=d.flow_json.screens.filter(ge=>ge.id!==ie),xe={...d.flow_json,screens:ue};f({...d,flow_json:xe}),(m==null?void 0:m.id)===ie&&h(ue[0]||null),le()},X=ie=>{if(!d)return;const ue={...d.flow_json,screens:ie};f({...d,flow_json:ue}),le()},Z=(ie,ue)=>{x(ie),b(ue)},G=ie=>{if(!d||!m)return;const ue=[...m.layout.children,ie],xe={...m,layout:{...m.layout,children:ue}},ge=fg(xe);D(m.id,ge)},J=(ie,ue)=>{if(!d||!m)return;const xe=m.layout.children.map((Ve,ze)=>ze===ie?{...Ve,...ue}:Ve),ge={...m,layout:{...m.layout,children:xe}},Ae=fg(ge);D(m.id,Ae),v===ie&&x({...g,...ue})},ne=ie=>{if(!d||!m)return;const ue=m.layout.children.filter((Ae,Ve)=>Ve!==ie),xe={...m,layout:{...m.layout,children:ue}},ge=fg(xe);D(m.id,ge),v===ie&&(x(null),b(null))},te=ie=>{if(!d||!m)return;const ue={...m,layout:{...m.layout,children:ie}};D(m.id,ue)},se=()=>{if(!d)return{valid:!1,errors:[{message:"No flow selected",type:"error"}],warnings:[]};const ie=AX(d.flow_json);return N(ie),ie},le=()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{de()},2e3)},de=async()=>{const ie=R.current;if(ie)try{await V(ie.id,{flow_json:ie.flow_json,name:ie.name})}catch(ue){console.error("Auto-save failed:",ue)}};S.useEffect(()=>{t&&n&&(r!=null&&r.id)?($(),H()):(a([]),u([]))},[t,n,r,$,H]),S.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]);const fe={flows:s,templates:l,currentFlow:d,selectedScreen:m,selectedComponent:g,selectedComponentIndex:v,loading:w,error:T,validationResult:E,fetchFlows:$,getFlowById:L,createFlow:B,createFlowFromTemplate:K,updateFlow:V,deleteFlow:Y,cloneFlow:z,fetchTemplates:H,setCurrentFlow:M,selectScreen:U,addScreen:F,updateScreen:D,deleteScreen:W,reorderScreens:X,selectComponent:Z,addComponent:G,updateComponent:J,deleteComponent:ne,reorderComponents:te,validateCurrentFlow:se,saveCurrentFlow:de};return o.jsx(wN.Provider,{value:fe,children:e})}function Ba(){const e=S.useContext(wN);if(e===void 0)throw new Error("useWhatsAppFlows must be used within a WhatsAppFlowProvider");return e}function HX(){const e=Rt(),{selectedProject:t}=qt(),{flows:n,templates:r,loading:s,error:a,createFlow:l,createFlowFromTemplate:u,deleteFlow:d,cloneFlow:f,fetchFlows:m}=Ba(),[h,g]=S.useState(""),[x,v]=S.useState("all"),[b,w]=S.useState(!1),[j,T]=S.useState(!1),[k,E]=S.useState(null);S.useEffect(()=>{m()},[m]);const N=n.filter(B=>{const K=B.name.toLowerCase().includes(h.toLowerCase()),V=x==="all"||B.status===x;return K&&V}),_=async()=>{try{const B=await l("New Flow","OTHER","Description");e(`/kabar-in/whatsapp-flows/${B.id}`)}catch(B){console.error("Failed to create flow:",B)}},R=async(B,K)=>{try{const V=await u(B,`${K} - Copy`);w(!1),e(`/kabar-in/whatsapp-flows/${V.id}`)}catch(V){console.error("Failed to create flow from template:",V)}},A=async B=>{try{const K=await f(B.id,`${B.name} - Copy`);e(`/kabar-in/whatsapp-flows/${K.id}`)}catch(K){console.error("Failed to clone flow:",K)}},P=async()=>{if(k)try{await d(k.id),T(!1),E(null)}catch(B){console.error("Failed to delete flow:",B)}},$=B=>{switch(B){case"published":return"bg-green-100 text-green-800";case"deprecated":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}},L=B=>B.replace(/_/g," ");return o.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"WhatsApp Flows"}),o.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(en,{size:20}),"Create Flow"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",placeholder:"Search flows...",value:h,onChange:B=>g(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("select",{value:x,onChange:B=>v(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"draft",children:"Draft"}),o.jsx("option",{value:"published",children:"Published"}),o.jsx("option",{value:"deprecated",children:"Deprecated"})]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-6",children:s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-gray-500",children:"Loading flows..."})}):a?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-red-500",children:a})}):N.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[o.jsx(n4,{size:48,className:"mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"No flows yet"}),o.jsx("p",{className:"text-sm mb-4",children:"Create your first WhatsApp Flow to get started"}),o.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Flow"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(B=>o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-lg transition-shadow cursor-pointer",children:[o.jsxs("div",{onClick:()=>e(`/kabar-in/whatsapp-flows/${B.id}`),className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:B.name}),o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${$(B.status)}`,children:B.status})]}),B.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:B.description}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:L(B.category)}),o.jsxs("span",{className:"text-xs text-gray-500",children:[B.flow_json.screens.length," screen",B.flow_json.screens.length!==1?"s":""]})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Updated ",new Date(B.updated_at).toLocaleDateString()]})]}),o.jsxs("div",{className:"border-t border-gray-200 px-6 py-3 flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:K=>{K.stopPropagation(),e(`/kabar-in/whatsapp-flows/${B.id}`)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:o.jsx(Uf,{size:16})}),o.jsx("button",{onClick:K=>{K.stopPropagation(),A(B)},className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Clone",children:o.jsx(cf,{size:16})}),o.jsx("button",{onClick:K=>{K.stopPropagation(),E(B),T(!0)},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:o.jsx(Ht,{size:16})})]})]},B.id))})}),b&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Flow"}),o.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),o.jsx("div",{className:"p-6 overflow-auto max-h-[calc(80vh-140px)]",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("div",{onClick:_,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-colors",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx(en,{size:48,className:"text-gray-400 mb-3"}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Blank Flow"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Start from scratch"})]})}),r.map(B=>o.jsxs("div",{onClick:()=>R(B.id,B.name),className:"border border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-md cursor-pointer transition-all",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:B.name}),B.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-3",children:B.description}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:L(B.category)}),o.jsxs("span",{className:"text-xs text-gray-500",children:[B.flow_json.screens.length," screens"]})]})]},B.id))]})}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:o.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"})})]})}),j&&k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Delete Flow"})}),o.jsx("div",{className:"p-6",children:o.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",o.jsx("strong",{children:k.name}),"? This action cannot be undone."]})}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>{T(!1),E(null)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{onClick:P,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function GX(){const{currentFlow:e,selectedScreen:t,selectScreen:n,addScreen:r,deleteScreen:s,reorderScreens:a}=Ba(),[l,u]=S.useState(null),[d,f]=S.useState(null),m=S.useRef(null);if(!e)return null;const h=e.flow_json.screens,g=()=>{const E=h.map(R=>R.id),N=$X(E,"SCREEN"),_=zX(N);r(_)},x=E=>{if(h.length<=1){alert("Cannot delete the last screen");return}confirm("Delete this screen?")&&s(E)},v=(E,N)=>{m.current=N,u(N),E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",String(N))},b=(E,N)=>{E.preventDefault(),E.dataTransfer.dropEffect="move",m.current!==null&&m.current!==N&&f(N)},w=()=>{f(null)},j=(E,N)=>{E.preventDefault();const _=m.current;if(_===null||_===N){k();return}const R=[...h],[A]=R.splice(_,1);R.splice(N,0,A),a(R),k()},T=()=>{k()},k=()=>{u(null),f(null),m.current=null};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"font-semibold text-gray-900",children:"Screens"}),o.jsx("button",{onClick:g,className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Add Screen",children:o.jsx(en,{size:20})})]}),o.jsx("div",{className:"space-y-1",children:h.map((E,N)=>o.jsx("div",{draggable:!0,onDragStart:_=>v(_,N),onDragOver:_=>b(_,N),onDragLeave:w,onDrop:_=>j(_,N),onDragEnd:T,onClick:()=>n(E),className:`p-3 rounded-lg border cursor-pointer transition-all ${(t==null?void 0:t.id)===E.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${l===N?"opacity-40":""} ${d===N?"border-t-2 border-t-blue-500":""}`,children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[o.jsx("div",{className:"mt-0.5 cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",onMouseDown:_=>_.stopPropagation(),children:o.jsx(gy,{size:14})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm text-gray-900",children:E.id}),E.title&&o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:E.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[E.terminal&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded",children:"Terminal"}),N===0&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Start"})]})]})]}),h.length>1&&o.jsx("button",{onClick:_=>{_.stopPropagation(),x(E.id)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:o.jsx(Ht,{size:14})})]})},E.id))})]})}function qX(){const{selectedScreen:e,selectedComponentIndex:t,selectComponent:n,deleteComponent:r}=Ba();return e?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e.id}),e.title&&o.jsx("p",{className:"text-gray-600",children:e.title})]}),o.jsx("div",{className:"space-y-3",children:e.layout.children.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("p",{className:"mb-4",children:"No components yet"}),o.jsx("p",{className:"text-sm",children:"Add components from the properties panel"})]}):e.layout.children.map((s,a)=>o.jsx("div",{onClick:()=>n(s,a),className:`p-4 rounded-lg border cursor-pointer transition-all ${t===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(gy,{size:20,className:"text-gray-400 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded",children:E0(s.type)})}),o.jsxs("div",{className:"text-sm text-gray-700",children:[s.type.startsWith("Text")&&"text"in s&&o.jsx("div",{className:"line-clamp-2",children:s.text}),"label"in s&&o.jsx("div",{className:"line-clamp-1",children:s.label}),"name"in s&&o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Field: ",s.name]})]})]}),o.jsx("button",{onClick:l=>{l.stopPropagation(),confirm("Delete this component?")&&r(a)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:o.jsx(Ht,{size:16})})]})},a))})]})}):o.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:o.jsx("p",{children:"Select a screen to edit"})})}const KX=[{name:"text",label:"Text Components",components:["TextHeading","TextSubheading","TextBody","TextCaption"]},{name:"input",label:"Input Components",components:["TextInput","TextArea","RadioButtonsGroup","CheckboxGroup","Dropdown","DatePicker","CalendarPicker"]},{name:"interactive",label:"Interactive Components",components:["Footer","OptIn","EmbeddedLink","Image","ImageCarousel","ChipsSelector","NavigationList","PhotoPicker"]},{name:"logic",label:"Logic Components",components:["If","Switch"]}];function XX(){const{currentFlow:e,selectedScreen:t,selectedComponent:n,selectedComponentIndex:r,updateScreen:s,updateComponent:a,addComponent:l}=Ba(),[u,d]=S.useState(!1);if(!t)return o.jsx("div",{className:"p-4",children:o.jsx("p",{className:"text-gray-500 text-sm",children:"Select a screen to view properties"})});const f=E=>{let N=BX(E);if("name"in N){const _=bN(t),R=E.toLowerCase().replace(/group|component/gi,""),A=LX(_,R);N={...N,name:A}}l(N),d(!1)},m=(e==null?void 0:e.flow_json.screens.map(E=>E.id))||[],h=()=>{if(n&&"on-click-action"in n)return n["on-click-action"]},g=()=>{if(n&&"on-select-action"in n)return n["on-select-action"]},x=E=>{if(r===null)return;let N;E==="navigate"?N={name:"navigate",next:{type:"screen",name:m.filter(R=>R!==t.id)[0]||""},payload:{}}:E==="complete"?N={name:"complete",payload:{}}:N={name:"data_exchange",payload:{}},a(r,{"on-click-action":N})},v=E=>{if(r===null)return;const N=h();if(!N||N.name!=="navigate")return;const _={...N,next:{type:"screen",name:E}};a(r,{"on-click-action":_})},b=E=>{if(r===null)return;if(E==="none"){const{"on-select-action":_,...R}=n;a(r,{"on-select-action":void 0});return}let N;E==="data_exchange"?N={name:"data_exchange",payload:{}}:N={name:"update_data",payload:{}},a(r,{"on-select-action":N})},w=(E,N,_)=>{if(r===null||!n)return;const R=_==="on-click-action"?h():g();if(!R)return;const A={...R.payload||{},[E]:N},P={...R,payload:A};a(r,{[_]:P})},j=(E,N)=>{if(r===null||!n)return;const _=N==="on-click-action"?h():g();if(!_)return;const R={..._.payload||{}};delete R[E];const A={..._,payload:R};a(r,{[N]:A})},T=(n==null?void 0:n.type)==="Footer",k=n&&(n.type==="RadioButtonsGroup"||n.type==="CheckboxGroup"||n.type==="Dropdown"||n.type==="DatePicker"||n.type==="CalendarPicker");return o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Properties"}),o.jsxs("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-center gap-2 px-4 py-2 mb-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(en,{size:16}),"Add Component"]}),u&&o.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg max-h-96 overflow-auto",children:KX.map(E=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase mb-2",children:E.label}),o.jsx("div",{className:"space-y-1",children:E.components.map(N=>o.jsxs("button",{onClick:()=>f(N),className:"w-full text-left px-3 py-2 text-sm hover:bg-white rounded transition-colors",children:[o.jsx("div",{className:"font-medium text-gray-900",children:E0(N)}),o.jsx("div",{className:"text-xs text-gray-600",children:WX(N)})]},N))})]},E.name))}),!n&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Screen ID"}),o.jsx("input",{type:"text",value:t.id,onChange:E=>s(t.id,{id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:t.title||"",onChange:E=>s(t.id,{title:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"terminal",checked:t.terminal||!1,onChange:E=>s(t.id,{terminal:E.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("label",{htmlFor:"terminal",className:"text-sm text-gray-700",children:"Terminal Screen"})]}),t.terminal&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"success",checked:t.success||!1,onChange:E=>s(t.id,{success:E.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("label",{htmlFor:"success",className:"text-sm text-gray-700",children:"Success"})]})]}),n&&r!==null&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:E0(n.type)}),n.type.startsWith("Text")&&"text"in n&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text"}),o.jsx("textarea",{value:n.text,onChange:E=>a(r,{text:E.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"label"in n&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),o.jsx("input",{type:"text",value:n.label,onChange:E=>a(r,{label:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"name"in n&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Name"}),o.jsx("input",{type:"text",value:n.name,onChange:E=>a(r,{name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"required"in n&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"required",checked:n.required||!1,onChange:E=>a(r,{required:E.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("label",{htmlFor:"required",className:"text-sm text-gray-700",children:"Required"})]}),T&&o.jsx(YX,{action:h(),actionProp:"on-click-action",label:"On Click Action",actionTypes:["navigate","complete","data_exchange"],allScreenIds:m,currentScreenId:t.id,onActionTypeChange:x,onNextScreenChange:v,onPayloadChange:w,onPayloadRemove:j}),k&&o.jsx(JX,{action:g(),onActionChange:b,onPayloadChange:w,onPayloadRemove:j})]})]})}function YX({action:e,actionProp:t,label:n,actionTypes:r,allScreenIds:s,currentScreenId:a,onActionTypeChange:l,onNextScreenChange:u,onPayloadChange:d,onPayloadRemove:f}){const[m,h]=S.useState(""),g=(e==null?void 0:e.name)||"navigate",x=s.filter(v=>v!==a);return o.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase",children:n}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),o.jsx("select",{value:g,onChange:v=>l(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:r.map(v=>o.jsx("option",{value:v,children:v==="navigate"?"Navigate to Screen":v==="complete"?"Complete Flow":"Data Exchange (Server)"},v))})]}),g==="navigate"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Screen"}),x.length>0?o.jsx("select",{value:e&&"next"in e?e.next.name:"",onChange:v=>u(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:x.map(v=>o.jsx("option",{value:v,children:v},v))}):o.jsx("p",{className:"text-xs text-gray-500",children:"No other screens available. Add more screens first."})]}),o.jsx(SN,{payload:e==null?void 0:e.payload,actionProp:t,newPayloadKey:m,setNewPayloadKey:h,onPayloadChange:d,onPayloadRemove:f})]})}function JX({action:e,onActionChange:t,onPayloadChange:n,onPayloadRemove:r}){const[s,a]=S.useState(""),l=(e==null?void 0:e.name)||"none";return o.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 uppercase",children:"On-Select Action"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),o.jsxs("select",{value:l,onChange:u=>t(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[o.jsx("option",{value:"none",children:"None"}),o.jsx("option",{value:"data_exchange",children:"Data Exchange (Server)"}),o.jsx("option",{value:"update_data",children:"Update Data"})]})]}),e&&o.jsx(SN,{payload:e.payload,actionProp:"on-select-action",newPayloadKey:s,setNewPayloadKey:a,onPayloadChange:n,onPayloadRemove:r})]})}function SN({payload:e,actionProp:t,newPayloadKey:n,setNewPayloadKey:r,onPayloadChange:s,onPayloadRemove:a}){const l=Object.entries(e||{}),u=()=>{const d=n.trim();d&&(s(d,"",t),r(""))};return o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payload"}),o.jsxs("div",{className:"space-y-2",children:[l.map(([d,f])=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-mono text-gray-600 w-24 truncate",title:d,children:d}),o.jsx("input",{type:"text",value:typeof f=="string"?f:JSON.stringify(f),onChange:m=>s(d,m.target.value,t),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),o.jsx("button",{onClick:()=>a(d,t),className:"p-1 text-gray-400 hover:text-red-600",children:o.jsx(Ht,{size:12})})]},d)),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:n,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),placeholder:"New key...",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"}),o.jsx("button",{onClick:u,disabled:!n.trim(),className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50",children:"Add"})]})]})]})}function QX({onClose:e}){const{currentFlow:t}=Ba(),[n,r]=S.useState(0),[s,a]=S.useState({});if(!t||t.flow_json.screens.length===0)return null;const l=t.flow_json.screens[n],u=()=>{r(0),a({})},d=(f,m)=>{var h;switch(f.type){case"TextHeading":return o.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:f.text},m);case"TextSubheading":return o.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-2",children:f.text},m);case"TextBody":return o.jsx("div",{className:"text-gray-700 mb-3",children:f.text},m);case"TextCaption":return o.jsx("div",{className:"text-sm text-gray-600 mb-2",children:f.text},m);case"TextInput":return o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f.label,f.required&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsx("input",{type:f["input-type"]||"text",value:s[f.name]||"",onChange:g=>a({...s,[f.name]:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:f["helper-text"]||""})]},m);case"RadioButtonsGroup":return o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[f.label,f.required&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsx("div",{className:"space-y-2",children:(h=f["data-source"])==null?void 0:h.map(g=>o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:f.name,value:g.id,checked:s[f.name]===g.id,onChange:x=>a({...s,[f.name]:x.target.value}),className:"text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-gray-700",children:g.title})]},g.id))})]},m);case"Footer":return o.jsx("button",{onClick:()=>{var x,v;const g=(x=f["on-click-action"])==null?void 0:x.name;if(g==="navigate"){const b=(v=f["on-click-action"].next)==null?void 0:v.name,w=t.flow_json.screens.findIndex(j=>j.id===b);w!==-1&&r(w)}else g==="complete"?alert("Flow completed! Data: "+JSON.stringify(s,null,2)):g==="data_exchange"&&alert(`Data Exchange: Server would process this request.
Payload: `+JSON.stringify({...s,...f["on-click-action"].payload||{}},null,2))},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:f.label},m);default:return o.jsxs("div",{className:"text-sm text-gray-500 italic mb-2",children:[f.type," (preview not available)"]},m)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-100 rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-[#25D366] text-white px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:e,className:"text-white hover:bg-white/20 rounded p-1",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:t.name}),o.jsx("div",{className:"text-xs opacity-90",children:"WhatsApp Flow"})]})]}),o.jsx("div",{className:"text-xs",children:"14:30"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#ECE5DD]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-4 max-w-sm",children:[l.layout.children.map((f,m)=>d(f,m)),o.jsx("div",{className:"text-xs text-gray-400 text-right mt-2",children:"14:30"})]})}),o.jsxs("div",{className:"bg-white border-t border-gray-200 px-4 py-3 flex items-center justify-between",children:[o.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[o.jsx(Hf,{size:16}),"Restart"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Screen ",n+1," of ",t.flow_json.screens.length]}),o.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition-colors",children:[o.jsx(Nn,{size:16}),"Close"]})]})]})})}function ZX(){const{flowId:e}=ly(),t=Rt(),{currentFlow:n,loading:r,error:s,validationResult:a,getFlowById:l,setCurrentFlow:u,validateCurrentFlow:d,saveCurrentFlow:f}=Ba(),[m,h]=S.useState(!1),[g,x]=S.useState(null);S.useEffect(()=>{e&&v()},[e]);const v=async()=>{if(!e)return;const k=await l(e);k&&u(k)},b=async()=>{x("saving");try{await f(),x("saved"),setTimeout(()=>x(null),2e3)}catch{x("error"),setTimeout(()=>x(null),3e3)}},w=()=>{const k=d();k.valid?alert("Flow is valid! "):(alert(`Flow has ${k.errors.length} error(s). Check the console for details.`),console.log("Validation errors:",k.errors))},j=()=>{n&&FX(n)},T=async()=>{const k=document.createElement("input");k.type="file",k.accept=".json",k.onchange=async E=>{var _;const N=(_=E.target.files)==null?void 0:_[0];if(N)try{const R=await OX(N);n&&(u({...n,flow_json:R}),alert("Flow JSON imported successfully!"))}catch{alert("Failed to import Flow JSON. Please check the file format.")}},k.click()};return r?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"text-gray-500",children:"Loading flow..."})}):s||!n?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"text-red-500",children:s||"Flow not found"})}):o.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t("/kabar-in/whatsapp-flows"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded transition-colors",children:o.jsx(ho,{size:20})}),o.jsx("input",{type:"text",value:n.name,onChange:k=>u({...n,name:k.target.value}),className:"text-xl font-bold text-gray-900 border-none focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[g&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded text-sm",children:[g==="saving"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),o.jsx("span",{className:"text-gray-600",children:"Saving..."})]}),g==="saved"&&o.jsxs(o.Fragment,{children:[o.jsx(rc,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-green-600",children:"Saved"})]}),g==="error"&&o.jsxs(o.Fragment,{children:[o.jsx($g,{size:16,className:"text-red-600"}),o.jsx("span",{className:"text-red-600",children:"Save failed"})]})]}),a&&!a.valid&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-50 rounded text-sm text-red-600",children:[o.jsx($g,{size:16}),o.jsxs("span",{children:[a.errors.length," error(s)"]})]}),o.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Uj,{size:16}),"Save"]}),o.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(rc,{size:16}),"Validate"]}),o.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(Vf,{size:16}),"Preview"]}),o.jsxs("div",{className:"relative group",children:[o.jsx("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Export/Import"}),o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[o.jsxs("button",{onClick:j,className:"w-full flex items-center gap-2 px-4 py-2 text-left text-gray-700 hover:bg-gray-50",children:[o.jsx(Oj,{size:16}),"Export JSON"]}),o.jsxs("button",{onClick:T,className:"w-full flex items-center gap-2 px-4 py-2 text-left text-gray-700 hover:bg-gray-50",children:[o.jsx(Gj,{size:16}),"Import JSON"]})]})]})]})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx("div",{className:"w-64 bg-white border-r border-gray-200 overflow-auto",children:o.jsx(GX,{})}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsx(qX,{})}),o.jsx("div",{className:"w-80 bg-white border-l border-gray-200 overflow-auto",children:o.jsx(XX,{})})]}),m&&o.jsx(QX,{onClose:()=>h(!1)})]})}function eY(){return o.jsx(jy,{icon:oc,title:"Message Center",description:"Send, track, and manage all your WhatsApp messages in one centralized platform. Monitor delivery status and engage with your guests in real-time.",color:"#ec4899",features:["Send bulk messages with templates","Real-time delivery tracking","Message scheduling and automation","Conversation history","Quick reply templates","Message queue management","Failed message retry system"]})}function tY(){return o.jsx(jy,{icon:qf,title:"Analytics Dashboard",description:"Get deep insights into your WhatsApp campaigns with comprehensive analytics, visualizations, and performance metrics.",color:"#6366f1",features:["Message delivery and open rates","Campaign performance comparison","Guest engagement metrics","Response rate analytics","Time-based trend analysis","Export reports to PDF/Excel","Real-time statistics dashboard"]})}function nY(){return o.jsx(jy,{icon:Ac,title:"Settings & Configuration",description:"Configure your WhatsApp Business API, manage project settings, user permissions, and customize your CRM experience.",color:"#64748b",features:["WhatsApp Business API integration","Project-specific settings","User role management","Notification preferences","Webhook configuration","API access tokens","Billing and subscription management"]})}function rY(){return o.jsx(UF,{children:o.jsxs(kj,{children:[o.jsx(ht,{index:!0,element:o.jsx(qF,{})}),o.jsx(ht,{path:"templates",element:o.jsx(_O,{})}),o.jsx(ht,{path:"guests",element:o.jsx(MO,{})}),o.jsx(ht,{path:"chatflow",element:o.jsx(jS,{})}),o.jsx(ht,{path:"chatflow/:id",element:o.jsx(jS,{})}),o.jsx(ht,{path:"whatsapp-flows",element:o.jsx(HX,{})}),o.jsx(ht,{path:"whatsapp-flows/:flowId",element:o.jsx(ZX,{})}),o.jsx(ht,{path:"operation",element:o.jsx(bX,{})}),o.jsx(ht,{path:"operation/:campaignId",element:o.jsx(RX,{})}),o.jsx(ht,{path:"messages",element:o.jsx(eY,{})}),o.jsx(ht,{path:"analytics",element:o.jsx(tY,{})}),o.jsx(ht,{path:"settings",element:o.jsx(nY,{})}),o.jsx(ht,{path:"*",element:o.jsx(Sj,{to:"/kabar-in",replace:!0})})]})})}function sY(){const e=Rt();return o.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-4xl",children:[o.jsxs("button",{onClick:()=>e("/dashboard"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Back to Dashboard"]}),o.jsxs("div",{className:"rounded-3xl p-12 backdrop-blur-xl text-center",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[o.jsx(ma,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#1a1a1a"}}),o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2.5rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"1rem"},children:"check.in"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.6,maxWidth:"600px",margin:"0 auto"},children:"Lightning-fast QR-based guest check-in system that makes event entry seamless and efficient."}),o.jsx("div",{className:"mt-8 inline-block px-6 py-3 rounded-full",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Coming Soon"})]})]})})}function oY(){const e=Rt();return o.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-4xl",children:[o.jsxs("button",{onClick:()=>e("/dashboard"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Back to Dashboard"]}),o.jsxs("div",{className:"rounded-3xl p-12 backdrop-blur-xl text-center",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[o.jsx(hy,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#1a1a1a"}}),o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2.5rem, 4vw, 3.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"1rem"},children:"monitor.in"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.6,maxWidth:"600px",margin:"0 auto"},children:"Real-time guest analytics and monitoring dashboard to keep track of your event metrics at a glance."}),o.jsx("div",{className:"mt-8 inline-block px-6 py-3 rounded-full",style:{background:"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff"},children:"Coming Soon"})]})]})})}const iY=[{role:"admin",icon:o.jsx(by,{className:"w-8 h-8"}),title:"Admin",description:"Full access to all features",access:["kabar.in","check.in","monitor.in"],color:"#8b5cf6"},{role:"staff",icon:o.jsx(ln,{className:"w-8 h-8"}),title:"Staff",description:"Access to check-in and monitoring",access:["check.in","monitor.in"],color:"#3b82f6"},{role:"user",icon:o.jsx(no,{className:"w-8 h-8"}),title:"User",description:"Monitoring access only",access:["monitor.in"],color:"#10b981"}];function aY(){const e=Rt(),{signUp:t,signIn:n}=Gt(),[r,s]=S.useState(null),[a,l]=S.useState(""),u=async d=>{l(""),s(d);try{const f=Date.now(),m=`demo-${d}@balemoo.com`,h="demo12345",g=`Demo ${d.charAt(0).toUpperCase()+d.slice(1)}`;await t(m,h,g,d),e("/projects")}catch(f){if(f.message.includes("already")||f.message.includes("exist")||f.message.includes("User"))try{const m=`demo-${d}@balemoo.com`;await n(m,"demo12345"),e("/projects")}catch{l(`Demo ${d} account exists but sign in failed. Try manual login.`)}else l(f.message||"Failed to create demo account")}finally{s(null)}};return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:o.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.25,.1,.25,1]},className:"w-full max-w-5xl",children:[o.jsxs("button",{onClick:()=>e("/login"),className:"mb-8 flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:d=>{d.currentTarget.style.background="rgba(0, 0, 0, 0.06)"},onMouseLeave:d=>{d.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Back to Login"]}),o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"clamp(2rem, 3vw, 2.5rem)",fontWeight:600,letterSpacing:"-0.02em",color:"#1a1a1a",marginBottom:"0.5rem"},children:"Quick Demo Access"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:400,color:"#6b6b6b"},children:"Create a demo account with different role permissions"})]}),a&&o.jsx(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-6 p-4 rounded-xl text-center",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#dc2626"},children:a})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:iY.map((d,f)=>o.jsxs(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2+f*.1,ease:[.25,.1,.25,1]},className:"rounded-3xl p-8 backdrop-blur-xl",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)"},children:[o.jsx("div",{className:"mb-4",style:{color:d.color},children:d.icon}),o.jsx("h3",{className:"mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.01em",color:"#1a1a1a"},children:d.title}),o.jsx("p",{className:"mb-4",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:400,color:"#6b6b6b",lineHeight:1.5},children:d.description}),o.jsx("div",{className:"mb-6 space-y-2",children:d.access.map(m=>o.jsxs("div",{className:"px-3 py-1 rounded-lg text-sm",style:{background:"rgba(0, 0, 0, 0.03)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:"#2d2d2d"},children:[" ",m]},m))}),o.jsx("button",{onClick:()=>u(d.role),disabled:r!==null,className:"w-full px-6 py-3 rounded-full transition-all duration-700",style:{background:r===d.role?"rgba(0, 0, 0, 0.4)":"rgba(0, 0, 0, 0.85)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none",cursor:r!==null?"not-allowed":"pointer",transform:"scale(1)"},onMouseEnter:m=>{r===null&&(m.currentTarget.style.transform="scale(1.03)",m.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.15)")},onMouseLeave:m=>{m.currentTarget.style.transform="scale(1)",m.currentTarget.style.boxShadow="none"},children:r===d.role?"Creating...":`Try as ${d.title}`}),o.jsxs("p",{className:"mt-3 text-center",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",color:"#9ca3af"},children:["demo-",d.role,"@balemoo.com"]})]},d.role))}),o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.6},className:"mt-8 text-center",children:o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:"#6b6b6b"},children:["All demo accounts use password: ",o.jsx("strong",{children:"demo12345"})]})})]})})}function lY({onClose:e}){const{user:t}=Gt(),{createProject:n}=qt(),r=Rt(),[s,a]=S.useState(!1),[l,u]=S.useState(null),[d,f]=S.useState(""),[m,h]=S.useState(""),[g,x]=S.useState(""),[v,b]=S.useState([{id:crypto.randomUUID(),name:"",date:"",time:""}]),w=[{id:1,title:"1 Project + 1 Agenda",description:"Simple event with single agenda",icon:"",data:{name:"Tech Meetup 2026",startDate:"2026-02-15",endDate:"2026-02-15",agendas:[{id:crypto.randomUUID(),name:"Networking Session",date:"2026-02-15",time:"18:00"}]}},{id:2,title:"1 Project + 2 Agendas",description:"Event with multiple sessions",icon:"",data:{name:"Workshop Series",startDate:"2026-03-10",endDate:"2026-03-11",agendas:[{id:crypto.randomUUID(),name:"Morning Workshop",date:"2026-03-10",time:"09:00"},{id:crypto.randomUUID(),name:"Afternoon Session",date:"2026-03-11",time:"14:00"}]}}],j=_=>{const R=w.find(A=>A.id===_);R&&(u(_),f(R.data.name),h(R.data.startDate),x(R.data.endDate),b(R.data.agendas))},T=()=>{b([...v,{id:crypto.randomUUID(),name:"",date:"",time:""}])},k=_=>{v.length>1&&b(v.filter(R=>R.id!==_))},E=(_,R,A)=>{b(v.map(P=>P.id===_?{...P,[R]:A}:P))},N=async _=>{if(_.preventDefault(),!d.trim()){be.error("Please enter a project name");return}if(!m||!g){be.error("Please select start and end dates");return}if(new Date(m)>new Date(g)){be.error("Start date must be before end date");return}const R=v.filter(A=>A.name.trim()&&A.date);if(R.length===0){be.error("Please add at least one agenda with name and date");return}a(!0);try{await n({name:d.trim(),startDate:m,endDate:g,agendas:R.map(A=>({id:A.id,name:A.name.trim(),date:A.date,time:A.time||"00:00"})),assignedUsers:[(t==null?void 0:t.id)||""],createdBy:(t==null?void 0:t.id)||""}),be.success(" Project created successfully!"),a(!1),e()}catch(A){console.error("Error creating project:",A),be.error(A.message||"Failed to create project"),a(!1)}};return o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},onClick:e,children:o.jsxs(ce.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{duration:.3},className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-3xl p-8",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},onClick:_=>_.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,color:"#1a1a1a"},children:"Create New Project"}),o.jsx("button",{onClick:e,className:"p-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.05)"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:o.jsx(Nn,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:N,className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:w.map(_=>o.jsxs(ce.button,{type:"button",onClick:()=>j(_.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-6 rounded-2xl text-left transition-all duration-300",style:{background:l===_.id?"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)":"rgba(139, 92, 246, 0.05)",border:l===_.id?"2px solid #8b5cf6":"2px solid rgba(139, 92, 246, 0.1)",color:l===_.id?"#ffffff":"#1a1a1a"},children:[o.jsx("div",{className:"text-3xl mb-3",children:_.icon}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.125rem",fontWeight:600,marginBottom:"0.5rem",color:l===_.id?"#ffffff":"#1a1a1a"},children:_.title}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:l===_.id?"rgba(255,255,255,0.8)":"#6b7280"},children:_.description})]},_.id))}),o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Project Name *"}),o.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"e.g., Wedding Reception 2026",className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:_=>{_.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",_.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:_=>{_.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",_.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Start Date *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Zo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"#9ca3af"}}),o.jsx("input",{type:"date",value:m,onChange:_=>h(_.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:_=>{_.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",_.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:_=>{_.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",_.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"End Date *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Zo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"#9ca3af"}}),o.jsx("input",{type:"date",value:g,onChange:_=>x(_.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none"},onFocus:_=>{_.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)",_.currentTarget.style.background="rgba(139, 92, 246, 0.03)"},onBlur:_=>{_.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)",_.currentTarget.style.background="rgba(0, 0, 0, 0.02)"}})]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:"Event Agendas * (minimum 1)"}),o.jsxs("button",{type:"button",onClick:T,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontWeight:600,color:"#8b5cf6"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},children:[o.jsx(en,{className:"w-4 h-4"}),"Add Agenda"]})]}),o.jsx("div",{className:"space-y-3",children:v.map((_,R)=>o.jsx(ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.06)"},children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{type:"text",value:_.name,onChange:A=>E(_.id,"name",A.target.value),placeholder:"Agenda name",className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}}),o.jsx("input",{type:"date",value:_.date,onChange:A=>E(_.id,"date",A.target.value),className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}}),o.jsx("input",{type:"time",value:_.time,onChange:A=>E(_.id,"time",A.target.value),className:"px-3 py-2 rounded-lg transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",outline:"none"},onFocus:A=>{A.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:A=>{A.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}})]}),v.length>1&&o.jsx("button",{type:"button",onClick:()=>k(_.id),className:"p-2 rounded-lg transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},onMouseEnter:A=>{A.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},onMouseLeave:A=>{A.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:o.jsx(Ht,{className:"w-4 h-4"})})]})},_.id))})]}),o.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[o.jsxs("button",{type:"button",onClick:()=>{e(),r("/projects")},className:"flex-1 px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(0, 0, 0, 0.04)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#1a1a1a"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Back to Projects"]}),o.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 rounded-xl transition-all duration-300",style:{background:s?"rgba(139, 92, 246, 0.5)":"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)",boxShadow:s?"none":"0 4px 20px rgba(139, 92, 246, 0.3)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:"#ffffff",cursor:s?"not-allowed":"pointer"},children:s?"Creating...":"Create Project"})]})]})]})})}function cY({project:e,onClose:t}){const{user:n}=Gt(),{updateProject:r}=qt(),s=Rt(),[a,l]=S.useState(!1),[u,d]=S.useState(e.name),[f,m]=S.useState(e.startDate),[h,g]=S.useState(e.endDate),[x,v]=S.useState(e.agendas),b=()=>{v([...x,{id:crypto.randomUUID(),name:"",date:"",time:""}])},w=k=>{x.length>1&&v(x.filter(E=>E.id!==k))},j=(k,E,N)=>{v(x.map(_=>_.id===k?{..._,[E]:N}:_))},T=async k=>{if(k.preventDefault(),!u.trim()){be.error("Please enter a project name");return}if(!f||!h){be.error("Please select start and end dates");return}if(new Date(f)>new Date(h)){be.error("Start date must be before end date");return}const E=x.filter(N=>N.name.trim()&&N.date);if(E.length===0){be.error("Please add at least one agenda with name and date");return}l(!0);try{await r(e.id,{name:u.trim(),startDate:f,endDate:h,agendas:E.map(N=>({id:N.id,name:N.name.trim(),date:N.date,time:N.time||"00:00"}))}),be.success(" Project updated successfully!"),l(!1),t()}catch(N){console.error("Error updating project:",N),be.error(N.message||"Failed to update project"),l(!1)}};return o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},onClick:t,children:o.jsxs(ce.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},transition:{duration:.3},className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-3xl p-8",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2)"},onClick:k=>k.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsx("h2",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"2rem",fontWeight:600,color:"#1a1a1a"},children:"Edit Project"}),o.jsx("button",{onClick:t,className:"p-2 rounded-full transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.05)"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:o.jsx(Nn,{className:"w-6 h-6",style:{color:"#6b6b6b"}})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:"Project Name"}),o.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),placeholder:"Enter project name",className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:[o.jsx(Zo,{className:"w-4 h-4 inline mr-2"}),"Start Date"]}),o.jsx("input",{type:"date",value:f,onChange:k=>m(k.target.value),className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a",display:"block",marginBottom:"0.5rem"},children:[o.jsx(Zo,{className:"w-4 h-4 inline mr-2"}),"End Date"]}),o.jsx("input",{type:"date",value:h,onChange:k=>g(k.target.value),className:"w-full px-4 py-3 rounded-xl outline-none transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#1a1a1a"}})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("label",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},children:"Agendas"}),o.jsxs("button",{type:"button",onClick:b,className:"flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500},onMouseEnter:k=>{k.currentTarget.style.background="rgba(59, 130, 246, 0.2)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[o.jsx(en,{className:"w-4 h-4"}),"Add Agenda"]})]}),o.jsx("div",{className:"space-y-4",children:x.map((k,E)=>o.jsxs("div",{className:"p-4 rounded-xl",style:{background:"rgba(0, 0, 0, 0.02)",border:"1px solid rgba(0, 0, 0, 0.05)"},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsxs("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b"},children:["Agenda ",E+1]}),x.length>1&&o.jsx("button",{type:"button",onClick:()=>w(k.id),className:"ml-auto p-2 rounded-full transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)"},onMouseEnter:N=>{N.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:N=>{N.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:o.jsx(Ht,{className:"w-4 h-4",style:{color:"#ef4444"}})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",value:k.name,onChange:N=>j(k.id,"name",N.target.value),placeholder:"Agenda name",className:"w-full px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("input",{type:"date",value:k.date,onChange:N=>j(k.id,"date",N.target.value),className:"px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}}),o.jsx("input",{type:"time",value:k.time,onChange:N=>j(k.id,"time",N.target.value),className:"px-4 py-2 rounded-lg outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"}})]})]})]},k.id))})]}),o.jsxs("div",{className:"flex gap-4 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>{t(),s("/projects")},className:"flex-1 px-6 py-3 rounded-full transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(0, 0, 0, 0.05)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#6b6b6b"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:k=>{k.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Back to Projects"]}),o.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-6 py-3 rounded-full transition-all duration-300",style:{background:a?"rgba(59, 130, 246, 0.5)":"#3b82f6",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:500,color:"#ffffff"},onMouseEnter:k=>{a||(k.currentTarget.style.background="#2563eb")},onMouseLeave:k=>{a||(k.currentTarget.style.background="#3b82f6")},children:a?"Updating...":"Update Project"})]})]})]})})}function Ki(e){const t=JSON.parse(localStorage.getItem("balemoo_demo_user_ids")||"{}"),r={"demo-admin@balemoo.com":"admin","demo-staff@balemoo.com":"staff","staff-a@balemoo.com":"staff","staff-b@balemoo.com":"staff","demo-user@balemoo.com":"user","client-a@balemoo.com":"user"}[e];return r&&t[r]?t[r]:`user_${e.split("@")[0].replace(/[.-]/g,"_")}`}const uY=[{id:Ki("demo-admin@balemoo.com"),email:"demo-admin@balemoo.com",name:"Admin Balemoo",role:"admin"},{id:Ki("demo-staff@balemoo.com"),email:"demo-staff@balemoo.com",name:"Staff Balemoo",role:"staff"},{id:Ki("staff-a@balemoo.com"),email:"staff-a@balemoo.com",name:"Kadek Arya",role:"staff"},{id:Ki("staff-b@balemoo.com"),email:"staff-b@balemoo.com",name:"Made Sari",role:"staff"},{id:Ki("demo-user@balemoo.com"),email:"demo-user@balemoo.com",name:"User Balemoo",role:"user"},{id:Ki("client-a@balemoo.com"),email:"client-a@balemoo.com",name:"Wayan Santika",role:"user"}];function hg(e){return uY.find(t=>t.id===e)}function dY({projectName:e,team:t,project:n,onClose:r}){var d,f,m,h;const s=n||{name:e,team:t},a=(d=s.team)!=null&&d.manager?hg(s.team.manager):null,l=((m=(f=s.team)==null?void 0:f.staff)==null?void 0:m.map(g=>hg(g)).filter(Boolean))||[],u=(h=s.team)!=null&&h.client?hg(s.team.client):null;return o.jsx(io,{children:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)"}}),o.jsxs(ce.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.16,1,.3,1]},className:"relative w-full max-w-md rounded-3xl",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.15)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[o.jsx("div",{className:"px-6 py-5 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ln,{className:"w-6 h-6",style:{color:"#8b5cf6"}}),o.jsxs("div",{children:[o.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"#1a1a1a"},children:"Team Lineage"}),o.jsx("p",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:s.name})]})]}),o.jsx("button",{onClick:r,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:g=>{g.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:o.jsx(Nn,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})}),o.jsxs("div",{className:"px-6 py-5 space-y-5",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Aj,{className:"w-4 h-4",style:{color:"#8b5cf6"}}),o.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Event Manager"})]}),a?o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)"},children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)"},children:o.jsx(no,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:a.name}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:a.email})]})]}):o.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No manager assigned"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(ln,{className:"w-4 h-4",style:{color:"#3b82f6"}}),o.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Staff"})]}),l.length>0?o.jsx("div",{className:"space-y-2",children:l.map(g=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)"},children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},children:o.jsx(no,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:g==null?void 0:g.name}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:g==null?void 0:g.email})]})]},g==null?void 0:g.id))}):o.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No staff assigned"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(no,{className:"w-4 h-4",style:{color:"#10b981"}}),o.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Client"})]}),u?o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.1)"},children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:o.jsx(no,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:u.name}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:u.email})]})]}):o.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No client assigned"})]})]})]})]})})}function fY(){const{projects:e,setSelectedProject:t,isProjectAccessible:n,selectedProject:r,loading:s,deleteProject:a}=qt(),{user:l,signOut:u}=Gt(),d=Rt(),[f,m]=S.useState(""),[h,g]=S.useState(null),[x,v]=S.useState(null),[b,w]=S.useState(!1),[j,T]=S.useState(!1),[k,E]=S.useState(null),[N,_]=S.useState(!1),[R,A]=S.useState(null),[P,$]=S.useState(null);S.useEffect(()=>{!l&&!s&&d("/login")},[l,s,d]);const L=W=>{const X=new Date;X.setHours(0,0,0,0);const Z=new Date(W.startDate);Z.setHours(0,0,0,0);const G=new Date(W.endDate);return G.setHours(0,0,0,0),X>=Z&&X<=G?"Today":X<Z?"Upcoming":"Past"},B=W=>{n(W)?(t(W),d("/dashboard")):(g(W.id),setTimeout(()=>g(null),500))},K=async()=>{await u(),d("/")},V=(W,X)=>{W.stopPropagation(),E(X),T(!0)},Y=async(W,X)=>{if(W.stopPropagation(),!!window.confirm("Are you sure you want to delete this project? This action cannot be undone.")){$(X);try{await a(X),be.success("Project deleted successfully")}catch(G){console.error("Error deleting project:",G),be.error(G.message||"Failed to delete project")}finally{$(null)}}},z=e.filter(W=>W.name.toLowerCase().includes(f.toLowerCase())||W.agendas.some(Z=>Z.name.toLowerCase().includes(f.toLowerCase()))),M=(()=>{const W=z.filter(J=>L(J)==="Today"),X=z.filter(J=>L(J)==="Upcoming").sort((J,ne)=>new Date(J.startDate).getTime()-new Date(ne.startDate).getTime()),Z=z.filter(J=>L(J)==="Past").sort((J,ne)=>new Date(ne.endDate).getTime()-new Date(J.endDate).getTime()),G=[];return G.push(...W.slice(0,3)),G.length<3&&G.push(...X.slice(0,3-G.length)),G.length<3&&G.push(...Z.slice(0,3-G.length)),G.slice(0,3)})(),U=z.filter(W=>!M.some(X=>X.id===W.id)).sort((W,X)=>{const Z=L(W),G=L(X);return Z==="Upcoming"&&G==="Past"?-1:Z==="Past"&&G==="Upcoming"?1:Z==="Upcoming"&&G==="Upcoming"?new Date(W.startDate).getTime()-new Date(X.startDate).getTime():Z==="Past"&&G==="Past"?new Date(X.endDate).getTime()-new Date(W.endDate).getTime():0}),F=W=>{switch(W){case"Today":return"#10b981";case"Upcoming":return"#3b82f6";case"Past":return"#9ca3af"}},D=(W,X)=>{const Z=new Date(W),G=new Date(X);return`${Z.toLocaleDateString("id-ID",{day:"numeric",month:"short"})} - ${G.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}`};return s?o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center",children:o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b6b6b"},children:"Loading projects..."})}):o.jsxs("div",{className:"min-h-screen w-full px-6 py-12",style:{background:`
          radial-gradient(ellipse 80% 60% at 50% 20%, rgba(200, 180, 255, 0.15) 0%, transparent 50%),
          radial-gradient(ellipse 70% 50% at 80% 60%, rgba(255, 200, 180, 0.12) 0%, transparent 50%),
          radial-gradient(ellipse 60% 50% at 20% 70%, rgba(180, 220, 255, 0.1) 0%, transparent 50%),
          linear-gradient(to bottom, #ffffff 0%, #fafafa 100%)
        `},children:[o.jsx(ce.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7},className:"max-w-7xl mx-auto mb-12 flex justify-end items-center",children:o.jsxs("div",{className:"flex items-center gap-3",children:[(l==null?void 0:l.role)==="admin"&&o.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w(!0),className:"flex items-center gap-2 px-6 py-3 rounded-2xl transition-all duration-300",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:600,color:"#ffffff",border:"none"},children:[o.jsx(en,{className:"w-5 h-5"}),"Create Project"]}),o.jsx("button",{onClick:K,className:"p-3 rounded-2xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:W=>{W.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:W=>{W.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:o.jsx(Bj,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})}),M.length>0&&o.jsx(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"max-w-7xl mx-auto mb-16",children:o.jsx("div",{className:"flex items-end justify-center gap-6",children:[1,0,2].map(W=>{const X=M[W];if(!X)return null;const Z=W,G=L(X),J=n(X),ne=x===X.id,te=h===X.id,se=W===0;return o.jsxs(ce.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+Z*.15,ease:[.25,.1,.25,1]},onClick:()=>B(X),onMouseEnter:()=>v(X.id),onMouseLeave:()=>v(null),className:"relative rounded-3xl backdrop-blur-xl transition-all duration-700",style:{width:se?"380px":"320px",padding:se?"2.5rem":"2rem",background:J?G==="Today"?"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.05) 100%)":"rgba(255, 255, 255, 0.8)":"rgba(200, 200, 200, 0.3)",border:J?G==="Today"?"2px solid rgba(16, 185, 129, 0.3)":se?"2px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(255, 255, 255, 0.5)":"1px solid rgba(150, 150, 150, 0.2)",boxShadow:ne&&J?se?"0 30px 80px rgba(139, 92, 246, 0.3), 0 0 0 1px rgba(139, 92, 246, 0.2)":G==="Today"?"0 20px 60px rgba(16, 185, 129, 0.25), 0 0 0 1px rgba(16, 185, 129, 0.1)":"0 20px 60px rgba(0, 0, 0, 0.15)":se&&J?"0 20px 60px rgba(139, 92, 246, 0.2)":G==="Today"&&J?"0 12px 40px rgba(16, 185, 129, 0.15)":"0 12px 40px rgba(0, 0, 0, 0.08)",transform:ne&&J?se?"translateY(-16px) scale(1.03)":"translateY(-12px) scale(1.02)":"translateY(0) scale(1)",cursor:J?"pointer":"not-allowed",opacity:J?1:.5,filter:J?"none":"grayscale(1)",animation:te?"shake 0.5s ease-in-out":"none"},children:[J&&(se||G==="Today")&&o.jsx("div",{className:"absolute inset-0 rounded-3xl opacity-0 transition-opacity duration-700",style:{background:se?"radial-gradient(circle at 50% 0%, rgba(139, 92, 246, 0.2) 0%, transparent 70%)":"radial-gradient(circle at 50% 0%, rgba(16, 185, 129, 0.15) 0%, transparent 70%)",opacity:ne?1:0,pointerEvents:"none"}}),!J&&o.jsx("div",{className:"absolute top-6 right-6",children:o.jsx(xr,{className:"w-6 h-6",style:{color:"#9ca3af"}})}),X.isActive===!1&&o.jsxs("div",{className:"absolute top-6 left-6 px-3 py-1.5 rounded-lg flex items-center gap-2",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",backdropFilter:"blur(8px)"},children:[o.jsx(xr,{className:"w-3.5 h-3.5",style:{color:"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#ef4444",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Disabled"})]}),o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{background:`${F(G)}15`,border:`1.5px solid ${F(G)}40`,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:700,color:F(G),textTransform:"uppercase",letterSpacing:"0.08em"},children:[G==="Today"&&o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{background:F(G)}}),G]}),J&&o.jsx("button",{onClick:le=>{le.stopPropagation(),A(X),_(!0)},className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)"},onMouseEnter:le=>{le.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:le=>{le.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},title:"View Team",children:o.jsx(ln,{className:"w-5 h-5",style:{color:"#8b5cf6"}})})]}),o.jsx("h3",{className:"mb-4",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,letterSpacing:"-0.02em",color:J?"#1a1a1a":"#9ca3af",lineHeight:1.3},children:X.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Zo,{className:"w-4 h-4",style:{color:J?"#6b6b6b":"#9ca3af"}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:500,color:J?"#6b6b6b":"#9ca3af"},children:D(X.startDate,X.endDate)})]}),o.jsx("div",{className:"mb-4",style:{height:"1px",background:J?"rgba(0, 0, 0, 0.08)":"rgba(0, 0, 0, 0.04)"}}),o.jsxs("div",{children:[o.jsxs("p",{className:"mb-2",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:600,color:J?"#6b6b6b":"#9ca3af",textTransform:"uppercase",letterSpacing:"0.05em"},children:[X.agendas.length," Agenda",X.agendas.length>1?"s":""]}),o.jsxs("div",{className:"space-y-2",children:[X.agendas.slice(0,2).map(le=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:J?"#6b6b6b":"#9ca3af"}}),o.jsx("span",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",color:J?"#1a1a1a":"#9ca3af"},children:le.name})]},le.id)),X.agendas.length>2&&o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontStyle:"italic",color:J?"#6b6b6b":"#9ca3af",marginLeft:"12px"},children:["+",X.agendas.length-2," more"]})]})]}),(l==null?void 0:l.role)==="admin"&&J&&o.jsxs("div",{className:"mt-6 pt-4 flex gap-3",style:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[o.jsxs("button",{onClick:le=>V(le,X),className:"flex-1 px-4 py-2.5 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#3b82f6"},onMouseEnter:le=>{le.currentTarget.style.background="rgba(59, 130, 246, 0.15)"},onMouseLeave:le=>{le.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[o.jsx(Uf,{className:"w-4 h-4"}),"Edit"]}),o.jsxs("button",{onClick:le=>Y(le,X.id),disabled:P===X.id,className:"flex-1 px-4 py-2.5 rounded-xl transition-all duration-300 flex items-center justify-center gap-2",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#ef4444",opacity:P===X.id?.5:1,cursor:P===X.id?"not-allowed":"pointer"},onMouseEnter:le=>{P!==X.id&&(le.currentTarget.style.background="rgba(239, 68, 68, 0.15)")},onMouseLeave:le=>{P!==X.id&&(le.currentTarget.style.background="rgba(239, 68, 68, 0.1)")},children:[o.jsx(Ht,{className:"w-4 h-4"}),P===X.id?"Deleting...":"Delete"]})]}),!J&&ne&&o.jsx(ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 px-4 py-2 rounded-xl whitespace-nowrap",style:{background:"rgba(0, 0, 0, 0.9)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",fontWeight:500,color:"#ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:"You are not assigned to this project"})]},X.id)})})}),U.length>0&&o.jsxs(ce.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.5},className:"max-w-7xl mx-auto mb-12",children:[o.jsxs("h2",{className:"mb-6 flex items-center gap-3",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1a1a1a"},children:[o.jsx("div",{style:{width:"4px",height:"24px",background:"#8b5cf6",borderRadius:"2px"}}),"Other Projects"]}),o.jsx("div",{className:"space-y-3",children:U.map((W,X)=>{const Z=L(W),G=n(W);return o.jsx(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6+X*.05},onClick:()=>B(W),className:"flex items-center justify-between p-5 rounded-2xl backdrop-blur-xl transition-all duration-300",style:{background:G?"rgba(255, 255, 255, 0.7)":"rgba(200, 200, 200, 0.3)",border:`1px solid ${G?"rgba(0, 0, 0, 0.08)":"rgba(150, 150, 150, 0.15)"}`,cursor:G?"pointer":"not-allowed",opacity:G?1:.5},onMouseEnter:J=>{G&&(J.currentTarget.style.background="rgba(255, 255, 255, 0.95)",J.currentTarget.style.transform="translateX(4px)")},onMouseLeave:J=>{G&&(J.currentTarget.style.background="rgba(255, 255, 255, 0.7)",J.currentTarget.style.transform="translateX(0)")},children:o.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[!G&&o.jsx(xr,{className:"w-5 h-5",style:{color:"#9ca3af"}}),W.isActive===!1&&o.jsxs("div",{className:"px-2.5 py-1 rounded-lg flex items-center gap-1.5",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[o.jsx(xr,{className:"w-3 h-3",style:{color:"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:600,color:"#ef4444",textTransform:"uppercase"},children:"Disabled"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h4",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",fontWeight:600,color:G?"#1a1a1a":"#9ca3af"},children:W.name}),o.jsx("div",{className:"px-3 py-1 rounded-full",style:{background:`${F(Z)}15`,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.6875rem",fontWeight:600,color:F(Z),textTransform:"uppercase"},children:Z})]}),o.jsxs("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.8125rem",color:G?"#6b6b6b":"#9ca3af"},children:[D(W.startDate,W.endDate),"  ",W.agendas.length," agenda",W.agendas.length>1?"s":""]})]})]})},W.id)})})]}),o.jsx(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.7},className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"relative",children:[o.jsx(ys,{className:"absolute left-6 top-1/2 transform -translate-y-1/2 w-5 h-5",style:{color:"#9ca3af"}}),o.jsx("input",{type:"text",placeholder:"Search projects by name or agenda...",value:f,onChange:W=>m(W.target.value),className:"w-full pl-16 pr-6 py-5 rounded-2xl backdrop-blur-xl transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",outline:"none",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)"},onFocus:W=>{W.currentTarget.style.background="rgba(255, 255, 255, 0.95)",W.currentTarget.style.borderColor="rgba(139, 92, 246, 0.3)"},onBlur:W=>{W.currentTarget.style.background="rgba(255, 255, 255, 0.7)",W.currentTarget.style.borderColor="rgba(0, 0, 0, 0.08)"}})]})}),z.length===0&&o.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-7xl mx-auto text-center py-20",children:[o.jsx(Zo,{className:"w-20 h-20 mx-auto mb-6",style:{color:"#d1d5db"}}),o.jsx("h3",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.5rem",fontWeight:600,color:"#9ca3af",marginBottom:"0.5rem"},children:"No projects found"}),o.jsx("p",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#9ca3af"},children:f?"Try adjusting your search query":"Get started by creating your first project"})]}),b&&o.jsx(lY,{onClose:()=>w(!1)}),j&&k&&o.jsx(cY,{project:k,onClose:()=>{T(!1),E(null)}}),N&&o.jsx(dY,{onClose:()=>_(!1),project:R}),o.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
          20%, 40%, 60%, 80% { transform: translateX(3px); }
        }
      `})]})}function hY({onClose:e}){var W,X,Z;const{user:t,accessToken:n}=Gt(),{selectedProject:r,updateProject:s,updateAgenda:a}=qt(),[l,u]=S.useState(!1),[d,f]=S.useState(!0),[m,h]=S.useState(!1),[g,x]=S.useState([]),[v,b]=S.useState(!0),[w,j]=S.useState((W=r==null?void 0:r.team)==null?void 0:W.manager),[T,k]=S.useState(((X=r==null?void 0:r.team)==null?void 0:X.staff)||[]),[E,N]=S.useState((Z=r==null?void 0:r.team)==null?void 0:Z.client),[_,R]=S.useState((r==null?void 0:r.isActive)!==!1);if(S.useEffect(()=>{var G,J,ne;r&&(R(r.isActive!==!1),j((G=r.team)==null?void 0:G.manager),k(((J=r.team)==null?void 0:J.staff)||[]),N((ne=r.team)==null?void 0:ne.client))},[r]),S.useEffect(()=>{(async()=>{if(!t||!n||t.role!=="admin"){b(!1);return}try{b(!0);const J=await fetch(`https://${zn}.supabase.co/functions/v1/make-server-deeab278/users`,{method:"GET",headers:{Authorization:`Bearer ${De}`,"X-User-Token":n,"Content-Type":"application/json"}});if(J.ok){const ne=await J.json();x(ne.users||[]),console.log("Loaded users from backend:",ne.users);const te=(ne.users||[]).map(se=>se.id);k(se=>se.filter(le=>te.includes(le))),w&&!te.includes(w)&&j(void 0),E&&!te.includes(E)&&N(void 0)}}catch(J){console.error("Error fetching users:",J)}finally{b(!1)}})()},[t,n]),(t==null?void 0:t.role)!=="admin"||!r)return null;const A=r.features||{qr_scan:!0,analytics:!0},P=g.filter(G=>G.role==="admin"),$=g.filter(G=>G.role==="staff"),L=g.filter(G=>G.role==="user"),B=G=>{const J=g.find(ne=>ne.id===G);return J||console.warn("User not found for ID:",G,"Available users:",g.length),J},K=async()=>{console.log("=== SAVING TEAM CHANGES ==="),console.log("Project ID:",r.id),console.log("Manager:",w),console.log("Staff:",T),console.log("Client:",E);try{await s(r.id,{team:{manager:w,staff:T,client:E}}),console.log("Team changes saved successfully!"),h(!1),f(!0)}catch(G){console.error("Error saving team changes:",G),alert("Failed to save team changes: "+G.message)}},V=()=>{var G,J,ne;d?f(!1):w!==((G=r.team)==null?void 0:G.manager)||JSON.stringify(T)!==JSON.stringify(((J=r.team)==null?void 0:J.staff)||[])||E!==((ne=r.team)==null?void 0:ne.client)?h(!0):f(!0)},Y=async()=>{if(!d)if(_)u(!0);else try{await s(r.id,{isActive:!0}),R(!0),u(!1)}catch(G){console.error("Error enabling project:",G),alert("Failed to enable project: "+G.message)}},z=async()=>{try{await s(r.id,{isActive:!1}),R(!1),u(!1)}catch(G){console.error("Error disabling project:",G),alert("Failed to disable project: "+G.message)}},H=G=>{d||s(r.id,{features:{...A,[G]:!A[G]}})},M=(G,J)=>{if(d)return;const ne=J!==!1;a(r.id,G,{isActive:!ne})},U=G=>{T.includes(G)||k([...T,G])},F=G=>{k(T.filter(J=>J!==G))},D=({user:G,onRemove:J})=>{if(!G)return null;const ne=G.role==="admin"?"#8b5cf6":G.role==="staff"?"#3b82f6":"#10b981";return o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:`rgba(${G.role==="admin"?"139, 92, 246":G.role==="staff"?"59, 130, 246":"16, 185, 129"}, 0.05)`,border:`1px solid rgba(${G.role==="admin"?"139, 92, 246":G.role==="staff"?"59, 130, 246":"16, 185, 129"}, 0.1)`},children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${ne} 0%, ${ne}dd 100%)`},children:o.jsx(no,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:G.name}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:G.email})]}),J&&!d&&o.jsx("button",{onClick:J,className:"p-2 rounded-lg transition-all duration-300",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},onMouseEnter:te=>{te.currentTarget.style.background="rgba(239, 68, 68, 0.15)"},onMouseLeave:te=>{te.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:o.jsx(Ht,{className:"w-4 h-4",style:{color:"#ef4444"}})})]})};return o.jsx(io,{children:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{m||e()},className:"absolute inset-0",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)"}}),o.jsxs(ce.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.16,1,.3,1]},className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl",style:{background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.15)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[o.jsxs("div",{className:"sticky top-0 z-10 px-8 py-6 border-b border-gray-100",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)"},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ac,{className:"w-6 h-6",style:{color:"#8b5cf6"}}),o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1a1a1a"},children:"Project Settings"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:d?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",border:`1px solid ${d?"rgba(239, 68, 68, 0.2)":"rgba(34, 197, 94, 0.2)"}`},children:d?o.jsxs(o.Fragment,{children:[o.jsx(xr,{className:"w-4 h-4",style:{color:"#ef4444"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#ef4444"},children:"Locked"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Lj,{className:"w-4 h-4",style:{color:"#22c55e"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#22c55e"},children:"Unlocked"})]})}),o.jsx("button",{onClick:e,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},children:o.jsx(Nn,{className:"w-5 h-5",style:{color:"#6b6b6b"}})})]})]}),o.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginTop:"8px"},children:r.name}),d&&o.jsx("div",{className:"mt-3 p-3 rounded-xl",style:{background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.1)"},children:o.jsxs("p",{style:{fontSize:"0.8125rem",color:"#6b6b6b"},children:[o.jsx(xr,{className:"w-3.5 h-3.5 inline mr-1.5",style:{color:"#ef4444"}}),'Settings are locked. Click "Locked" to make changes.']})})]}),o.jsxs("div",{className:"px-8 py-6 space-y-8",style:{opacity:d?.6:1,pointerEvents:d?"none":"auto"},children:[v&&o.jsx("div",{className:"p-4 rounded-xl",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)"},children:o.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",textAlign:"center"},children:"Loading users..."})}),o.jsxs("div",{style:{opacity:v?.5:1},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(ln,{className:"w-5 h-5",style:{color:"#8b5cf6"}}),o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a"},children:"Team"})]}),o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Aj,{className:"w-4 h-4",style:{color:"#8b5cf6"}}),o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Event Manager"})]}),o.jsxs("select",{value:w||"",onChange:G=>j(G.target.value||void 0),disabled:d,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[o.jsx("option",{value:"",children:"Select Manager"}),P.map(G=>o.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),w&&B(w)&&o.jsx("div",{className:"mt-2",children:o.jsx(D,{user:B(w)})})]}),o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(ln,{className:"w-4 h-4",style:{color:"#3b82f6"}}),o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Staff"})]}),!d&&o.jsxs("select",{onChange:G=>{G.target.value&&(U(G.target.value),G.target.value="")},className:"w-full px-4 py-3 rounded-xl mb-3 transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(59, 130, 246, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[o.jsx("option",{value:"",children:"Add Staff Member"}),$.filter(G=>!T.includes(G.id)).map(G=>o.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),o.jsx("div",{className:"space-y-2",children:T.length>0?T.map(G=>{const J=B(G);return J?o.jsx(D,{user:J,onRemove:()=>F(G)},G):null}):o.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",fontStyle:"italic"},children:"No staff assigned"})})]}),o.jsxs("div",{className:"mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(no,{className:"w-4 h-4",style:{color:"#10b981"}}),o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"#6b6b6b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Client"})]}),o.jsxs("select",{value:E||"",onChange:G=>N(G.target.value||void 0),disabled:d,className:"w-full px-4 py-3 rounded-xl transition-all duration-300",style:{background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.1)",fontFamily:"'Inter', sans-serif",fontSize:"0.9375rem",color:"#1a1a1a"},children:[o.jsx("option",{value:"",children:"Select Client"}),L.map(G=>o.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))]}),E&&B(E)&&o.jsx("div",{className:"mt-2",children:o.jsx(D,{user:B(E)})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"16px"},children:"Project Settings"}),o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.1)"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Project Active"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:"Enable or disable this project for Staff and Users"})]}),o.jsx("button",{onClick:Y,className:"relative w-14 h-7 rounded-full transition-all duration-300",style:{background:_?"#8b5cf6":"#d1d5db"},children:o.jsx(ce.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:_?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]})]}),o.jsx(io,{children:l&&o.jsx(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 rounded-2xl",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(uf,{className:"w-5 h-5 mt-0.5",style:{color:"#ef4444"}}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Disable Project?"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:"This project will become inaccessible to Staff and Users. Are you sure?"}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx("button",{onClick:z,className:"px-4 py-2 rounded-xl",style:{background:"#ef4444",color:"white",fontSize:"0.875rem",fontWeight:600},children:"Yes, Disable"}),o.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-xl",style:{background:"rgba(0, 0, 0, 0.05)",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:600},children:"Cancel"})]})]})]})})}),r.agendas&&r.agendas.length>0&&o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"16px"},children:"Agenda Settings"}),o.jsx("div",{className:"space-y-3",children:r.agendas.map(G=>{const J=G.isActive!==!1;return o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:J?"rgba(59, 130, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${J?"rgba(59, 130, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`,opacity:J?1:.6},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:G.name}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"4px"},children:[new Date(G.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),G.time&&`  ${G.time}`]})]}),o.jsx("button",{onClick:()=>M(G.id,G.isActive),className:"relative w-14 h-7 rounded-full",style:{background:J?"#3b82f6":"#d1d5db"},children:o.jsx(ce.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:J?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]},G.id)})})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"#1a1a1a",marginBottom:"8px"},children:"Feature Settings"}),o.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"16px"},children:"Enable or disable features for this project"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:A.qr_scan?"rgba(59, 130, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${A.qr_scan?"rgba(59, 130, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ma,{className:"w-5 h-5",style:{color:A.qr_scan?"#3b82f6":"#9ca3af"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"QR Code Scan"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:"Enable QR-based guest check-in"})]})]}),o.jsx("button",{onClick:()=>H("qr_scan"),className:"relative w-14 h-7 rounded-full",style:{background:A.qr_scan?"#3b82f6":"#d1d5db"},children:o.jsx(ce.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:A.qr_scan?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl",style:{background:A.analytics?"rgba(139, 92, 246, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${A.analytics?"rgba(139, 92, 246, 0.1)":"rgba(0, 0, 0, 0.08)"}`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(hy,{className:"w-5 h-5",style:{color:A.analytics?"#8b5cf6":"#9ca3af"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#1a1a1a"},children:"Analytics Dashboard"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:"Enable guest analytics and monitoring"})]})]}),o.jsx("button",{onClick:()=>H("analytics"),className:"relative w-14 h-7 rounded-full",style:{background:A.analytics?"#8b5cf6":"#d1d5db"},children:o.jsx(ce.div,{className:"absolute top-0.5 w-6 h-6 bg-white rounded-full shadow-md",animate:{left:A.analytics?"30px":"2px"},transition:{type:"spring",stiffness:500,damping:30}})})]})]})]})]})]}),m&&o.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-60 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0",onClick:()=>h(!1),style:{background:"rgba(0, 0, 0, 0.6)"}}),o.jsx(ce.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"relative bg-white rounded-3xl p-6 max-w-md mx-4",style:{boxShadow:"0 24px 64px rgba(0, 0, 0, 0.2)",fontFamily:"'Inter', sans-serif"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(uf,{className:"w-6 h-6 mt-1",style:{color:"#f59e0b"}}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:700,color:"#1a1a1a",marginBottom:"8px"},children:"Save Changes?"}),o.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"20px"},children:"You have unsaved changes to the team configuration. Do you want to save these changes?"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 rounded-xl",style:{background:"#8b5cf6",color:"white",fontSize:"0.875rem",fontWeight:600},children:"Save Changes"}),o.jsx("button",{onClick:()=>{var G,J,ne;j((G=r.team)==null?void 0:G.manager),k(((J=r.team)==null?void 0:J.staff)||[]),N((ne=r.team)==null?void 0:ne.client),h(!1),f(!0)},className:"flex-1 px-4 py-2 rounded-xl",style:{background:"rgba(0, 0, 0, 0.05)",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:600},children:"Discard"})]})]})]})})]})]})})}function pY(){const{user:e,signOut:t}=Gt(),{selectedProject:n,selectedAgenda:r,setSelectedAgenda:s}=qt(),a=Rt(),l=qr(),[u,d]=S.useState(!1),[f,m]=S.useState(!1),h=e&&l.pathname!=="/"&&l.pathname!=="/login"&&l.pathname!=="/demo"&&l.pathname!=="/projects";if(!h)return null;const g=async()=>{await t(),a("/")},x=w=>{s(w),d(!1)},v=l.pathname.startsWith("/kabar-in"),b=n&&n.agendas&&n.agendas.length>1&&!v;return o.jsxs(o.Fragment,{children:[o.jsx(ce.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7},className:"fixed top-0 left-0 right-0 z-50",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"cursor-pointer",onClick:()=>a("/dashboard"),style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1.25rem",fontWeight:600,color:"#1a1a1a"},children:"Balemoo"}),n&&o.jsxs("button",{onClick:()=>a("/projects"),className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#8b5cf6"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(139, 92, 246, 0.15)",w.currentTarget.style.transform="translateX(-2px)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(139, 92, 246, 0.1)",w.currentTarget.style.transform="translateX(0)"},children:[o.jsx(ho,{className:"w-4 h-4"}),"Pilih Project Lain"]})]}),o.jsx("div",{className:"flex items-center gap-3",children:b&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",fontWeight:500,color:"#1a1a1a"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(59, 130, 246, 0.15)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[o.jsxs("span",{children:["Agenda: ",(r==null?void 0:r.name)||"Select"]}),o.jsx(Ic,{className:"w-4 h-4",style:{color:"#6b6b6b"}})]}),u&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),o.jsx(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-full right-0 mt-2 rounded-xl overflow-hidden z-50",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",minWidth:"200px"},children:n==null?void 0:n.agendas.map(w=>o.jsxs("button",{onClick:()=>x(w),className:"w-full px-4 py-3 text-left transition-all duration-200",style:{background:(r==null?void 0:r.id)===w.id?"rgba(59, 130, 246, 0.1)":"transparent",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.9375rem",color:"#1a1a1a",borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},onMouseEnter:j=>{(r==null?void 0:r.id)!==w.id&&(j.currentTarget.style.background="rgba(0, 0, 0, 0.03)")},onMouseLeave:j=>{(r==null?void 0:r.id)!==w.id&&(j.currentTarget.style.background="transparent")},children:[o.jsx("div",{style:{fontWeight:500},children:w.name}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:"#6b6b6b",marginTop:"2px"},children:[new Date(w.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),w.time&&`  ${w.time}`]})]},w.id))})]})]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[(e==null?void 0:e.role)==="admin"&&n&&o.jsx("button",{onClick:()=>m(!0),className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(139, 92, 246, 0.15)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(139, 92, 246, 0.1)"},title:"Project Settings",children:o.jsx(Ac,{className:"w-4 h-4",style:{color:"#8b5cf6"}})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.875rem",fontWeight:600,color:"#1a1a1a"},children:e==null?void 0:e.name}),o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"0.75rem",fontWeight:500,color:(e==null?void 0:e.role)==="admin"?"#8b5cf6":(e==null?void 0:e.role)==="staff"?"#3b82f6":"#10b981",textTransform:"uppercase"},children:e==null?void 0:e.role})]}),o.jsx("button",{onClick:g,className:"p-2 rounded-xl transition-all duration-300",style:{background:"rgba(0, 0, 0, 0.04)",border:"1px solid rgba(0, 0, 0, 0.08)"},onMouseEnter:w=>{w.currentTarget.style.background="rgba(0, 0, 0, 0.08)"},onMouseLeave:w=>{w.currentTarget.style.background="rgba(0, 0, 0, 0.04)"},children:o.jsx(Bj,{className:"w-4 h-4",style:{color:"#6b6b6b"}})})]})]})}),h&&o.jsx("div",{style:{height:"72px"}}),f&&o.jsx(hY,{onClose:()=>m(!1)})]})}class mY extends S.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n)}render(){var t;return this.state.hasError?o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-6",children:o.jsxs("div",{className:"max-w-md w-full p-8 rounded-3xl text-center",style:{background:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 24px 64px rgba(0, 0, 0, 0.1)",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1a1a1a",marginBottom:"12px"},children:"Something went wrong"}),o.jsx("p",{style:{fontSize:"0.875rem",color:"#6b6b6b",marginBottom:"24px"},children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred"}),o.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},className:"px-6 py-3 rounded-xl transition-all duration-300",style:{background:"#8b5cf6",color:"white",fontSize:"0.9375rem",fontWeight:600,border:"none",cursor:"pointer"},children:"Go to Home"})]})}):this.props.children}}var gY=(e,t,n,r,s,a,l,u)=>{let d=document.documentElement,f=["light","dark"];function m(x){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",w=b&&a?s.map(j=>a[j]||j):s;b?(d.classList.remove(...w),d.classList.add(a&&a[x]?a[x]:x)):d.setAttribute(v,x)}),h(x)}function h(x){u&&f.includes(x)&&(d.style.colorScheme=x)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let x=localStorage.getItem(t)||n,v=l&&x==="system"?g():x;m(v)}catch{}},yY=S.createContext(void 0),xY={setTheme:e=>{},themes:[]},vY=()=>{var e;return(e=S.useContext(yY))!=null?e:xY};S.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:l,themes:u,nonce:d,scriptProps:f})=>{let m=JSON.stringify([n,t,a,e,u,l,r,s]).slice(1,-1);return S.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${gY.toString()})(${m})`}})});const bY=({...e})=>{const{theme:t="system"}=vY();return o.jsx(jO,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function wY(){return o.jsxs(o.Fragment,{children:[o.jsx(EM,{}),o.jsx(_M,{}),o.jsx(s8,{}),o.jsx(o8,{})]})}function SY(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center",children:o.jsx("div",{style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"1rem",color:"#6b6b6b"},children:"Loading..."})})}function kY(){return o.jsx(mY,{children:o.jsx(gM,{children:o.jsx(zF,{children:o.jsx(LF,{children:o.jsx(HF,{children:o.jsx(GF,{children:o.jsx(FO,{children:o.jsx(UX,{children:o.jsx(PK,{children:o.jsxs(kX,{children:[o.jsx(S.Suspense,{fallback:o.jsx(SY,{}),children:o.jsxs("div",{className:"size-full",children:[o.jsx(pY,{}),o.jsxs(kj,{children:[o.jsx(ht,{path:"/",element:o.jsx(wY,{})}),o.jsx(ht,{path:"/login",element:o.jsx($F,{})}),o.jsx(ht,{path:"/demo",element:o.jsx(aY,{})}),o.jsx(ht,{path:"/projects",element:o.jsx(fY,{})}),o.jsx(ht,{path:"/dashboard",element:o.jsx(WF,{})}),o.jsx(ht,{path:"/kabar-in/*",element:o.jsx(rY,{})}),o.jsx(ht,{path:"/check-in",element:o.jsx(sY,{})}),o.jsx(ht,{path:"/monitor-in",element:o.jsx(oY,{})}),o.jsx(ht,{path:"*",element:o.jsx(Sj,{to:"/",replace:!0})})]})]})}),o.jsx(bY,{})]})})})})})})})})})})}dR.createRoot(document.getElementById("root")).render(o.jsx(ye.StrictMode,{children:o.jsx(kY,{})}));
